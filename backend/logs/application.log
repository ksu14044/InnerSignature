2026-01-30T10:38:53.612+09:00  INFO 268 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 268 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-30T10:38:53.627+09:00 DEBUG 268 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-30T10:38:53.633+09:00  INFO 268 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-30T10:38:57.005+09:00 DEBUG 268 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-30T10:38:57.008+09:00 DEBUG 268 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-30T10:38:57.778+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-30T10:38:57.786+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-30T10:38:57.787+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-30T10:38:57.789+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-30T10:38:57.791+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-30T10:38:57.793+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-30T10:38:57.795+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-30T10:38:57.836+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-30T10:38:57.864+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-30T10:38:57.911+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-30T10:38:57.946+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-30T10:38:57.971+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-30T10:38:57.988+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-30T10:38:58.020+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-30T10:38:58.038+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-30T10:38:58.053+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-30T10:38:58.059+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-30T10:38:58.069+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-30T10:38:58.086+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-30T10:38:58.099+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-30T10:38:58.106+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-30T10:38:58.109+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-30T10:38:58.112+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-30T10:38:58.118+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-30T10:38:58.122+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-30T10:38:58.125+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-30T10:38:58.135+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-30T10:38:58.139+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-30T10:38:58.141+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-30T10:38:58.146+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-30T10:38:58.148+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-30T10:38:58.153+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-30T10:38:58.155+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-30T10:38:58.158+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-30T10:38:58.161+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-30T10:38:58.169+09:00 DEBUG 268 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-30T10:39:00.014+09:00  INFO 268 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-30T10:39:00.066+09:00  INFO 268 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-30T10:39:00.082+09:00  INFO 268 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-30T10:39:00.277+09:00  INFO 268 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-30T10:39:00.300+09:00  INFO 268 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6486 ms
2026-01-30T10:39:00.437+09:00 DEBUG 268 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-30T10:39:00.450+09:00 DEBUG 268 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-30T10:39:01.163+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-30T10:39:01.181+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-30T10:39:01.223+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-30T10:39:01.282+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-30T10:39:01.315+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-30T10:39:01.355+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-30T10:39:01.374+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-30T10:39:01.436+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-30T10:39:01.624+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-30T10:39:01.713+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-30T10:39:01.732+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-30T10:39:01.754+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-30T10:39:01.779+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-30T10:39:01.801+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-30T10:39:01.837+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-30T10:39:01.867+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-30T10:39:01.930+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-30T10:39:01.951+09:00 DEBUG 268 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-30T10:39:07.171+09:00 DEBUG 268 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 164 mappings in 'requestMappingHandlerMapping'
2026-01-30T10:39:07.714+09:00 DEBUG 268 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-30T10:39:07.924+09:00  WARN 268 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d8c5a5dc-79e6-40ed-840f-44fedfd1d76e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-30T10:39:08.135+09:00  INFO 268 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-30T10:39:08.838+09:00 DEBUG 268 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-30T10:39:09.667+09:00 DEBUG 268 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-30T10:39:10.024+09:00 DEBUG 268 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-30T10:39:10.141+09:00 DEBUG 268 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-30T10:39:11.742+09:00  INFO 268 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-30T10:39:11.771+09:00  INFO 268 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 19.757 seconds (process running for 20.595)
2026-01-30T11:22:16.421+09:00  INFO 268 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-30T11:22:16.422+09:00  INFO 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-30T11:22:16.423+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-30T11:22:16.424+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-30T11:22:16.424+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-30T11:22:16.427+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@3c71cf3e
2026-01-30T11:22:16.429+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@fee881
2026-01-30T11:22:16.429+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-30T11:22:16.431+09:00  INFO 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms
2026-01-30T11:22:16.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-30T11:22:16.511+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-30T11:22:16.521+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T11:22:16.526+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-30T11:22:16.529+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-30T11:22:16.530+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-30T11:22:16.619+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user, password=1234)]
2026-01-30T11:22:16.627+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user
2026-01-30T11:22:16.638+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:16.647+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dbabfd] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:16.661+09:00  INFO 268 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-30T11:22:16.948+09:00  INFO 268 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6f1b1104
2026-01-30T11:22:16.951+09:00  INFO 268 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-30T11:22:16.957+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67523413 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:16.964+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-30T11:22:16.997+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user(String)
2026-01-30T11:22:17.047+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-30T11:22:17.055+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14dbabfd]
2026-01-30T11:22:17.178+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:17.179+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbebf4b] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:17.180+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@787754854 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:17.181+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:22:17.188+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:22:17.240+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:22:17.243+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbebf4b]
2026-01-30T11:22:17.453+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 6, role: USER, companyId: 3
2026-01-30T11:22:17.463+09:00  INFO 268 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=6 username=test_user role=USER
2026-01-30T11:22:17.492+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:17.511+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=6, username=test_user, password= (truncated)...]
2026-01-30T11:22:17.557+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:18.456+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-30T11:22:18.473+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-30T11:22:18.572+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-01-30T11:22:18.574+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-30T11:22:18.576+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-30T11:22:18.579+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-30T11:22:18.592+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:18.607+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473f059b] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@672166527 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:18.664+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-30T11:22:18.679+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-01-30T11:22:18.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-30T11:22:18.712+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@473f059b]
2026-01-30T11:22:18.728+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:18.746+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-01-30T11:22:18.760+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:19.450+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-30T11:22:19.453+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-30T11:22:19.456+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:19.456+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-30T11:22:19.457+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:19.457+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:19.470+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:19.503+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:22:19.503+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:19.547+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:22:19.559+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:22:19.562+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-01-30T11:22:19.572+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:22:19.573+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:19.574+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:22:19.575+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user", parameters={masked}
2026-01-30T11:22:19.586+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:22:19.585+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:19.593+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e508dc5] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:19.601+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:19.727+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488171205 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:19.755+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331615aa] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:19.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:22:19.775+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-01-30T11:22:19.803+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149238047 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:19.808+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:19.813+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:19.871+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:19.876+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331615aa]
2026-01-30T11:22:19.878+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:19.879+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-30T11:22:19.892+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e999a65] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:19.893+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e508dc5]
2026-01-30T11:22:19.893+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719941759 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:19.894+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:19.906+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:19.906+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-30T11:22:19.907+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:19.908+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:19.944+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:22:19.947+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:19.957+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e999a65]
2026-01-30T11:22:19.960+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:22:19.962+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:19.964+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9883eb] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:19.964+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:22:19.974+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:22:19.999+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247738829 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.027+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:22:20.042+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:20.043+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.054+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c16b0b8] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.046+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:20.058+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145980304 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:20.124+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:22:20.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-01-30T11:22:20.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-30T11:22:20.298+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c16b0b8]
2026-01-30T11:22:20.299+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:20.306+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-30T11:22:20.308+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:20.311+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:20.323+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a9883eb]
2026-01-30T11:22:20.330+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.346+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dab8118] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.348+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561113794 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.353+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:20.357+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:20.335+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:22:20.363+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:22:20.373+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:22:20.386+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:22:20.387+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:22:20.389+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.390+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:20.393+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1072e] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.393+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dab8118]
2026-01-30T11:22:20.394+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255256928 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:20.395+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.396+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:22:20.397+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4e2fa3] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.408+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-01-30T11:22:20.410+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515093499 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.418+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:20.424+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:20.427+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-30T11:22:20.431+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f1072e]
2026-01-30T11:22:20.435+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:20.445+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:20.445+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-30T11:22:20.446+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4e2fa3]
2026-01-30T11:22:20.462+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:20.464+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.472+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e21a01e] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.490+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930400148 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.511+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:20.528+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:20.581+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:20.590+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e21a01e]
2026-01-30T11:22:20.596+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.608+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514dfe13] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.613+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@305108340 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.614+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:20.624+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:20.641+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:20.645+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@514dfe13]
2026-01-30T11:22:20.646+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.676+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5b730b] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.689+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113106421 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.708+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:20.710+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:20.770+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:20.809+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5b730b]
2026-01-30T11:22:20.822+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:20.827+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bd854e] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:20.837+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876881744 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:22:20.838+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:20.841+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:20.849+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:20.856+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8bd854e]
2026-01-30T11:22:20.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:20.889+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:22:20.914+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:20.925+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:20.938+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-01-30T11:22:20.994+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.007+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user", parameters={masked}
2026-01-30T11:22:21.008+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:22:21.012+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.018+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346a26fc] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.029+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1049775500 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.032+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.037+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.045+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.048+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@346a26fc]
2026-01-30T11:22:21.061+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.064+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3880e1de] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.078+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1195815166 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.078+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.080+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.090+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.091+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3880e1de]
2026-01-30T11:22:21.092+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.093+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3116492f] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.095+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245874882 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.096+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.100+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.112+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.113+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3116492f]
2026-01-30T11:22:21.115+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.115+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67fc9caa] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.128+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959681005 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.148+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.160+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.181+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.190+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67fc9caa]
2026-01-30T11:22:21.191+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.192+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@592b564f] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.193+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1521584140 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.194+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:21.196+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:21.208+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:21.209+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@592b564f]
2026-01-30T11:22:21.210+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.211+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383cb0ec] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.212+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1000734858 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.212+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.226+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.227+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383cb0ec]
2026-01-30T11:22:21.229+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.229+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54222f52] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.230+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155475690 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.231+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.232+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.240+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.241+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54222f52]
2026-01-30T11:22:21.242+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.242+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67799291] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.244+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585398675 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.245+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:21.258+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:21.263+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:21.272+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67799291]
2026-01-30T11:22:21.274+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.275+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7902e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.276+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602631884 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.277+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.278+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.294+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.334+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c7902e0]
2026-01-30T11:22:21.342+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:21.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:22:21.355+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:21.362+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.378+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-01-30T11:22:21.390+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.391+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user", parameters={masked}
2026-01-30T11:22:21.392+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:22:21.397+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.406+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e95bfc] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.409+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@909030033 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.415+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.417+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.426+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e95bfc]
2026-01-30T11:22:21.428+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.429+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7713b8aa] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97991439 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.439+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.444+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7713b8aa]
2026-01-30T11:22:21.445+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.446+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d007607] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.448+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389826533 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.448+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.460+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.474+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.478+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d007607]
2026-01-30T11:22:21.479+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.491+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ca216a] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.493+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711594554 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.498+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.528+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.539+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18ca216a]
2026-01-30T11:22:21.540+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.543+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40641239] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.550+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166509102 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.554+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:21.556+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:21.561+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:21.564+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40641239]
2026-01-30T11:22:21.565+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.565+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5ef640] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.568+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1078003833 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.568+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.572+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.580+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.581+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5ef640]
2026-01-30T11:22:21.583+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.583+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92d5c1d] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.584+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@465002343 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.585+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.585+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.588+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.591+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92d5c1d]
2026-01-30T11:22:21.591+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.591+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eef532] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.592+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623231718 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.593+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:21.594+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:21.598+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:21.606+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eef532]
2026-01-30T11:22:21.606+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.608+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9ae5ad] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.608+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1110734414 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.609+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.610+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.617+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.620+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9ae5ad]
2026-01-30T11:22:21.621+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:21.624+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:22:21.626+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:21.628+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.637+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-01-30T11:22:21.638+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.640+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user", parameters={masked}
2026-01-30T11:22:21.641+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:22:21.643+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.644+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2926b5b5] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.645+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814314741 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.645+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.645+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.648+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.648+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2926b5b5]
2026-01-30T11:22:21.651+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.652+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d0211e3] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.653+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1100324075 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.654+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.657+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.659+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.659+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d0211e3]
2026-01-30T11:22:21.659+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.660+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ace1e84] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.660+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932091191 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.661+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.663+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.675+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ace1e84]
2026-01-30T11:22:21.680+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.681+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8453910] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.682+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@41237666 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.685+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.686+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.692+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.693+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8453910]
2026-01-30T11:22:21.695+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.695+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fc6d50] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.696+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@860900262 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:21.698+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:21.708+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:21.708+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fc6d50]
2026-01-30T11:22:21.710+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.711+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5005423f] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.712+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@568472450 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.714+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.718+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.736+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.737+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5005423f]
2026-01-30T11:22:21.739+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.740+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1068c28d] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.741+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1193608611 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.741+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.743+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.746+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.754+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1068c28d]
2026-01-30T11:22:21.755+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.758+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c6b1a] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.762+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1347862002 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.764+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:21.766+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:21.776+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:21.792+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c6b1a]
2026-01-30T11:22:21.795+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.795+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6335369e] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.798+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116700505 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.804+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.805+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.810+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.824+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6335369e]
2026-01-30T11:22:21.825+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:21.826+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:22:21.841+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:21.862+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.877+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-01-30T11:22:21.886+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:21.889+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user", parameters={masked}
2026-01-30T11:22:21.891+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:22:21.893+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.894+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383f712c] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.897+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006691059 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.905+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.905+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.921+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.924+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@383f712c]
2026-01-30T11:22:21.924+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.925+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b444125] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.926+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219618672 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.928+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:21.929+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:21.960+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:21.968+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b444125]
2026-01-30T11:22:21.973+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.974+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192d8458] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.976+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@810132273 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:21.977+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:21.980+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:21.990+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:21.992+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192d8458]
2026-01-30T11:22:21.993+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:21.995+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6819afdb] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:21.998+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493091268 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.004+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.007+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.011+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.013+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6819afdb]
2026-01-30T11:22:22.013+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.014+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35def864] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.016+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278720115 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.024+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:22.026+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:22.039+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:22.045+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35def864]
2026-01-30T11:22:22.046+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.048+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e24e58] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.056+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144884024 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.059+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:22.062+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:22.075+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:22.076+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e24e58]
2026-01-30T11:22:22.076+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.076+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5b0cd3] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.077+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702485934 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.079+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.080+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.083+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.087+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d5b0cd3]
2026-01-30T11:22:22.090+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.092+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af895b4] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.095+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2132819884 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.097+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:22.104+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:22.116+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:22.120+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af895b4]
2026-01-30T11:22:22.120+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.121+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367751ba] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.121+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761355765 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.122+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.122+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.125+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.125+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367751ba]
2026-01-30T11:22:22.127+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:22.128+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:22:22.133+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:22:22.175+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:22.235+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-01-30T11:22:22.236+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user
2026-01-30T11:22:22.236+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31&drafterName=test_user", parameters={masked}
2026-01-30T11:22:22.290+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:22:22.293+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.294+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b8d6e7] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.295+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1786721280 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.295+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.296+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.299+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.301+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64b8d6e7]
2026-01-30T11:22:22.302+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.306+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b423e3b] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.307+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158325338 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.308+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.309+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.312+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.313+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b423e3b]
2026-01-30T11:22:22.315+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.323+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e48a95] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.324+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1265484148 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.325+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:22.332+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:22.356+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:22.369+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e48a95]
2026-01-30T11:22:22.370+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.371+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f85f1b6] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.372+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793090801 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.374+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.375+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.378+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.387+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f85f1b6]
2026-01-30T11:22:22.389+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.390+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48798d32] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.392+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1482808778 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.393+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:22.395+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:22.399+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:22.400+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48798d32]
2026-01-30T11:22:22.402+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.403+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cd83f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.404+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641644642 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.405+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:22:22.410+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:22:22.420+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 18
2026-01-30T11:22:22.424+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65cd83f4]
2026-01-30T11:22:22.425+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.427+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ef8e00] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.429+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1882480874 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.438+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.439+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.463+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.467+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ef8e00]
2026-01-30T11:22:22.467+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.471+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e00b1d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.474+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796914586 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.475+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:22:22.478+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 38(Long)
2026-01-30T11:22:22.487+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 19
2026-01-30T11:22:22.488+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e00b1d4]
2026-01-30T11:22:22.490+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:22:22.491+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cdd11f6] was not registered for synchronization because synchronization is not active
2026-01-30T11:22:22.491+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397971880 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:22:22.492+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:22:22.492+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:22:22.494+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:22:22.496+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cdd11f6]
2026-01-30T11:22:22.497+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:22:22.498+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:22:22.500+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:33:35.820+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-30T11:33:35.820+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-30T11:33:35.820+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-30T11:33:35.821+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-30T11:33:35.862+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:33:35.886+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:33:35.887+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:33:35.888+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:33:35.940+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:33:35.941+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/companies
2026-01-30T11:33:35.947+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:33:35.948+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me
2026-01-30T11:33:35.948+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:33:35.949+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:33:35.949+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:33:35.963+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:33:35.963+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:33:35.964+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:33:35.964+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:33:35.965+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:33:35.968+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:33:35.968+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:33:35.973+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:33:35.974+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:33:35.974+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:35.975+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:35.976+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:35.989+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0be35b] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:35.989+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 6, companyId: 3
2026-01-30T11:33:35.989+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b610998] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:35.989+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b69b7ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:35.990+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:35.994+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93eb7fd] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:36.004+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131741107 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:33:36.004+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1640462080 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:33:36.004+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154616889 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:33:36.005+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773397214 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:33:36.008+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:33:36.011+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:33:36.015+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:33:36.015+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:33:36.017+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-01-30T11:33:36.017+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:33:36.021+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 6(Long), PENDING(String)
2026-01-30T11:33:36.022+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:33:36.033+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-30T11:33:36.033+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:33:36.034+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:33:36.034+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:33:36.037+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e0be35b]
2026-01-30T11:33:36.037+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b69b7ff]
2026-01-30T11:33:36.037+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93eb7fd]
2026-01-30T11:33:36.037+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b610998]
2026-01-30T11:33:36.038+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:33:36.038+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:33:36.038+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:36.038+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:33:36.039+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-30T11:33:36.039+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:33:36.041+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:33:36.039+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b7b746] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:36.042+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:33:36.048+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=4, userId=6, companyId=3 (truncated)...]
2026-01-30T11:33:36.050+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805005576 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:33:36.054+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:33:36.054+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:33:36.057+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:33:36.115+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:33:36.124+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53b7b746]
2026-01-30T11:33:36.133+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 6, companyId: 3, role: USER
2026-01-30T11:33:36.134+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:33:36.135+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=6, username=test_user, passwo (truncated)...]
2026-01-30T11:33:36.142+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:33:36.166+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:33:36.181+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me
2026-01-30T11:33:36.191+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:33:36.206+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:33:36.223+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:33:36.232+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 6, companyId: 3
2026-01-30T11:33:36.234+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:36.235+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe149be] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:36.237+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1223959199 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:33:36.241+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:33:36.241+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:33:36.274+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:33:36.279+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe149be]
2026-01-30T11:33:36.280+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:33:36.281+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dbe842] was not registered for synchronization because synchronization is not active
2026-01-30T11:33:36.284+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2107828318 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:33:36.301+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:33:36.316+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:33:36.337+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:33:36.339+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dbe842]
2026-01-30T11:33:36.339+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 6, companyId: 3, role: USER
2026-01-30T11:33:36.340+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:33:36.341+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=6, username=test_user, passwo (truncated)...]
2026-01-30T11:33:36.344+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:34:43.424+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:34:43.429+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:34:43.432+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:34:43.438+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me
2026-01-30T11:34:43.438+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/companies
2026-01-30T11:34:43.447+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:34:43.447+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:34:43.448+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:34:43.448+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:34:43.448+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:34:43.453+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:34:43.449+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:34:43.449+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:34:43.454+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:43.454+09:00  INFO 268 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 6, companyId: 3
2026-01-30T11:34:43.455+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:34:43.478+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63cc215a] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:43.479+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:43.479+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:34:43.480+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e241c14] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:43.481+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:43.487+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576be722] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:43.489+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1498395286 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:34:43.489+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982918358 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:34:43.495+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:34:43.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:34:43.501+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:34:43.503+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:34:43.503+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2043286028 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:34:43.505+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:34:43.506+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:34:43.507+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:34:43.507+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 6(Long), PENDING(String)
2026-01-30T11:34:43.507+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e241c14]
2026-01-30T11:34:43.508+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63cc215a]
2026-01-30T11:34:43.513+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:43.514+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:34:43.514+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6ac699] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:43.514+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=4, userId=6, companyId=3 (truncated)...]
2026-01-30T11:34:43.515+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942621786 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:34:43.515+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:34:43.515+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:34:43.516+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@576be722]
2026-01-30T11:34:43.516+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:34:43.517+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:34:43.520+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:34:43.520+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:34:43.523+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:34:43.537+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:34:43.541+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6ac699]
2026-01-30T11:34:43.544+09:00  INFO 268 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 6, companyId: 3, role: USER
2026-01-30T11:34:43.546+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:34:43.547+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=6, username=test_user, passwo (truncated)...]
2026-01-30T11:34:43.549+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:34:58.171+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:34:58.173+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:34:58.174+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:34:58.183+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me
2026-01-30T11:34:58.185+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:34:58.186+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/companies
2026-01-30T11:34:58.187+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:34:58.188+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:34:58.195+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:34:58.197+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:34:58.197+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:34:58.205+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:34:58.206+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:34:58.209+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:34:58.210+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:34:58.211+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 6, companyId: 3
2026-01-30T11:34:58.212+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:58.212+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:58.214+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:58.214+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6b5b47] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:58.214+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17452c52] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:58.215+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532c0d07] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:58.219+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091697212 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:34:58.219+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1130669290 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:34:58.219+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@196237212 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:34:58.220+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:34:58.220+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:34:58.221+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:34:58.222+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-01-30T11:34:58.225+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 6(Long), PENDING(String)
2026-01-30T11:34:58.227+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:34:58.233+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:34:58.233+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:34:58.234+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17452c52]
2026-01-30T11:34:58.235+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@532c0d07]
2026-01-30T11:34:58.235+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:34:58.237+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:34:58.238+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:34:58.239+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6b5b47]
2026-01-30T11:34:58.241+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=4, userId=6, companyId=3 (truncated)...]
2026-01-30T11:34:58.250+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed60938] was not registered for synchronization because synchronization is not active
2026-01-30T11:34:58.251+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:34:58.252+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1974246452 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:34:58.252+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:34:58.252+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:34:58.253+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:34:58.262+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:34:58.269+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-01-30T11:34:58.288+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-30T11:34:58.293+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ed60938]
2026-01-30T11:34:58.293+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 6, companyId: 3, role: USER
2026-01-30T11:34:58.295+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:34:58.301+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=6, username=test_user, passwo (truncated)...]
2026-01-30T11:34:58.307+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:24.934+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-30T11:35:25.036+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-30T11:35:25.052+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/logout
2026-01-30T11:35:25.101+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-30T11:35:25.120+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-30T11:35:25.129+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-30T11:35:25.146+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI2IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-30T11:35:25.167+09:00  INFO 268 --- [http-nio-8080-exec-10] SECURITY                                 : LOGOUT userId=6
2026-01-30T11:35:25.179+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:25.182+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-30T11:35:25.184+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:27.439+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-30T11:35:27.440+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T11:35:27.440+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-30T11:35:27.441+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-30T11:35:27.441+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-30T11:35:27.442+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-30T11:35:27.442+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-30T11:35:27.443+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:27.443+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d7aa6e] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:27.445+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@611032241 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:27.447+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-30T11:35:27.449+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-30T11:35:27.451+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-30T11:35:27.452+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21d7aa6e]
2026-01-30T11:35:27.535+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:27.535+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53073002] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:27.536+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890487728 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:27.536+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:27.537+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:27.540+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:27.543+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53073002]
2026-01-30T11:35:27.545+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 성공 - userId: 5, role: CEO, companyId: 3
2026-01-30T11:35:27.545+09:00  INFO 268 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_SUCCESS userId=5 username=test_ceo role=CEO
2026-01-30T11:35:27.545+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:27.546+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=5, username=test_ceo, password=n (truncated)...]
2026-01-30T11:35:27.547+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:27.914+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-30T11:35:27.918+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/companies
2026-01-30T11:35:27.919+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-30T11:35:27.920+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-30T11:35:27.922+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-30T11:35:27.923+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:27.932+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19842abc] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:27.936+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1172643998 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:27.937+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-30T11:35:27.939+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-30T11:35:27.947+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 3
2026-01-30T11:35:27.948+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19842abc]
2026-01-30T11:35:27.949+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:27.950+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-01-30T11:35:27.951+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:27.978+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-30T11:35:27.981+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-30T11:35:27.989+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-30T11:35:28.047+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-30T11:35:27.995+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:27.997+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.056+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-30T11:35:28.001+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.040+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.050+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-30T11:35:28.055+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-30T11:35:28.060+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:28.067+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.070+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.070+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.076+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-30T11:35:28.104+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-30T11:35:28.078+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-30T11:35:28.082+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-30T11:35:28.088+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.099+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-30T11:35:28.106+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:35:28.107+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:35:28.131+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:28.169+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:35:28.137+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:35:28.140+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:28.154+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.165+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:35:28.170+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:28.170+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:35:28.200+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/subscriptions/current
2026-01-30T11:35:28.203+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:35:28.204+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:35:28.205+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:35:28.208+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:28.214+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:35:28.216+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-30T11:35:28.217+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.221+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:28.222+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:35:28.222+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:28.223+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:35:28.223+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-30T11:35:28.230+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-30T11:35:28.225+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:28.233+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:35:28.228+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:35:28.228+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:35:28.229+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:28.229+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.234+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:35:28.235+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.235+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:35:28.235+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.236+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.236+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545caea6] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.250+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.276+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.276+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:35:28.285+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.280+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0a7744] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.283+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a381100] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.285+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.286+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1abb9596] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.286+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.286+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722745796 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:28.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544539825 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.299+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.300+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15488af4] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.300+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:35:28.301+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:28.308+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:28.301+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7853528b] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.302+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438505920 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:28.305+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492080048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:28.306+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:35:28.313+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:28.313+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097002924 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:28.313+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:35:28.315+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:28.318+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-30T11:35:28.318+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:35:28.319+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-01-30T11:35:28.321+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:28.334+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@545caea6]
2026-01-30T11:35:28.334+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:28.337+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.343+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a381100]
2026-01-30T11:35:28.345+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:35:28.351+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.351+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1952095930 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.352+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.353+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ef321a] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.363+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750229756 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:28.366+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:28.360+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:35:28.368+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:28.379+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.381+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:35:28.382+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:35:28.383+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:35:28.388+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:35:28.389+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e0a7744]
2026-01-30T11:35:28.390+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1abb9596]
2026-01-30T11:35:28.390+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:28.394+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ef321a]
2026-01-30T11:35:28.398+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.393+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.393+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.399+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.399+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:35:28.400+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:28.400+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6044fc] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.400+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-01-30T11:35:28.401+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:28.401+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:35:28.403+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:35:28.405+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101558403 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:28.406+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15488af4]
2026-01-30T11:35:28.406+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.410+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.410+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7853528b]
2026-01-30T11:35:28.412+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:28.412+09:00 DEBUG 268 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.413+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.419+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.420+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:28.421+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-01-30T11:35:28.421+09:00 DEBUG 268 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.422+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:35:28.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:35:28.471+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:35:28.451+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.455+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.457+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.461+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:28.486+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6044fc]
2026-01-30T11:35:28.473+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.478+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/credits/total
2026-01-30T11:35:28.480+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.484+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab67bd] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.487+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:28.489+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.498+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:28.500+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-30T11:35:28.507+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783954739 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.511+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:35:28.517+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:35:28.517+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:35:28.518+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-30T11:35:28.518+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:35:28.519+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.519+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:28.520+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.523+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-30T11:35:28.523+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.525+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:35:28.527+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:28.529+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:28.532+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:35:28.536+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:35:28.551+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:35:28.538+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69dac566] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.538+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:35:28.539+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:28.557+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:28.550+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/subscriptions/current
2026-01-30T11:35:28.553+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51398cf9] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.554+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1842828001 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:28.556+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.560+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-30T11:35:28.562+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468894086 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:28.564+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:28.564+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.565+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d180f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.565+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-30T11:35:28.566+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-30T11:35:28.583+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-30T11:35:28.566+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:28.567+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.583+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992930904 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:28.593+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:28.584+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-01-30(LocalDate)
2026-01-30T11:35:28.584+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:35:28.599+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ab67bd]
2026-01-30T11:35:28.584+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:35:28.585+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbf9e9a] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.598+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:28.601+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.603+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:35:28.604+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@981034178 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:28.604+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:28.607+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:35:28.617+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.618+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:28.627+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17d180f4]
2026-01-30T11:35:28.618+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:35:28.620+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69dac566]
2026-01-30T11:35:28.621+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.626+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfe9d32] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.629+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.631+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:35:28.633+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.636+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:28.636+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93819387 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.636+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4266d862] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.638+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65db800a] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.639+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-30T11:35:28.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:35:28.649+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1504388858 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:28.651+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-30T11:35:28.652+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1519753250 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:28.656+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:28.652+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-01-30T11:35:28.654+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:28.655+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:28.655+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51398cf9]
2026-01-30T11:35:28.656+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:35:28.656+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:28.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:35:28.663+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:28.665+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.665+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbf9e9a]
2026-01-30T11:35:28.666+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:35:28.669+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-30T11:35:28.669+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-01-30T11:35:28.670+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:28.683+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4266d862]
2026-01-30T11:35:28.670+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.670+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:28.672+09:00 DEBUG 268 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.673+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.673+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfe9d32]
2026-01-30T11:35:28.684+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.685+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:35:28.686+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65db800a]
2026-01-30T11:35:28.686+09:00 DEBUG 268 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.688+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:35:28.689+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.689+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:28.690+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.690+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.695+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.697+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-01-30T11:35:28.700+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.700+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:35:28.702+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fac558] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.703+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d00a7ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.704+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.705+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.716+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:35:28.738+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:35:28.721+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:35:28.722+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1041817213 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:28.730+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162974437 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.736+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:28.740+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/credits/total
2026-01-30T11:35:28.740+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:28.743+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:35:28.744+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:35:28.744+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:35:28.745+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-30T11:35:28.746+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:28.748+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:28.749+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:35:28.753+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:35:28.755+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:35:28.756+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-30T11:35:28.757+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:35:28.759+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:28.767+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:28.770+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:28.770+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.771+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aea307c] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.764+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.765+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-30T11:35:28.766+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.781+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168325139 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:28.781+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41172423] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.782+09:00 DEBUG 268 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:35:28.783+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:28.784+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:28.784+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:35:28.784+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963806088 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:28.785+09:00 DEBUG 268 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:35:28.786+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.788+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d00a7ff]
2026-01-30T11:35:28.804+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.805+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:35:28.807+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.789+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:28.789+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:35:28.790+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d37e982] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.815+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:35:28.821+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:35:28.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:35:28.832+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca8caac] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.834+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223867552 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.835+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:28.838+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fac558]
2026-01-30T11:35:28.839+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/subscriptions/current
2026-01-30T11:35:28.839+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364261473 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:28.846+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:35:28.848+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aea307c]
2026-01-30T11:35:28.848+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.852+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516f8119] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.848+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-30T11:35:28.849+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-30T11:35:28.851+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:35:28.851+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.852+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:35:28.854+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@15617641 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:28.862+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:28.854+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-30T11:35:28.855+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-01-30(LocalDate)
2026-01-30T11:35:28.857+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f78948] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.858+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41172423]
2026-01-30T11:35:28.863+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:28.865+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-30T11:35:28.868+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710225114 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:28.868+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.869+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:35:28.869+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:28.871+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfb6760] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.872+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:35:28.872+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:35:28.873+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:28.875+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:28.875+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1152744160 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:28.882+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:28.877+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d37e982]
2026-01-30T11:35:28.879+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.881+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516f8119]
2026-01-30T11:35:28.884+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:28.886+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.887+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f20666a] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.888+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:28.888+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:28.888+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-30T11:35:28.889+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:35:28.890+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f78948]
2026-01-30T11:35:28.890+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1070452288 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:28.894+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f73b91] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:28.895+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:28.898+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca8caac]
2026-01-30T11:35:28.899+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.902+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.903+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-30T11:35:28.904+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1295849951 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:28.905+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfb6760]
2026-01-30T11:35:28.906+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.911+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:28.917+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:35:28.917+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-01-30T11:35:28.918+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.918+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-30T11:35:28.920+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.920+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:35:28.922+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:35:28.930+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.937+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:28.943+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:35:28.971+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/credits/total
2026-01-30T11:35:28.946+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:28.953+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-01-30T11:35:28.979+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f20666a]
2026-01-30T11:35:28.982+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:28.964+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:35:28.971+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:28.987+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:28.990+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:28.978+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-30T11:35:28.985+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-01-30T11:35:28.989+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:35:28.997+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:28.999+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-30T11:35:29.000+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.014+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:35:29.021+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:35:29.015+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.015+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-30T11:35:29.023+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:35:29.023+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a455885] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.034+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:35:29.035+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:35:29.035+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.036+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708726297 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.050+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f73b91]
2026-01-30T11:35:29.054+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:35:29.057+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63fde08] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.102+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:29.150+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.156+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.157+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331807472 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.160+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5706129b] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.160+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:29.161+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082971983 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:29.160+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682d038] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.161+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:35:29.162+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:35:29.195+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:29.196+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:35:29.196+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a455885]
2026-01-30T11:35:29.196+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.197+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:35:29.197+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1918090562 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:29.197+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0be28] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.197+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-30T11:35:29.197+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@79780163 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.198+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:29.198+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-01-30(LocalDate)
2026-01-30T11:35:29.198+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:29.202+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-30T11:35:29.202+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682d038]
2026-01-30T11:35:29.203+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:35:29.204+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63fde08]
2026-01-30T11:35:29.204+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.205+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.205+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-30T11:35:29.205+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a6680e9] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.206+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844220467 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.206+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.206+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.208+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.211+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:29.212+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f0be28]
2026-01-30T11:35:29.213+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:35:29.214+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.214+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5706129b]
2026-01-30T11:35:29.214+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:29.215+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.216+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.216+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba99380] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.217+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657154395 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:29.220+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.221+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.249+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:29.251+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:29.252+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:29.252+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:29.253+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:29.253+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.254+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4157223e] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.255+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957373108 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.256+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:29.256+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:29.266+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.266+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.267+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba99380]
2026-01-30T11:35:29.267+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a6680e9]
2026-01-30T11:35:29.268+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.268+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534830c] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.268+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.269+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:35:29.269+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33961401 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:29.270+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:35:29.270+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.271+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:35:29.281+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:29.282+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4157223e]
2026-01-30T11:35:29.282+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.282+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77225368] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.283+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253548896 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.283+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:29.284+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:29.287+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:35:29.287+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534830c]
2026-01-30T11:35:29.287+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.288+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd95dd6] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.288+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1020559746 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:29.289+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.289+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.292+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:35:29.296+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:35:29.297+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:35:29.297+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:35:29.298+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:35:29.299+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.299+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55827a57] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.299+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1039354181 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.300+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:29.300+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:35:29.300+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.300+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77225368]
2026-01-30T11:35:29.300+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dd95dd6]
2026-01-30T11:35:29.301+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:35:29.301+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.301+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.301+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:29.302+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:35:29.302+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.303+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.316+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:35:29.318+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55827a57]
2026-01-30T11:35:29.318+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.319+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5392bf8b] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.320+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352593772 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.320+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.321+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.322+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:29.322+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.329+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:29.331+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:29.329+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:35:29.332+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:29.333+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.333+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:29.333+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:29.334+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.335+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fc3aa88] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.334+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:35:29.335+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1322908833 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.338+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:29.343+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.345+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:29.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@590cea90] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.347+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18858414 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.348+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.348+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.356+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:29.362+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:35:29.363+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:29.364+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:35:29.365+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:35:29.364+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.366+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.367+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:35:29.370+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.368+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.371+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:29.372+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.372+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:35:29.372+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc2fd9f] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.373+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5392bf8b]
2026-01-30T11:35:29.376+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.384+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:35:29.392+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.374+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1214603104 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:29.415+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:35:29.375+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.416+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:35:29.416+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.418+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bbecfe8] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.420+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@923921347 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.420+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:29.421+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:35:29.421+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fc3aa88]
2026-01-30T11:35:29.421+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:35:29.422+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.422+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f276c5] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.423+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.423+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654065593 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.423+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@590cea90]
2026-01-30T11:35:29.423+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:29.424+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.424+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31977c0c] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.425+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259082436 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.425+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:29.426+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.427+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.428+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.432+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:35:29.436+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.437+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:29.437+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:35:29.438+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.439+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.439+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.440+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49189394] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.440+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493932447 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:29.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:35:29.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:35:29.493+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.493+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:35:29.494+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:35:29.494+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:29.494+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:35:29.498+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31977c0c]
2026-01-30T11:35:29.498+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bbecfe8]
2026-01-30T11:35:29.498+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49189394]
2026-01-30T11:35:29.498+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f276c5]
2026-01-30T11:35:29.498+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fc2fd9f]
2026-01-30T11:35:29.499+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.500+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.500+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.501+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.503+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.504+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b49fca5] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.505+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:35:29.505+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:35:29.506+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:29.519+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:35:29.520+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28608220 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.521+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.522+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.523+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.528+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.534+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:35:29.535+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.537+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.572+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:35:29.576+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.577+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:29.578+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:35:29.581+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.551+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:29.556+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:29.568+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:35:29.573+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:35:29.584+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.587+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:29.589+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:35:29.592+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.593+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.594+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:29.594+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:35:29.596+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:29.600+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2d8ef4] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.601+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:29.603+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:35:29.603+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:35:29.604+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536189796 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.609+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:35:29.605+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:29.606+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:35:29.606+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.611+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:35:29.612+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.611+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.611+09:00 DEBUG 268 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.613+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.614+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfb8fe1] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.617+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:35:29.618+09:00 DEBUG 268 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.618+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1810be5] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.620+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1504129541 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.621+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b49fca5]
2026-01-30T11:35:29.621+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:35:29.622+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.623+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2132718324 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:29.623+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:29.623+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.624+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2d8ef4]
2026-01-30T11:35:29.624+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc00dd8] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.624+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:35:29.626+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:29.627+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135cc6b1] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.628+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.630+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040650491 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.631+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:35:29.634+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:35:29.632+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1463069867 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.633+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:35:29.636+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:29.638+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:35:29.638+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.638+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:35:29.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.640+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfb8fe1]
2026-01-30T11:35:29.652+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.653+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e6f2d9] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.645+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-30T11:35:29.646+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.647+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1810be5]
2026-01-30T11:35:29.654+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929569219 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.665+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.666+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-30T11:35:29.667+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:29.668+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:35:29.668+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:35:29.671+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:29.671+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-01-30T11:35:29.672+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc00dd8]
2026-01-30T11:35:29.672+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.677+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-30T11:35:29.680+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.681+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.686+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-30T11:35:29.687+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:35:29.687+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@135cc6b1]
2026-01-30T11:35:29.698+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.688+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-30T11:35:29.696+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.700+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406df91a] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.705+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@896648936 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.705+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:35:29.707+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:35:29.701+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.716+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:29.720+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e6f2d9]
2026-01-30T11:35:29.720+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:35:29.724+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.729+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:29.733+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.730+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7087c31] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.732+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:35:29.735+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101063612 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:29.737+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:29.744+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406df91a]
2026-01-30T11:35:29.746+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-30T11:35:29.749+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.749+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:29.751+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-01-30T11:35:29.751+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbe83ee] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.752+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11799082 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:29.756+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:35:29.759+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:29.766+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:35:29.767+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.771+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2cfad6] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.775+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28051432 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.779+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-30T11:35:29.780+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:35:29.781+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:29.782+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7087c31]
2026-01-30T11:35:29.782+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbe83ee]
2026-01-30T11:35:29.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.783+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:29.784+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-30T11:35:29.785+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f670a8f] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.786+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.790+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874337662 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.804+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.805+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.808+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:29.818+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2cfad6]
2026-01-30T11:35:29.818+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.821+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.822+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f670a8f]
2026-01-30T11:35:29.822+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea20789] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.829+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.829+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654961345 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:29.830+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6136bf0e] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.844+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:29.846+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@911405781 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.846+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:29.847+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:35:29.849+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:35:29.855+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:29.860+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ea20789]
2026-01-30T11:35:29.868+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.871+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:29.883+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:35:29.901+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.901+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6136bf0e]
2026-01-30T11:35:29.904+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.906+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd542ca] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:29.918+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875854449 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:29.920+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:29.921+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:29.938+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:29.946+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd542ca]
2026-01-30T11:35:29.953+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:29.955+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:35:29.959+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:29.977+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.985+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:35:29.988+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:35:29.989+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:35:29.992+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:35:29.998+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:29.999+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a566e67] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.000+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@937418378 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.001+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.002+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.017+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.020+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a566e67]
2026-01-30T11:35:30.022+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.030+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a89993] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.031+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1627711415 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.033+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.035+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.055+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.056+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a89993]
2026-01-30T11:35:30.057+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.057+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71d63406] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.060+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570660270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.063+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:35:30.065+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:35:30.069+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:35:30.070+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71d63406]
2026-01-30T11:35:30.071+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.072+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169f5cc] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.073+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1105172451 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.073+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.074+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.082+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.083+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@169f5cc]
2026-01-30T11:35:30.084+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.085+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c77a2f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.086+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847183651 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.087+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:35:30.087+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:35:30.091+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:35:30.096+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c77a2f4]
2026-01-30T11:35:30.100+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.101+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5a95b6] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.102+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056700587 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.102+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:35:30.104+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:35:30.118+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:35:30.121+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f5a95b6]
2026-01-30T11:35:30.123+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.133+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbd05d1] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.136+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205979861 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.142+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.149+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.172+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.184+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cbd05d1]
2026-01-30T11:35:30.185+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.185+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11cd134a] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.186+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358223663 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.187+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:35:30.187+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:35:30.192+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:35:30.197+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11cd134a]
2026-01-30T11:35:30.198+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.199+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82fc0c9] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.201+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1895941573 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.203+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.204+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.207+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.217+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82fc0c9]
2026-01-30T11:35:30.219+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.222+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:35:30.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:30.271+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:35:30.271+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:35:30.271+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:35:30.272+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:35:30.272+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:35:30.281+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:35:30.281+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:35:30.282+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me
2026-01-30T11:35:30.283+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:35:30.289+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:35:30.290+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:35:30.301+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:35:30.302+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:35:30.299+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:35:30.299+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:35:30.300+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:35:30.307+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:35:30.309+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:35:30.301+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:35:30.320+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:35:30.305+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:35:30.306+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:35:30.323+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:35:30.306+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:35:30.330+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:35:30.319+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.333+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c494998] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.322+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.322+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.326+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.331+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:35:30.337+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2457e07e] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.338+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5175ea40] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.338+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181944f2] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.338+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.339+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474074990 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:30.367+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:35:30.339+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2007613671 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.356+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5c97db] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.358+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138927162 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:35:30.364+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793115860 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:30.381+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:35:30.381+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:30.381+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067552363 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:30.402+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.382+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:30.382+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:30.401+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:30.406+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:30.407+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 5(Long), PENDING(String)
2026-01-30T11:35:30.408+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:35:30.421+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.422+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2457e07e]
2026-01-30T11:35:30.423+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5c97db]
2026-01-30T11:35:30.424+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.425+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.427+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc7e306] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5bfc1c] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.427+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566288 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123107011 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:35:30.430+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:30.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5175ea40]
2026-01-30T11:35:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181944f2]
2026-01-30T11:35:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c494998]
2026-01-30T11:35:30.433+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:30.434+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.436+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.436+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.437+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.438+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:30.438+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dec939] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.439+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc7e306]
2026-01-30T11:35:30.439+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:35:30.439+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:30.440+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471292324 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:35:30.440+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:30.441+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.443+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:30.444+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5bfc1c]
2026-01-30T11:35:30.444+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:35:30.446+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:35:30.448+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 5, companyId: 3, role: CEO
2026-01-30T11:35:30.451+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:35:30.452+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:30.453+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.454+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=5, username=test_ceo, passwor (truncated)...]
2026-01-30T11:35:30.462+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:30.471+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:35:30.473+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:35:30.483+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me
2026-01-30T11:35:30.484+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dec939]
2026-01-30T11:35:30.485+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:35:30.486+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.486+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:35:30.486+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:30.487+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:35:30.489+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:30.489+09:00  INFO 268 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:35:30.494+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.496+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a091029] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.499+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323128715 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:30.501+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:30.501+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:30.504+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:30.509+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a091029]
2026-01-30T11:35:30.509+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:30.510+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c84ca0] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:30.512+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@895655464 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:30.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:30.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:30.518+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:30.518+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c84ca0]
2026-01-30T11:35:30.518+09:00  INFO 268 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 5, companyId: 3, role: CEO
2026-01-30T11:35:30.519+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:30.520+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=5, username=test_ceo, passwor (truncated)...]
2026-01-30T11:35:30.520+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:51.179+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:35:51.181+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:35:51.183+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:35:51.189+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:35:51.189+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:35:51.190+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:35:51.186+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me
2026-01-30T11:35:51.190+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:35:51.190+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:35:51.204+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:51.194+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:35:51.198+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:35:51.205+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43749092] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:51.205+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:35:51.206+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:35:51.207+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:35:51.217+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:35:51.223+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:35:51.223+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:51.235+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170000123 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:35:51.237+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:51.240+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71918dd1] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:51.240+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:51.243+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bbd343] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:51.342+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:51.372+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975152286 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:35:51.389+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:51.390+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@308108986 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:51.395+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 5(Long), PENDING(String)
2026-01-30T11:35:51.395+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:35:51.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:35:51.398+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:51.421+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43749092]
2026-01-30T11:35:51.433+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:51.436+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:35:51.436+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:35:51.437+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:35:51.437+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71918dd1]
2026-01-30T11:35:51.437+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10bbd343]
2026-01-30T11:35:51.439+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:51.449+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:51.450+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:35:51.452+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:35:51.453+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751daa39] was not registered for synchronization because synchronization is not active
2026-01-30T11:35:51.455+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:35:51.456+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@395154015 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:35:51.464+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:35:51.465+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:35:51.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:35:51.472+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@751daa39]
2026-01-30T11:35:51.472+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 5, companyId: 3, role: CEO
2026-01-30T11:35:51.478+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:35:51.478+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=5, username=test_ceo, passwor (truncated)...]
2026-01-30T11:35:51.480+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:36:09.655+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:36:09.664+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:36:09.666+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me
2026-01-30T11:36:09.667+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:36:09.655+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:36:09.666+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:36:09.682+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:36:09.668+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:36:09.676+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:36:09.687+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:36:09.686+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:36:09.687+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:36:09.688+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:36:09.688+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:36:09.693+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:36:09.695+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:36:09.696+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:36:09.696+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:36:09.697+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:36:09.697+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7548a5b5] was not registered for synchronization because synchronization is not active
2026-01-30T11:36:09.697+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f7d1e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:36:09.700+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480071ae] was not registered for synchronization because synchronization is not active
2026-01-30T11:36:09.733+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082466872 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:36:09.735+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148488518 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:36:09.746+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126005609 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:36:09.747+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:36:09.747+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:36:09.748+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:36:09.750+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:36:09.750+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:36:09.751+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 5(Long), PENDING(String)
2026-01-30T11:36:09.757+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:36:09.757+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:36:09.764+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:36:09.765+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f7d1e0]
2026-01-30T11:36:09.765+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480071ae]
2026-01-30T11:36:09.766+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7548a5b5]
2026-01-30T11:36:09.766+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:36:09.767+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:36:09.767+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:36:09.767+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7457cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:36:09.767+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:36:09.768+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:36:09.787+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:36:09.783+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532037025 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:36:09.787+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:36:09.792+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:36:09.797+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:36:09.813+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:36:09.814+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d7457cf]
2026-01-30T11:36:09.815+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 5, companyId: 3, role: CEO
2026-01-30T11:36:09.817+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:36:09.817+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=5, username=test_ceo, passwor (truncated)...]
2026-01-30T11:36:09.818+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:36:15.564+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/search?name=123
2026-01-30T11:36:15.567+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=123
2026-01-30T11:36:15.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/companies/search
2026-01-30T11:36:15.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=123
2026-01-30T11:36:15.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=123", parameters={masked}
2026-01-30T11:36:15.570+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-30T11:36:15.572+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:36:15.572+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5898c67d] was not registered for synchronization because synchronization is not active
2026-01-30T11:36:15.578+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170850907 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:36:15.579+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-30T11:36:15.584+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: 123(String), 123(String), 123(String), 123(String), 123(String)
2026-01-30T11:36:15.592+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 2
2026-01-30T11:36:15.593+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5898c67d]
2026-01-30T11:36:15.594+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:36:15.595+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=5, companyName=test_ (truncated)...]
2026-01-30T11:36:15.599+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:37:11.948+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:37:11.950+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:37:11.950+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:37:11.951+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me
2026-01-30T11:37:11.952+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:37:11.952+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:37:11.952+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:37:11.953+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:37:11.953+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:37:11.953+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:37:11.953+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:37:11.953+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:37:11.954+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:37:11.954+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:37:11.954+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:37:11.954+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:37:11.955+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:11.955+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:11.956+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:11.956+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b22ec3] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:11.958+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76a9c23c] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:11.958+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3faa3ee0] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:11.964+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475573111 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:37:11.964+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194806937 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:37:11.965+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:37:11.966+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:37:11.971+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@611859965 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:37:11.972+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 5(Long), PENDING(String)
2026-01-30T11:37:11.973+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:37:11.976+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:37:11.979+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:37:11.983+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:37:11.983+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:37:11.984+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b22ec3]
2026-01-30T11:37:11.985+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76a9c23c]
2026-01-30T11:37:11.986+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:37:11.987+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:11.988+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:37:11.989+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:37:11.995+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb55c70] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:11.996+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3faa3ee0]
2026-01-30T11:37:11.996+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:37:11.997+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285097712 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:37:11.998+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:37:11.998+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:37:11.999+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:37:12.000+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:37:12.001+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:37:12.014+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:37:12.016+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb55c70]
2026-01-30T11:37:12.017+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 5, companyId: 3, role: CEO
2026-01-30T11:37:12.018+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:37:12.019+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=5, username=test_ceo, passwor (truncated)...]
2026-01-30T11:37:12.020+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:37:14.349+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:37:14.349+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-30T11:37:14.354+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:37:14.359+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:37:14.361+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:37:14.362+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:37:14.363+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:14.350+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-30T11:37:14.355+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me
2026-01-30T11:37:14.364+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-30T11:37:14.366+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-30T11:37:14.364+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d327220] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:14.365+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies/pending
2026-01-30T11:37:14.367+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-30T11:37:14.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-30T11:37:14.368+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:37:14.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-30T11:37:14.369+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:14.369+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-30T11:37:14.369+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4653598] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:14.370+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:14.371+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebe1e52] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:14.390+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702048230 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:37:14.392+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@147402192 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:37:14.401+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:37:14.402+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:37:14.402+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:37:14.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:37:14.404+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763740200 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:37:14.471+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:37:14.523+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:37:14.526+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:37:14.537+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 5(Long), PENDING(String)
2026-01-30T11:37:14.538+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4653598]
2026-01-30T11:37:14.538+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d327220]
2026-01-30T11:37:14.539+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:37:14.539+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:37:14.570+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baa801d] was not registered for synchronization because synchronization is not active
2026-01-30T11:37:14.571+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:37:14.578+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:37:14.572+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170650264 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:37:14.588+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:37:14.600+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-30T11:37:14.632+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:37:14.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ebe1e52]
2026-01-30T11:37:14.646+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:37:14.647+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:37:14.654+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:37:14.657+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:37:14.667+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baa801d]
2026-01-30T11:37:14.680+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 5, companyId: 3, role: CEO
2026-01-30T11:37:14.680+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:37:14.682+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=5, username=test_ceo, passwor (truncated)...]
2026-01-30T11:37:14.685+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:31.770+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-30T11:38:31.779+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:31.781+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:31.792+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-30T11:38:31.801+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-30T11:38:31.801+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-01-30T11:38:31.829+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:38:31.843+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:31.857+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:31.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:31.886+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:31.907+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:38:31.919+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:31.910+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:31.916+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:31.918+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:31.970+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:31.919+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:38:31.919+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:31.920+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:31.952+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:31.970+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:31.970+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:38:31.971+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:31.971+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:31.971+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:31.974+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:31.974+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:38:31.975+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:31.976+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:31.976+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:31.991+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b740f0f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:31.981+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:31.981+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:31.990+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:31.990+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4c3e6f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:31.992+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e6093d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:31.993+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7573b92c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:31.994+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164e73a5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.002+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847849332 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:32.002+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@858281501 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:32.002+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@454875949 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.003+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796667679 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:32.007+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:32.007+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:32.015+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.015+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:32.016+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1644483840 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.018+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:32.018+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:32.018+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.019+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:32.019+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:32.034+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:32.045+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.045+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:32.047+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:32.051+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e6093d]
2026-01-30T11:38:32.204+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.069+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b740f0f]
2026-01-30T11:38:32.070+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:32.208+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7573b92c]
2026-01-30T11:38:32.070+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:32.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:32.175+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4c3e6f]
2026-01-30T11:38:32.205+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16dd2984] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.207+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.219+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e5ba79] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.220+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1087271333 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:32.222+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:32.241+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:32.209+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@164e73a5]
2026-01-30T11:38:32.243+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.244+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290b39df] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.245+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590599406 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.246+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:38:32.210+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caef55d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.219+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027993092 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.247+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.247+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:32.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@786175048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:32.248+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.248+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.249+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.250+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.288+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.289+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.289+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.301+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caef55d]
2026-01-30T11:38:32.301+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@290b39df]
2026-01-30T11:38:32.302+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16dd2984]
2026-01-30T11:38:32.303+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:32.303+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.304+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.304+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:32.304+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bff9f18] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.305+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5437df96] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.306+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:32.308+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1263180921 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.309+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@727272861 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.310+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:32.310+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:32.311+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:32.312+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:32.314+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:32.331+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e5ba79]
2026-01-30T11:38:32.333+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:32.333+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:32.335+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:32.335+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bff9f18]
2026-01-30T11:38:32.336+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.336+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:32.336+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb57325] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.338+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:32.338+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@192226036 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.345+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.345+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:32.349+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:32.351+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.352+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:32.355+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:32.354+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:32.363+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:32.363+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:32.364+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.369+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:32.371+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db113ef] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.382+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:32.371+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:32.383+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.382+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@846408954 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:32.383+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5437df96]
2026-01-30T11:38:32.398+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.398+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15563f2e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.399+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138544509 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.383+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.384+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cb57325]
2026-01-30T11:38:32.384+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:32.400+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.400+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4638c811] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.412+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:32.413+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:32.437+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.438+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584201357 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:32.459+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:32.460+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:32.461+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:32.462+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:32.493+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:32.499+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.499+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:32.499+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:32.514+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15563f2e]
2026-01-30T11:38:32.517+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.514+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:32.515+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4638c811]
2026-01-30T11:38:32.516+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db113ef]
2026-01-30T11:38:32.518+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5208a110] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.518+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:32.519+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.519+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.520+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1979927344 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.521+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:32.523+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27638b28] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aaa7718] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:32.525+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@656123797 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:32.525+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867593161 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:32.526+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:32.527+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.528+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:32.528+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.537+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b2faa3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.539+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:32.551+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.553+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1780129812 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.554+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:32.557+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:32.588+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:32.588+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.593+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:32.599+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5208a110]
2026-01-30T11:38:32.613+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27638b28]
2026-01-30T11:38:32.622+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aaa7718]
2026-01-30T11:38:32.626+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.628+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:32.628+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:32.628+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec56a6] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.628+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:32.628+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:32.629+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620458474 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.630+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:32.630+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:32.631+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:32.634+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:32.670+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:32.673+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:32.677+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:32.687+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b2faa3]
2026-01-30T11:38:32.692+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:32.690+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:32.692+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.693+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:32.720+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:32.720+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141bf8d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.720+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:32.720+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:32.721+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@639708900 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.721+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:32.721+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:32.722+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.724+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.729+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:32.733+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.734+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.734+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62afdd6f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.734+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ec56a6]
2026-01-30T11:38:32.734+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a478bfa] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.736+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331215570 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:32.736+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.737+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1927be03] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2004138122 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:32.737+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:32.741+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211077351 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.741+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:32.745+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:32.766+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.823+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.827+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:32.886+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.909+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:32.918+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141bf8d]
2026-01-30T11:38:32.943+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62afdd6f]
2026-01-30T11:38:32.943+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.944+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.944+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c7fe16] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.944+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160c32ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.945+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1859554324 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:32.951+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.951+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:32.952+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@173326836 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:32.964+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:32.965+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1927be03]
2026-01-30T11:38:32.965+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a478bfa]
2026-01-30T11:38:32.965+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:32.966+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:32.966+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.966+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:32.966+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:32.970+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106a25c7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.971+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dff13a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:32.978+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1984015488 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:32.978+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@874071663 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:32.979+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:32.979+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:32.980+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:32.981+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:32.986+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:32.991+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42c7fe16]
2026-01-30T11:38:32.997+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:32.997+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:32.997+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:33.002+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.003+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160c32ff]
2026-01-30T11:38:33.020+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70dff13a]
2026-01-30T11:38:33.020+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106a25c7]
2026-01-30T11:38:33.021+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@799244b5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.022+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.029+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.029+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.030+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72889055 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:33.030+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:33.030+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:33.032+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.031+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1151811c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.031+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.032+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.034+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356122860 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:33.035+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.036+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.037+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.108+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.111+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:33.111+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:33.113+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@799244b5]
2026-01-30T11:38:33.121+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.120+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:33.120+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:33.126+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:33.127+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:33.127+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.131+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:33.134+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.136+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:33.137+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1151811c]
2026-01-30T11:38:33.137+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:33.146+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:33.149+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.149+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:33.150+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.150+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:33.151+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.152+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699a15c0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.154+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.154+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ccc00b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.157+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:33.161+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@539634905 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.178+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:33.171+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157535506 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:33.176+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:33.180+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:33.182+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:33.195+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:33.197+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:33.197+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:33.198+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:33.220+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.221+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8b8466] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.238+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:33.245+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:33.248+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699a15c0]
2026-01-30T11:38:33.249+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.250+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5a1852] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.251+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358034444 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.251+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:33.248+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ccc00b]
2026-01-30T11:38:33.253+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:33.260+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1655097322 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:33.263+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.265+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.265+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b996c9c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.266+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.268+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140225404 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:33.269+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.286+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.312+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.317+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8b8466]
2026-01-30T11:38:33.344+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.345+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.347+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:33.348+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b996c9c]
2026-01-30T11:38:33.349+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbc22ea] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.350+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5a1852]
2026-01-30T11:38:33.350+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.351+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756658438 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:33.351+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.351+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:33.352+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.352+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:33.353+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.353+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.353+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.374+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:33.383+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:33.385+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:33.386+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:33.387+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:33.376+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:33.388+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.394+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:33.395+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f21d7fd] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.399+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.400+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:33.404+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:33.413+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:33.401+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1491777383 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:33.402+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fbc22ea]
2026-01-30T11:38:33.415+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.415+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:33.416+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.416+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f500de7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.418+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:33.419+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@446b8667] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.419+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154606062 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:33.420+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716064626 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.421+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:33.421+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:33.426+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:33.428+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:33.449+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:33.453+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:33.456+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:33.466+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f500de7]
2026-01-30T11:38:33.467+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f21d7fd]
2026-01-30T11:38:33.468+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@446b8667]
2026-01-30T11:38:33.469+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.470+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.472+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.474+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7596c087] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.474+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70969398] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.475+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c45336] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.476+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181851367 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:33.482+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1102654536 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:33.483+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235185975 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.484+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:33.484+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.485+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.488+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:33.488+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.488+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.513+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.514+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70969398]
2026-01-30T11:38:33.515+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c45336]
2026-01-30T11:38:33.515+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.516+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.516+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:33.518+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc1f9d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.519+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.521+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210599577 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.528+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:33.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:33.536+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:33.538+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7596c087]
2026-01-30T11:38:33.563+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:33.567+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.567+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc1f9d4]
2026-01-30T11:38:33.567+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:33.569+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.569+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7acc70f5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.569+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:33.571+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162539809 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.574+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:33.577+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:33.584+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:33.586+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7acc70f5]
2026-01-30T11:38:33.586+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.587+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e5a403] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.588+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179774802 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.594+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.594+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.600+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.603+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e5a403]
2026-01-30T11:38:33.603+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.604+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37852ee6] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.606+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@167661993 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.607+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:33.611+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:33.614+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:33.615+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37852ee6]
2026-01-30T11:38:33.616+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:33.616+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc315f3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:33.617+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288352499 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:33.618+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:33.618+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:33.621+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:33.627+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc315f3]
2026-01-30T11:38:33.628+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:33.631+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:33.632+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:34.400+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:34.400+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-30T11:38:34.401+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75
2026-01-30T11:38:34.401+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-01-30T11:38:34.402+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/75
2026-01-30T11:38:34.403+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:34.408+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:34.415+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:34.416+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:34.417+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:34.417+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-30T11:38:34.419+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:34.420+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:34.423+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:34.424+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/75
2026-01-30T11:38:34.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:34.425+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:34.426+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:34.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-30T11:38:34.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.429+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:34.429+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:34.431+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.430+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-30T11:38:34.431+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75aca943] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.432+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:34.432+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3037ff04] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.433+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:34.436+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:34.449+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.449+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.450+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc8059b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.450+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d3b6959] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.452+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051965815 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.455+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:34.460+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908469686 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:34.467+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:34.467+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:34.469+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:34.481+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573129567 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:34.481+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2098882387 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:34.483+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:34.483+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:34.484+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:34.486+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:34.486+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.486+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75aca943]
2026-01-30T11:38:34.494+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.495+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:34.496+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e5d513] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.496+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3037ff04]
2026-01-30T11:38:34.497+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089042316 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.497+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.498+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:34.499+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ade60a5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.499+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:34.499+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:34.499+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783291892 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:34.500+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc8059b]
2026-01-30T11:38:34.500+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:34.502+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.503+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:34.505+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8e5abc] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1772672582 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:34.515+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:34.515+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:34.517+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e5d513]
2026-01-30T11:38:34.518+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:34.518+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.519+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ade60a5]
2026-01-30T11:38:34.519+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:34.520+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:34.520+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:34.521+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:34.521+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d3b6959]
2026-01-30T11:38:34.521+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:34.521+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:34.528+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d8e5abc]
2026-01-30T11:38:34.523+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:34.528+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:34.535+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:34.536+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:34.529+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:34.548+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:34.554+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:34.559+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:34.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:34.566+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:34.568+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:34.569+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.570+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1918b0a7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.572+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.574+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.577+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1719947177 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:34.577+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1757235958 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:38:34.577+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:34.578+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:34.578+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:34.579+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:34.581+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:34.582+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1918b0a7]
2026-01-30T11:38:34.582+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:34.583+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:34.584+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.584+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:34.584+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc] from current transaction
2026-01-30T11:38:34.585+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:34.585+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:34.587+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.597+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:34.598+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.599+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc] from current transaction
2026-01-30T11:38:34.599+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:34.601+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.610+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:34.618+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.618+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc] from current transaction
2026-01-30T11:38:34.619+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:34.619+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:34.627+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:34.627+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.628+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc] from current transaction
2026-01-30T11:38:34.631+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:34.632+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 92(Long), 3(Long)
2026-01-30T11:38:34.637+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:34.638+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.645+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.646+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.647+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@371d9ffc]
2026-01-30T11:38:34.653+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.653+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c511a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.654+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@737222025 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:34.654+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:34.658+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.661+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:34.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1c511a]
2026-01-30T11:38:34.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fbcd27f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@582336531 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:34.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:34.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.666+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:34.668+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fbcd27f]
2026-01-30T11:38:34.668+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.668+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1596b5e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.670+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281405447 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:34.671+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:34.671+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:34.674+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:34.675+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1596b5e0]
2026-01-30T11:38:34.677+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:34.690+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=6, r (truncated)...]
2026-01-30T11:38:34.699+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:34.714+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-30T11:38:34.718+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/75
2026-01-30T11:38:34.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-30T11:38:34.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-30T11:38:34.728+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:34.728+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.737+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530d7eb3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.746+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1157006764 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.754+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:34.757+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.763+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:34.765+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@530d7eb3]
2026-01-30T11:38:34.765+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.766+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c028439] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.767+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1145214444 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.767+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:34.768+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.770+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:34.770+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c028439]
2026-01-30T11:38:34.781+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.782+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.783+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585895785 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:38:34.783+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:34.784+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:34.788+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:34.793+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.793+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c] from current transaction
2026-01-30T11:38:34.796+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:34.796+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.799+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:34.799+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.800+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c] from current transaction
2026-01-30T11:38:34.800+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:34.801+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.803+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:34.803+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.804+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c] from current transaction
2026-01-30T11:38:34.804+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:34.805+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:34.808+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:34.809+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.810+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c] from current transaction
2026-01-30T11:38:34.810+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:34.810+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 92(Long), 3(Long)
2026-01-30T11:38:34.813+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:34.813+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.814+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.814+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.814+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a9a750c]
2026-01-30T11:38:34.817+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a210005] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@816570529 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:34.819+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.821+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:34.824+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a210005]
2026-01-30T11:38:34.824+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.825+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf33623] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.826+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128623248 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.827+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:34.828+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:38:34.832+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:34.834+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf33623]
2026-01-30T11:38:34.836+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:34.851+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:34.852+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500942061 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:34.852+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:34.855+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:34.867+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:34.868+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@484cb1e9]
2026-01-30T11:38:34.868+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:34.869+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=6, r (truncated)...]
2026-01-30T11:38:34.871+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:36.930+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:36.931+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:38:36.934+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:36.937+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:38:36.942+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:36.934+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:36.934+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:36.937+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:36.942+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:38:36.942+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:36.944+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:36.944+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:36.945+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:36.945+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:38:36.947+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:38:36.949+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:36.945+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:36.946+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:36.946+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:36.946+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:36.950+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2e8c3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:36.951+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:36.951+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:36.959+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:36.952+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:36.952+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:36.959+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:36.979+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa1b9c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:36.960+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:36.960+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:36.961+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:36.983+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616dac77] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:36.984+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0a641] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:36.984+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:36.985+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eaad6df] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:36.986+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945442079 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:36.987+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:36.988+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1872431375 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:36.988+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1337650768 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:36.988+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1506530060 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:36.993+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@413780871 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:36.993+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:36.993+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:36.994+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:36.994+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:36.994+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:36.996+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:36.997+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:36.999+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:37.000+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.002+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.003+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2e8c3]
2026-01-30T11:38:37.013+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.017+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:38:37.018+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:37.020+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.028+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eaad6df]
2026-01-30T11:38:37.033+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:37.033+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.033+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:37.033+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.034+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0a641]
2026-01-30T11:38:37.034+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aa1b9c]
2026-01-30T11:38:37.035+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@616dac77]
2026-01-30T11:38:37.035+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730925ea] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.036+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.037+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.038+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.043+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390527643 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.044+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5e3faf] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.044+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1334d822] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.045+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2588e895] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.045+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.045+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313420957 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:37.046+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2074688675 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.046+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662456935 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.048+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.048+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.048+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.049+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:37.062+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.060+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.060+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.062+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:37.063+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@730925ea]
2026-01-30T11:38:37.065+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.066+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:37.068+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.068+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.068+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.070+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:37.072+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1334d822]
2026-01-30T11:38:37.083+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5e3faf]
2026-01-30T11:38:37.084+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2588e895]
2026-01-30T11:38:37.085+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.086+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.087+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.087+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39438673] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.087+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:37.089+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e7fc2f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.091+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:37.092+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@201571505 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.098+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:37.096+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:37.097+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1684607483 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:37.098+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.101+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:37.103+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:37.103+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:37.116+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:37.113+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:37.116+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:37.119+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:37.119+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:37.121+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.121+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:37.123+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:37.125+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:37.124+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0dcb7f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.124+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39438673]
2026-01-30T11:38:37.129+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:37.129+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832150114 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.129+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:37.131+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.131+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.131+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:37.132+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e7fc2f]
2026-01-30T11:38:37.132+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1dc300] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.132+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2adf5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.134+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.134+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.135+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@994619054 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.136+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641737698 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:37.136+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d6572b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.137+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.137+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:37.138+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849792282 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.138+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.145+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.145+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:37.146+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.148+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.149+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:37.150+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:37.151+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1dc300]
2026-01-30T11:38:37.151+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.151+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b0dcb7f]
2026-01-30T11:38:37.152+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fd2adf5]
2026-01-30T11:38:37.152+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.152+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d6572b]
2026-01-30T11:38:37.152+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.153+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.154+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3fcbc6] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.154+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.161+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716c53c6] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.161+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4570d6f2] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.163+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@181011010 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.168+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:37.168+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619657383 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.169+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068983980 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:37.170+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:37.171+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.177+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:37.175+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.176+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:37.185+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.187+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:37.194+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:37.198+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:37.199+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.199+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:37.204+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3fcbc6]
2026-01-30T11:38:37.217+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.217+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253d60d3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.200+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:37.200+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@716c53c6]
2026-01-30T11:38:37.219+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@567864905 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.219+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:37.220+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.220+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:37.221+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:37.226+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:37.227+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:37.229+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:37.230+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4570d6f2]
2026-01-30T11:38:37.232+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.233+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.235+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:37.236+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@670dcc67] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.250+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.254+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931462524 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.258+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:37.266+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.268+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:37.270+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:37.296+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:37.302+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:37.309+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:37.313+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@253d60d3]
2026-01-30T11:38:37.314+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:37.319+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:37.321+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.321+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:37.326+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:37.327+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.331+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666e163a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.321+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:37.321+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406b9d9a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.332+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:37.332+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126616651 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.333+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:37.333+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236869308 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.333+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@670dcc67]
2026-01-30T11:38:37.333+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:37.334+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.334+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.335+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.336+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7833a77c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.336+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.337+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.337+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a42caa2] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.338+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432195690 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.340+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1663389049 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.341+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.343+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.341+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:37.351+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:37.352+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.355+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a42caa2]
2026-01-30T11:38:37.353+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.369+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.370+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b5ff99] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.369+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@406b9d9a]
2026-01-30T11:38:37.370+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:37.381+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@666e163a]
2026-01-30T11:38:37.378+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@878590967 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.379+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.383+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.384+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:37.384+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a3ad88] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.385+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc5f17b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.387+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1580760843 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.387+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:37.386+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:37.387+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2056054047 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.388+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:37.403+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.405+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.421+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:37.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7833a77c]
2026-01-30T11:38:37.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.432+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@755aa499] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.433+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280491273 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.433+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:37.436+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:37.452+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:37.459+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:37.462+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a3ad88]
2026-01-30T11:38:37.463+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48b5ff99]
2026-01-30T11:38:37.463+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.463+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.464+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589b28c0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.464+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71cb951f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.465+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@126550454 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:37.465+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375776648 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.468+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.471+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.474+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cc5f17b]
2026-01-30T11:38:37.475+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.478+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.479+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.480+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:37.483+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:37.483+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@755aa499]
2026-01-30T11:38:37.484+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.486+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:37.497+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:37.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.499+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:37.505+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:37.507+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:37.508+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.508+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.516+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589b28c0]
2026-01-30T11:38:37.518+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.515+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:37.516+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71cb951f]
2026-01-30T11:38:37.518+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:37.518+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:37.519+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:37.519+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.520+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:37.521+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.528+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.530+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:37.530+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:37.530+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:37.539+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:37.533+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58981cc5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.535+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.539+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:37.540+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.544+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@211741279 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.547+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:37.548+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f8aa5b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.549+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:37.549+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:37.550+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946137499 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.552+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.552+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:37.552+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:37.557+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.558+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:37.563+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469e776d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.565+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:37.566+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@607183723 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.566+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58981cc5]
2026-01-30T11:38:37.567+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.567+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.568+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d91a975] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.568+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702362166 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.569+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:37.574+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.574+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f8aa5b]
2026-01-30T11:38:37.575+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.575+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.578+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@762d0ef5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.579+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.585+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834721817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.585+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469e776d]
2026-01-30T11:38:37.586+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:37.586+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.587+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:37.588+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55536220] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.601+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615024888 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.601+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.609+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.609+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d91a975]
2026-01-30T11:38:37.612+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.612+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.613+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:37.615+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:37.616+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.618+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@762d0ef5]
2026-01-30T11:38:37.623+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.626+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:37.628+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:37.629+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.633+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.635+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55536220]
2026-01-30T11:38:37.644+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.636+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:37.646+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777221db] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.650+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@972955511 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.651+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:37.648+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:37.649+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:37.663+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:37.665+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:37.665+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:37.667+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:37.667+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:37.667+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.667+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f41312] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.669+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317554600 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.673+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:37.676+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:37.667+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:37.694+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:37.695+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:37.696+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:37.697+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777221db]
2026-01-30T11:38:37.696+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.697+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f41312]
2026-01-30T11:38:37.697+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.697+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43378d1d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.698+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.698+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e77a2a6] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.699+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f91674e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.699+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356207326 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.700+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946678858 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.701+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725189933 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:37.701+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:37.703+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.703+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.708+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:37.714+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.714+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:37.721+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.721+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:37.722+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:37.730+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f91674e]
2026-01-30T11:38:37.731+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e77a2a6]
2026-01-30T11:38:37.733+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43378d1d]
2026-01-30T11:38:37.734+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.734+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.735+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.736+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:37.736+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c178cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.736+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13816769] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.737+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.738+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396739811 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.740+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814126433 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:37.747+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:37.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:37.749+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:37.752+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:37.791+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:37.791+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:37.799+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c178cf]
2026-01-30T11:38:37.799+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13816769]
2026-01-30T11:38:37.800+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.800+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:37.801+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0e2b58] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.801+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:37.802+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144136566 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.836+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:37.805+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:37.839+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:37.950+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:37.956+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0e2b58]
2026-01-30T11:38:37.964+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:37.970+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6684b44d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:37.970+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1759385390 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:37.977+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:37.977+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:38.020+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:38.027+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6684b44d]
2026-01-30T11:38:38.030+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.030+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aa39353] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.033+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034658966 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:38.034+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:38.035+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:38.039+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:38.046+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3aa39353]
2026-01-30T11:38:38.048+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.048+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b5f930] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.049+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1873465950 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:38.049+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:38.049+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:38.053+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:38.059+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b5f930]
2026-01-30T11:38:38.060+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:38.063+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:38.065+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:38.418+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/72
2026-01-30T11:38:38.418+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/72
2026-01-30T11:38:38.424+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:38.427+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:38.428+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:38.469+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:38.470+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:38.469+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:38.470+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:38.470+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:38.470+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:38.474+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/72
2026-01-30T11:38:38.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:38.477+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:38.471+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:38.475+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:38.479+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/72
2026-01-30T11:38:38.479+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:38.480+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.481+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:38.481+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/72
2026-01-30T11:38:38.482+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:38.482+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e680c7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.482+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.483+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/72", parameters={}
2026-01-30T11:38:38.483+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.484+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ae0dae] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.485+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:38.485+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61fee422] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.488+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.499+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b94d588] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.523+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@497803114 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:38.530+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1967129556 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:38.531+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638071949 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:38.562+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:38.562+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:38.568+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561175187 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:38.571+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:38.612+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:38.617+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:38.615+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:38.616+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:38.626+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:38.631+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:38.631+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:38.632+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61fee422]
2026-01-30T11:38:38.632+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e680c7]
2026-01-30T11:38:38.633+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:38.633+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.634+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:38.634+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1546b7d0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.636+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:38.643+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485521553 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:38.644+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:38.647+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:38.651+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:38.651+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:38.654+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:38.657+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:38.661+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:38.666+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:38.667+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b94d588]
2026-01-30T11:38:38.667+09:00  INFO 268 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:38.667+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.668+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.668+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134ed428] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.668+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a4b55] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.669+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@411564976 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:38.669+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@440317833 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:38.670+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:38.676+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:38.670+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:38.680+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:38.696+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:38.696+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:38.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:38.698+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:38:38.705+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1546b7d0]
2026-01-30T11:38:38.708+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ae0dae]
2026-01-30T11:38:38.709+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a4b55]
2026-01-30T11:38:38.711+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134ed428]
2026-01-30T11:38:38.712+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:38.712+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.714+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:38.720+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:38.720+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3132fc5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:38.720+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:38.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:38.722+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1446356204 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:38.729+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:38.731+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:38.737+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:38.787+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:38.787+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:38.793+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:38.793+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3132fc5]
2026-01-30T11:38:38.793+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145259941 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:38:38.794+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:38.794+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:38.794+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:38.795+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:38.796+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:38.825+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:38.827+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:38.831+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73] from current transaction
2026-01-30T11:38:38.831+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:38.834+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:38.847+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:38:38.849+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:38.851+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73] from current transaction
2026-01-30T11:38:38.852+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:38.858+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:38.886+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:38.895+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:38.900+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73] from current transaction
2026-01-30T11:38:38.900+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:38.916+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:39.044+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:39.050+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:39.101+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73] from current transaction
2026-01-30T11:38:39.110+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:39.114+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 77(Long), 3(Long)
2026-01-30T11:38:39.131+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:38:39.135+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:39.135+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:39.136+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:39.136+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4adf3b73]
2026-01-30T11:38:39.193+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.195+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.195+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608804902 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:38:39.195+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:39.197+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:39.201+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:39.201+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.205+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b] from current transaction
2026-01-30T11:38:39.210+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:39.212+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.216+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:38:39.218+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.218+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b] from current transaction
2026-01-30T11:38:39.219+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:39.220+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.247+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:39.249+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.270+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b] from current transaction
2026-01-30T11:38:39.300+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:39.308+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:39.331+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:39.334+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.337+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b] from current transaction
2026-01-30T11:38:39.337+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:39.339+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 79(Long), 3(Long)
2026-01-30T11:38:39.347+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:39.350+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.351+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.352+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.353+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6477337b]
2026-01-30T11:38:39.382+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.384+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3745375] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.385+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637136846 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.386+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:39.386+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.391+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:39.393+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3745375]
2026-01-30T11:38:39.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@659ad2ce] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154800371 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.396+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:39.396+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.398+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:39.399+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@659ad2ce]
2026-01-30T11:38:39.400+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.400+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6480793a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.400+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472191430 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.401+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:39.401+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:39.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:39.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6480793a]
2026-01-30T11:38:39.404+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:39.409+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterId=6, r (truncated)...]
2026-01-30T11:38:39.412+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:39.415+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/72
2026-01-30T11:38:39.418+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/72
2026-01-30T11:38:39.419+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/72
2026-01-30T11:38:39.420+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/72", parameters={}
2026-01-30T11:38:39.462+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:39.465+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.466+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d6e419] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.467+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855117360 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.467+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:39.468+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.471+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:39.475+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d6e419]
2026-01-30T11:38:39.476+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.477+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aabdb34] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.483+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@952048212 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.487+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:39.495+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.498+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:38:39.499+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aabdb34]
2026-01-30T11:38:39.503+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.504+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.505+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@295861578 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:38:39.507+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:39.510+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:39.515+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:39.517+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.519+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375] from current transaction
2026-01-30T11:38:39.521+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:39.522+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.527+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:38:39.528+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.528+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375] from current transaction
2026-01-30T11:38:39.529+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:39.529+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.531+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:39.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375] from current transaction
2026-01-30T11:38:39.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:39.534+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:39.536+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:39.537+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.537+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375] from current transaction
2026-01-30T11:38:39.537+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:39.537+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 77(Long), 3(Long)
2026-01-30T11:38:39.540+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:38:39.543+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.544+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.545+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.545+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f9b375]
2026-01-30T11:38:39.552+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.552+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.553+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471311483 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:38:39.553+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:39.554+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:39.559+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:39.561+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.562+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30] from current transaction
2026-01-30T11:38:39.562+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:39.563+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.565+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:38:39.565+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.566+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30] from current transaction
2026-01-30T11:38:39.566+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:39.567+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:39.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30] from current transaction
2026-01-30T11:38:39.570+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:39.570+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:39.572+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:39.572+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.573+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30] from current transaction
2026-01-30T11:38:39.574+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:39.574+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 79(Long), 3(Long)
2026-01-30T11:38:39.576+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:39.577+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.577+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.577+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.578+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cd9b30]
2026-01-30T11:38:39.582+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.582+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17f99f18] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.582+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903677562 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.583+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:39.583+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.585+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:39.585+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17f99f18]
2026-01-30T11:38:39.586+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.586+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@114bb76e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.586+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1251076864 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.587+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:39.587+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:38:39.590+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:39.591+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@114bb76e]
2026-01-30T11:38:39.591+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:39.592+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cacae80] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:39.592+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@269517500 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:39.594+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:39.595+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:39.597+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:39.598+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cacae80]
2026-01-30T11:38:39.599+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:39.599+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterId=6, r (truncated)...]
2026-01-30T11:38:39.600+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.583+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:40.584+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:40.585+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:40.585+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:40.586+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:38:40.587+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:40.589+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:40.587+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:40.587+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:40.590+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:38:40.590+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:40.591+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:40.592+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:40.592+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:40.593+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:38:40.593+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:40.593+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:40.594+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:40.594+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:40.594+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:38:40.594+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:40.595+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:40.595+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.595+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:40.595+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:38:40.598+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:40.600+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.600+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd1412c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.601+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.601+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.601+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.606+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2e77c3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.601+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b77906] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.603+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fce5877] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.604+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdd4edd] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.618+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540578386 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.619+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982423650 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:40.619+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1347767169 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:40.620+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1897570802 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:40.620+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.620+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:40.621+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:40.622+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@20887346 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:40.624+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:40.626+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.628+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:40.630+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:40.630+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:40.632+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:40.637+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:40.637+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.638+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:40.638+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:40.643+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd1412c]
2026-01-30T11:38:40.643+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fce5877]
2026-01-30T11:38:40.644+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b77906]
2026-01-30T11:38:40.644+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.644+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.645+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.645+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddecf99] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.646+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19dcc651] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.646+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e06d8c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.646+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:40.647+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1549944035 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378194377 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015414123 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fdd4edd]
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.649+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:40.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2e77c3]
2026-01-30T11:38:40.649+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.649+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.650+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.650+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.650+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:38:40.652+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd91bbc] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.652+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:40.652+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.652+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.653+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059434262 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:40.654+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19dcc651]
2026-01-30T11:38:40.655+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ddecf99]
2026-01-30T11:38:40.657+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.658+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.659+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.660+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.662+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2737af24] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.660+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.661+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47e06d8c]
2026-01-30T11:38:40.662+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:40.662+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085490268 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.664+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.666+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.667+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:40.666+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:40.669+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.676+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:40.677+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.683+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:40.684+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:40.684+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bd91bbc]
2026-01-30T11:38:40.686+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:40.686+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:40.687+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.689+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238ecb57] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.687+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:40.688+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:40.695+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@545861729 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:40.696+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:40.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:40.698+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:40.698+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:40.699+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:40.700+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:40.700+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.700+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.701+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d9de2f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.703+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d52f572] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.704+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:40.707+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1216416979 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:40.708+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:40.709+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2737af24]
2026-01-30T11:38:40.709+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805918574 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:40.709+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:40.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238ecb57]
2026-01-30T11:38:40.711+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.711+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:40.712+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:40.713+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.713+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac821e9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.714+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:40.714+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c8114] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.715+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538765083 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.716+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485645713 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:40.717+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.718+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:40.718+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.718+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.718+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:40.718+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68d9de2f]
2026-01-30T11:38:40.719+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.719+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d52f572]
2026-01-30T11:38:40.719+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.720+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ac62bb] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.720+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1453519399 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6486f2ae] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac821e9]
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d0c8114]
2026-01-30T11:38:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:40.722+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1314222633 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:40.725+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.727+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.727+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:40.728+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:40.727+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.728+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3630fa0d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.731+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.732+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1301041739 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.732+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:40.733+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:40.736+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:40.745+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:40.736+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ac62bb]
2026-01-30T11:38:40.737+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.747+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.744+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:40.747+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6486f2ae]
2026-01-30T11:38:40.748+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:40.748+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:40.750+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.751+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.752+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:40.752+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:40.760+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:40.761+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:40.761+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:40.763+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.766+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:40.767+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3630fa0d]
2026-01-30T11:38:40.793+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.794+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47039158] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.795+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985145639 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.795+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:40.800+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:40.768+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.801+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39516f36] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.802+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598086366 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:40.802+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:40.804+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:40.780+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:40.809+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:40.811+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.812+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792b4b5b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.813+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493156391 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:40.783+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:40.827+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:40.830+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:40.830+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:40.832+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:40.832+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:40.833+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.833+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f588] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.834+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959677356 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:40.835+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:40.883+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:40.883+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:40.884+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:40.904+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:40.909+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792b4b5b]
2026-01-30T11:38:40.909+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39516f36]
2026-01-30T11:38:40.910+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47039158]
2026-01-30T11:38:40.910+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.911+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.911+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.912+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deaf083] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.918+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e417a4d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.918+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29faa3ee] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.919+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246941686 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:40.920+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281065580 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:40.921+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1915252440 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.922+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:40.924+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.925+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.927+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:40.927+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.949+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.951+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:40.955+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52f588]
2026-01-30T11:38:40.959+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.961+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d1cf2bf] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.962+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@175483425 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:40.963+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:40.963+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:40.965+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.965+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:40.965+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.966+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29faa3ee]
2026-01-30T11:38:40.966+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deaf083]
2026-01-30T11:38:40.967+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e417a4d]
2026-01-30T11:38:40.967+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.971+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.971+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:40.978+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:40.979+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ea552c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.980+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:40.981+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79954966] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:40.982+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d1cf2bf]
2026-01-30T11:38:40.983+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@695429548 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:40.988+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:40.985+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:40.987+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@208914187 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:40.988+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:40.991+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:40.996+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:40.997+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:40.998+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.002+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:41.009+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:41.011+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:41.014+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:41.015+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:41.018+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ea552c]
2026-01-30T11:38:41.015+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:41.016+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79954966]
2026-01-30T11:38:41.017+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:41.018+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.019+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:41.019+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.020+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:41.021+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1b6e6e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.024+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:41.025+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18048c4] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.025+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:41.025+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@425663412 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:41.026+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:41.029+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1385033707 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:41.032+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:41.033+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.033+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.033+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.034+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.035+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.035+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edf969b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.035+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.036+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dc5ffa9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.037+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11719275 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:41.041+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1389644302 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.042+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:41.042+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:41.046+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:41.047+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:41.048+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.051+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.051+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:41.051+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e1b6e6e]
2026-01-30T11:38:41.051+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:41.052+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18048c4]
2026-01-30T11:38:41.053+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edf969b]
2026-01-30T11:38:41.054+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.054+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dc5ffa9]
2026-01-30T11:38:41.055+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.055+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.057+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:41.058+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.060+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:41.062+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b333de] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.063+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.064+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c3c220] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.066+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.066+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366952061 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:41.081+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813259622 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.082+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:41.082+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.083+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:41.083+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.087+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:41.097+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:41.100+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.100+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:41.101+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32c3c220]
2026-01-30T11:38:41.102+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:41.102+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.103+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:41.103+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:41.104+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.104+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.105+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5337fb78] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.111+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@394227871 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.112+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.113+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.114+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:41.118+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:41.120+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b333de]
2026-01-30T11:38:41.129+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:41.129+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.133+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:41.133+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:41.133+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:41.135+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:41.135+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.139+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.147+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.149+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:41.164+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5337fb78]
2026-01-30T11:38:41.165+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309ad323] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.166+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.167+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1509421061 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:41.167+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10c727a0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.167+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:41.168+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:41.168+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093474555 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.178+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:41.179+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:41.179+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.180+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:41.180+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.180+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:41.200+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.204+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e35817c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.207+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@757040571 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:41.219+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.220+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:41.221+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@309ad323]
2026-01-30T11:38:41.220+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:41.221+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10c727a0]
2026-01-30T11:38:41.226+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.234+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292e2604] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.235+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338764233 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:41.236+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.236+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.229+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:41.234+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.238+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e40f43c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.246+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118701171 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.247+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:41.250+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:41.261+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:41.262+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.263+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:41.264+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e35817c]
2026-01-30T11:38:41.265+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292e2604]
2026-01-30T11:38:41.265+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e40f43c]
2026-01-30T11:38:41.266+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.266+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.267+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.267+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568f87e7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.268+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:41.270+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b7438a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.270+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1143194155 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:41.271+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.272+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046799028 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.277+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:41.279+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.280+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:41.281+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.286+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.286+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:41.301+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50b7438a]
2026-01-30T11:38:41.301+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@568f87e7]
2026-01-30T11:38:41.301+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.302+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.302+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e18fa8] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.303+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:41.305+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327506317 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.317+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:41.327+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:41.330+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:41.338+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:41.343+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e18fa8]
2026-01-30T11:38:41.344+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.346+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237d99fd] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.348+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172543733 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.348+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:41.350+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:41.362+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:41.363+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237d99fd]
2026-01-30T11:38:41.363+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.364+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5cdc18] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.365+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891355359 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.365+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.366+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.369+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.369+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5cdc18]
2026-01-30T11:38:41.371+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.371+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bac1d0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.374+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947888835 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.377+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:41.379+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:41.387+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:41.387+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68bac1d0]
2026-01-30T11:38:41.401+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:41.408+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@224686b0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:41.414+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@474773353 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:41.415+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:41.416+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:41.419+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:41.436+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@224686b0]
2026-01-30T11:38:41.461+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:41.462+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:41.463+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:42.656+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:42.657+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/67
2026-01-30T11:38:42.657+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/67
2026-01-30T11:38:42.657+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:42.659+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:42.660+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:42.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:42.663+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:42.663+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:42.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:42.664+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:42.664+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:42.664+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:38:42.665+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:42.666+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.667+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56649a57] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.665+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:42.666+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:42.667+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:38:42.668+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:42.668+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:42.669+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:38:42.669+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:42.671+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.672+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:38:42.680+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.681+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d47d88] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.681+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:42.681+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@758d61b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.683+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.684+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bb780a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.686+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1647915823 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:42.687+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:42.695+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:42.697+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970079635 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:42.697+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1931094594 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:42.698+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:42.699+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:42.700+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:42.702+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:42.703+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865973354 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:42.703+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:42.705+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:42.705+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:42.710+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:42.711+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56649a57]
2026-01-30T11:38:42.713+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.713+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@758d61b]
2026-01-30T11:38:42.713+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57d47d88]
2026-01-30T11:38:42.714+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.715+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:42.715+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.716+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fcbdc39] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.716+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:42.716+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ce7c61] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.719+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866131622 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:42.719+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:42.719+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:42.720+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877318363 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:42.729+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:42.726+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:42.726+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65bb780a]
2026-01-30T11:38:42.728+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:42.730+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:42.732+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:42.733+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.734+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2260eee9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.734+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:42.736+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080361334 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:42.736+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:42.737+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:42.737+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:42.738+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:42.738+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.738+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:42.739+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fcbdc39]
2026-01-30T11:38:42.743+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:42.743+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:42.744+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.744+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:42.745+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e0d110] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.745+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:42.745+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1386686481 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:42.747+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:42.748+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:42.752+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:42.753+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:42.755+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2260eee9]
2026-01-30T11:38:42.755+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ce7c61]
2026-01-30T11:38:42.758+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:42.759+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:42.760+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:42.760+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e0d110]
2026-01-30T11:38:42.761+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:42.761+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:42.762+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:42.763+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.764+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.764+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:42.767+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658301331 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:38:42.769+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:42.776+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:42.779+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:42.780+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.781+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd] from current transaction
2026-01-30T11:38:42.781+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:42.782+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.783+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:42.784+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.784+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd] from current transaction
2026-01-30T11:38:42.784+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:42.785+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.787+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:42.787+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.788+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd] from current transaction
2026-01-30T11:38:42.790+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:42.791+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:42.793+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:42.794+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.794+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd] from current transaction
2026-01-30T11:38:42.795+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:42.795+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.797+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:42.797+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.798+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.798+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.798+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe3c1bd]
2026-01-30T11:38:42.801+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.801+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7270e4d9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.802+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1199611102 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:42.802+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:42.802+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.805+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:42.805+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7270e4d9]
2026-01-30T11:38:42.805+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.807+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46802a4e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.811+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866338923 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:42.811+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:42.812+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.814+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:42.814+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46802a4e]
2026-01-30T11:38:42.815+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.815+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3357a530] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.816+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1950493518 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:42.816+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:42.816+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:42.818+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:42.818+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3357a530]
2026-01-30T11:38:42.819+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:42.819+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:38:42.820+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:42.835+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:38:42.837+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:38:42.843+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:38:42.843+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:38:42.844+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:42.846+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.846+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed2ca0e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.849+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@915533678 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:42.849+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:42.851+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.854+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:42.860+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed2ca0e]
2026-01-30T11:38:42.862+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.863+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2535486b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.863+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@634379110 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:42.865+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:42.866+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.869+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:42.875+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2535486b]
2026-01-30T11:38:42.882+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.883+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.884+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122906761 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:38:42.884+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:42.887+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:42.891+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:42.897+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.898+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490] from current transaction
2026-01-30T11:38:42.899+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:42.899+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.902+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:42.904+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.904+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490] from current transaction
2026-01-30T11:38:42.904+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:42.905+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.912+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:42.912+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.913+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490] from current transaction
2026-01-30T11:38:42.913+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:42.914+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:42.916+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:42.916+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.916+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490] from current transaction
2026-01-30T11:38:42.917+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:42.918+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.921+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:42.921+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.921+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.922+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.925+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3e6490]
2026-01-30T11:38:42.930+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.930+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbc111f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.931+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002585079 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:42.931+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:42.932+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.934+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:38:42.934+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cbc111f]
2026-01-30T11:38:42.934+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.935+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a44d8b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.935+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875674633 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:42.936+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:42.937+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:38:42.941+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:42.942+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33a44d8b]
2026-01-30T11:38:42.944+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:42.945+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dffc723] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:42.946+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480647938 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:42.946+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:42.947+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:42.948+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:42.948+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dffc723]
2026-01-30T11:38:42.949+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:42.950+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:38:42.951+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:52.913+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:52.913+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:52.914+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:52.914+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:52.914+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:38:52.917+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:52.917+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:52.917+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:52.917+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:52.918+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:52.918+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:38:52.918+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:52.918+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:52.918+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:52.919+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:52.919+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:38:52.919+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:52.919+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:52.919+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:52.919+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:52.920+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:38:52.920+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:52.920+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:52.920+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:52.920+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.925+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.920+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:38:52.930+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.921+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.924+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.925+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e5c4d5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.926+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157c88c8] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.931+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c7cbce] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.931+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@773005c7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.931+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5d8350] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.935+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208779424 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:52.935+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591806682 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:52.935+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654093439 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:52.935+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@509459179 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:52.937+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:52.942+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:52.942+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:52.942+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:52.943+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:52.945+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:52.946+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:52.947+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365387939 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:52.947+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:52.949+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:52.949+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:52.952+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:52.952+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:52.952+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:52.952+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:52.959+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c7cbce]
2026-01-30T11:38:52.961+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@157c88c8]
2026-01-30T11:38:52.961+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@773005c7]
2026-01-30T11:38:52.962+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e5c4d5]
2026-01-30T11:38:52.962+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:52.963+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.963+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.964+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:52.964+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.965+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:38:52.965+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d44274] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.966+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c1a89c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.967+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5d8350]
2026-01-30T11:38:52.967+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e125c6d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.968+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:52.975+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149271871 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:52.970+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1912772245 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:52.970+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@598397685 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:52.972+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.976+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:52.977+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:52.977+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:52.977+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc0605c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.977+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:52.978+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:52.978+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:52.979+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1490810929 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:52.980+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:52.982+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:52.983+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:52.983+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:52.984+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e125c6d]
2026-01-30T11:38:52.984+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d44274]
2026-01-30T11:38:52.985+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:52.986+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.986+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:52.987+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:52.987+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:52.988+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d61a4c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.988+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bc0605c]
2026-01-30T11:38:52.988+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:52.991+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c1a89c]
2026-01-30T11:38:52.992+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1884698912 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:52.995+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:52.992+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:52.995+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:52.996+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:52.996+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa2a01a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:52.999+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:53.002+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844686226 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.002+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:53.003+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:53.003+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.004+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:53.009+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:53.015+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:53.016+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:53.017+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:53.017+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:53.028+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d61a4c]
2026-01-30T11:38:53.026+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:53.029+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:53.029+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.030+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.030+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:53.030+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70482e1d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.031+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:53.033+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009812514 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.032+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f1c6d63] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.032+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:53.033+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa2a01a]
2026-01-30T11:38:53.034+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.034+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1324831405 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.034+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:53.035+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.035+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.035+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:53.036+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.036+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a232eb5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.041+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:53.041+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd0204b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.042+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436476827 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.043+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1497066148 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.044+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.044+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:53.044+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.045+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:53.049+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.049+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.050+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:53.052+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a232eb5]
2026-01-30T11:38:53.052+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70482e1d]
2026-01-30T11:38:53.052+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f1c6d63]
2026-01-30T11:38:53.054+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.058+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.058+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.060+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae05abc] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.058+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390fba1b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.059+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:53.061+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:53.064+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1450921974 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.064+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1787456777 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.065+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fd0204b]
2026-01-30T11:38:53.065+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.065+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.065+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:53.066+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.067+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.070+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:53.071+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dcab11] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.080+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:53.082+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@907019321 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.083+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.083+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:53.083+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:53.101+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:53.104+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae05abc]
2026-01-30T11:38:53.104+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390fba1b]
2026-01-30T11:38:53.105+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:53.105+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:53.108+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.108+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.108+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:53.108+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:53.109+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162d0fb4] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.110+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:53.111+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.114+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387700232 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.115+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:53.115+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.116+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:53.118+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:53.119+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cefb913] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.121+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:53.121+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:53.121+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:53.123+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@185981 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.125+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dcab11]
2026-01-30T11:38:53.128+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:53.128+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:53.129+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.131+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:53.133+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:53.133+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:53.133+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:53.134+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.134+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162d0fb4]
2026-01-30T11:38:53.137+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.135+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fea518d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.135+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.137+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74179afe] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.146+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179923815 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.140+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@286919013 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.145+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:53.152+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cefb913]
2026-01-30T11:38:53.153+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.151+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:53.152+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.152+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:53.154+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f68a7f8] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.161+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:53.161+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:53.162+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1579069479 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.163+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:53.163+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.164+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:53.164+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.168+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.172+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:53.176+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1b4a0a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.178+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fea518d]
2026-01-30T11:38:53.179+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74179afe]
2026-01-30T11:38:53.179+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033074869 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:53.180+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.180+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.180+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.180+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:53.180+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c25d5f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.181+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f68a7f8]
2026-01-30T11:38:53.181+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6edaea] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.182+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:53.182+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988351507 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.182+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.183+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627469779 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.183+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.184+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14569476] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.184+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:53.185+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.185+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590404707 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.186+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:53.186+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:53.192+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a1b4a0a]
2026-01-30T11:38:53.187+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:53.193+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.196+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6193c5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.194+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:53.196+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461032377 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:53.198+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.198+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:53.200+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:53.200+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c25d5f]
2026-01-30T11:38:53.201+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6edaea]
2026-01-30T11:38:53.201+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:53.204+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.208+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.212+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486736e7] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.209+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:53.213+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1397038219 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:53.214+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.214+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.216+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.220+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:53.221+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:53.225+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14569476]
2026-01-30T11:38:53.225+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.228+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e2b401] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.230+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1421306831 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.227+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:53.230+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:53.230+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.230+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.231+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:53.231+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6193c5]
2026-01-30T11:38:53.231+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@486736e7]
2026-01-30T11:38:53.232+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.233+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:53.233+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.233+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.234+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:53.235+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:53.246+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:53.247+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.248+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.249+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.250+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ae63d1] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.250+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74e2b401]
2026-01-30T11:38:53.251+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.254+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451606649 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.261+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:53.254+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:53.257+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:53.259+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.275+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:53.277+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.263+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:53.266+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:53.283+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:53.283+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:53.284+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:53.285+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.268+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:53.287+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c8430cd] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.306+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@271186948 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:53.307+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:53.309+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:53.288+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:53.315+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:53.316+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:53.337+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:53.346+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:53.352+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c8430cd]
2026-01-30T11:38:53.349+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ae63d1]
2026-01-30T11:38:53.355+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.360+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39141a1c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.351+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.353+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.361+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@445072900 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.364+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.366+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.363+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a6449b0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.363+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@243f9987] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.368+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230034837 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:53.369+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:53.370+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:53.368+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845855528 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.381+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.382+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.384+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.385+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39141a1c]
2026-01-30T11:38:53.387+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.387+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:53.388+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.391+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:53.394+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@243f9987]
2026-01-30T11:38:53.395+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a6449b0]
2026-01-30T11:38:53.396+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.397+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.397+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:53.411+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56279d71] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.411+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.412+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2116450252 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.413+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.430+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.426+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:53.433+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:53.445+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:53.448+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:53.447+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:53.451+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:53.452+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.453+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15cc3d26] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.453+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:53.453+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.456+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608555332 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.459+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:53.478+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56279d71]
2026-01-30T11:38:53.478+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:53.481+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:53.479+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:53.479+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.482+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:53.484+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@498bd7fc] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.485+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.487+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590153641 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.487+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@560f67f0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.487+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:53.494+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:53.491+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854075447 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:53.498+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:53.512+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:53.512+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15cc3d26]
2026-01-30T11:38:53.513+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.514+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:53.515+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106865be] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.515+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@498bd7fc]
2026-01-30T11:38:53.516+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689866136 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:53.518+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:53.519+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.520+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.520+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@560f67f0]
2026-01-30T11:38:53.521+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16477f94] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.522+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.528+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.529+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23359127 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.531+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c0f56c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.531+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.532+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@89995107 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:53.534+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.534+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:53.535+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:53.554+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.562+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.567+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106865be]
2026-01-30T11:38:53.567+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16477f94]
2026-01-30T11:38:53.568+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.569+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:53.570+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600d9439] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.571+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.576+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293679731 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.576+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:53.581+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:53.583+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:53.583+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c0f56c]
2026-01-30T11:38:53.584+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.585+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:53.587+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:53.595+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:53.596+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600d9439]
2026-01-30T11:38:53.596+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.597+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cafd2f0] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.598+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1343170816 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.598+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:53.600+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:53.603+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:53.607+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cafd2f0]
2026-01-30T11:38:53.609+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.611+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6476a970] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.612+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1181536092 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.612+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.612+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.614+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.615+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6476a970]
2026-01-30T11:38:53.615+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.615+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b641] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.616+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369219606 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.617+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:53.617+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:53.620+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:53.625+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b641]
2026-01-30T11:38:53.628+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:53.628+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b9fb9b2] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:53.628+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249091134 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:53.629+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:53.629+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:53.631+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:53.631+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b9fb9b2]
2026-01-30T11:38:53.631+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:53.632+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:53.633+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:56.460+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/64
2026-01-30T11:38:56.461+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:56.462+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/64
2026-01-30T11:38:56.462+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:56.463+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:56.464+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:56.466+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:56.467+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:56.467+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:56.467+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:56.467+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:56.468+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:56.469+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:56.469+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:56.470+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/64
2026-01-30T11:38:56.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:56.476+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:56.472+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:56.475+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.477+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359291e6] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.476+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/64
2026-01-30T11:38:56.476+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:56.477+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.482+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/64
2026-01-30T11:38:56.482+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.483+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b416dd3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.483+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/64", parameters={}
2026-01-30T11:38:56.483+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5feb106a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.485+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:56.486+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.536+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364072495 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:56.536+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537041864 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:56.536+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@572788018 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.550+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47495a73] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.552+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:56.553+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:56.553+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:56.554+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:56.555+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:56.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:56.602+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:56.602+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122557148 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:56.602+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:56.603+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:56.603+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5feb106a]
2026-01-30T11:38:56.607+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:56.608+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359291e6]
2026-01-30T11:38:56.609+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b416dd3]
2026-01-30T11:38:56.611+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:56.611+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.612+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.612+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.612+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:56.614+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3309ad46] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.614+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da44da3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.616+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:56.630+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464243683 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.631+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356725431 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:56.635+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:56.635+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:56.636+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:56.647+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:56.649+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:56.650+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47495a73]
2026-01-30T11:38:56.661+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.661+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:56.662+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5a406d] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.663+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:56.663+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:38:56.663+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3309ad46]
2026-01-30T11:38:56.664+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129360470 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:56.664+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@da44da3]
2026-01-30T11:38:56.664+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:56.665+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:56.665+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:38:56.665+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:56.665+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:56.666+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.666+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:38:56.667+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:56.667+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:56.671+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:38:56.675+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:56.684+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:38:56.685+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:56.687+09:00  INFO 268 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:38:56.688+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5a406d]
2026-01-30T11:38:56.694+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.695+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33475f72] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.698+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335194014 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.699+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:38:56.701+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:56.704+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:38:56.704+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.704+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33475f72]
2026-01-30T11:38:56.704+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.710+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:56.711+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361350572 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will be managed by Spring
2026-01-30T11:38:56.711+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:38:56.712+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:56.712+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:56.714+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:56.727+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:56.728+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.730+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25] from current transaction
2026-01-30T11:38:56.730+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:56.731+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.733+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:56.734+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.735+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25] from current transaction
2026-01-30T11:38:56.736+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:56.736+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.742+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-30T11:38:56.744+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.744+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25] from current transaction
2026-01-30T11:38:56.746+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:56.746+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.749+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:56.749+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.751+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.751+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.751+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b65dd25]
2026-01-30T11:38:56.754+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.755+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4098925a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.759+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879011050 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:56.760+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:56.760+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.763+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-30T11:38:56.763+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4098925a]
2026-01-30T11:38:56.763+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.764+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6a7654] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.764+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600398625 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:56.765+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:56.765+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.767+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:56.767+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b6a7654]
2026-01-30T11:38:56.768+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.768+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e34019] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.768+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823691271 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:56.769+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:56.770+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:56.775+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:56.777+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e34019]
2026-01-30T11:38:56.777+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:56.778+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=64, drafterId=6, r (truncated)...]
2026-01-30T11:38:56.779+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:56.781+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/64
2026-01-30T11:38:56.783+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/64
2026-01-30T11:38:56.784+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/64
2026-01-30T11:38:56.784+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/64", parameters={}
2026-01-30T11:38:56.784+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:38:56.785+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.785+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b460e2a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.786+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@106603333 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.787+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:38:56.790+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.795+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:38:56.795+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b460e2a]
2026-01-30T11:38:56.795+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.796+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635e69db] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.796+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481776324 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.797+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:56.797+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.799+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:56.799+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635e69db]
2026-01-30T11:38:56.803+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.817+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.824+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960562651 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:38:56.824+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:56.825+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:38:56.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:38:56.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.829+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49] from current transaction
2026-01-30T11:38:56.830+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:38:56.831+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.833+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:38:56.833+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.833+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49] from current transaction
2026-01-30T11:38:56.833+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:56.834+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.836+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-30T11:38:56.836+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.842+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49] from current transaction
2026-01-30T11:38:56.845+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:56.846+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.847+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:38:56.847+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.848+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.849+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.849+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bd2e49]
2026-01-30T11:38:56.853+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.853+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4feeaa] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.854+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@759423086 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.858+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:38:56.859+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.864+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 2
2026-01-30T11:38:56.864+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f4feeaa]
2026-01-30T11:38:56.864+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.865+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69600739] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.865+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@422219265 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.865+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:38:56.866+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 64(Long), 3(Long)
2026-01-30T11:38:56.870+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:38:56.870+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69600739]
2026-01-30T11:38:56.874+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:56.875+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2710a97a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:56.875+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1386339114 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:56.876+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:56.877+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:56.878+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:56.879+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2710a97a]
2026-01-30T11:38:56.879+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:56.881+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=64, drafterId=6, r (truncated)...]
2026-01-30T11:38:56.883+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.070+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:58.071+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:58.073+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:58.073+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:58.075+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:38:58.077+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:58.078+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:58.078+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:58.079+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:58.079+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:38:58.079+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:58.080+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:58.082+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:58.083+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.084+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea838a9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.079+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:58.085+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:58.080+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:58.096+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:58.080+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:58.080+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:38:58.093+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:58.097+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:58.097+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:58.099+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:38:58.099+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.100+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.100+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:58.101+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:38:58.101+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f65ddca] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.101+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76753b50] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.102+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.102+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.104+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@224795364 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.111+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2446d3e9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.112+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6067515e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.112+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.114+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.115+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@230389822 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.115+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@569439631 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.125+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.126+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:58.126+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.128+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:58.129+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773110746 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.129+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@944891325 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:58.130+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.131+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:58.131+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:58.133+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:58.133+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.133+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.133+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:58.133+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea838a9]
2026-01-30T11:38:58.134+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76753b50]
2026-01-30T11:38:58.134+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f65ddca]
2026-01-30T11:38:58.134+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.135+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.135+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.135+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:58.135+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:58.136+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45019bbe] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.136+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d224fd] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.137+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cd886a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.138+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6067515e]
2026-01-30T11:38:58.138+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2446d3e9]
2026-01-30T11:38:58.138+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117185132 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.139+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1478819657 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.140+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287990419 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.141+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.141+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.141+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.142+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.142+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:58.143+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c192668] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.143+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:38:58.143+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.144+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:58.145+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810379935 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.145+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.145+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.149+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.152+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.153+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.153+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:58.154+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45019bbe]
2026-01-30T11:38:58.154+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d224fd]
2026-01-30T11:38:58.154+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28cd886a]
2026-01-30T11:38:58.158+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.159+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.159+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.160+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.160+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:58.161+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47bbc693] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.163+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.161+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c192668]
2026-01-30T11:38:58.163+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:58.164+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364780885 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.166+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.168+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.171+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:58.171+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:58.171+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48f1ef] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.173+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:58.180+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:58.181+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:58.182+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@676838984 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.183+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:58.183+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:58.183+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:58.186+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:58.184+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:58.185+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:58.191+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:58.191+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:58.193+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:58.194+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:58.194+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47bbc693]
2026-01-30T11:38:58.194+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.195+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:58.195+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.195+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.196+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23710fe9] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.196+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48f1ef]
2026-01-30T11:38:58.196+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24fbe408] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.197+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6088607a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.198+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567417692 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.198+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.199+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186477665 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:58.199+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2032053670 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.199+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.200+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef6d004] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.200+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:58.200+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.201+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.201+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953209276 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.202+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:58.202+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.203+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.207+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.211+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:58.211+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:58.211+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.214+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23710fe9]
2026-01-30T11:38:58.214+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24fbe408]
2026-01-30T11:38:58.214+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6088607a]
2026-01-30T11:38:58.215+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.215+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.216+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.216+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141bf33] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.216+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2790f003] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.217+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.217+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@174383797 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.218+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546685277 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:58.219+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779968774 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.221+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.227+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:58.228+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:58.229+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.231+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:58.233+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:58.234+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.237+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef6d004]
2026-01-30T11:38:58.237+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.244+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.245+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2141bf33]
2026-01-30T11:38:58.246+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:58.247+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:58.247+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.248+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.249+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2790f003]
2026-01-30T11:38:58.250+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:58.252+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:38:58.253+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.256+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.256+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:58.263+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:58.263+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:38:58.264+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d554b66]
2026-01-30T11:38:58.266+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:58.267+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.269+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:38:58.270+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.276+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:58.279+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:38:58.279+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192f7f4a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.280+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:58.280+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:58.282+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:38:58.282+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1040587122 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.283+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:58.287+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:58.292+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:58.290+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.291+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:58.292+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:58.296+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.299+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e69c08] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.303+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:58.303+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:58.304+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1db75584] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.308+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@408157577 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.310+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:58.310+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1672101283 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.311+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.311+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.314+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.317+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.320+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.317+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4151abca] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.317+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:58.323+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@192f7f4a]
2026-01-30T11:38:58.321+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2126608468 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.326+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.327+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd56a7b] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.327+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:58.327+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:58.327+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:38:58.328+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@803379620 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.328+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:58.328+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1db75584]
2026-01-30T11:38:58.329+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11e69c08]
2026-01-30T11:38:58.329+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.330+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.334+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.334+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:58.335+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.335+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610415e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.335+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@118852b5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.336+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4151abca]
2026-01-30T11:38:58.338+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564936557 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.341+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875268688 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.341+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.342+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.342+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.342+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ddd1f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.343+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.344+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.344+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293825534 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.345+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.346+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:58.346+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dd56a7b]
2026-01-30T11:38:58.348+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:58.348+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.348+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.349+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8a2f70] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.349+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.349+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610415e]
2026-01-30T11:38:58.350+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@118852b5]
2026-01-30T11:38:58.351+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@233440968 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.352+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.352+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.353+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:58.353+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:58.355+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:58.358+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ff86fe] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.360+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:58.361+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ddd1f4]
2026-01-30T11:38:58.361+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.362+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@632389486 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.367+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:58.363+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:58.364+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.369+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:38:58.375+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:58.377+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:58.378+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:58.379+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.379+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:58.380+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:58.383+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:58.386+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8a2f70]
2026-01-30T11:38:58.386+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:58.387+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:58.392+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.393+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:38:58.395+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.396+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b5b3d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.396+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:58.396+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76ff86fe]
2026-01-30T11:38:58.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4666d49a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.397+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@603913789 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:38:58.397+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:58.398+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.398+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657853690 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:58.398+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.399+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:58.399+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622beb11] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.399+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.401+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.401+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.402+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760123356 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.402+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.403+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2956b57f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.403+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.404+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1615005568 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.415+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:58.416+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.416+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:58.418+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.418+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:58.418+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b5b3d4]
2026-01-30T11:38:58.418+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4666d49a]
2026-01-30T11:38:58.418+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622beb11]
2026-01-30T11:38:58.419+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.419+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.419+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.420+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:58.420+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63062f] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.420+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:38:58.425+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:58.427+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.429+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1892798653 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:38:58.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.431+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2956b57f]
2026-01-30T11:38:58.435+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.444+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.445+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.445+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390a6a47] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.447+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627826004 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.447+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:38:58.464+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:58.464+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.469+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:38:58.470+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:58.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63062f]
2026-01-30T11:38:58.475+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.477+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:58.472+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:38:58.479+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.482+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:38:58.483+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:38:58.492+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.490+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:38:58.494+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f056348] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.495+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:38:58.502+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:58.512+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:38:58.512+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@189742106 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.512+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390a6a47]
2026-01-30T11:38:58.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:38:58.513+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.513+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.514+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:38:58.529+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.534+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:58.535+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.535+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.546+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a39880e] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.549+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:38:58.553+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926693821 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.564+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:38:58.556+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:38:58.566+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:38:58.566+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:38:58.567+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:38:58.568+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:38:58.569+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.572+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.574+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f056348]
2026-01-30T11:38:58.575+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46fdf4a3] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.575+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.576+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1793684328 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.577+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b010630] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.579+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:38:58.579+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528098619 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.585+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:38:58.585+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.590+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:38:58.599+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.601+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a39880e]
2026-01-30T11:38:58.602+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.610+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:38:58.614+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65591218] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.615+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.616+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46fdf4a3]
2026-01-30T11:38:58.617+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1132891973 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:38:58.617+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b010630]
2026-01-30T11:38:58.617+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.617+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.618+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.618+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ddf03c] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.620+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.620+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad9a94a] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.621+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464273960 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:38:58.623+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689570983 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.625+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:38:58.627+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:58.629+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:38:58.632+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:58.636+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.647+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65591218]
2026-01-30T11:38:58.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.650+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:38:58.650+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:58.652+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:38:58.653+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ddf03c]
2026-01-30T11:38:58.654+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ad9a94a]
2026-01-30T11:38:58.656+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.662+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.663+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.670+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:38:58.679+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31df48e5] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.680+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:38:58.680+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@643507309 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.692+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.692+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.729+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.766+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31df48e5]
2026-01-30T11:38:58.768+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.769+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bafa33] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.771+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323897345 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.779+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:58.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:58.794+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:58.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bafa33]
2026-01-30T11:38:58.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.797+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc7626] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.797+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441099660 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.798+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:38:58.800+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:38:58.804+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:38:58.806+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dc7626]
2026-01-30T11:38:58.807+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.809+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134bda62] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.817+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000876395 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.834+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.835+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.837+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.839+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134bda62]
2026-01-30T11:38:58.841+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.845+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0d1f41] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.847+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205361832 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.849+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:38:58.850+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:38:58.853+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:38:58.854+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0d1f41]
2026-01-30T11:38:58.858+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:38:58.859+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5be3414] was not registered for synchronization because synchronization is not active
2026-01-30T11:38:58.861+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739314421 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:38:58.861+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:38:58.861+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:38:58.863+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:38:58.864+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5be3414]
2026-01-30T11:38:58.864+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:38:58.865+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:38:58.866+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:26.616+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:26.617+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:26.618+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-30T11:39:26.619+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:26.618+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:39:26.619+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:26.619+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:26.619+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/75
2026-01-30T11:39:26.620+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:26.620+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:26.620+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:39:26.620+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-30T11:39:26.620+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:26.620+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:26.621+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:39:26.621+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-30T11:39:26.622+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:26.625+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:39:26.625+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.625+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.625+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:39:26.626+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8dc1be] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.626+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.627+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed13a18] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.626+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e0abd] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.626+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:39:26.632+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964979432 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:26.633+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:39:26.633+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:26.633+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1843486785 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.633+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.634+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2052910974 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:26.636+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:26.636+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:39:26.641+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.637+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cc84bba] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.637+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:26.649+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:26.650+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:26.650+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d8dc1be]
2026-01-30T11:39:26.652+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.653+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1544318165 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:26.657+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73d9ee29] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.658+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:39:26.659+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294074839 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:26.659+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:26.660+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:26.663+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:26.663+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:39:26.663+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:26.665+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed13a18]
2026-01-30T11:39:26.665+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25e0abd]
2026-01-30T11:39:26.665+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.665+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.666+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25feadf8] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.667+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40159d83] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.667+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:39:26.667+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@349241654 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.667+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364831110 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:26.668+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cc84bba]
2026-01-30T11:39:26.668+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:26.668+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:26.668+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:26.669+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73d9ee29]
2026-01-30T11:39:26.669+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:26.669+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.669+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:26.670+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:26.670+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:39:26.671+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:26.674+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:26.677+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:26.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:26.678+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:26.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40159d83]
2026-01-30T11:39:26.678+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25feadf8]
2026-01-30T11:39:26.678+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:39:26.679+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:26.680+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:26.682+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:39:26.684+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:26.685+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:39:26.687+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:39:26.694+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:39:26.695+09:00  INFO 268 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:39:26.696+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.697+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b24f5fb] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.698+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.699+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.699+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@342850629 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:26.699+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1860906970 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:39:26.700+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:39:26.700+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:26.700+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:26.701+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:39:26.703+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:39:26.704+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b24f5fb]
2026-01-30T11:39:26.704+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:26.706+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:39:26.707+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:39:26.707+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.708+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0] from current transaction
2026-01-30T11:39:26.708+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:26.708+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:26.714+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.715+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:26.716+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.716+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0] from current transaction
2026-01-30T11:39:26.716+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:26.717+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.719+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:26.719+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.719+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0] from current transaction
2026-01-30T11:39:26.720+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:26.720+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:26.722+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:26.723+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.724+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0] from current transaction
2026-01-30T11:39:26.724+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:26.725+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 92(Long), 3(Long)
2026-01-30T11:39:26.728+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:39:26.728+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@226ea0c0]
2026-01-30T11:39:26.732+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.733+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ba6861] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.733+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@934847740 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.733+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:26.733+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.736+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:26.736+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ba6861]
2026-01-30T11:39:26.736+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24484f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@680988093 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:26.740+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.744+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:39:26.745+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24484f4]
2026-01-30T11:39:26.745+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.745+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a5f7f7] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.746+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002827795 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.746+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:26.747+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:26.748+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:26.748+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a5f7f7]
2026-01-30T11:39:26.749+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:26.750+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=6, r (truncated)...]
2026-01-30T11:39:26.750+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:26.752+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-30T11:39:26.754+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/75
2026-01-30T11:39:26.758+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-30T11:39:26.759+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-30T11:39:26.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:39:26.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be4be3a] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.762+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360773374 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.762+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:39:26.763+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.765+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:39:26.767+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be4be3a]
2026-01-30T11:39:26.767+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.767+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5527aea3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.769+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@469552979 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.770+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:26.777+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.780+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:26.781+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5527aea3]
2026-01-30T11:39:26.784+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.784+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.785+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755134728 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:39:26.785+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:26.786+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:39:26.792+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:39:26.793+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.793+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e] from current transaction
2026-01-30T11:39:26.794+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:26.794+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.796+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:26.796+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.796+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e] from current transaction
2026-01-30T11:39:26.797+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:26.797+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.800+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:26.800+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.800+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e] from current transaction
2026-01-30T11:39:26.800+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:26.801+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:26.802+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:26.802+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.803+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e] from current transaction
2026-01-30T11:39:26.803+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:26.803+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 92(Long), 3(Long)
2026-01-30T11:39:26.808+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:39:26.809+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.810+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.811+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.811+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5c130e]
2026-01-30T11:39:26.816+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.817+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ec68c3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.819+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1961888513 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.821+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:26.825+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.827+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:26.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40ec68c3]
2026-01-30T11:39:26.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.829+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eccb904] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.832+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491091054 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.832+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:26.832+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:39:26.834+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:39:26.835+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eccb904]
2026-01-30T11:39:26.835+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:26.836+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa10b32] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:26.836+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@75406683 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:26.837+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:26.837+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:26.840+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:26.841+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa10b32]
2026-01-30T11:39:26.843+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:26.844+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=6, r (truncated)...]
2026-01-30T11:39:26.844+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.183+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:28.185+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:28.185+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:39:28.186+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:39:28.187+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:39:28.191+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:28.192+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:28.192+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:39:28.193+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:39:28.193+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:39:28.193+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:28.193+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:28.194+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:39:28.194+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:39:28.195+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:39:28.195+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:28.197+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:28.197+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:39:28.198+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:39:28.198+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:39:28.199+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:28.199+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:28.200+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:39:28.201+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:39:28.210+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.216+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce88edb] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.202+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:39:28.202+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.203+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.220+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51b04089] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.209+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.223+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57890986] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.219+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.219+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5abfb3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.225+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271b0b87] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.231+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942806832 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.232+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090042867 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.232+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28797519 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.232+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1194719783 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:28.233+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@722311006 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.233+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.234+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.235+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.235+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:28.279+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:28.236+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:28.236+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.237+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.241+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.281+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:28.333+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.333+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:28.333+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:28.340+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57890986]
2026-01-30T11:39:28.340+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5abfb3]
2026-01-30T11:39:28.340+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@271b0b87]
2026-01-30T11:39:28.342+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:39:28.342+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:28.343+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.344+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.362+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d3f6ef] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.363+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989592928 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:28.363+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:28.364+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:28.344+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.353+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce88edb]
2026-01-30T11:39:28.354+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51b04089]
2026-01-30T11:39:28.361+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2bcafe] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.367+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:39:28.368+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.369+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1720789751 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.369+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.376+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74823a8b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.377+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b402646] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.377+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.381+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1548117472 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.382+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49161348 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.384+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.384+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.385+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.386+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.386+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.387+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:28.392+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d3f6ef]
2026-01-30T11:39:28.395+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.396+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:28.397+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.401+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.401+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.403+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:28.407+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.408+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2bcafe]
2026-01-30T11:39:28.408+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b402646]
2026-01-30T11:39:28.410+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74823a8b]
2026-01-30T11:39:28.410+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.417+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0a269b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.410+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:28.410+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.417+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.418+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973502750 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.419+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:28.421+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:28.418+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:28.418+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:28.418+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3aa0af] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.428+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477018593 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.432+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:28.426+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:28.427+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.432+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:39:28.433+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:28.447+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.449+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:28.449+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ab3fc8] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.451+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:28.451+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96413298 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.452+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:28.452+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:28.453+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:28.453+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:28.454+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:39:28.456+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:28.457+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:28.457+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a0a269b]
2026-01-30T11:39:28.457+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d3aa0af]
2026-01-30T11:39:28.459+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.460+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.460+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.461+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:28.461+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@592dc8ab] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.462+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238a41c8] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.462+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d75e380] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.462+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39ab3fc8]
2026-01-30T11:39:28.463+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@901296008 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.463+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942642652 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.463+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965168473 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.464+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.464+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.464+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.464+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.465+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507cdee7] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.466+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.466+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.466+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.467+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818544223 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.470+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:28.470+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:28.470+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.475+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238a41c8]
2026-01-30T11:39:28.476+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:28.477+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.478+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.478+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@592dc8ab]
2026-01-30T11:39:28.478+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d75e380]
2026-01-30T11:39:28.479+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:28.479+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dba5fba] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.480+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.481+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.481+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507cdee7]
2026-01-30T11:39:28.481+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1825561028 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.482+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7998559e] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.483+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:39:28.483+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.485+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:28.486+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313321622 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.486+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.487+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:28.492+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:28.493+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.494+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:39:28.496+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.500+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.501+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:28.503+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:39:28.509+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:28.509+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:39:28.514+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:39:28.511+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:28.513+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:28.514+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:39:28.515+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:28.515+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.516+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dba5fba]
2026-01-30T11:39:28.516+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.517+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:28.517+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7998559e]
2026-01-30T11:39:28.517+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.517+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e6cee7] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.518+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.519+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.519+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f421e] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.520+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009730394 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.520+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cdce6d6] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.520+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:28.521+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280461772 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:28.523+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.526+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68602140 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.527+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.529+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:28.530+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:28.537+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:28.531+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.532+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:28.543+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:28.549+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:28.551+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:28.550+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:28.551+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3f421e]
2026-01-30T11:39:28.551+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:39:28.553+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:28.553+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.553+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16e6cee7]
2026-01-30T11:39:28.554+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:28.554+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b5076c7] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.556+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.556+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:28.557+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.558+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1591407617 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:28.559+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29234469] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.559+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cdce6d6]
2026-01-30T11:39:28.559+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15f6fad3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.559+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.559+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160573020 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.560+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113164740 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ea6a96] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.561+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.562+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.562+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560003307 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.563+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.563+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.563+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:28.565+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:28.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b5076c7]
2026-01-30T11:39:28.567+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.567+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:28.567+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29234469]
2026-01-30T11:39:28.567+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.568+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15f6fad3]
2026-01-30T11:39:28.568+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.568+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5315810a] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.569+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.569+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b6e8d3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.570+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73af98e7] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.570+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@730538977 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:28.570+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1132849824 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.570+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370342435 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.570+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:28.571+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:28.575+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:28.571+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:28.574+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.575+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ea6a96]
2026-01-30T11:39:28.577+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:39:28.578+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.578+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.579+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:28.581+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.593+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:28.594+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.595+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:39:28.595+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:28.599+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73af98e7]
2026-01-30T11:39:28.599+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70b6e8d3]
2026-01-30T11:39:28.600+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:28.600+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5315810a]
2026-01-30T11:39:28.600+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.601+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.602+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:28.603+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.608+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:28.610+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ffb4fc6] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.611+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:28.611+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d07dbca] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.613+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.620+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416072858 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.623+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:28.632+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:28.633+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390740145 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:28.645+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.647+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.647+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:28.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.647+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.647+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de8b297] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:28.648+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.649+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480310389 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.650+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:28.649+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:28.652+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:28.652+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:28.653+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.658+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6761101] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.659+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708766638 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.660+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.660+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.662+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d07dbca]
2026-01-30T11:39:28.662+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ffb4fc6]
2026-01-30T11:39:28.662+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:28.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.664+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.664+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.665+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de8b297]
2026-01-30T11:39:28.665+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:39:28.665+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:39:28.666+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.667+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.667+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.670+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:39:28.670+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b2c654b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.684+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588783283 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:28.685+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:28.691+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:28.683+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:39:28.695+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:39:28.696+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:39:28.696+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:28.712+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:39:28.712+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6761101]
2026-01-30T11:39:28.713+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.713+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.717+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4301343e] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.727+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237a2e04] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.727+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1767462926 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.728+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364043635 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.728+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.728+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.729+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.730+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:28.736+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b2c654b]
2026-01-30T11:39:28.737+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.748+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:28.748+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.748+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.750+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.750+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237a2e04]
2026-01-30T11:39:28.750+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4301343e]
2026-01-30T11:39:28.754+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.757+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.759+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:28.761+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cca3c98] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.762+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.764+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908085243 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.767+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.767+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.778+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:28.784+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:28.779+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:28.785+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:28.786+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:28.816+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.834+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cca3c98]
2026-01-30T11:39:28.835+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.835+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b39ecac] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.836+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@649736111 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.836+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:28.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:28.834+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:28.849+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:28.849+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:28.849+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:28.850+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.850+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:28.856+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.856+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c987f0] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.857+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@552921128 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:28.853+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac7087a] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.862+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:28.863+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@412911425 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.863+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:28.866+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:28.866+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b39ecac]
2026-01-30T11:39:28.878+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:28.878+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.879+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c98b6f] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.879+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@349262166 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.880+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:28.881+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.884+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c987f0]
2026-01-30T11:39:28.885+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.885+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.886+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9f25c9] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.886+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120835981 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:28.887+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.895+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:28.896+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.896+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac7087a]
2026-01-30T11:39:28.897+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.900+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.902+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1880f4d3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.903+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50c98b6f]
2026-01-30T11:39:28.903+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169261921 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:28.904+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.904+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:28.905+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb7dd1f] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.906+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:28.909+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1614390037 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.911+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:28.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:28.918+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.919+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9f25c9]
2026-01-30T11:39:28.921+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.922+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:28.923+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:28.923+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cb7dd1f]
2026-01-30T11:39:28.924+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.924+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.931+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e9912d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.932+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:28.934+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375009130 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.934+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1880f4d3]
2026-01-30T11:39:28.935+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:28.936+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.943+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:28.944+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:28.945+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:28.960+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:28.960+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13e9912d]
2026-01-30T11:39:28.962+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.963+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b72a5d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.963+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1023983583 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.964+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.965+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.967+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.968+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62b72a5d]
2026-01-30T11:39:28.969+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.970+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c90c06] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.971+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720844192 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.972+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:28.976+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:28.979+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:28.979+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71c90c06]
2026-01-30T11:39:28.979+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:28.979+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108ff952] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:28.981+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698314361 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:28.981+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:28.982+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:28.984+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:28.988+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@108ff952]
2026-01-30T11:39:28.991+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:28.992+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:39:28.995+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:45.283+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/65
2026-01-30T11:39:45.284+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/65
2026-01-30T11:39:45.285+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:45.287+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:45.307+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:45.310+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:45.311+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:45.296+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:39:45.302+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:45.311+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:45.313+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:39:45.313+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:45.314+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:45.314+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.314+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:39:45.314+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:45.315+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.315+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:39:45.315+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.317+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@471f0082] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.317+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:39:45.319+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:39:45.320+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.323+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/65
2026-01-30T11:39:45.361+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f00c0f] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.365+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/65
2026-01-30T11:39:45.367+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/65
2026-01-30T11:39:45.367+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@786381457 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:45.368+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@953069134 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:45.377+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:45.370+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/65", parameters={}
2026-01-30T11:39:45.370+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:45.380+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:45.381+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:39:45.383+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:45.384+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.385+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8bbb4b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.396+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166747469 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:45.399+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:39:45.401+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:45.402+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336519992 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:45.408+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:39:45.402+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:45.409+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43d8b8d9]
2026-01-30T11:39:45.402+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:45.409+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.411+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@471f0082]
2026-01-30T11:39:45.412+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbb75e6] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.412+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228400328 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:45.413+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cfc031b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:45.415+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376180478 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:45.415+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:45.415+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:45.416+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:45.418+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:45.418+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:39:45.427+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbb75e6]
2026-01-30T11:39:45.429+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:39:45.430+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f00c0f]
2026-01-30T11:39:45.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:45.432+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e8bbb4b]
2026-01-30T11:39:45.433+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:45.434+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:45.434+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:45.434+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.435+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cfc031b]
2026-01-30T11:39:45.435+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:39:45.435+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5818ee4] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.436+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:45.436+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:45.436+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:45.437+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1416036844 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:45.466+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:45.467+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.452+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:39:45.453+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:45.470+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:45.471+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:39:45.479+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:39:45.480+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:39:45.480+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:39:45.483+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:39:45.494+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.496+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5963502d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.496+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:45.497+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2113308581 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:45.500+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5818ee4]
2026-01-30T11:39:45.501+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:39:45.502+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:45.511+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:39:45.512+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5963502d]
2026-01-30T11:39:45.513+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:45.514+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.514+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:39:45.514+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.515+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:45.516+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1284910067 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:39:45.517+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:45.527+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:39:45.532+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:39:45.534+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.535+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b] from current transaction
2026-01-30T11:39:45.537+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:45.540+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.545+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:45.545+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.547+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b] from current transaction
2026-01-30T11:39:45.547+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:45.548+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.563+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:45.565+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.568+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b] from current transaction
2026-01-30T11:39:45.569+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:45.569+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.576+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:39:45.578+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.578+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.579+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.579+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@296d6b1b]
2026-01-30T11:39:45.586+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.586+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436be752] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.592+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1201762674 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:45.593+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:45.595+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.603+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:45.610+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@436be752]
2026-01-30T11:39:45.610+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.611+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ddaf8f] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.612+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@84970129 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:45.613+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:45.613+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.615+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:39:45.615+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19ddaf8f]
2026-01-30T11:39:45.616+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.616+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10d9a8e9] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.618+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1686949034 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:45.619+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:45.619+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:45.627+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:45.628+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10d9a8e9]
2026-01-30T11:39:45.629+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:45.629+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=65, drafterId=7, r (truncated)...]
2026-01-30T11:39:45.632+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:45.650+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/65
2026-01-30T11:39:45.663+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/65
2026-01-30T11:39:45.675+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/65
2026-01-30T11:39:45.677+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/65", parameters={}
2026-01-30T11:39:45.681+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:39:45.682+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.684+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5401193] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.698+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@621491721 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:45.698+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:39:45.698+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.700+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:39:45.700+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5401193]
2026-01-30T11:39:45.701+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.701+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3203c95d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.701+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651905010 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:45.702+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:45.703+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.710+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:45.710+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3203c95d]
2026-01-30T11:39:45.713+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.714+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.715+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@50543578 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:39:45.715+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:45.716+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:39:45.719+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:39:45.724+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.724+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49] from current transaction
2026-01-30T11:39:45.725+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:45.730+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.747+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:45.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49] from current transaction
2026-01-30T11:39:45.749+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:45.750+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.770+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:45.771+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.772+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49] from current transaction
2026-01-30T11:39:45.777+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:45.777+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:39:45.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcd3e49]
2026-01-30T11:39:45.785+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.786+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b49a822] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.787+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1086376702 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:45.787+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:45.788+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.790+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:45.791+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b49a822]
2026-01-30T11:39:45.791+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.792+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6381b68b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.793+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360647265 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:45.793+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:45.793+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:39:45.795+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:39:45.795+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6381b68b]
2026-01-30T11:39:45.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:45.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db47c5a] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:45.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676654217 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:45.797+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:45.797+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:45.801+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:45.801+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@db47c5a]
2026-01-30T11:39:45.802+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:45.804+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=65, drafterId=7, r (truncated)...]
2026-01-30T11:39:45.807+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.252+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:47.254+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:47.256+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:39:47.256+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:47.257+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:39:47.259+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:39:47.260+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:47.261+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:39:47.260+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:39:47.263+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:39:47.260+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:47.261+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:47.261+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:39:47.262+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:39:47.263+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:39:47.264+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:47.264+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:47.265+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:39:47.265+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:39:47.266+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:39:47.266+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:47.268+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.268+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@711c4ae5] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.266+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:47.267+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:39:47.269+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:39:47.267+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:39:47.268+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.269+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.276+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.278+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.281+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7550ad6] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.279+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ba5042] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.280+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd93615] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.280+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5727f517] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.281+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121128529 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.284+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931234706 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.285+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@422460227 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.286+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.286+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.287+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.290+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.292+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1735815643 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.292+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936509722 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.339+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.340+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.341+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:47.341+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:47.344+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:47.345+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:47.390+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:47.395+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5727f517]
2026-01-30T11:39:47.397+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.399+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:39:47.400+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.401+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:39:47.401+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:47.402+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.403+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@711c4ae5]
2026-01-30T11:39:47.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7550ad6]
2026-01-30T11:39:47.403+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd93615]
2026-01-30T11:39:47.417+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.418+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.418+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.420+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4756a657] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.420+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6466a8a4] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.420+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2329b86b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.421+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932561479 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.421+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2061078361 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38303441 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.427+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.428+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:47.428+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.431+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.432+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:47.435+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:47.442+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ba5042]
2026-01-30T11:39:47.445+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.445+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.445+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.446+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:47.446+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@659a4e3d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.447+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4756a657]
2026-01-30T11:39:47.447+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6466a8a4]
2026-01-30T11:39:47.447+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2329b86b]
2026-01-30T11:39:47.449+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755309928 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.449+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.450+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.450+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.451+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.452+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167be9bd] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.452+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6b890d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.452+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:47.453+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.454+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1693290811 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.455+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186198380 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.458+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.463+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:47.463+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:47.478+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:47.478+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:47.479+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:39:47.480+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.481+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:47.481+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@659a4e3d]
2026-01-30T11:39:47.485+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:47.486+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.486+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:47.487+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:39:47.488+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:47.493+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:47.495+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:47.495+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a6b890d]
2026-01-30T11:39:47.495+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@167be9bd]
2026-01-30T11:39:47.497+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.500+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.500+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.501+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.513+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:47.513+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637a94d6] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.513+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ec625] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.514+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fce1534] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.515+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026253453 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.517+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:47.515+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:47.515+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@35329102 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.516+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@372320625 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.530+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:47.531+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:47.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.532+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.533+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:47.533+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.533+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.537+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:47.541+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:47.547+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.547+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637a94d6]
2026-01-30T11:39:47.548+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.547+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.548+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.548+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5686eede] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.549+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31198e8b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.549+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ec625]
2026-01-30T11:39:47.549+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fce1534]
2026-01-30T11:39:47.553+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.550+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@447667150 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.552+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108159066 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.552+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.554+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e9fc488] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.554+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.556+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:47.556+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:39:47.558+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641488346 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:47.563+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.564+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:47.565+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.566+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:47.575+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:39:47.579+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:39:47.581+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:39:47.585+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:39:47.594+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:39:47.595+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:47.595+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:47.596+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:47.598+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e9fc488]
2026-01-30T11:39:47.598+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.599+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82f921d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.597+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.597+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5686eede]
2026-01-30T11:39:47.597+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31198e8b]
2026-01-30T11:39:47.600+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941931540 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.601+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab860d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.601+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.601+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.601+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:47.603+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@689547158 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.618+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dbbb92] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.619+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:47.630+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:47.631+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.631+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1229606985 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.632+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.635+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.635+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.644+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:47.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:47.652+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:47.652+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:47.652+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@82f921d]
2026-01-30T11:39:47.659+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:47.659+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.661+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9cffa47] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.660+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:47.662+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2105818649 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.663+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.663+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:39:47.666+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.667+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.670+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28dbbb92]
2026-01-30T11:39:47.673+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab860d4]
2026-01-30T11:39:47.679+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e49a0e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.680+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.683+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.683+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.694+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd9365] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.684+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1133169952 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.692+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:47.695+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776662410 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.697+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.696+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:47.696+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.698+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.699+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:47.709+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.713+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:47.714+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9cffa47]
2026-01-30T11:39:47.716+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.716+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:47.718+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2322acda] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.718+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:47.719+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.719+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:47.727+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430873915 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.727+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e49a0e0]
2026-01-30T11:39:47.727+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dd9365]
2026-01-30T11:39:47.728+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:47.728+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:47.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.729+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.729+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:47.730+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:47.730+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b48225] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.730+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741b5312] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.732+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.734+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992571763 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.736+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532066383 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.736+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280e76ad] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.736+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:47.736+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:47.737+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:47.741+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2322acda]
2026-01-30T11:39:47.743+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.737+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108431706 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.738+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:47.741+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:39:47.743+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e9f11] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.743+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.746+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814524280 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.748+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.749+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.749+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:47.749+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:39:47.752+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b48225]
2026-01-30T11:39:47.754+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:47.759+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280e76ad]
2026-01-30T11:39:47.761+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.756+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741b5312]
2026-01-30T11:39:47.757+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.762+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62c3895e] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.762+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.762+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:47.764+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958603445 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.764+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7220335b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.764+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.765+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.765+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.767+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1552776654 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.767+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67e9f11]
2026-01-30T11:39:47.768+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.769+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:47.775+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.778+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.780+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:47.780+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.781+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:39:47.782+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:47.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.785+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:47.786+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:47.793+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:39:47.795+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.796+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.796+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fa88550] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.797+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62c3895e]
2026-01-30T11:39:47.797+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:39:47.798+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7220335b]
2026-01-30T11:39:47.799+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60027355 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.799+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.799+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:39:47.800+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.801+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:47.801+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:47.802+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:39:47.802+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:39:47.803+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:47.804+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:39:47.804+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.811+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.815+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.818+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218fd685] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.827+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:47.827+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1326172223 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.829+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.829+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.829+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:47.830+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:47.830+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:47.831+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:47.832+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.832+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77dd3dc2] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.832+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082224290 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.832+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.834+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.836+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.837+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218fd685]
2026-01-30T11:39:47.837+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.837+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79986cba] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.838+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@645703410 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.838+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.839+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.841+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:47.841+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fa88550]
2026-01-30T11:39:47.842+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.842+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5963d153] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.843+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925864746 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:47.843+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:47.844+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:47.851+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.851+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:47.851+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:47.851+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79986cba]
2026-01-30T11:39:47.851+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5963d153]
2026-01-30T11:39:47.851+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77dd3dc2]
2026-01-30T11:39:47.852+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.852+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.852+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.853+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb42c6e] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.853+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:47.853+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e85360d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.854+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@636714654 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.855+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.856+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1353199922 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:47.856+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:47.858+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.861+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.861+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:47.878+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:47.880+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:47.881+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:47.882+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:47.883+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:47.884+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.885+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b3cbf6c] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.885+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1765891520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.886+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:47.898+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:47.901+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:47.902+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.909+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb42c6e]
2026-01-30T11:39:47.909+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e85360d]
2026-01-30T11:39:47.911+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.912+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.912+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f14b551] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.914+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:47.915+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375548289 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.916+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.917+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.918+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:47.921+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:47.923+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b3cbf6c]
2026-01-30T11:39:47.927+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.929+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc8a6c1] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.925+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:47.931+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441905419 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:47.933+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:47.937+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:47.947+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:47.947+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:47.948+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:47.949+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:47.949+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f14b551]
2026-01-30T11:39:47.952+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:47.952+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.953+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.958+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513e4e85] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.963+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2db27] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.964+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457885646 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.964+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045927654 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.964+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:47.965+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:47.965+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:47.967+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:47.978+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:47.981+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc8a6c1]
2026-01-30T11:39:47.982+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:47.983+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:47.983+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:47.984+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:47.984+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:47.987+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e2db27]
2026-01-30T11:39:47.991+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@513e4e85]
2026-01-30T11:39:47.995+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.996+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:47.996+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3f7783] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.996+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69988b01] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:47.997+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2098635424 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:39:47.997+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248967377 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:47.997+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:47.998+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:39:47.999+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.001+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:39:48.006+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.007+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:39:48.008+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3f7783]
2026-01-30T11:39:48.009+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69988b01]
2026-01-30T11:39:48.010+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.012+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.013+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:48.013+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3894e564] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.013+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.014+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@360292852 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:48.015+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.016+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.018+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.018+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3894e564]
2026-01-30T11:39:48.022+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.023+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1692235d] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.024+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@162683694 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:48.024+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:39:48.024+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:39:48.028+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:39:48.028+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1692235d]
2026-01-30T11:39:48.029+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.029+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aab6d80] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.030+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1302603587 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:48.030+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.030+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.035+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.035+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4aab6d80]
2026-01-30T11:39:48.036+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.037+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:39:48.038+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.665+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:39:48.667+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:39:48.667+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:39:48.667+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:39:48.667+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:39:48.668+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:39:48.668+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:39:48.669+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:39:48.669+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:39:48.669+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:39:48.669+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:39:48.669+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:39:48.669+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:39:48.670+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:39:48.670+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:39:48.670+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:39:48.670+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.670+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:39:48.676+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:39:48.676+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:39:48.676+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270debb] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.677+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:39:48.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.679+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.687+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287e764b] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.686+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:39:48.686+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817263341 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:48.697+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258484508 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.697+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:39:48.687+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f1b7cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.695+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.697+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:48.698+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.700+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a78b330] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.702+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:48.704+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590360647 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:48.712+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:39:48.712+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418322676 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:39:48.712+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:39:48.715+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:39:48.716+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:39:48.717+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:39:48.718+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287e764b]
2026-01-30T11:39:48.718+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270debb]
2026-01-30T11:39:48.719+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:48.719+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.719+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.720+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d74f37] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.724+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7987d1c5] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.725+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682094269 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.725+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@427252779 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:48.727+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.726+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:48.726+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:39:48.726+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:39:48.728+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.729+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.729+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a78b330]
2026-01-30T11:39:48.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f1b7cf]
2026-01-30T11:39:48.730+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.730+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.731+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:39:48.731+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a668a5] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.731+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.731+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:48.732+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.732+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250972235 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:39:48.734+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7987d1c5]
2026-01-30T11:39:48.734+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d74f37]
2026-01-30T11:39:48.735+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:39:48.737+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:39:48.742+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.743+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:39:48.744+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:39:48.744+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:39:48.746+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:39:48.746+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.748+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:39:48.749+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:39:48.751+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.751+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:39:48.751+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.752+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.752+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1065926406 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:39:48.755+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:48.754+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599161cc] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.754+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:39:48.758+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:39:48.758+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@710421326 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:39:48.759+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65a668a5]
2026-01-30T11:39:48.760+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:39:48.760+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.761+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:39:48.761+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:39:48.762+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.764+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:39:48.764+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:39:48.766+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599161cc]
2026-01-30T11:39:48.768+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.769+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.769+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54] from current transaction
2026-01-30T11:39:48.769+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:39:48.769+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:48.770+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.770+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.776+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:48.778+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.778+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54] from current transaction
2026-01-30T11:39:48.779+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:48.780+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.783+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:48.783+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54] from current transaction
2026-01-30T11:39:48.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.786+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.786+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.787+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54] from current transaction
2026-01-30T11:39:48.787+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:48.787+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.791+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:39:48.791+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d833b54]
2026-01-30T11:39:48.796+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.796+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e48b160] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.796+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@908539720 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.797+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:48.798+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.800+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:48.800+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e48b160]
2026-01-30T11:39:48.800+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.800+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2261c461] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.801+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968467196 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.801+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:48.801+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.803+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:39:48.803+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2261c461]
2026-01-30T11:39:48.803+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.804+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28383ec3] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.805+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81180009 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.809+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.810+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.811+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28383ec3]
2026-01-30T11:39:48.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:39:48.813+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:39:48.816+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:39:48.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:39:48.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:39:48.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:39:48.819+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:39:48.820+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.823+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da52dc0] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.826+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2047580782 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.826+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:39:48.826+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.828+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:39:48.829+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3da52dc0]
2026-01-30T11:39:48.829+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.830+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fcaa8a7] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.832+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2073379763 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.832+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:48.833+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.835+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:48.836+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fcaa8a7]
2026-01-30T11:39:48.844+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.844+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.844+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1355198716 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:39:48.845+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:39:48.845+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:39:48.848+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:39:48.849+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.849+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df] from current transaction
2026-01-30T11:39:48.849+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:39:48.849+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.852+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:39:48.852+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.852+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df] from current transaction
2026-01-30T11:39:48.853+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:48.853+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.859+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:48.859+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.859+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df] from current transaction
2026-01-30T11:39:48.859+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.860+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.861+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.862+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.862+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df] from current transaction
2026-01-30T11:39:48.863+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:48.863+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.865+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:39:48.865+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.866+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.867+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.867+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4be798df]
2026-01-30T11:39:48.879+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.880+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756a0660] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.881+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251137716 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.881+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:39:48.882+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.885+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:39:48.887+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756a0660]
2026-01-30T11:39:48.890+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.893+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729c1335] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.894+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465930240 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.895+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:39:48.895+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:39:48.898+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:39:48.898+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@729c1335]
2026-01-30T11:39:48.900+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:39:48.900+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312fea83] was not registered for synchronization because synchronization is not active
2026-01-30T11:39:48.900+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590889512 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:39:48.900+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:39:48.901+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:39:48.902+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:39:48.903+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312fea83]
2026-01-30T11:39:48.904+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:39:48.906+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:39:48.911+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:14.858+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:14.858+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:14.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:14.858+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:14.858+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:14.862+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:14.862+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:14.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:14.865+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:14.866+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:14.872+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:14.872+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:14.873+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:14.873+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:14.873+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:14.882+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:14.874+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:14.874+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:14.876+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:14.881+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:14.888+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:14.891+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:14.891+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:14.892+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:14.893+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:14.893+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.895+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.904+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@338357ed] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.896+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.906+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a90dbc8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.897+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.908+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77234cf5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.897+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.897+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3dfdd0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.910+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c347c47] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.924+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317503348 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:14.924+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467497751 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:14.925+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1320158576 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:14.926+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:14.926+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147078930 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:14.927+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1692780446 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:14.927+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:14.927+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:14.928+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:14.929+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:14.929+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:14.931+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:14.931+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:14.947+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:14.948+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:14.949+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:14.957+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77234cf5]
2026-01-30T11:45:14.959+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.960+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:14.960+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:14.960+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:14.962+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5bd42d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.963+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a90dbc8]
2026-01-30T11:45:14.963+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@338357ed]
2026-01-30T11:45:14.963+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c347c47]
2026-01-30T11:45:14.963+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@251685718 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:14.963+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:14.964+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.964+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.964+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:14.964+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:14.965+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3dfdd0]
2026-01-30T11:45:14.965+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571b7b4b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.965+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277da116] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.972+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e2ee27] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:14.973+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:14.974+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:14.974+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277002320 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:14.975+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050991857 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:14.976+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2223752 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:14.980+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:14.980+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:14.981+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:14.981+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:14.983+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:14.983+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:15.013+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.014+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.029+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.031+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5bd42d]
2026-01-30T11:45:15.038+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.039+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.039+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.040+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbed82c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.040+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e2ee27]
2026-01-30T11:45:15.041+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277da116]
2026-01-30T11:45:15.041+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.041+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1564906826 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.042+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@313b85ad] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.042+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.042+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:15.042+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331091067 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:15.043+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:15.043+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:15.046+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:15.046+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:15.047+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571b7b4b]
2026-01-30T11:45:15.047+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.047+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:15.048+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.055+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:15.063+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.065+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:15.066+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:15.067+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:15.070+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:15.091+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@313b85ad]
2026-01-30T11:45:15.091+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:15.097+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fbed82c]
2026-01-30T11:45:15.098+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:15.108+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.110+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:15.111+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.111+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:15.111+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe9fee9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.112+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:15.112+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a5a8b71] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.112+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:15.114+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1116864596 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:15.126+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.116+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:15.116+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938573230 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.128+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.125+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:15.129+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.126+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.127+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.128+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.130+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d614b0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.132+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c219f3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.142+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2135316197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.142+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.143+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1863349176 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.143+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.144+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:15.144+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fe9fee9]
2026-01-30T11:45:15.144+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:15.144+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a5a8b71]
2026-01-30T11:45:15.145+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:15.147+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.152+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:15.159+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.161+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:15.161+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b33ef19] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.163+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.167+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170007053 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.178+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:15.180+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:15.181+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:15.181+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:15.181+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d614b0]
2026-01-30T11:45:15.181+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:15.183+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.186+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:15.186+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8c219f3]
2026-01-30T11:45:15.187+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bcf2038] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.187+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:15.188+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.189+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520293989 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.190+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:15.191+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:15.192+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589e809f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.193+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:15.193+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:15.193+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b33ef19]
2026-01-30T11:45:15.194+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082853374 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.194+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:15.195+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.195+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.195+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.195+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c60b10] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.196+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b33cb3b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.196+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.197+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364817814 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.198+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:15.197+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852118337 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:15.197+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:15.199+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.204+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:15.206+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:15.207+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bcf2038]
2026-01-30T11:45:15.207+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589e809f]
2026-01-30T11:45:15.209+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:15.209+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.209+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.210+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:15.211+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:15.212+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:15.212+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.212+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:15.217+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.224+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b33cb3b]
2026-01-30T11:45:15.226+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:15.226+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c60b10]
2026-01-30T11:45:15.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:15.234+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.240+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.240+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:15.241+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a26b72b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.242+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:15.242+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441d4c01] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.243+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:15.244+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330235207 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:15.245+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:15.245+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1899381017 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.246+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:15.246+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.246+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:15.246+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:15.247+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.247+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:15.247+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.248+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.248+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.256+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a7f479c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.251+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46364b58] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.257+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1961674521 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.258+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.259+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1377943410 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:15.259+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.259+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:15.260+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@441d4c01]
2026-01-30T11:45:15.260+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:15.260+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a26b72b]
2026-01-30T11:45:15.263+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:15.263+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.266+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238f73b6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.264+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:15.264+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.276+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f448b4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.273+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232545922 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.276+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:15.277+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@907293006 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:15.277+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:15.278+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a7f479c]
2026-01-30T11:45:15.279+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:15.282+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:15.283+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:15.292+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.292+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46364b58]
2026-01-30T11:45:15.293+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:15.294+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5618fb51] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.296+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.304+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4579e375] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.299+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1457194409 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.308+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@828443657 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:15.308+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:15.311+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.312+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:15.312+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238f73b6]
2026-01-30T11:45:15.313+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:15.316+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.325+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:15.326+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.326+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f448b4]
2026-01-30T11:45:15.327+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ea3ce1e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.327+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.328+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912851647 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:15.328+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4896a6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.328+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.329+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1427298355 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:15.329+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.329+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.332+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.344+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.344+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.345+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5618fb51]
2026-01-30T11:45:15.345+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ea3ce1e]
2026-01-30T11:45:15.345+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.346+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.346+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:15.346+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.347+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:15.348+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:15.349+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4579e375]
2026-01-30T11:45:15.349+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e4896a6]
2026-01-30T11:45:15.350+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.356+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.357+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.358+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.362+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:15.365+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:15.375+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:15.376+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:15.377+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:15.389+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.377+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:15.379+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.390+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:15.393+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:15.398+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:15.411+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:15.412+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:15.413+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:15.412+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:15.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.413+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:15.426+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:15.426+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7def456c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.427+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:15.428+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.428+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1955947660 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:15.429+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6399d051] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:15.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.434+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698787877 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.441+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.441+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:15.441+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7803c681] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.442+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.443+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959672809 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:15.446+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.446+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:15.446+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:15.447+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6399d051]
2026-01-30T11:45:15.447+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7def456c]
2026-01-30T11:45:15.457+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.458+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c7b435] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.452+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:15.457+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.459+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736726884 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.460+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f149d4a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.460+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.461+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@572710817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.461+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.461+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.462+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.476+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.476+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:15.477+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60c7b435]
2026-01-30T11:45:15.478+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7803c681]
2026-01-30T11:45:15.478+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.480+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.480+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:15.482+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@121abd90] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.492+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.507+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959483036 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:15.512+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f149d4a]
2026-01-30T11:45:15.512+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:15.531+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:15.532+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.533+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:15.535+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:15.540+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ad8935] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.547+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241036519 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.548+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:15.541+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:15.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:15.561+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:15.561+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:15.566+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:15.578+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.581+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:15.588+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@121abd90]
2026-01-30T11:45:15.588+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a86c129] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.588+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ad8935]
2026-01-30T11:45:15.589+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.590+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2063100454 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:15.590+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.591+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:15.591+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:15.594+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edbbff0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.595+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.605+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:15.605+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3238719 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.608+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:15.612+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.613+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.613+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:15.614+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:15.624+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:15.625+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:15.625+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.626+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:15.629+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.629+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@edbbff0]
2026-01-30T11:45:15.630+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a86c129]
2026-01-30T11:45:15.631+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c92cd17] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.632+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.632+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.635+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e3ae92] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.632+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249487965 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.632+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3c52a7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.655+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212196014 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:15.656+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:15.657+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061901551 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.657+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.661+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:15.661+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:15.663+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.665+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:15.678+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:15.678+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.679+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:15.679+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3c52a7]
2026-01-30T11:45:15.680+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e3ae92]
2026-01-30T11:45:15.680+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c92cd17]
2026-01-30T11:45:15.680+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.681+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.683+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.691+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d913445] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.694+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:15.695+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276daacc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.696+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590799418 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.698+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.707+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1024274755 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:15.708+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:15.722+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:15.725+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:15.725+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:15.740+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:15.741+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:15.742+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d913445]
2026-01-30T11:45:15.742+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276daacc]
2026-01-30T11:45:15.742+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.743+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.744+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37233b1a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.746+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:15.746+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322175655 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.747+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:15.756+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.757+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.774+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.776+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37233b1a]
2026-01-30T11:45:15.776+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.776+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38335078] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.779+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375801743 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.782+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:15.789+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:15.832+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:15.837+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38335078]
2026-01-30T11:45:15.837+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:15.838+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae23ef4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:15.839+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955260224 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:15.840+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:15.840+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:15.847+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:15.855+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae23ef4]
2026-01-30T11:45:15.856+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:15.861+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:15.863+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:16.276+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:16.276+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:16.277+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:16.277+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:16.278+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:45:16.278+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:16.278+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:16.278+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:16.279+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:16.279+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:45:16.279+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:16.279+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:16.279+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:16.280+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:45:16.280+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:16.280+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:16.280+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.280+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:45:16.280+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:16.282+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:16.281+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.281+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55c54406] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.282+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:16.282+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637a9950] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.282+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.289+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046012505 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:16.290+09:00  INFO 268 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:16.290+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188b3d82] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.290+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:16.291+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.310+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2094109100 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.311+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:16.311+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a6b1f2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.311+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:16.312+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@380258531 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:16.317+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:16.326+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:16.326+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:16.326+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55c54406]
2026-01-30T11:45:16.327+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.328+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2041669313 wrapping com.mysql.cj.jdbc.ConnectionImpl@5d90aabb] will not be managed by Spring
2026-01-30T11:45:16.328+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.329+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:16.329+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc718b0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.332+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:16.332+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:16.332+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667078746 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:16.333+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@637a9950]
2026-01-30T11:45:16.339+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:16.342+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.341+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:16.342+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188b3d82]
2026-01-30T11:45:16.342+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:16.342+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6142f737] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.342+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:16.342+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.343+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a6b1f2]
2026-01-30T11:45:16.343+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1525690078 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.343+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9dae22] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.344+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:16.344+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:16.345+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1392955241 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:16.345+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:16.346+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:16.346+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:16.347+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:16.347+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cc718b0]
2026-01-30T11:45:16.348+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:16.357+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:16.356+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.357+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:16.357+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:16.359+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:16.361+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6142f737]
2026-01-30T11:45:16.362+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:16.362+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:16.363+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:16.365+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:16.365+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d9dae22]
2026-01-30T11:45:16.374+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:16.376+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:16.377+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:16.379+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:16.379+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:16.381+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:16.392+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.394+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b5700a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.394+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.395+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.395+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@25935883 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:45:16.395+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:16.396+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1382250606 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:16.396+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:16.396+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:16.397+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:16.399+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:16.399+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:16.404+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17b5700a]
2026-01-30T11:45:16.404+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.405+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:16.405+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66] from current transaction
2026-01-30T11:45:16.405+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:16.406+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:16.406+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:16.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.414+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:16.415+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.425+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66] from current transaction
2026-01-30T11:45:16.426+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:16.427+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.429+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:16.429+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66] from current transaction
2026-01-30T11:45:16.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:16.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:16.432+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:16.432+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.432+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66] from current transaction
2026-01-30T11:45:16.433+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:16.433+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.440+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:16.440+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.441+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.441+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.441+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@746f6a66]
2026-01-30T11:45:16.444+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.444+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544c37c9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.445+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442219464 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:16.445+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:16.446+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.448+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:16.449+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@544c37c9]
2026-01-30T11:45:16.449+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.449+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a331650] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.449+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@267689120 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:16.455+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:16.456+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.458+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:16.458+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a331650]
2026-01-30T11:45:16.459+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.459+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6565ee33] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.459+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1195832665 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:16.459+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:16.460+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:16.461+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:16.462+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6565ee33]
2026-01-30T11:45:16.462+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:16.462+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:45:16.463+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:16.466+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:45:16.473+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:45:16.476+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:45:16.477+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:45:16.479+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:16.479+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.480+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a72af19] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165475931 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:16.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.489+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:16.491+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a72af19]
2026-01-30T11:45:16.491+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.491+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4329e96b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.492+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2082245744 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.492+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:16.494+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:16.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4329e96b]
2026-01-30T11:45:16.500+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.502+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.504+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343896929 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:45:16.504+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:16.508+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:16.511+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:16.512+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.512+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a] from current transaction
2026-01-30T11:45:16.513+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:16.515+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.521+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:16.522+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.523+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a] from current transaction
2026-01-30T11:45:16.523+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:16.524+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.526+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:16.526+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.527+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a] from current transaction
2026-01-30T11:45:16.527+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:16.527+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:16.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:16.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a] from current transaction
2026-01-30T11:45:16.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:16.530+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.531+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:16.531+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.532+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.535+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.535+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f6d24a]
2026-01-30T11:45:16.541+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.542+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30482b81] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.542+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573475520 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.542+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:16.543+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.544+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:16.545+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30482b81]
2026-01-30T11:45:16.545+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.545+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6ea595] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.546+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436969306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.546+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:16.546+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:16.550+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:16.557+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6ea595]
2026-01-30T11:45:16.558+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:16.558+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3de8beb9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:16.559+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599058076 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:16.560+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:16.563+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:16.566+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:16.573+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3de8beb9]
2026-01-30T11:45:16.575+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:16.576+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:45:16.578+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.179+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:18.179+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:18.181+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:18.181+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:18.181+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:18.182+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:18.182+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:18.182+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:18.182+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:18.187+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:18.189+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:18.190+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:18.191+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:18.191+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:18.191+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:18.194+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:18.192+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:18.192+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:18.193+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:18.193+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:18.197+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:18.197+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:18.263+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:18.331+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:18.340+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.338+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:18.339+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.340+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.340+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.343+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3c6b40] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.341+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b0bd00f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.342+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.356+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cfc61f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.343+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1600e73c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.343+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a97da31] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.373+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1121855430 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1073380523 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.373+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674717019 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.373+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375140887 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1005887347 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:18.375+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.375+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.376+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:18.376+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.377+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:18.377+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:18.380+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1600e73c]
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cfc61f4]
2026-01-30T11:45:18.382+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3c6b40]
2026-01-30T11:45:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b0bd00f]
2026-01-30T11:45:18.382+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.383+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:18.385+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.388+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.388+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2c6069] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.389+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.389+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242157ae] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.390+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e71dee] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.392+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:18.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67131954 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074497066 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.396+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948482254 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.403+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.398+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a97da31]
2026-01-30T11:45:18.398+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.398+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:18.403+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.404+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.407+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.409+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:18.411+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728b0d20] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.412+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146645729 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.413+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.413+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.415+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.416+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.416+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:18.416+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.416+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e2c6069]
2026-01-30T11:45:18.421+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e71dee]
2026-01-30T11:45:18.422+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@242157ae]
2026-01-30T11:45:18.422+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728b0d20]
2026-01-30T11:45:18.422+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.423+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.423+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.423+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.424+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7423c233] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.424+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245530a3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.424+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:18.424+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1771162614 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510087594 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.427+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.428+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:18.429+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:18.442+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:18.442+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:18.442+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:18.444+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:18.445+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:18.447+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:18.448+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:18.448+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:18.451+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:18.452+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:18.452+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:18.452+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:18.452+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:18.453+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@245530a3]
2026-01-30T11:45:18.453+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:18.453+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.453+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7423c233]
2026-01-30T11:45:18.454+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.454+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.454+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196a3f17] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.455+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.455+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76be48ec] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.456+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56409954] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.456+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036826130 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.457+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4554dd02] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.457+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2078518960 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.457+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@550316004 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789364161 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.459+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:18.459+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.459+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196a3f17]
2026-01-30T11:45:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76be48ec]
2026-01-30T11:45:18.464+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56409954]
2026-01-30T11:45:18.464+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4554dd02]
2026-01-30T11:45:18.464+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.465+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.465+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.465+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.467+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b851ed] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.469+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:18.470+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35449e32] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.470+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115306a8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055021738 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738292215 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.472+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1913414989 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.472+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:18.473+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:18.475+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.475+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:18.476+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:18.477+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:18.477+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.477+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:18.477+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:18.486+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b851ed]
2026-01-30T11:45:18.488+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.489+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.490+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35449e32]
2026-01-30T11:45:18.490+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.490+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@115306a8]
2026-01-30T11:45:18.491+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a4ecbb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.491+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.492+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.494+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:18.494+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1838552510 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.495+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:18.495+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580c96a4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.497+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:18.498+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.499+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.499+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1365491019 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.506+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:18.499+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:18.503+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.511+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:18.512+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:18.512+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:18.515+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:18.515+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:18.524+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:18.526+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.527+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:18.527+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb13a59] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.527+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:18.528+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619664842 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.528+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a4ecbb]
2026-01-30T11:45:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@580c96a4]
2026-01-30T11:45:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75dcc00f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@221881723 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.532+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e719b8a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@590a2fa9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.535+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1703881626 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.535+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.532+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.532+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354655179 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.536+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.536+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:18.538+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.539+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.540+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb13a59]
2026-01-30T11:45:18.542+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.543+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.545+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.545+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@590a2fa9]
2026-01-30T11:45:18.545+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:18.546+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b846a28] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.547+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.547+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75dcc00f]
2026-01-30T11:45:18.548+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.548+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006694643 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.556+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:18.549+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1b5f2f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.549+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.549+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e719b8a]
2026-01-30T11:45:18.559+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:18.560+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1164203586 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.563+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7626f33a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.563+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.564+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:18.564+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701419337 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:18.564+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547d3ca6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.564+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:18.565+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.569+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100810856 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.574+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.574+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:18.575+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:18.576+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:18.577+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b846a28]
2026-01-30T11:45:18.577+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.577+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:18.577+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.577+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7626f33a]
2026-01-30T11:45:18.578+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d1b5f2f]
2026-01-30T11:45:18.579+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:18.579+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:18.579+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.579+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.580+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547d3ca6]
2026-01-30T11:45:18.581+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:18.581+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.581+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c6085c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.581+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.582+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.584+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:18.593+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892590348 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.611+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.612+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.596+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:18.598+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dada4f6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.611+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:18.621+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:18.622+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342713321 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:18.623+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:18.628+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:18.629+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.632+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:18.632+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.633+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:18.639+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.640+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c6085c]
2026-01-30T11:45:18.640+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.641+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa555d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.641+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.641+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af9c468] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.643+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376305026 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.644+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:18.645+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885750974 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.645+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:18.646+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.646+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.646+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.648+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:18.648+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dada4f6]
2026-01-30T11:45:18.652+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:18.654+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.660+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.661+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:18.662+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:18.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:18.663+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:18.665+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:18.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3de4f5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.680+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561322687 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.681+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:18.681+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:18.681+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.688+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa555d4]
2026-01-30T11:45:18.689+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1af9c468]
2026-01-30T11:45:18.689+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.691+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.691+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.692+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76290681] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.692+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@415153f7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.693+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990391397 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.693+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358548785 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.693+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:18.694+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.695+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.696+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:18.696+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b3de4f5]
2026-01-30T11:45:18.696+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.697+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.697+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec6fdb6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.699+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522052311 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.706+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@415153f7]
2026-01-30T11:45:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76290681]
2026-01-30T11:45:18.708+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:18.709+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.710+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:18.710+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.710+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.711+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.714+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ec6fdb6]
2026-01-30T11:45:18.723+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.724+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:18.725+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:18.725+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f181ef5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.727+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:18.727+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:18.727+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641363437 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.727+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:18.728+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:18.728+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:18.729+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:18.729+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:18.732+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:18.732+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:18.736+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.732+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:18.738+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181dea36] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.739+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.740+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484456689 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.740+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@377e4e8d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.740+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:18.741+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@58541750 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.744+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:18.745+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:18.745+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:18.745+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f181ef5]
2026-01-30T11:45:18.747+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:18.747+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.752+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65980616] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.755+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169366502 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.756+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:18.756+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.756+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@181dea36]
2026-01-30T11:45:18.757+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.757+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:18.757+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.757+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@377e4e8d]
2026-01-30T11:45:18.758+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5b80a4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.758+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.759+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@954244899 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:18.759+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cc95c0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.759+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.762+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006876242 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:18.762+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.762+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:18.763+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.763+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:18.763+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65980616]
2026-01-30T11:45:18.764+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.764+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b3812b8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.766+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1043668863 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.769+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:18.771+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:18.771+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:18.771+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.772+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cc95c0]
2026-01-30T11:45:18.772+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f5b80a4]
2026-01-30T11:45:18.773+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.774+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.774+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:18.775+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:18.776+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.776+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:18.781+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:18.782+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b3812b8]
2026-01-30T11:45:18.790+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.793+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49efa2d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.800+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@303682691 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.804+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:18.809+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:18.814+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:18.816+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49efa2d4]
2026-01-30T11:45:18.823+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.823+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25fb68f0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.824+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288786329 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.827+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.827+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.829+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.830+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25fb68f0]
2026-01-30T11:45:18.831+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.832+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4667693d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.848+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@950347241 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.849+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:18.849+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:18.859+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:18.861+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4667693d]
2026-01-30T11:45:18.862+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:18.863+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f08700e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:18.864+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@316396115 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:18.864+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:18.865+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:18.874+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:18.875+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f08700e]
2026-01-30T11:45:18.876+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:18.877+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:18.878+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:19.589+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/69
2026-01-30T11:45:19.589+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/69
2026-01-30T11:45:19.594+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:19.607+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:19.608+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:19.611+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:19.611+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:19.613+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:19.613+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:19.613+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:19.614+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:19.614+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:19.615+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:19.615+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:19.615+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:19.616+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:19.630+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/69
2026-01-30T11:45:19.660+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/69
2026-01-30T11:45:19.663+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/69
2026-01-30T11:45:19.647+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:19.649+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.649+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.664+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/69", parameters={}
2026-01-30T11:45:19.664+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:19.664+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4574d301] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.664+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501fd47f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.665+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:19.665+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.676+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.676+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6c6840] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.678+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e81bf7e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.679+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763377087 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:19.679+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775888444 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:19.680+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:19.681+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140202031 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:19.681+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@413104318 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.682+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:19.689+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:19.689+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:19.692+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:19.692+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:19.693+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:19.693+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.698+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:19.698+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:19.698+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:19.699+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:19.708+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e81bf7e]
2026-01-30T11:45:19.709+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6c6840]
2026-01-30T11:45:19.709+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501fd47f]
2026-01-30T11:45:19.709+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4574d301]
2026-01-30T11:45:19.710+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.711+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:19.711+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.712+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.712+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246a9a25] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.712+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:19.714+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4a0f9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.714+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34199b3f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.715+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1976760855 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.716+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:19.725+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149183789 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:19.725+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660440045 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:19.726+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:19.727+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:19.728+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:19.729+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:19.729+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.730+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:19.730+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:19.731+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:19.739+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:19.740+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:19.741+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:19.747+09:00  INFO 268 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:19.751+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:19.752+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34199b3f]
2026-01-30T11:45:19.753+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:19.755+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:19.749+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.756+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:19.757+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246a9a25]
2026-01-30T11:45:19.756+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:19.756+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6c5376] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.759+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@340743604 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:19.759+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:19.760+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:19.763+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:19.764+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4a0f9]
2026-01-30T11:45:19.765+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:19.765+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:19.769+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:19.778+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:19.778+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a6c5376]
2026-01-30T11:45:19.779+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:19.779+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:19.780+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:19.790+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.790+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.790+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235274816 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:19.790+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:19.791+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:19.795+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:19.795+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.796+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b] from current transaction
2026-01-30T11:45:19.796+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:19.796+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.799+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:19.799+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.802+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b] from current transaction
2026-01-30T11:45:19.803+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:19.806+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.808+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:19.808+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.808+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b] from current transaction
2026-01-30T11:45:19.809+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:19.809+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:19.811+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:19.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b] from current transaction
2026-01-30T11:45:19.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:19.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 73(Long), 3(Long)
2026-01-30T11:45:19.814+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:19.815+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.816+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.819+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.821+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cad459b]
2026-01-30T11:45:19.831+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.838+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1997ca4b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.839+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1562321023 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.841+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:19.844+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.846+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:19.846+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1997ca4b]
2026-01-30T11:45:19.847+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.847+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baa942] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.856+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576253484 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.857+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:19.857+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.860+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:19.861+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baa942]
2026-01-30T11:45:19.862+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.863+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319fc62b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.864+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631558115 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.864+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:19.864+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:19.867+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:19.872+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@319fc62b]
2026-01-30T11:45:19.873+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:19.874+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=69, drafterId=6, r (truncated)...]
2026-01-30T11:45:19.874+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:19.875+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/69
2026-01-30T11:45:19.880+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/69
2026-01-30T11:45:19.881+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/69
2026-01-30T11:45:19.885+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/69", parameters={}
2026-01-30T11:45:19.892+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:19.893+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.893+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49031bec] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.895+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1417471385 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.904+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:19.905+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.911+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:19.911+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49031bec]
2026-01-30T11:45:19.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3077b7d2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:19.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643775563 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:19.914+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:19.914+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.925+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:19.926+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3077b7d2]
2026-01-30T11:45:19.930+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:19.933+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:19.937+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015220689 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:19.940+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:19.941+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:19.945+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:19.945+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:19.947+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89] from current transaction
2026-01-30T11:45:19.948+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:19.948+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.958+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:19.959+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:19.959+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89] from current transaction
2026-01-30T11:45:19.959+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:19.960+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:19.962+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:19.962+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:19.963+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89] from current transaction
2026-01-30T11:45:19.963+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:19.963+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:19.965+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:19.965+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:19.966+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89] from current transaction
2026-01-30T11:45:19.969+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:19.976+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 73(Long), 3(Long)
2026-01-30T11:45:20.078+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:20.099+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:20.099+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:20.103+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:20.107+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4420aa89]
2026-01-30T11:45:20.131+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.131+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30614633] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.131+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@264939918 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.132+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:20.132+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:20.139+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:20.139+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30614633]
2026-01-30T11:45:20.139+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.140+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9a649c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.140+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@670099906 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.140+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:20.141+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 69(Long), 3(Long)
2026-01-30T11:45:20.142+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:20.143+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d9a649c]
2026-01-30T11:45:20.143+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.143+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6c9ef6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.144+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@572303715 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.144+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.144+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.146+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.146+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6c9ef6]
2026-01-30T11:45:20.147+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.148+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=69, drafterId=6, r (truncated)...]
2026-01-30T11:45:20.149+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:20.562+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:20.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:20.564+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:20.564+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:20.565+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:20.569+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:20.565+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:20.565+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:20.573+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:20.573+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:20.566+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:20.570+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:20.572+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:20.573+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:20.574+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:20.576+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:20.576+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:20.577+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.578+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.578+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:20.579+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:20.580+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:20.580+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2b1f2d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.580+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3d3bf0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.581+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:20.581+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:20.581+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:20.589+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.590+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1950576116 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.590+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@765244787 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:20.592+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:20.592+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449ad163] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.593+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.594+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:20.595+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:20.595+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.596+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2133624313 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.596+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56109b4d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.596+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:20.598+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:20.598+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb73801] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.598+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:20.610+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:20.610+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097986593 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.610+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:20.611+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.612+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2115678306 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:20.612+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2b1f2d]
2026-01-30T11:45:20.612+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:20.614+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.614+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:20.614+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.614+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:20.614+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d3d3bf0]
2026-01-30T11:45:20.616+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:20.625+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c60895] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.625+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.626+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449ad163]
2026-01-30T11:45:20.626+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.628+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2106406411 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.628+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56109b4d]
2026-01-30T11:45:20.628+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.628+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba457ac] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.629+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.629+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:20.629+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.629+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b83c30f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.629+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658763747 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:20.630+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.630+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb73801]
2026-01-30T11:45:20.630+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3498396] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.630+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224741077 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.630+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:20.632+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.632+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1699627262 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.632+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.632+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:20.632+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.633+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:20.638+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.639+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.640+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c60895]
2026-01-30T11:45:20.640+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.640+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.641+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.643+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:20.645+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.643+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.645+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:20.645+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ba457ac]
2026-01-30T11:45:20.645+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3498396]
2026-01-30T11:45:20.645+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b83c30f]
2026-01-30T11:45:20.646+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.646+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.646+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.647+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.648+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:20.648+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:20.659+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ed2252] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.659+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d79e3ed] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.661+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:20.661+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.662+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@947341834 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.663+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1755830006 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.664+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:20.664+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:20.665+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:20.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:20.679+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:20.679+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:20.681+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:20.681+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:20.681+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:20.681+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:20.689+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.690+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:20.690+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbd1016] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.691+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:20.691+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418049245 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.691+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.695+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:20.695+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3608165d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:20.697+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:20.697+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:20.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d79e3ed]
2026-01-30T11:45:20.697+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@341416717 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:20.697+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ed2252]
2026-01-30T11:45:20.698+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.705+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:20.706+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.706+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da9cbc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.707+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:20.707+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d45315] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.709+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:20.707+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407088609 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.709+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.709+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@406130223 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.709+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cbd1016]
2026-01-30T11:45:20.710+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.710+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:20.711+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.711+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.712+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3608165d]
2026-01-30T11:45:20.712+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.713+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7746c672] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.714+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868173100 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.713+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.713+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.722+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46bcf8b0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.715+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.721+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da9cbc]
2026-01-30T11:45:20.723+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@821081284 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:20.723+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d45315]
2026-01-30T11:45:20.723+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.724+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.726+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:20.727+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.728+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:20.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:20.729+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.729+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78f94cc5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.729+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.739+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1553065012 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.740+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7746c672]
2026-01-30T11:45:20.743+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:20.746+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:20.748+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.749+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:20.757+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:20.758+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:20.758+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:20.759+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:20.759+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46bcf8b0]
2026-01-30T11:45:20.759+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.764+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:20.765+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.783+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:20.781+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:20.781+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:20.782+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:20.791+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.794+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.810+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198e88fe] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.795+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:20.798+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:20.798+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78f94cc5]
2026-01-30T11:45:20.811+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370595162 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:20.812+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:20.812+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.812+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:20.813+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:20.813+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:20.813+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef29b2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.815+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:20.816+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:20.822+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:20.823+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1162005742 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.825+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.826+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:20.827+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:20.828+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3629a16] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.828+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:20.831+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283697359 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.829+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:20.831+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198e88fe]
2026-01-30T11:45:20.831+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:20.831+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa52fda] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.832+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.838+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:20.839+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:20.839+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@305563990 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.840+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cfd6e4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.841+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77ef29b2]
2026-01-30T11:45:20.841+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:20.842+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1533768123 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:20.843+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.844+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:20.844+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.845+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54e98d28] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.845+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.845+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:20.846+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522900158 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.846+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3629a16]
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa52fda]
2026-01-30T11:45:20.847+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cfd6e4]
2026-01-30T11:45:20.848+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c13aa64] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.848+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.850+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538669530 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.849+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.849+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.850+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e1975f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.854+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.856+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5582a8db] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.856+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54e98d28]
2026-01-30T11:45:20.857+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938402150 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.857+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.857+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@489827449 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:20.857+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.858+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:20.859+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:20.859+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160c2f34] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.861+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:20.861+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:20.862+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@244609040 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.862+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.874+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:20.875+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c13aa64]
2026-01-30T11:45:20.876+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:20.878+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.880+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:20.880+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:20.883+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.892+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5582a8db]
2026-01-30T11:45:20.895+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.895+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:20.895+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:20.897+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:20.906+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70320ed2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.907+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e1975f]
2026-01-30T11:45:20.908+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@160c2f34]
2026-01-30T11:45:20.909+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@817280127 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:20.909+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:20.910+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.910+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.911+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.912+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:20.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:20.913+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69155a12] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.914+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.915+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:20.917+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.923+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513260939 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:20.924+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:20.927+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.927+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.927+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.929+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:20.930+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69cdf22c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.930+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.931+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70320ed2]
2026-01-30T11:45:20.931+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1936462299 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.932+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.931+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:20.932+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:20.932+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:20.939+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:20.941+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:20.941+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:20.941+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.942+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:20.943+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.945+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:20.948+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0a67f2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.949+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69155a12]
2026-01-30T11:45:20.957+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:20.958+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481968134 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:20.959+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:20.959+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69cdf22c]
2026-01-30T11:45:20.959+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:20.959+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:20.960+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:20.960+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:20.960+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324fc28d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:20.961+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:20.961+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@882182778 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:20.962+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:20.976+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:20.977+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:20.977+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:20.978+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:20.984+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:20.997+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:20.997+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0a67f2]
2026-01-30T11:45:20.998+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:20.999+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.002+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.004+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.009+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7d5ba5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.010+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503905fa] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.010+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324fc28d]
2026-01-30T11:45:21.011+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288724015 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:21.012+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039030118 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.012+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.013+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:21.013+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.014+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:21.016+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:21.019+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.023+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.031+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:21.035+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:21.041+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:21.041+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:21.041+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.042+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:21.042+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7d5ba5]
2026-01-30T11:45:21.042+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@503905fa]
2026-01-30T11:45:21.042+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:21.043+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.043+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.043+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.044+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:21.044+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4933827e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.044+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@633ad2ab] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.046+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.047+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371359351 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.056+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.059+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.047+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@115379468 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:21.060+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:21.062+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:21.063+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:21.074+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:21.075+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.077+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:21.077+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4933827e]
2026-01-30T11:45:21.078+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:21.078+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.078+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:21.079+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0687a8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.081+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:21.087+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.088+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@452189252 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.088+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@633ad2ab]
2026-01-30T11:45:21.088+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed7c725] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.089+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:21.089+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.091+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:21.089+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868820955 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:21.091+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63249cdb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.094+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:21.095+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455334814 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:21.109+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.098+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:21.110+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.112+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:21.113+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f0687a8]
2026-01-30T11:45:21.115+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.115+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.115+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:21.124+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eaf2af5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.124+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63249cdb]
2026-01-30T11:45:21.124+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed7c725]
2026-01-30T11:45:21.124+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1173340495 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.125+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.125+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.125+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.125+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:21.126+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455cb6cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.126+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.127+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.127+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436725166 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:21.131+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:21.132+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:21.140+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.142+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eaf2af5]
2026-01-30T11:45:21.143+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:21.144+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.144+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455cb6cf]
2026-01-30T11:45:21.148+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56d73fc1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.149+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.155+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@300441452 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.157+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:21.176+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:21.178+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.179+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:21.198+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:21.209+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56d73fc1]
2026-01-30T11:45:21.211+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.215+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afe28df] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.222+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438130550 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.223+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:21.227+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:21.239+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:21.243+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afe28df]
2026-01-30T11:45:21.244+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.247+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5985d3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.247+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1470824023 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.247+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.248+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.254+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.255+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5985d3]
2026-01-30T11:45:21.256+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.256+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f1d31] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.258+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428711262 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.259+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:21.261+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:21.265+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:21.265+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f1d31]
2026-01-30T11:45:21.270+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.270+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7862b8ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.272+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@91870295 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:21.273+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.275+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.279+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.282+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7862b8ff]
2026-01-30T11:45:21.290+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.292+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:21.293+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.658+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71
2026-01-30T11:45:21.658+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/71
2026-01-30T11:45:21.663+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:21.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:21.672+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:21.664+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:21.680+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:21.672+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:21.672+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:21.676+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/71
2026-01-30T11:45:21.692+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:21.693+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:21.693+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:21.694+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/71
2026-01-30T11:45:21.698+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:21.698+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:21.710+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:21.711+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/71
2026-01-30T11:45:21.712+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:21.712+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:21.713+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.715+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287cabc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.713+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/71", parameters={}
2026-01-30T11:45:21.725+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:21.714+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:21.714+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.726+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.731+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.732+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33fd4f6d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.732+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e20c8e4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.738+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aeddb71] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.741+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739806167 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:21.744+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:21.745+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984826551 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:21.745+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592601825 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:21.745+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1099311922 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:21.748+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:21.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:21.757+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:21.758+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:21.760+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:21.761+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:21.764+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:21.776+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:21.778+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@287cabc]
2026-01-30T11:45:21.780+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.781+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6dd284] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.781+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:21.781+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:21.781+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:21.782+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1160901577 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:21.789+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5aeddb71]
2026-01-30T11:45:21.789+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33fd4f6d]
2026-01-30T11:45:21.790+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e20c8e4]
2026-01-30T11:45:21.790+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:21.791+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.791+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.792+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:21.793+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:21.794+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:21.796+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52436363] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.797+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@505f8f3b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:21.799+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.808+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2121009012 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:21.808+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726921767 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:21.810+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:21.811+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:21.812+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:21.813+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:21.825+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:21.854+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:21.856+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6dd284]
2026-01-30T11:45:21.858+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:21.860+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:21.859+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:21.860+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:21.861+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:21.874+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:21.874+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:21.878+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:21.882+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52436363]
2026-01-30T11:45:21.885+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:21.888+09:00  INFO 268 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:21.889+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@505f8f3b]
2026-01-30T11:45:21.889+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:22.032+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.043+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:22.044+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc563d3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.058+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:22.065+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239656957 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:22.069+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:22.070+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:22.098+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.110+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:22.113+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.114+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fc563d3]
2026-01-30T11:45:22.115+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554242599 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:22.121+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:22.122+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:22.202+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:22.288+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:22.356+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:22.380+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:22.382+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.389+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027] from current transaction
2026-01-30T11:45:22.392+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:22.394+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.414+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:22.415+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.415+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027] from current transaction
2026-01-30T11:45:22.416+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:22.423+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.427+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:22.427+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.427+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027] from current transaction
2026-01-30T11:45:22.428+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:22.428+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:22.430+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:22.431+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.431+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027] from current transaction
2026-01-30T11:45:22.431+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:22.432+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 83(Long), 3(Long)
2026-01-30T11:45:22.439+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:22.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.443+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@445fa027]
2026-01-30T11:45:22.446+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.446+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b2795b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.447+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794699098 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.448+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:22.448+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.457+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:22.458+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b2795b]
2026-01-30T11:45:22.458+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.458+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f4f693] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.459+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@588724343 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.459+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:22.459+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.461+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:22.462+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38f4f693]
2026-01-30T11:45:22.462+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.463+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3242cf32] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.464+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756934535 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.464+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:22.465+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:22.473+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:22.475+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3242cf32]
2026-01-30T11:45:22.476+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:22.477+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=71, drafterId=6, r (truncated)...]
2026-01-30T11:45:22.478+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:22.490+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/71
2026-01-30T11:45:22.504+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/71
2026-01-30T11:45:22.511+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/71
2026-01-30T11:45:22.514+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/71", parameters={}
2026-01-30T11:45:22.515+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:22.516+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.524+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e259883] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.525+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958403032 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.526+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:22.527+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.530+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:22.532+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e259883]
2026-01-30T11:45:22.532+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.532+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6802a957] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.541+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984733012 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.542+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:22.543+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.544+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:22.545+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6802a957]
2026-01-30T11:45:22.548+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.548+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.550+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588622560 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:22.552+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:22.555+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:22.559+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:22.559+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.559+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31] from current transaction
2026-01-30T11:45:22.563+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:22.564+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.574+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:22.577+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.578+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31] from current transaction
2026-01-30T11:45:22.578+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:22.579+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.583+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:22.590+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.592+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31] from current transaction
2026-01-30T11:45:22.593+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:22.593+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:22.596+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:22.597+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.598+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31] from current transaction
2026-01-30T11:45:22.599+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:22.606+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 83(Long), 3(Long)
2026-01-30T11:45:22.609+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:22.610+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.612+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.612+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.621+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172a5c31]
2026-01-30T11:45:22.630+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.630+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5711fd35] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.631+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473938417 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.632+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:22.633+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.640+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:22.641+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5711fd35]
2026-01-30T11:45:22.641+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.642+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e87d811] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.642+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@640121505 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.642+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:22.643+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 71(Long), 3(Long)
2026-01-30T11:45:22.645+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:22.646+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e87d811]
2026-01-30T11:45:22.646+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:22.646+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dfce161] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:22.647+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@234618783 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:22.647+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:22.647+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:22.649+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:22.649+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dfce161]
2026-01-30T11:45:22.652+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:22.653+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=71, drafterId=6, r (truncated)...]
2026-01-30T11:45:22.654+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.278+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:23.279+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:23.280+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:23.281+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:23.280+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:23.281+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:23.281+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:23.281+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:23.282+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:23.287+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:23.289+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:23.289+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:23.289+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:23.289+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:23.289+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:23.290+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:23.290+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:23.290+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:23.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c49f97] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.290+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:23.290+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:23.291+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:23.291+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:23.293+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671221434 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:23.292+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:23.292+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:23.293+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.293+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:23.294+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:23.295+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.298+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.299+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613e9fce] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.302+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.307+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:23.307+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2310fefe] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.308+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deaf3f0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.308+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f8bc699] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.310+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@32227239 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.312+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:23.313+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933964125 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.313+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@385458205 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:23.313+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:23.314+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45c49f97]
2026-01-30T11:45:23.314+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685668773 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.314+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.314+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:23.315+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:23.315+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.315+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:23.315+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.322+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:23.323+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bc86dc3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.324+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:23.327+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.325+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@807110872 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:23.326+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:23.327+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2310fefe]
2026-01-30T11:45:23.328+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:23.328+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:23.329+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613e9fce]
2026-01-30T11:45:23.329+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.329+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:23.329+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:23.330+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deaf3f0]
2026-01-30T11:45:23.330+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.330+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35661cb8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.331+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f8bc699]
2026-01-30T11:45:23.331+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.332+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad01a82] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.332+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1890697995 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.333+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:23.333+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.337+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e285f2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.338+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780091351 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.338+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.339+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bc86dc3]
2026-01-30T11:45:23.339+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:23.339+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381573001 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:23.339+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.339+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.340+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.340+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.340+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.340+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.341+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:23.342+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.345+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.346+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.347+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35661cb8]
2026-01-30T11:45:23.357+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.358+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.358+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad01a82]
2026-01-30T11:45:23.359+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.358+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:23.359+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201ee72d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.360+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77e285f2]
2026-01-30T11:45:23.360+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.360+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630766666 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.360+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:23.360+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.361+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:23.361+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:23.361+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:23.362+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e10286] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.363+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.364+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:23.364+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:23.364+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:23.365+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198166397 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:23.366+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:23.376+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:23.376+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:23.377+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:23.377+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.377+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:23.379+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:23.379+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:23.379+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b7687] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.379+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@201ee72d]
2026-01-30T11:45:23.381+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.380+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:23.380+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941137842 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.381+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32742674] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.386+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.391+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:23.392+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1703184536 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.392+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a868b1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.394+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:23.394+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e10286]
2026-01-30T11:45:23.394+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:23.394+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.394+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708401116 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.395+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.395+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:23.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@457be551] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.408+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:23.410+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:23.411+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@627980874 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:23.413+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221b7687]
2026-01-30T11:45:23.414+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.415+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.415+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.423+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96dcc7a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.425+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891318942 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.427+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:23.427+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:23.428+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32742674]
2026-01-30T11:45:23.428+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a868b1]
2026-01-30T11:45:23.428+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:23.430+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.430+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.431+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@457be551]
2026-01-30T11:45:23.431+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22255c86] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.432+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21476a1a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.433+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.440+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@837912880 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.443+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:23.442+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:23.443+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17458019 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.443+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:23.443+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96dcc7a]
2026-01-30T11:45:23.444+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.446+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.447+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:23.448+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:23.448+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.449+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.463+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:23.464+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:23.464+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:23.465+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.465+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:23.477+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:23.515+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:23.515+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.515+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22255c86]
2026-01-30T11:45:23.519+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:23.527+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:23.528+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21476a1a]
2026-01-30T11:45:23.528+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.529+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.531+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:23.542+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.543+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:23.544+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.542+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f613c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.545+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222743671 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.548+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:23.559+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:23.542+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bdc040] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.543+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:23.560+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1166206047 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.560+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:23.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:23.561+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.563+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:23.564+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2a9248] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.575+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496705408 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:23.590+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:23.592+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:23.594+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:23.594+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:23.595+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:23.607+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f613c]
2026-01-30T11:45:23.607+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21bdc040]
2026-01-30T11:45:23.608+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.608+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:23.608+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.609+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fd53c7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.609+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:23.609+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d2c1b6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.610+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048960101 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.615+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.610+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:23.614+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2091038796 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.615+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.616+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:23.624+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2a9248]
2026-01-30T11:45:23.619+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:23.622+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.624+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.625+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.625+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.626+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3119c479] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.626+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38595126] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.627+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.627+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403220672 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:23.627+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302270629 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.630+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40fd53c7]
2026-01-30T11:45:23.630+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:23.631+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:23.632+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.633+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:23.646+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:23.646+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e14e2af] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.647+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81657793 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.648+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.663+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:23.665+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33d2c1b6]
2026-01-30T11:45:23.674+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.666+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:23.675+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f61679b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.676+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:23.676+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:23.679+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1243333808 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.679+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3119c479]
2026-01-30T11:45:23.679+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38595126]
2026-01-30T11:45:23.679+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:23.680+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.680+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.680+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:23.681+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:23.681+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73815772] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.682+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.683+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27523141 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.694+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:23.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.697+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e14e2af]
2026-01-30T11:45:23.697+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.704+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.705+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbc1bd2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.708+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1152682320 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:23.716+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:23.724+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.725+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f61679b]
2026-01-30T11:45:23.725+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.727+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:23.728+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.729+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.741+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73815772]
2026-01-30T11:45:23.741+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:23.741+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d30ae4d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.742+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.743+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:23.744+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762221519 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.744+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.747+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:23.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:23.748+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.748+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dbc1bd2]
2026-01-30T11:45:23.749+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:23.749+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.749+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.749+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.759+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.762+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:23.762+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:23.765+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f295dcf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.766+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.771+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:23.774+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184866277 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.775+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:23.776+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:23.776+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:23.777+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:23.781+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.809+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d30ae4d]
2026-01-30T11:45:23.793+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:23.793+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:23.810+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.811+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:23.811+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.811+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:23.811+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:23.813+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:23.812+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240ee089] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.813+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.815+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:23.815+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@479209406 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:23.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:23.847+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f295dcf]
2026-01-30T11:45:23.856+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.845+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.847+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:23.858+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c8d82cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.859+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4741b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.861+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316649477 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.860+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:23.860+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039445428 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:23.880+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:23.882+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:23.861+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.909+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.928+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:23.947+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240ee089]
2026-01-30T11:45:23.948+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.948+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79140c46] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.949+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@718123333 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:23.958+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.959+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:23.962+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:23.963+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:23.964+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c8d82cf]
2026-01-30T11:45:23.964+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4741b]
2026-01-30T11:45:23.965+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:23.965+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:23.976+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:23.977+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469f61ec] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:23.978+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:23.979+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1630323080 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:23.981+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:23.982+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:24.009+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.009+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.044+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:24.045+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469f61ec]
2026-01-30T11:45:24.046+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.046+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:24.045+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79140c46]
2026-01-30T11:45:24.046+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e18f46] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.047+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:24.047+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.048+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@994844279 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:24.104+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:24.064+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:24.097+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:24.108+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:24.111+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:24.112+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.113+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.114+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa66396] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.116+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1441617502 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:24.125+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:24.127+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:24.303+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:24.310+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:24.349+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e18f46]
2026-01-30T11:45:24.354+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:24.375+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:24.375+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:24.376+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:24.376+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.377+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126c2ea2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.377+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971666569 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:24.355+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.379+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:24.379+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fa6e85] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.380+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:24.381+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@325802307 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.381+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:24.383+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:24.395+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:24.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa66396]
2026-01-30T11:45:24.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.400+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:24.408+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee8051b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.408+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@126c2ea2]
2026-01-30T11:45:24.409+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1378773379 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:24.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.413+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:24.413+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.417+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:24.423+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584118846 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:24.423+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fa6e85]
2026-01-30T11:45:24.424+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:24.424+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.424+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:24.424+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2945e0f9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669414162 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.442+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:24.442+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.442+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:24.443+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:24.444+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d019e02]
2026-01-30T11:45:24.444+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee8051b]
2026-01-30T11:45:24.446+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.447+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.448+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:24.449+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:24.450+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.459+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:24.493+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2945e0f9]
2026-01-30T11:45:24.494+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.494+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18437668] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.495+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@512167857 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:24.502+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:24.595+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:24.597+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18437668]
2026-01-30T11:45:24.597+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.598+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1082f5ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.598+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@334569905 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.599+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:24.602+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:24.607+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.608+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1082f5ff]
2026-01-30T11:45:24.609+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.610+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bd22ba] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.610+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612127935 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.611+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:24.611+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:24.614+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:24.614+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bd22ba]
2026-01-30T11:45:24.618+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.620+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f41484] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.621+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@726817394 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.622+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:24.622+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:24.624+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.625+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25f41484]
2026-01-30T11:45:24.625+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.625+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:24.626+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.799+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:24.803+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:24.809+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:24.810+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:24.810+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:24.806+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:24.806+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/65
2026-01-30T11:45:24.815+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/65
2026-01-30T11:45:24.820+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/65
2026-01-30T11:45:24.809+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:24.811+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:24.812+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:24.825+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/65", parameters={}
2026-01-30T11:45:24.826+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:24.827+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.827+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:24.827+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:24.827+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:24.830+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.829+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50be4fae] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.829+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:24.830+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:24.830+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9a7f51] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.831+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1253304345 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.831+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:24.831+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.831+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@39423383 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:24.832+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:24.841+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:24.842+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451d7b6a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.842+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:24.843+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:24.843+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.845+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@987252156 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:24.845+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:24.846+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f6b0e1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.847+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:24.855+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:24.857+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:24.857+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@757578584 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:24.857+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50be4fae]
2026-01-30T11:45:24.857+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:24.858+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.858+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:24.859+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@130fe77b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.859+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:24.860+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829294987 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:24.860+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9a7f51]
2026-01-30T11:45:24.861+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:24.861+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.862+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:24.862+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9ed900] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.863+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@324426197 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:24.880+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:24.881+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:24.881+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451d7b6a]
2026-01-30T11:45:24.892+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:24.892+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.893+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c689a5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.893+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@514749180 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:24.895+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:24.895+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:24.898+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:24.898+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@130fe77b]
2026-01-30T11:45:24.898+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f6b0e1]
2026-01-30T11:45:24.899+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:24.900+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:24.906+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.907+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.909+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b9ed900]
2026-01-30T11:45:24.909+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:24.910+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:24.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.913+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.928+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:24.941+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c689a5]
2026-01-30T11:45:24.942+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:24.943+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.948+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.949+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:24.949+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:24.950+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:24.957+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:24.957+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484876235 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:45:24.958+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:24.958+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:24.958+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:24.959+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:24.959+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:24.960+09:00  INFO 268 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:24.960+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:24.981+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2ac184] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:24.982+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1163938986 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:24.984+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:24.990+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:24.991+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:24.991+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:24.991+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095] from current transaction
2026-01-30T11:45:24.992+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:24.993+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:24.993+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:24.994+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d2ac184]
2026-01-30T11:45:24.996+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:24.997+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:24.997+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:24.998+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:25.008+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:25.014+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095] from current transaction
2026-01-30T11:45:25.024+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:25.025+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.030+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:25.031+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:25.032+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095] from current transaction
2026-01-30T11:45:25.032+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:25.036+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.041+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:25.041+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:25.043+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:25.043+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:25.046+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c47095]
2026-01-30T11:45:25.062+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.062+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1feef732] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.063+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1562749656 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:25.064+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:25.065+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.074+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:25.076+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1feef732]
2026-01-30T11:45:25.077+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.077+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f94787] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.078+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457603501 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:25.078+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:25.079+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.081+09:00 DEBUG 268 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:25.081+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73f94787]
2026-01-30T11:45:25.087+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.089+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7799c58f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.091+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1323655556 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:25.091+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:25.091+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:25.093+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:25.093+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7799c58f]
2026-01-30T11:45:25.093+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:25.094+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=65, drafterId=7, r (truncated)...]
2026-01-30T11:45:25.095+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:25.097+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/65
2026-01-30T11:45:25.099+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/65
2026-01-30T11:45:25.107+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/65
2026-01-30T11:45:25.124+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/65", parameters={}
2026-01-30T11:45:25.125+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:25.126+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.130+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600f8bba] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.131+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@809821838 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:25.132+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:25.140+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.142+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:25.143+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600f8bba]
2026-01-30T11:45:25.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c31bf6b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.146+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082113292 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:25.146+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:25.147+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.155+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:25.155+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c31bf6b]
2026-01-30T11:45:25.158+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.158+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.159+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694211150 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:45:25.159+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:25.160+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:25.163+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:25.163+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.164+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30] from current transaction
2026-01-30T11:45:25.165+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:25.165+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.171+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:25.172+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.172+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30] from current transaction
2026-01-30T11:45:25.173+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:25.173+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.205+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:25.206+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.206+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30] from current transaction
2026-01-30T11:45:25.206+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:25.207+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.208+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:25.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.210+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4551af30]
2026-01-30T11:45:25.213+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.214+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9679f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.214+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396623969 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:25.214+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:25.215+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.222+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:25.223+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d9679f4]
2026-01-30T11:45:25.223+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.224+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16155388] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.225+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@687001959 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:25.225+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:25.225+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 65(Long), 3(Long)
2026-01-30T11:45:25.227+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:25.227+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16155388]
2026-01-30T11:45:25.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:25.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71745337] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:25.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1296160642 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:25.229+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:25.229+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:25.256+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:25.260+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71745337]
2026-01-30T11:45:25.260+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:25.260+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=65, drafterId=7, r (truncated)...]
2026-01-30T11:45:25.261+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.236+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:26.237+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:26.239+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:26.240+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:26.302+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:26.240+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:26.276+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:26.294+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:26.303+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:26.303+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:26.309+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:26.329+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:26.330+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:26.343+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:26.353+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:26.364+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:26.373+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:26.377+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:26.391+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:26.392+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:26.394+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:26.394+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:26.395+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:26.396+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:26.407+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:26.408+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.408+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.410+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.410+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.475+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787ed972] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.411+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403056c6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.413+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e28a5e7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.464+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ef23d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.475+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35466e6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.493+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1069107524 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:26.493+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639357968 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:26.493+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266163495 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:26.493+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342650980 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:26.494+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1439022199 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:26.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:26.506+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:26.507+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.507+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:26.508+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:26.509+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:26.509+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:26.509+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.515+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:26.524+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:26.549+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:26.559+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:26.562+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ef23d4]
2026-01-30T11:45:26.562+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35466e6]
2026-01-30T11:45:26.563+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.564+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.565+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0c6c65] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.576+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e790bd6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.577+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1946813357 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:26.578+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@543681735 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:26.579+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:26.579+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.580+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:26.580+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.596+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.596+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:26.609+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403056c6]
2026-01-30T11:45:26.609+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e28a5e7]
2026-01-30T11:45:26.610+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.611+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.611+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541f43e3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.612+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cd337] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.624+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.624+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:26.628+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@138783765 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:26.629+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708919314 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:26.642+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e790bd6]
2026-01-30T11:45:26.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@787ed972]
2026-01-30T11:45:26.645+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.646+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.646+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.647+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:26.648+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.663+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af9984c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:26.665+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:26.679+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.680+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824003454 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:26.695+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0c6c65]
2026-01-30T11:45:26.695+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.710+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:26.695+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@541f43e3]
2026-01-30T11:45:26.697+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.709+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:26.723+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:26.724+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.724+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25cd337]
2026-01-30T11:45:26.725+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:26.726+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.726+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26481f84] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.727+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:26.741+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140919029 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:26.742+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:26.743+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:26.744+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:26.758+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.761+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:26.762+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:26.773+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:26.774+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:26.776+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:26.779+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:26.780+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:26.788+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af9984c]
2026-01-30T11:45:26.788+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:26.798+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26481f84]
2026-01-30T11:45:26.792+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:26.796+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.826+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359d7d97] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@839781111 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:26.797+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.798+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.810+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:26.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:26.829+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0ef72a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.829+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65581f1f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.846+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:26.858+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:26.858+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802711359 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:26.860+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59414543 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:26.860+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:26.860+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.861+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.861+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.862+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.863+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.863+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf60eb7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.876+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.876+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:26.877+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1492725549 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:26.877+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0ef72a]
2026-01-30T11:45:26.877+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359d7d97]
2026-01-30T11:45:26.878+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:26.878+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:26.879+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.879+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:26.880+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:26.880+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb10160] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.898+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369351364 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:26.905+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:26.881+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.881+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.906+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:26.910+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:26.913+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65581f1f]
2026-01-30T11:45:26.927+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:26.929+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:26.935+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.942+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:26.942+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:26.944+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf60eb7]
2026-01-30T11:45:26.944+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ae5791] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.944+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:26.944+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb10160]
2026-01-30T11:45:26.944+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.945+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@44766364 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:26.947+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:26.949+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:26.949+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af80278] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.955+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:26.958+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.958+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:26.959+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@647441958 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:26.959+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:26.959+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23383d8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.960+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:26.960+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.963+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420365563 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:26.963+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:26.964+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:26.969+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:26.972+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:26.975+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:26.978+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:26.979+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:26.979+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ae5791]
2026-01-30T11:45:26.979+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:26.980+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.980+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:26.981+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:26.982+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645de7fa] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.982+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4af80278]
2026-01-30T11:45:26.982+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:26.984+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.990+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823797311 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:26.990+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:26.990+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23383d8]
2026-01-30T11:45:26.991+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d87b80] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.991+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:26.991+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:26.991+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:26.993+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525625193 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:26.994+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:26.994+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9da0af] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:26.994+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:26.995+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:26.996+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@36625831 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:26.997+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:27.007+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:27.008+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.009+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:27.009+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.009+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:27.010+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:27.011+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:27.013+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:27.013+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@645de7fa]
2026-01-30T11:45:27.014+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.014+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.014+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.014+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbc9fa5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.015+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:27.015+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b689fb5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.015+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9da0af]
2026-01-30T11:45:27.022+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.023+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55efe4fa] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.021+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114096334 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:27.021+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d87b80]
2026-01-30T11:45:27.022+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8510229 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:27.024+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604417584 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:27.024+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:27.024+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.024+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.024+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:27.025+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:27.025+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b58402b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.025+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.025+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:27.027+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312373435 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:27.027+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:27.032+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:27.033+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.041+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:27.041+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:27.043+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b689fb5]
2026-01-30T11:45:27.043+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55efe4fa]
2026-01-30T11:45:27.044+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbc9fa5]
2026-01-30T11:45:27.044+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:27.044+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.045+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.045+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.045+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b58402b]
2026-01-30T11:45:27.046+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cb5de2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.047+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a93ee21] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.047+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c8ea336] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.048+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.059+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@982643161 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:27.059+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886460349 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:27.060+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897993397 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:27.060+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:27.061+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:27.061+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.061+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.062+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.065+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:27.072+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.073+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:27.074+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.077+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:27.081+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:27.088+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.088+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:27.088+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:27.088+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.090+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a93ee21]
2026-01-30T11:45:27.091+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:27.091+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cb5de2]
2026-01-30T11:45:27.094+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c8ea336]
2026-01-30T11:45:27.095+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.096+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.097+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.097+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.098+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:27.101+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.098+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7970dcb6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.098+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ae99f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.099+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:27.108+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537018276 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:27.113+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708935833 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:27.114+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.114+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:27.115+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.129+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:27.130+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:27.131+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.136+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:27.143+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:27.146+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:27.147+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.147+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:27.147+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:27.148+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ae99f]
2026-01-30T11:45:27.148+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.148+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7970dcb6]
2026-01-30T11:45:27.148+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f97753f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.148+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.149+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.149+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1081559020 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:27.150+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:27.154+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d558236] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.155+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:27.155+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1925151302 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:27.155+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.156+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:27.157+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:27.158+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:27.162+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:27.164+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:27.174+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:27.175+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:27.175+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:27.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:27.177+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d558236]
2026-01-30T11:45:27.177+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f97753f]
2026-01-30T11:45:27.178+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:27.179+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.179+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.180+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:27.180+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.180+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9f4acb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.181+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.181+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4864f0cc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.189+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077616266 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:27.206+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751130524 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.207+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.209+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:27.214+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.216+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.222+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.222+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:27.222+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:27.229+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:27.232+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:27.233+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.238+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.241+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.241+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9f4acb]
2026-01-30T11:45:27.241+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4864f0cc]
2026-01-30T11:45:27.242+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c006d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.242+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.242+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.255+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba64cdd] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.262+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1143684085 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.262+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.243+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479349761 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:27.275+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:27.276+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:27.248+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:27.263+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.277+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.309+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:27.310+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.311+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:27.313+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c006d4]
2026-01-30T11:45:27.313+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.312+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:27.312+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba64cdd]
2026-01-30T11:45:27.313+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b1ebbe6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.332+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166394615 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:27.339+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:27.314+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:27.330+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.339+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:27.339+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:27.340+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c4bc24] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.340+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:27.343+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1897780549 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.344+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.345+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:27.345+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0c5275] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.348+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:27.356+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716303541 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:27.357+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:27.358+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:27.360+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:27.365+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b1ebbe6]
2026-01-30T11:45:27.373+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.374+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:27.377+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:27.378+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68c4bc24]
2026-01-30T11:45:27.379+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.380+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.380+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9af2ae0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.382+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1153925741 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.392+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:27.395+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d0c5275]
2026-01-30T11:45:27.396+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.397+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.398+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bc3911] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.421+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2020362857 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:27.421+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.425+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.425+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9af2ae0]
2026-01-30T11:45:27.425+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.425+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.426+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1232738c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.427+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648014080 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.427+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:27.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bc3911]
2026-01-30T11:45:27.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:27.428+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:27.430+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:27.431+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:27.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1232738c]
2026-01-30T11:45:27.432+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.440+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5e4777] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.441+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056042243 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.446+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:27.448+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:27.456+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:27.457+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5e4777]
2026-01-30T11:45:27.457+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.457+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d27313] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.458+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794829665 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.458+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.458+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.460+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.461+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d27313]
2026-01-30T11:45:27.461+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.461+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c3a357] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.462+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1094519831 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.462+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:27.462+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:27.464+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:27.465+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75c3a357]
2026-01-30T11:45:27.465+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:27.465+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ea9732] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:27.471+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532707587 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:27.472+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:27.473+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:27.474+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:27.475+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33ea9732]
2026-01-30T11:45:27.475+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:27.475+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:27.477+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:29.154+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:29.155+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:29.156+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:29.156+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/72
2026-01-30T11:45:29.156+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:29.157+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:29.159+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:29.162+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:29.163+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:29.164+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.158+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:29.159+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:29.159+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/72
2026-01-30T11:45:29.171+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6cabdd] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.171+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:29.172+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:29.172+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/72
2026-01-30T11:45:29.178+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:29.178+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:29.181+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:29.178+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/72", parameters={}
2026-01-30T11:45:29.198+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:29.181+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.189+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:29.198+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548927873 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:29.199+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.199+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e88c35d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.205+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.214+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:29.214+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed94e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.214+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a6c86c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.217+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:29.217+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2064651139 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.228+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:29.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@166489149 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:29.228+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180901971 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:29.229+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:29.230+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:29.230+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:29.230+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:29.230+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e6cabdd]
2026-01-30T11:45:29.230+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:29.231+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.231+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.232+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7cdcbc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e88c35d]
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794762539 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a6c86c]
2026-01-30T11:45:29.239+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed94e]
2026-01-30T11:45:29.240+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:29.240+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5340dd7b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017153122 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5044018b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:29.241+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.242+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@931819412 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:29.242+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.242+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:29.242+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:29.243+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.245+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:29.246+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.246+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5340dd7b]
2026-01-30T11:45:29.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:29.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:29.245+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:29.246+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a7cdcbc]
2026-01-30T11:45:29.248+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:29.253+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:29.254+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:29.254+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:29.258+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:29.259+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:29.261+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:29.261+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:29.262+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:45:29.263+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5044018b]
2026-01-30T11:45:29.263+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:29.264+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.265+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48a595] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.269+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327276466 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:29.272+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:29.273+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:29.278+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:29.278+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.278+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d48a595]
2026-01-30T11:45:29.278+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.278+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:29.279+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100801989 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:29.279+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:29.279+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:29.279+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:29.280+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:29.297+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:29.297+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.298+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b] from current transaction
2026-01-30T11:45:29.298+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:29.299+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.306+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:45:29.307+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.307+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b] from current transaction
2026-01-30T11:45:29.307+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:29.308+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.309+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:29.310+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.310+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b] from current transaction
2026-01-30T11:45:29.310+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.311+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.312+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.312+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.313+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b] from current transaction
2026-01-30T11:45:29.313+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:29.313+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 77(Long), 3(Long)
2026-01-30T11:45:29.315+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:29.315+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.315+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.315+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.317+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@699d875b]
2026-01-30T11:45:29.327+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.328+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.328+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@754866449 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:29.328+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:29.330+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:29.335+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:29.336+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.337+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099] from current transaction
2026-01-30T11:45:29.337+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:29.338+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.340+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:45:29.341+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.341+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099] from current transaction
2026-01-30T11:45:29.341+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:29.341+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.343+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:29.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099] from current transaction
2026-01-30T11:45:29.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099] from current transaction
2026-01-30T11:45:29.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:29.347+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 79(Long), 3(Long)
2026-01-30T11:45:29.348+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:29.348+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.349+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.352+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.352+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@257bb099]
2026-01-30T11:45:29.357+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.358+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547fbdee] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.358+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@245861195 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:29.358+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:29.359+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.360+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:29.361+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@547fbdee]
2026-01-30T11:45:29.361+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.362+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5091399b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.363+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2041085610 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:29.363+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:29.363+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.366+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:29.366+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5091399b]
2026-01-30T11:45:29.369+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.372+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@732435c6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.373+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706775000 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:29.373+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.373+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.375+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.375+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@732435c6]
2026-01-30T11:45:29.376+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:29.376+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterId=6, r (truncated)...]
2026-01-30T11:45:29.377+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:29.380+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/72
2026-01-30T11:45:29.382+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/72
2026-01-30T11:45:29.389+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/72
2026-01-30T11:45:29.390+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/72", parameters={}
2026-01-30T11:45:29.391+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:29.392+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.395+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba0d303] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.396+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1514519155 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.396+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:29.397+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.406+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:29.407+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba0d303]
2026-01-30T11:45:29.408+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.409+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7634d1b2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.410+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200355004 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.410+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:29.411+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.413+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:45:29.413+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7634d1b2]
2026-01-30T11:45:29.420+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.420+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.422+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1897927302 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:45:29.422+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:29.423+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:29.426+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:29.426+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.427+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808] from current transaction
2026-01-30T11:45:29.427+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:29.428+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.429+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:45:29.429+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.430+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808] from current transaction
2026-01-30T11:45:29.430+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:29.430+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.432+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:29.435+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.437+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808] from current transaction
2026-01-30T11:45:29.438+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.439+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.440+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.441+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.441+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808] from current transaction
2026-01-30T11:45:29.441+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:29.441+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 77(Long), 3(Long)
2026-01-30T11:45:29.443+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:29.443+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.443+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.444+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.444+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23dfa808]
2026-01-30T11:45:29.448+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.448+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.449+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1875553559 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:45:29.449+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:29.457+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:29.460+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:29.460+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.460+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68] from current transaction
2026-01-30T11:45:29.461+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:29.461+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.464+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 2
2026-01-30T11:45:29.464+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.464+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68] from current transaction
2026-01-30T11:45:29.464+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:29.465+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.469+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:29.474+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.475+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68] from current transaction
2026-01-30T11:45:29.475+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.476+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.477+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.478+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.478+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68] from current transaction
2026-01-30T11:45:29.478+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:29.478+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 79(Long), 3(Long)
2026-01-30T11:45:29.480+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:29.481+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.481+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.482+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.482+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32f1fb68]
2026-01-30T11:45:29.488+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.489+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea7521f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.490+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1906828849 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.490+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:29.491+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.492+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:29.493+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea7521f]
2026-01-30T11:45:29.493+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.493+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ccd4e3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.494+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992253199 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.494+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:29.494+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 72(Long), 3(Long)
2026-01-30T11:45:29.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:29.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32ccd4e3]
2026-01-30T11:45:29.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:29.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5038400d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:29.497+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76021029 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:29.497+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:29.497+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:29.498+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:29.503+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5038400d]
2026-01-30T11:45:29.504+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:29.505+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterId=6, r (truncated)...]
2026-01-30T11:45:29.506+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.129+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:30.131+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:30.131+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:30.131+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:30.132+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:30.135+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:30.138+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:30.137+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:30.138+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:30.138+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:30.140+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:30.140+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:30.140+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:30.141+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:30.141+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:30.141+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:30.142+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:30.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:30.148+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.146+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:30.146+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:30.148+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.148+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:30.148+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ffd620] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.148+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:30.149+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:30.151+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfd8358] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.159+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1703291516 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.156+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:30.158+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.158+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903849815 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9693b1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc7bfa] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.162+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.162+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.163+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.165+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21087794] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.165+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449489342 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.166+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.221+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1664756577 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:30.221+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:30.281+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:30.282+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125701798 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.282+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.288+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44ffd620]
2026-01-30T11:45:30.289+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:30.289+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:30.290+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.291+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.291+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.293+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:30.296+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfd8358]
2026-01-30T11:45:30.296+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62695342] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.297+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.298+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ce9fc4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.323+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@42606979 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.297+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260945996 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.324+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.347+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:30.347+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:30.347+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:30.348+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.348+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.348+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21087794]
2026-01-30T11:45:30.349+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a9693b1]
2026-01-30T11:45:30.349+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cc7bfa]
2026-01-30T11:45:30.355+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.356+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.357+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.359+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.365+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a61caf7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.359+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.365+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:30.365+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16cc6851] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.370+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692148050 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:30.370+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13ce9fc4]
2026-01-30T11:45:30.371+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.373+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@471533992 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.374+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.376+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.378+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:30.378+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.378+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23bf4bf4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.378+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.380+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147719928 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.379+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:30.380+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62695342]
2026-01-30T11:45:30.380+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:30.381+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.388+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:30.389+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:30.390+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.402+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:30.407+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:30.407+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.408+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:30.408+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:30.409+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:30.409+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a61caf7]
2026-01-30T11:45:30.409+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23bf4bf4]
2026-01-30T11:45:30.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16cc6851]
2026-01-30T11:45:30.410+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:30.410+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.410+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.411+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.412+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:30.412+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5430a121] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.412+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c7870c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.412+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:30.413+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.413+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342373666 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:30.413+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780047083 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.413+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc5929d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.414+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:30.414+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.414+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2126199195 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.422+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:30.423+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.423+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:30.426+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.427+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:30.430+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5430a121]
2026-01-30T11:45:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77c7870c]
2026-01-30T11:45:30.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.431+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c28424] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.432+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:30.435+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ecf18e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.436+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bc5929d]
2026-01-30T11:45:30.437+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699014068 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:30.443+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.443+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.437+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.440+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@467198840 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.445+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cfeea7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.444+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593cae74] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.445+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:30.446+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050268281 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.446+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.447+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@359207123 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.448+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:30.449+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.449+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78c28424]
2026-01-30T11:45:30.455+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:30.457+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.457+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.458+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:30.460+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:30.462+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.476+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:30.476+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:30.480+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ecf18e]
2026-01-30T11:45:30.479+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:30.481+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.481+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:30.481+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@760986db] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.486+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096710421 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.487+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:30.481+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:30.490+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:30.491+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:30.491+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.491+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:30.492+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39cfeea7]
2026-01-30T11:45:30.492+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.492+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593cae74]
2026-01-30T11:45:30.496+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.499+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4ff1b5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.508+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.508+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:30.509+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945341252 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.509+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0f26af] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.510+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.510+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.511+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@310145556 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.525+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:30.513+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.526+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:30.528+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:30.537+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@760986db]
2026-01-30T11:45:30.530+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:30.541+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.542+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aca33c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.542+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:30.543+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@942260972 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:30.544+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:30.545+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.545+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:30.548+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0f26af]
2026-01-30T11:45:30.545+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:30.545+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:30.556+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.557+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.557+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4ff1b5]
2026-01-30T11:45:30.557+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:30.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a98b70] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.565+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.582+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@863049862 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.582+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0fceb5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.594+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.595+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421092600 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.596+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.596+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.597+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.597+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:30.597+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.599+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aca33c]
2026-01-30T11:45:30.606+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.604+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:30.607+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd6e0b0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.607+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:30.608+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2080642485 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.609+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:30.609+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:30.610+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.610+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:30.610+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:30.611+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0fceb5]
2026-01-30T11:45:30.611+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:30.611+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.612+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.613+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a98b70]
2026-01-30T11:45:30.614+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de23682] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.614+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa6cb2d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.620+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508891306 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.614+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.615+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533210907 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.623+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:30.624+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32a1baf6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.625+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:30.625+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:30.626+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:30.627+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@536761817 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.627+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd6e0b0]
2026-01-30T11:45:30.629+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:30.630+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.632+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.631+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.632+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:30.641+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3671f5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.641+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa6cb2d]
2026-01-30T11:45:30.642+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1078579107 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:30.643+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.643+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.644+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ef62] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:30.646+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.646+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532670739 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.647+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.646+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@de23682]
2026-01-30T11:45:30.647+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.647+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.648+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d1ce69] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.650+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.657+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419491287 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.657+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32a1baf6]
2026-01-30T11:45:30.657+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:30.658+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.658+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:30.658+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.659+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.659+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:30.660+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ef62]
2026-01-30T11:45:30.660+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c3671f5]
2026-01-30T11:45:30.661+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.662+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.667+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:30.663+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.673+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.674+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:30.676+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.674+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:30.678+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:30.696+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48d1ce69]
2026-01-30T11:45:30.681+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:30.696+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:30.697+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.705+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:30.699+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:30.703+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:30.709+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.711+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:30.713+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:30.713+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:30.722+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.727+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298777a5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.728+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@31249044 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.728+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.729+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.711+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:30.730+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:30.738+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.739+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14470df3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.739+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@825145789 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.742+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.743+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.745+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:30.758+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:30.758+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.760+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:30.761+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298777a5]
2026-01-30T11:45:30.764+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:30.772+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.779+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db7ea2f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.780+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327469667 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.791+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.794+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.772+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:30.777+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:30.797+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.797+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14470df3]
2026-01-30T11:45:30.798+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.805+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5db7ea2f]
2026-01-30T11:45:30.798+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96b3bf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.804+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.807+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.807+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1978522908 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.807+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbde0d8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.808+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e4f0973] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.808+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:30.809+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389630665 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.809+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@214654983 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.810+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:30.810+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.811+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:30.811+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.813+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:30.813+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:30.814+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@96b3bf]
2026-01-30T11:45:30.820+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.828+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.830+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c471b17] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bbde0d8]
2026-01-30T11:45:30.831+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241076843 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:30.832+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.832+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:30.840+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:30.841+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:30.843+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.847+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:30.855+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e4f0973]
2026-01-30T11:45:30.858+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:30.859+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:30.859+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.861+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:30.861+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c471b17]
2026-01-30T11:45:30.862+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12625a78] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.862+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:30.862+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82890198 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.863+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:30.863+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:30.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.864+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:30.864+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.864+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.864+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.866+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba46148] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.875+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@657145788 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:30.876+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:30.876+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:30.877+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.878+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:30.880+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:30.880+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12625a78]
2026-01-30T11:45:30.880+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:30.888+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.891+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e3e42d2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.889+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:30.893+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318019319 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.895+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:30.896+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:30.894+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:30.907+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.912+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:30.914+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ba46148]
2026-01-30T11:45:30.916+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.926+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf52b4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.927+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761201610 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:30.927+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.913+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc9bc29] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.925+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:30.929+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.931+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@230017313 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:30.932+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e3e42d2]
2026-01-30T11:45:30.955+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.955+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbee9ee] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.956+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1093278809 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.957+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:30.959+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:30.939+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:30.965+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:30.965+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:30.981+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bf52b4]
2026-01-30T11:45:30.982+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:30.990+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:30.991+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbee9ee]
2026-01-30T11:45:30.991+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:30.992+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:30.992+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:30.993+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2400efae] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:30.994+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779846489 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:30.994+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:30.995+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:30.996+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:31.006+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bc9bc29]
2026-01-30T11:45:31.011+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.012+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e4b534e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.013+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686135898 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:31.013+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:31.015+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:31.021+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2400efae]
2026-01-30T11:45:31.025+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:31.028+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.029+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71597460] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.030+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376229498 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:31.030+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:31.043+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:31.045+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:31.047+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e4b534e]
2026-01-30T11:45:31.048+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:31.049+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:31.049+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:31.057+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71597460]
2026-01-30T11:45:31.057+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:31.058+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.058+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4d9c63] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.059+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822940446 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:31.060+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:31.060+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:31.074+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:31.081+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4d9c63]
2026-01-30T11:45:31.082+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:31.096+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:31.097+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:31.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:31.439+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:31.458+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:31.459+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:31.460+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:31.460+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:31.461+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.462+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c7e402e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.439+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:31.439+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-30T11:45:31.464+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:31.459+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:31.464+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/75
2026-01-30T11:45:31.464+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:31.464+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:31.465+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-30T11:45:31.465+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:31.548+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:31.548+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973996260 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:31.561+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:31.559+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-30T11:45:31.560+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:31.573+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:31.560+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:31.564+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:31.569+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:31.574+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.574+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.575+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.656+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:31.660+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ad7110] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.664+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331dda9e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.664+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6385f108] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.664+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c7e402e]
2026-01-30T11:45:31.673+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.674+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd6a914] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.675+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@959298201 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:31.675+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:31.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:31.680+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1634303199 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:31.680+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594667940 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:31.680+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629374116 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:31.692+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:31.693+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:31.693+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:31.694+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:31.697+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:31.699+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:31.708+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:31.711+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bd6a914]
2026-01-30T11:45:31.716+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:31.721+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:31.725+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@331dda9e]
2026-01-30T11:45:31.725+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:31.725+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:31.728+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:31.729+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.729+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6385f108]
2026-01-30T11:45:31.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72ad7110]
2026-01-30T11:45:31.739+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:31.740+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e732c39] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.741+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.742+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:31.772+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932102990 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:31.772+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d830505] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:31.814+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:31.846+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:31.898+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057068792 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:31.907+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:31.915+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:31.915+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:31.921+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:31.943+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:31.944+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:31.945+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e732c39]
2026-01-30T11:45:31.946+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:31.946+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:31.956+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:31.957+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:31.958+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:31.958+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:31.959+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:31.960+09:00  INFO 268 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:31.960+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:31.965+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:31.965+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d830505]
2026-01-30T11:45:31.989+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4298d9fb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.063+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83682631 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:32.137+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:32.137+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.188+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:32.226+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.228+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482483481 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:45:32.231+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:32.231+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:32.240+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:32.240+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4298d9fb]
2026-01-30T11:45:32.244+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:32.244+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:32.248+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:32.273+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:32.281+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.285+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da] from current transaction
2026-01-30T11:45:32.286+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:32.289+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.298+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:32.299+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.308+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da] from current transaction
2026-01-30T11:45:32.308+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:32.309+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.341+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:32.347+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.347+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da] from current transaction
2026-01-30T11:45:32.348+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:32.360+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:32.399+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:32.421+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.435+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da] from current transaction
2026-01-30T11:45:32.436+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:32.456+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 92(Long), 3(Long)
2026-01-30T11:45:32.466+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:32.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.471+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.473+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.474+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dea6da]
2026-01-30T11:45:32.481+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.488+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb9d482] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.493+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77856254 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.493+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:32.495+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.500+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:32.506+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb9d482]
2026-01-30T11:45:32.507+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.508+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c76ceb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.509+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@873118005 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.510+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:32.510+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.514+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:32.514+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c76ceb]
2026-01-30T11:45:32.515+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.515+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@773694f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.516+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485634942 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.521+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:32.522+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@773694f]
2026-01-30T11:45:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:32.524+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=6, r (truncated)...]
2026-01-30T11:45:32.525+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:32.528+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/75
2026-01-30T11:45:32.530+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/75
2026-01-30T11:45:32.530+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/75
2026-01-30T11:45:32.531+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/75", parameters={}
2026-01-30T11:45:32.532+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:32.539+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.545+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ef83b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.546+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436640234 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.548+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:32.552+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.563+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:32.564+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ef83b]
2026-01-30T11:45:32.564+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.565+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cffb7bf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.572+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1510350139 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.574+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:32.575+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.577+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:32.577+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cffb7bf]
2026-01-30T11:45:32.580+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.581+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.581+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802635067 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:45:32.582+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:32.583+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:32.593+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:32.593+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.593+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007] from current transaction
2026-01-30T11:45:32.593+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:32.594+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.596+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:32.596+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.597+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007] from current transaction
2026-01-30T11:45:32.598+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:32.604+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.608+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:32.609+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.610+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007] from current transaction
2026-01-30T11:45:32.611+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:32.612+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:32.613+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:32.614+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.614+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007] from current transaction
2026-01-30T11:45:32.615+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:32.615+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 92(Long), 3(Long)
2026-01-30T11:45:32.621+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:32.621+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.623+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.623+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.624+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c10007]
2026-01-30T11:45:32.627+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.627+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332db327] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.629+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210613898 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.630+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:32.631+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.637+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:32.638+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@332db327]
2026-01-30T11:45:32.639+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.639+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71490941] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.640+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799226052 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.640+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:32.640+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 75(Long), 3(Long)
2026-01-30T11:45:32.642+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:32.643+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71490941]
2026-01-30T11:45:32.644+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:32.644+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c7df8d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:32.645+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2063451573 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:32.645+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:32.645+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:32.647+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:32.647+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c7df8d]
2026-01-30T11:45:32.647+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:32.648+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=75, drafterId=6, r (truncated)...]
2026-01-30T11:45:32.648+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:33.415+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:33.416+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:33.415+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:33.416+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:33.423+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:33.418+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:33.420+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:33.422+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:33.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:33.423+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:33.423+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:33.427+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:33.428+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:33.457+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:33.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:33.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.430+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:33.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:33.458+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:33.458+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:33.459+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d35bea5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.459+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:33.460+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:33.460+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.462+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673f936d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.460+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.461+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:33.464+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:33.461+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:33.477+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.478+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af7bf29] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.463+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b1c35d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.465+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.480+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49a60e51] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.488+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1521999085 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.489+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@996036150 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:33.492+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1685254090 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.492+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2024231588 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.492+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128995199 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.492+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:33.493+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:33.493+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:33.494+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.495+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:33.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:33.497+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:33.497+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:33.497+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.498+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:33.506+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:33.506+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:33.506+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.506+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:33.507+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@673f936d]
2026-01-30T11:45:33.508+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5af7bf29]
2026-01-30T11:45:33.508+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8b1c35d]
2026-01-30T11:45:33.508+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d35bea5]
2026-01-30T11:45:33.509+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.509+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:33.509+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.510+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.510+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.511+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e5f77f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.511+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49a60e51]
2026-01-30T11:45:33.511+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60970499] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.512+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20fbe438] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.512+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3629642] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607698056 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:33.513+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.514+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697617413 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.514+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2108908817 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.514+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783047840 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.514+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:33.515+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:33.515+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.521+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.515+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.515+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.520+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:33.521+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.522+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.522+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.531+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.531+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.531+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.531+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:33.532+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3629642]
2026-01-30T11:45:33.536+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20fbe438]
2026-01-30T11:45:33.537+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60970499]
2026-01-30T11:45:33.537+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e5f77f]
2026-01-30T11:45:33.538+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.538+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.540+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.540+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.540+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:33.541+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a043f4d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.541+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a885f0a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.542+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:33.543+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.543+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428276241 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.544+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919104270 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.545+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.545+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:33.546+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:33.560+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:33.561+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:33.591+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:33.592+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:33.594+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:33.594+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:33.596+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:33.596+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a885f0a]
2026-01-30T11:45:33.596+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:33.596+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a043f4d]
2026-01-30T11:45:33.597+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:33.597+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.597+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:33.598+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.598+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:33.598+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c206728] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.598+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:33.599+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156a1cf1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.599+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:33.607+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347609001 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.609+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:33.612+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513783622 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.612+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.612+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.613+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.613+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.613+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4096406f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.614+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.615+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600e4aef] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.615+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.615+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894644035 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.615+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738256435 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.624+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:33.624+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:33.626+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:33.630+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:33.631+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.631+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.638+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@156a1cf1]
2026-01-30T11:45:33.639+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c206728]
2026-01-30T11:45:33.640+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.642+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:33.642+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:33.642+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.644+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138d9fc9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.644+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@600e4aef]
2026-01-30T11:45:33.644+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4096406f]
2026-01-30T11:45:33.644+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:33.645+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447400669 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.645+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.646+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.647+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.647+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:33.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d12dfe] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.648+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1499df40] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.658+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:33.659+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:33.661+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006600345 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.661+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1727950980 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.671+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:33.677+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:33.677+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.678+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:33.678+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:33.679+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.679+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:33.680+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:33.682+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.692+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:33.692+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a57ccb8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.693+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138d9fc9]
2026-01-30T11:45:33.695+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772054792 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.696+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:33.696+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.696+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.696+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:33.696+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:33.697+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe21815] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.697+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1499df40]
2026-01-30T11:45:33.698+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65d12dfe]
2026-01-30T11:45:33.700+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544122871 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.707+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.709+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.709+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:33.709+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:33.710+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:33.711+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:33.712+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:33.714+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.714+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.714+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a57ccb8]
2026-01-30T11:45:33.715+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.729+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46126f3b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.730+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387546957 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.736+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:33.736+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:33.740+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.742+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:33.742+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.742+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:33.742+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:33.742+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:33.743+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:33.743+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:33.743+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:33.744+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:33.744+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.744+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.744+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79c1caef] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.746+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:33.746+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd655fd] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.747+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701117321 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.747+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe21815]
2026-01-30T11:45:33.748+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537973373 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.748+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.751+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:33.754+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.756+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:33.756+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46126f3b]
2026-01-30T11:45:33.757+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:33.757+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76be4e4d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.758+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:33.758+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.758+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961790527 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.768+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.761+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b8d197] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.768+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:33.775+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:33.775+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.776+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1283853868 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.776+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79c1caef]
2026-01-30T11:45:33.776+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd655fd]
2026-01-30T11:45:33.778+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:33.782+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.782+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.791+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:33.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12786026] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.795+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfaed1c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.798+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1696159284 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.808+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.809+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1651255523 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.810+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.811+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76be4e4d]
2026-01-30T11:45:33.812+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:33.812+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.814+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.815+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:33.815+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:33.815+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa1f7c8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.823+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b8d197]
2026-01-30T11:45:33.826+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@191437911 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.827+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.827+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:33.828+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.828+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:33.828+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12786026]
2026-01-30T11:45:33.829+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dfaed1c]
2026-01-30T11:45:33.830+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77878b8d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.832+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:33.833+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.839+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.839+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678217859 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:33.841+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:33.841+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:33.842+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.843+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.845+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.845+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.848+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:33.859+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa1f7c8]
2026-01-30T11:45:33.859+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:33.860+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:33.865+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.868+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:33.870+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:33.871+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c541b30] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.871+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.871+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:33.872+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:33.873+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2085338309 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:33.873+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77878b8d]
2026-01-30T11:45:33.873+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:33.874+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.874+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:33.874+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.875+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:33.875+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:33.875+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:33.875+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.876+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.877+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.878+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.889+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9fd822] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.891+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2027459349 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.879+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d2cc26d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.892+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:33.892+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.893+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518676704 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.894+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:33.894+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c541b30]
2026-01-30T11:45:33.894+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:33.895+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.896+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:33.896+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:33.898+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:33.898+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.907+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f9fd822]
2026-01-30T11:45:33.913+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.910+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:33.914+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba32398] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.915+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:33.925+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:33.927+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720155142 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:33.927+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d2cc26d]
2026-01-30T11:45:33.928+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:33.928+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:33.928+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.929+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:33.930+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:33.930+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df90aef] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.930+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:33.931+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@371033751 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:33.941+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.942+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.946+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.943+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60fd4cd2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.947+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008289725 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:33.948+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.948+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.962+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:33.962+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.963+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ba32398]
2026-01-30T11:45:33.965+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60fd4cd2]
2026-01-30T11:45:33.972+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.973+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:33.974+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:33.975+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:33.975+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87cf4a1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:33.976+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.976+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4df90aef]
2026-01-30T11:45:33.977+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@40743584 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:33.981+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:33.982+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:33.980+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:33.981+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:33.991+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:33.994+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:33.994+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:33.995+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:33.997+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:33.997+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:34.008+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:34.014+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87cf4a1]
2026-01-30T11:45:34.031+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.031+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d61e0a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.034+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266352461 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:34.045+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:34.048+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:34.010+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:34.014+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:34.111+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:34.105+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.112+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e16206] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.114+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1015497845 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:34.112+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:34.185+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:34.210+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:34.309+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:34.353+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60d61e0a]
2026-01-30T11:45:34.376+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:34.377+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.377+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.386+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5b2018] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.386+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2fdc3e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.387+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@400721196 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:34.388+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128196031 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:34.390+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:34.388+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:34.390+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:34.392+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:34.398+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:34.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e16206]
2026-01-30T11:45:34.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.409+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:34.409+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:34.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53aef45f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.410+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2fdc3e]
2026-01-30T11:45:34.410+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d5b2018]
2026-01-30T11:45:34.411+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462904702 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:34.412+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.412+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.412+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:34.412+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4443a0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.412+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f6cd70] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.413+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:34.414+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077930714 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:34.414+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@129594614 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:34.415+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:34.418+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:34.419+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:34.420+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:34.425+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:34.425+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:34.425+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:34.428+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f6cd70]
2026-01-30T11:45:34.428+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53aef45f]
2026-01-30T11:45:34.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4443a0]
2026-01-30T11:45:34.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:34.429+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:34.430+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.430+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:34.430+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:34.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f6e22d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.432+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:34.437+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:34.439+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546052208 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:34.476+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:34.479+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:34.555+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:34.561+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f6e22d]
2026-01-30T11:45:34.563+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.563+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575efe5d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.564+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@903584017 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:34.564+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:34.565+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:34.632+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:34.702+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575efe5d]
2026-01-30T11:45:34.721+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:34.762+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bae9c83] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:34.826+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732051389 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:34.991+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:35.060+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:35.165+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:35.169+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bae9c83]
2026-01-30T11:45:35.169+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:35.171+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32e8e032] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:35.172+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1297954920 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:35.172+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:35.173+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:35.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:35.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32e8e032]
2026-01-30T11:45:35.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:35.178+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:35.180+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:36.010+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:36.012+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:36.014+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:36.012+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:45:36.012+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:36.028+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:45:36.013+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:36.015+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:36.029+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:45:36.029+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:36.029+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:36.030+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:36.031+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:45:36.031+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:36.031+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:36.032+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:36.039+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:36.039+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:36.039+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:36.040+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.040+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.040+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:36.041+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.041+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198bae2c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.042+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d7df94] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.042+09:00  INFO 268 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:36.042+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7f8b98] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.043+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.045+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5348d8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.047+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1447475498 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:36.047+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@171393055 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:36.047+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1738855357 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.048+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:36.056+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:36.057+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:36.060+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:36.060+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723882375 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:36.060+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.061+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:36.061+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:36.063+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:36.065+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:36.074+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7f8b98]
2026-01-30T11:45:36.074+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d7df94]
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@198bae2c]
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5348d8]
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1135a4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.075+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:36.076+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@939134169 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:36.076+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5f66dd] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.076+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc82141] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.076+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:36.076+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:36.077+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484737387 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:36.077+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260187167 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.077+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:36.077+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:36.078+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:36.078+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:36.080+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:36.089+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.091+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:36.092+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:36.093+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:36.098+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:36.098+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b1135a4]
2026-01-30T11:45:36.098+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:36.098+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:36.099+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:36.105+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:36.104+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:36.110+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:36.110+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.111+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e9a3ed] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.112+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750299995 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:36.113+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:36.115+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:36.115+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:36.116+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:36.121+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fc82141]
2026-01-30T11:45:36.121+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5f66dd]
2026-01-30T11:45:36.123+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:36.124+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:36.126+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:36.132+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:36.139+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e9a3ed]
2026-01-30T11:45:36.141+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:36.141+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.142+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:36.142+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.143+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258871645 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:45:36.144+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:36.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:36.158+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:36.163+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:36.164+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.165+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823] from current transaction
2026-01-30T11:45:36.165+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:36.175+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.177+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:36.177+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.180+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823] from current transaction
2026-01-30T11:45:36.191+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:36.193+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.196+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:36.196+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.197+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823] from current transaction
2026-01-30T11:45:36.197+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:36.197+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:36.207+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:36.208+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823] from current transaction
2026-01-30T11:45:36.209+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:36.210+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.212+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:36.212+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.213+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.213+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.214+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a21823]
2026-01-30T11:45:36.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.229+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d97e63f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.229+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685202409 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:36.230+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:36.231+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.240+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:36.242+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d97e63f]
2026-01-30T11:45:36.243+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.246+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47077109] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.247+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@625197512 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:36.248+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:36.249+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.259+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:36.259+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47077109]
2026-01-30T11:45:36.259+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.260+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32654845] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.260+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1318512697 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:36.261+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:36.261+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:36.264+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:36.264+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32654845]
2026-01-30T11:45:36.264+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:36.264+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:45:36.266+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:36.276+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/67
2026-01-30T11:45:36.278+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/67
2026-01-30T11:45:36.280+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/67
2026-01-30T11:45:36.281+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/67", parameters={}
2026-01-30T11:45:36.281+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:36.282+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.284+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5ad55c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.292+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1825018092 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.293+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:36.293+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.296+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:36.297+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5ad55c]
2026-01-30T11:45:36.305+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.306+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3397709f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.307+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@729785220 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.309+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:36.310+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.313+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:36.314+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3397709f]
2026-01-30T11:45:36.329+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.340+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.343+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@631958426 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:36.345+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:36.358+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:36.375+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:36.377+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.378+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189] from current transaction
2026-01-30T11:45:36.379+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:36.389+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.398+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:36.398+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189] from current transaction
2026-01-30T11:45:36.411+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:36.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.445+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:36.446+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.446+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189] from current transaction
2026-01-30T11:45:36.446+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:36.448+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:36.457+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:36.458+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.459+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189] from current transaction
2026-01-30T11:45:36.459+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:36.459+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.462+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:36.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.464+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b849189]
2026-01-30T11:45:36.476+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.476+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61838e4c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.477+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134016917 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.477+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:36.478+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:36.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61838e4c]
2026-01-30T11:45:36.482+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.483+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5202f6a2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.489+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223394653 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.490+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:36.491+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 67(Long), 3(Long)
2026-01-30T11:45:36.495+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:36.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5202f6a2]
2026-01-30T11:45:36.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:36.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d203416] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:36.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@684878070 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:36.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:36.498+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:36.508+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:36.508+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d203416]
2026-01-30T11:45:36.509+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:36.510+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=67, drafterId=6, r (truncated)...]
2026-01-30T11:45:36.510+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:38.807+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:38.808+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:38.811+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:38.809+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:38.809+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:38.809+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:38.811+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:38.814+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:38.812+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:38.813+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:38.814+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:38.814+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:38.820+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:38.820+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:38.821+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:38.821+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:38.821+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:38.822+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:38.822+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:38.823+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:38.823+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:38.823+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:38.824+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:38.824+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.828+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:38.828+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:38.830+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.830+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.864+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712b74ea] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.846+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56d47c1a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.855+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.860+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.863+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bfb32cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.875+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45730aa1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.876+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a559ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.891+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074192292 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:38.891+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@34679911 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:38.891+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629356558 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:38.891+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@143890175 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:38.891+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699185051 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:38.892+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:38.892+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:38.893+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:38.893+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:38.894+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:38.894+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:38.895+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:38.895+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:38.897+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:38.898+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:38.907+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:38.907+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:38.908+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:38.908+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:38.908+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:38.908+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bfb32cf]
2026-01-30T11:45:38.908+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45730aa1]
2026-01-30T11:45:38.909+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@712b74ea]
2026-01-30T11:45:38.909+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a559ff]
2026-01-30T11:45:38.909+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56d47c1a]
2026-01-30T11:45:38.909+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.909+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.910+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:38.910+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.910+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.910+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee7a7f5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.911+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c9c29a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.911+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:38.911+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf2e900] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.911+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2df338] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.911+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871288355 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:38.912+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288975933 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:38.913+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:38.913+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@74825425 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:38.913+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101959618 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:38.913+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:38.913+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:38.915+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:38.923+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:38.923+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:38.924+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:38.924+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:38.924+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:38.928+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:38.928+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:38.928+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:38.929+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c9c29a]
2026-01-30T11:45:38.929+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf2e900]
2026-01-30T11:45:38.929+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f2df338]
2026-01-30T11:45:38.930+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.930+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:38.930+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.931+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:38.931+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5209028] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.931+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee7a7f5]
2026-01-30T11:45:38.931+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceff3fe] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.931+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:38.932+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671122692 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:38.932+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:38.933+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074373514 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:38.939+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:38.941+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:38.941+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:38.941+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:38.942+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:38.947+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:38.948+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:38.954+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:38.955+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:38.959+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:38.960+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:38.961+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:38.964+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:38.968+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.975+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a6b826] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.971+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:38.977+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884474691 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:38.978+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:38.979+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:38.989+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5209028]
2026-01-30T11:45:38.981+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:38.987+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:38.988+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ceff3fe]
2026-01-30T11:45:38.989+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.990+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:38.992+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:38.991+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:38.991+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.992+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbb8cce] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.993+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:38.994+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46c5c2c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.995+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090590849 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:38.996+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618f828d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:38.997+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736392540 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:38.997+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:38.998+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:38.998+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1058239956 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:38.998+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:38.999+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.001+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16a6b826]
2026-01-30T11:45:39.006+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.002+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:39.003+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.007+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d5f210] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.007+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.007+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:39.009+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@386997028 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.009+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dbb8cce]
2026-01-30T11:45:39.010+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.012+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.014+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.014+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d371e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.014+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.014+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:39.015+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46c5c2c]
2026-01-30T11:45:39.016+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288315080 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.016+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@618f828d]
2026-01-30T11:45:39.019+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.019+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:39.020+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.021+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:39.024+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:39.025+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e35e48a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.026+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.028+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.030+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:39.031+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590582315 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:39.041+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34d5f210]
2026-01-30T11:45:39.042+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:39.042+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:39.043+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.044+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:39.045+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:39.054+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:39.060+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.058+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:39.074+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:39.076+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:39.078+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:39.080+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.080+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30d371e0]
2026-01-30T11:45:39.085+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.081+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e7194e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.082+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:39.086+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c07c416] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.086+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:39.086+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322612232 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.089+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:39.087+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:39.092+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:39.088+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1475409415 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.088+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e35e48a]
2026-01-30T11:45:39.092+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:39.093+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:39.094+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.095+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:39.096+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:39.098+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.097+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:39.098+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:39.098+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e7194e0]
2026-01-30T11:45:39.098+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c34008a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.103+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.104+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.106+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5310d7e3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.105+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@344671785 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:39.107+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1902415861 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.108+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:39.110+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:39.112+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.115+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:39.116+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:39.123+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:39.124+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.124+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c07c416]
2026-01-30T11:45:39.124+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:39.127+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.128+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:39.128+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1726fa20] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.129+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:39.129+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438890918 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.136+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.130+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.136+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.137+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be694cc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.138+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:39.138+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.140+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c34008a]
2026-01-30T11:45:39.139+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997177634 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:39.140+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5310d7e3]
2026-01-30T11:45:39.140+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.142+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19dc1e8a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.141+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:39.142+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@893414763 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:39.157+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.146+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:39.147+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c06d82] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.156+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.157+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.158+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1726fa20]
2026-01-30T11:45:39.158+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289019190 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.158+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.159+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:39.159+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae7ff11] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.160+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:39.160+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.160+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:39.161+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179365783 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.161+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19dc1e8a]
2026-01-30T11:45:39.162+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be694cc]
2026-01-30T11:45:39.163+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:39.163+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:39.164+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.164+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.164+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:39.164+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44c06d82]
2026-01-30T11:45:39.164+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:39.164+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69768a2f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.165+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.172+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.172+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184441145 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:39.173+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:39.173+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32433daf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.175+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:39.175+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae7ff11]
2026-01-30T11:45:39.176+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965615640 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.176+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:39.177+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.177+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.179+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.177+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:39.178+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e5751e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.180+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272787532 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.180+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:39.181+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.181+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:39.181+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.186+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:39.190+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:39.194+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.195+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.195+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.195+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:39.196+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30250751] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.196+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e5751e0]
2026-01-30T11:45:39.196+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32433daf]
2026-01-30T11:45:39.197+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69768a2f]
2026-01-30T11:45:39.197+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396875844 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:39.198+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.198+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.198+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.198+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:39.198+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:39.200+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:39.203+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:39.206+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:39.208+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.208+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.210+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.213+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:39.215+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:39.216+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:39.232+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:39.239+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:39.241+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:39.243+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:39.243+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:39.292+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.293+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a13d9e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.294+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947575297 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.295+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.277+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:39.278+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:39.296+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30250751]
2026-01-30T11:45:39.295+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.296+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:39.297+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.298+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.306+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4010cb58] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.306+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8f71f1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.307+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477923716 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:39.307+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.308+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@794076058 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.308+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.308+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74a13d9e]
2026-01-30T11:45:39.308+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:39.309+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.309+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.312+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:39.312+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bd83f1d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.313+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@644391989 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.324+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.326+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.326+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.327+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:39.328+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4010cb58]
2026-01-30T11:45:39.329+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8f71f1]
2026-01-30T11:45:39.329+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.333+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.341+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:39.343+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f31f90e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.344+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.347+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@946212320 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.360+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:39.378+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.378+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:39.379+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:39.379+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bd83f1d]
2026-01-30T11:45:39.381+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:39.382+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.389+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:39.389+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1b736e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.390+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:39.391+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606176103 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.391+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:39.391+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:39.392+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.395+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:39.395+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b46f694] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.396+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2100122860 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:39.408+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:39.410+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:39.413+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:39.415+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e1b736e]
2026-01-30T11:45:39.422+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.423+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199b95ff] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.424+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:39.424+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097026465 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.424+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:39.424+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f31f90e]
2026-01-30T11:45:39.424+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.425+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b46f694]
2026-01-30T11:45:39.425+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.427+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:39.428+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372bd1e3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.430+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460678084 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:39.438+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.440+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.446+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.446+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@199b95ff]
2026-01-30T11:45:39.446+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.447+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:39.448+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de89eb7] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.454+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:39.508+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@135913112 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.508+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:39.509+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:39.509+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.693+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372bd1e3]
2026-01-30T11:45:39.694+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.581+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:39.676+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:39.696+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:39.708+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:39.709+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.717+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa3042a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.726+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@830289436 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.731+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:39.737+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:39.738+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de89eb7]
2026-01-30T11:45:39.739+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:39.740+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.740+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3445b9d6] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.761+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037145295 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.788+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:39.790+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:39.791+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:39.791+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aa3042a]
2026-01-30T11:45:39.792+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.796+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70374527] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.799+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1116179807 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:39.801+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:39.803+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:39.815+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:39.844+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3445b9d6]
2026-01-30T11:45:39.844+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.844+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:39.863+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b051902] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.864+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70374527]
2026-01-30T11:45:39.887+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:39.865+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1377272509 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.901+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:39.901+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:39.902+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:39.902+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:39.957+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:39.964+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b051902]
2026-01-30T11:45:39.965+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:39.968+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b040aad] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:39.983+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@673896390 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:39.998+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:40.008+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:40.078+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:40.090+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b040aad]
2026-01-30T11:45:40.091+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.094+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de21ee3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.095+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1180186768 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:40.096+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:40.097+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:40.124+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:40.130+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2de21ee3]
2026-01-30T11:45:40.132+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:40.137+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:40.156+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:40.556+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/66
2026-01-30T11:45:40.556+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/66
2026-01-30T11:45:40.592+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:40.592+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:40.593+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:40.625+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:40.628+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:40.627+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:40.629+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:40.629+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:40.629+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:40.631+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/66
2026-01-30T11:45:40.637+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:40.639+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:40.638+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:40.638+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:40.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/66
2026-01-30T11:45:40.657+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/66
2026-01-30T11:45:40.658+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/66", parameters={}
2026-01-30T11:45:40.639+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.660+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d49adb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.640+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:40.640+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:40.659+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:40.662+09:00  INFO 268 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:40.662+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.663+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.663+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51355d51] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.664+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e36e437] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.664+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe0acab] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1216012793 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:40.721+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904546547 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:40.722+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570052363 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:40.722+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1792230722 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:40.733+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:40.730+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:40.730+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:40.730+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:40.739+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:40.740+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:40.762+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:40.763+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:40.807+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:40.807+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:40.807+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:40.807+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:40.809+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fe0acab]
2026-01-30T11:45:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e36e437]
2026-01-30T11:45:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51355d51]
2026-01-30T11:45:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37d49adb]
2026-01-30T11:45:40.811+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.811+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:40.812+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.812+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.813+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c45ab] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.813+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:40.813+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5157beb0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.813+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ae5da2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.814+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1560159898 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:40.814+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:40.814+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@788276291 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:40.815+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350145234 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:40.823+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:40.816+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:40.823+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:40.824+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:40.824+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:40.828+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:40.829+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:40.831+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:40.838+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:40.838+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:40.838+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:40.839+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:40.839+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:40.839+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43ae5da2]
2026-01-30T11:45:40.840+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c45ab]
2026-01-30T11:45:40.840+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5157beb0]
2026-01-30T11:45:40.840+09:00  INFO 268 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:40.841+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:40.841+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:40.842+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.842+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:40.843+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:40.843+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451a1874] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:40.846+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:40.846+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:40.858+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620982352 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:40.860+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:40.861+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:40.875+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:40.876+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:40.877+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@173434227 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:45:40.877+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:40.880+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:40.881+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:40.891+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451a1874]
2026-01-30T11:45:40.898+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:40.900+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:40.925+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:40.926+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:40.927+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:40.940+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df] from current transaction
2026-01-30T11:45:40.943+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:40.944+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:40.964+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:40.977+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:40.980+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df] from current transaction
2026-01-30T11:45:40.981+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:40.988+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.013+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:41.020+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:41.020+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df] from current transaction
2026-01-30T11:45:41.023+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:41.024+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:41.028+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:41.029+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:41.030+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df] from current transaction
2026-01-30T11:45:41.030+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:41.031+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.039+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:41.040+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:41.040+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:41.041+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:41.041+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@448309df]
2026-01-30T11:45:41.050+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.061+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a0ec56] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.063+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@871937662 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:41.065+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:41.065+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.080+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:41.081+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a0ec56]
2026-01-30T11:45:41.088+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.090+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a06c40] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.091+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350417118 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:41.092+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:41.092+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.095+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:41.119+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a06c40]
2026-01-30T11:45:41.120+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.120+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b40d9a0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.121+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1553297124 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:41.122+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:41.129+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:41.132+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:41.137+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b40d9a0]
2026-01-30T11:45:41.138+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:41.140+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=66, drafterId=6, r (truncated)...]
2026-01-30T11:45:41.142+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:41.153+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/66
2026-01-30T11:45:41.161+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/66
2026-01-30T11:45:41.162+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/66
2026-01-30T11:45:41.162+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/66", parameters={}
2026-01-30T11:45:41.164+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:41.175+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.178+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f833674] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.181+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102067952 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:41.188+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:41.190+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.196+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:41.196+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f833674]
2026-01-30T11:45:41.197+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.197+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ab29464] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.198+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1312648876 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:41.198+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:41.199+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.209+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:41.210+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ab29464]
2026-01-30T11:45:41.213+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.213+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.214+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@903958765 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will be managed by Spring
2026-01-30T11:45:41.214+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:41.215+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:41.223+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:41.224+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.224+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e] from current transaction
2026-01-30T11:45:41.225+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:41.225+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.227+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:41.228+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.228+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e] from current transaction
2026-01-30T11:45:41.228+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:41.229+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.232+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:41.232+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.233+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e] from current transaction
2026-01-30T11:45:41.234+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:41.237+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:41.241+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:41.243+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.243+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e] from current transaction
2026-01-30T11:45:41.244+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:41.244+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.246+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:41.247+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.247+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.261+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.262+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e83a04e]
2026-01-30T11:45:41.280+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.280+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf7b50d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.281+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@990725647 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:41.281+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:41.287+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.290+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:41.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf7b50d]
2026-01-30T11:45:41.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee0d61] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.292+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074824076 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:41.292+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:41.293+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.295+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:41.295+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee0d61]
2026-01-30T11:45:41.295+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.295+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110808d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.296+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277090507 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:41.296+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:41.298+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:41.304+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:41.305+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@110808d]
2026-01-30T11:45:41.307+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:41.308+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=66, drafterId=6, r (truncated)...]
2026-01-30T11:45:41.310+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:41.314+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/66
2026-01-30T11:45:41.327+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/66
2026-01-30T11:45:41.327+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/66
2026-01-30T11:45:41.329+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/66", parameters={}
2026-01-30T11:45:41.330+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:41.332+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.332+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d91d18] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.335+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@680358425 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:41.336+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:41.336+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:41.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62d91d18]
2026-01-30T11:45:41.345+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.345+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f43792] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919926345 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:41.346+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:41.347+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.352+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:41.354+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58f43792]
2026-01-30T11:45:41.360+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.361+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.362+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705472654 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:41.362+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:41.364+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:41.368+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:41.373+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.373+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c] from current transaction
2026-01-30T11:45:41.374+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:41.376+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.378+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:45:41.379+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.380+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c] from current transaction
2026-01-30T11:45:41.381+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:41.382+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.391+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:41.392+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.392+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c] from current transaction
2026-01-30T11:45:41.392+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:41.393+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:41.395+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:41.395+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.396+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c] from current transaction
2026-01-30T11:45:41.396+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:41.398+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.410+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:45:41.411+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.412+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.412+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.413+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10f7775c]
2026-01-30T11:45:41.461+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.464+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad093e0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.470+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1041417039 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:41.471+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:41.472+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.477+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:41.477+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ad093e0]
2026-01-30T11:45:41.478+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.478+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dab6fb9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.479+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401599103 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:41.479+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:41.480+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 66(Long), 3(Long)
2026-01-30T11:45:41.491+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:45:41.491+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dab6fb9]
2026-01-30T11:45:41.492+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:41.492+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584c029b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:41.493+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056729228 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:41.493+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:41.493+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:41.495+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:41.496+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@584c029b]
2026-01-30T11:45:41.496+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:41.497+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=66, drafterId=6, r (truncated)...]
2026-01-30T11:45:41.497+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.346+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:46.347+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:46.348+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:46.348+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:46.349+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:46.348+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:46.348+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:46.349+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:46.354+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:46.356+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:46.356+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:46.356+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:46.356+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:46.357+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:46.358+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:46.358+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:46.358+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:46.358+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:46.358+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:46.358+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:46.359+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:46.359+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:46.359+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.359+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:46.359+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.360+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:46.360+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:46.360+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b574862] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.361+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bcc5388] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.361+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.362+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.363+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.374+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c338c66] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.374+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f417d67] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.374+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@219c6659] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.375+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910794266 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:46.378+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954554936 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.379+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.379+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@573461385 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.379+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@204318046 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:46.379+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188123044 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.379+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:46.380+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.380+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.381+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:46.381+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.388+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:46.388+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.391+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:46.392+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:46.392+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.393+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b574862]
2026-01-30T11:45:46.395+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.396+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a820b89] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.396+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.396+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:46.396+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:46.396+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@652659742 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:46.397+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c338c66]
2026-01-30T11:45:46.397+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bcc5388]
2026-01-30T11:45:46.397+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@219c6659]
2026-01-30T11:45:46.398+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.399+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.399+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:46.403+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.404+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.404+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.404+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6266f390] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.404+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f417d67]
2026-01-30T11:45:46.404+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701f580a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.405+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:46.405+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721193162 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.405+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.406+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538834598 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.406+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.406+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.406+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.407+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab73826] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.408+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:46.408+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.408+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a820b89]
2026-01-30T11:45:46.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879209009 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.411+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:46.412+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.412+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.413+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:46.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.413+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.414+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.415+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6266f390]
2026-01-30T11:45:46.423+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.425+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7499ae3b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.426+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@565590347 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.427+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:46.428+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:46.428+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:46.428+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.429+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:46.430+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:46.430+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@701f580a]
2026-01-30T11:45:46.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab73826]
2026-01-30T11:45:46.432+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.431+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:46.432+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.435+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:46.440+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:46.440+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa99e83] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.440+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.441+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:46.441+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:46.443+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276965208 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.453+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:46.456+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.457+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7499ae3b]
2026-01-30T11:45:46.457+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:46.458+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:46.459+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d9f2e5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.459+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.460+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:46.460+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:46.462+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1788309168 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:46.462+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643b4f35] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.463+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:46.464+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.465+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1575673343 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.467+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:46.473+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:46.476+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.477+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.478+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa99e83]
2026-01-30T11:45:46.478+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.480+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.480+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5622e399] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.480+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebd40a1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.484+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@364651096 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.492+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@728839866 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.492+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.493+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:46.493+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:46.495+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:46.493+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.493+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.495+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d9f2e5]
2026-01-30T11:45:46.496+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643b4f35]
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2778747c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693cdaeb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5622e399]
2026-01-30T11:45:46.498+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ebd40a1]
2026-01-30T11:45:46.500+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862263980 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:46.507+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472229918 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.507+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.508+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.508+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.508+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:46.509+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:46.509+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b725a48] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.509+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.510+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:46.510+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.511+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141110223 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.514+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:46.514+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:46.524+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:46.525+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:46.527+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:46.528+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:46.528+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.528+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:46.529+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:46.529+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:46.529+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2778747c]
2026-01-30T11:45:46.529+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@693cdaeb]
2026-01-30T11:45:46.530+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.530+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b725a48]
2026-01-30T11:45:46.530+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.530+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.531+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42cb8103] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.531+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.531+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:46.532+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27688546] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.532+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@260824355 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:46.538+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.539+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@671934658 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.539+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.539+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.540+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:46.543+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:46.544+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:46.547+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:46.548+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:46.560+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:46.557+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:46.559+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:46.561+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:46.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:46.562+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42cb8103]
2026-01-30T11:45:46.563+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:46.563+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:46.564+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.564+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:46.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:46.565+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372ed182] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.565+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21002ef2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.565+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27688546]
2026-01-30T11:45:46.565+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.565+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@703827453 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.571+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@605144759 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:46.572+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.573+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133d155d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.573+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.573+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.573+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a9075a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.574+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735937915 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.574+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.575+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.576+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@831056636 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.576+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:46.577+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.580+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.580+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:46.580+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:46.580+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.580+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372ed182]
2026-01-30T11:45:46.581+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21002ef2]
2026-01-30T11:45:46.581+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.589+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.589+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73568df5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.589+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b176db] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.590+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@850784476 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.590+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124169057 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:46.591+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:46.591+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.592+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:46.592+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.596+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.596+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:46.596+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.596+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:46.606+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27b176db]
2026-01-30T11:45:46.607+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73568df5]
2026-01-30T11:45:46.607+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a9075a]
2026-01-30T11:45:46.607+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133d155d]
2026-01-30T11:45:46.609+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.610+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.610+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.611+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.611+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:46.612+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e5c21c3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.612+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c264be] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.612+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56182439] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.613+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958538456 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.613+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.614+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1506486347 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.615+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@770983002 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.615+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.625+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:46.625+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:46.625+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.626+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:46.626+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:46.630+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:46.632+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:46.641+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.641+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:46.642+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:46.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e5c21c3]
2026-01-30T11:45:46.644+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:46.644+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43c264be]
2026-01-30T11:45:46.645+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:46.645+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56182439]
2026-01-30T11:45:46.647+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.647+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:46.648+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:46.649+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.652+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8c6f79] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.653+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.654+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.655+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:46.656+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799035682 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:46.656+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57df0718] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.657+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.659+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.660+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@875975458 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:46.663+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.663+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.664+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:46.671+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.673+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:46.673+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.676+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:46.676+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b8c6f79]
2026-01-30T11:45:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:46.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.679+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:46.680+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.680+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15707f09] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.680+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57df0718]
2026-01-30T11:45:46.694+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798285933 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:46.694+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.694+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:46.694+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58445991] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.695+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:46.696+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005688902 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:46.696+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.698+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:46.709+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.709+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:46.710+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:46.712+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:46.723+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:46.723+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15707f09]
2026-01-30T11:45:46.723+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:46.724+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.725+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.725+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc33fe9] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.725+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3716eef5] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.726+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541245295 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:46.744+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:46.726+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027817237 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.741+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.746+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:46.746+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.747+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58445991]
2026-01-30T11:45:46.747+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.747+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.748+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:46.750+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.790+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:46.804+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.804+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:46.807+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:46.807+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3716eef5]
2026-01-30T11:45:46.807+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dc33fe9]
2026-01-30T11:45:46.808+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:46.808+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.809+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:46.812+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:46.813+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:46.809+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:46.809+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab51b0c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.832+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:46.843+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1783902697 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:46.844+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:46.845+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:46.845+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74afe357] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:46.845+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:46.846+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894494832 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:46.846+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:46.879+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:46.911+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:46.929+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:46.976+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:47.012+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab51b0c]
2026-01-30T11:45:47.013+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:47.013+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.015+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:47.024+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753cf83e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.024+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:47.025+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932442350 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.026+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.039+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e579120] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.026+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:47.028+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:47.040+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248381698 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:47.042+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:47.042+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74afe357]
2026-01-30T11:45:47.042+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:47.045+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.046+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:47.046+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7305b070] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.076+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017153052 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:47.077+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:47.077+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:47.107+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:47.108+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:47.109+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e579120]
2026-01-30T11:45:47.109+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753cf83e]
2026-01-30T11:45:47.109+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.110+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.111+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39eefa3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.111+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5f1925] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.111+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290631777 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:47.112+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2024857944 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.112+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:47.113+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:47.113+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:47.113+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7305b070]
2026-01-30T11:45:47.114+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:47.114+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:47.115+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:47.123+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:47.125+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:47.144+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:47.144+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:47.146+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39eefa3]
2026-01-30T11:45:47.172+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:47.146+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5f1925]
2026-01-30T11:45:47.173+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:47.174+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.174+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cdf399] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.177+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617169492 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.351+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:47.397+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:47.430+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:47.431+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cdf399]
2026-01-30T11:45:47.432+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.438+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e2619f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.439+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@829031969 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.440+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:47.461+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:47.475+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:47.477+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68e2619f]
2026-01-30T11:45:47.477+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.492+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62032e88] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.497+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@429282766 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.498+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:47.498+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:47.510+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:47.511+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62032e88]
2026-01-30T11:45:47.511+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.511+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e987795] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.512+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630486432 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.513+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:47.515+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:47.526+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:47.526+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e987795]
2026-01-30T11:45:47.527+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:47.528+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16add471] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:47.528+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194264558 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:47.528+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:47.529+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:47.531+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:47.531+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16add471]
2026-01-30T11:45:47.532+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:47.539+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:47.540+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:48.280+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=2&size=10
2026-01-30T11:45:48.285+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-01-30T11:45:48.290+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:48.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=2&size=10
2026-01-30T11:45:48.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=2&size=10", parameters={masked}
2026-01-30T11:45:48.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:48.292+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.292+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2506ba77] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.295+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@992118853 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.299+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:48.304+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:48.310+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:48.312+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2506ba77]
2026-01-30T11:45:48.313+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.313+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416f61f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.314+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@547290748 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.314+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:48.314+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:48.319+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:48.321+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416f61f4]
2026-01-30T11:45:48.321+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.322+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b9a68d8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.323+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834717854 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.323+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:48.324+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:48.329+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:48.329+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b9a68d8]
2026-01-30T11:45:48.330+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.330+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f9ceeb] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.330+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@956151428 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.330+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:48.330+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:48.332+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:48.332+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60f9ceeb]
2026-01-30T11:45:48.335+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.336+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce9058d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.338+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@315165293 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.338+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:48.339+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:48.341+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:48.341+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ce9058d]
2026-01-30T11:45:48.341+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.342+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@388d8d14] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.342+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287402213 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.342+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:48.343+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:48.346+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:48.347+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@388d8d14]
2026-01-30T11:45:48.347+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.347+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff94a73] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.348+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@734567861 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.348+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:48.348+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:48.351+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:48.351+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ff94a73]
2026-01-30T11:45:48.353+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.353+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d9f5ac] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.355+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128694742 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.355+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:48.355+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:48.358+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:48.358+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76d9f5ac]
2026-01-30T11:45:48.358+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:48.359+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff8a8bd] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:48.359+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714770555 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:48.359+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:48.360+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:48.362+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:48.362+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ff8a8bd]
2026-01-30T11:45:48.362+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:48.363+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:48.363+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:51.042+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:51.042+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/42
2026-01-30T11:45:51.042+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/42
2026-01-30T11:45:51.043+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:51.043+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:51.045+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:51.044+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:51.045+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/42
2026-01-30T11:45:51.046+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:51.046+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:51.046+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:51.047+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:51.047+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:51.047+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/42
2026-01-30T11:45:51.053+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/42
2026-01-30T11:45:51.055+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/42", parameters={}
2026-01-30T11:45:51.047+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:51.047+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:51.063+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:51.063+09:00  INFO 268 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:51.064+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.064+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e104f83] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.047+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:51.056+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:51.062+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:51.073+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.074+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.076+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e178692] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.075+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.076+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241d8c32] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.077+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438fe92c] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.080+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@500787470 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:51.081+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:51.089+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1952339717 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.089+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248134696 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:51.089+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576073893 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:51.091+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:51.091+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.093+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:51.093+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:51.095+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:51.098+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:51.098+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.099+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:51.106+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e104f83]
2026-01-30T11:45:51.108+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:51.109+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:51.109+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:51.109+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:51.109+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:51.110+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@438fe92c]
2026-01-30T11:45:51.111+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:51.111+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241d8c32]
2026-01-30T11:45:51.131+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.140+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2f6e5f] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.114+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:51.115+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e178692]
2026-01-30T11:45:51.123+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.141+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138004482 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:51.144+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:51.143+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.143+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:45:51.144+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdd2b89] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.145+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:51.145+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb6007a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.146+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:45:51.147+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140985607 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.147+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@584595383 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:51.148+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:45:51.148+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:51.153+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:51.148+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.150+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:45:51.155+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.155+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:45:51.156+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.159+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a69befc] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.160+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:51.160+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.160+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:51.161+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@788443621 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:51.162+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2f6e5f]
2026-01-30T11:45:51.163+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb6007a]
2026-01-30T11:45:51.163+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdd2b89]
2026-01-30T11:45:51.163+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:45:51.164+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:51.165+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:51.166+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:51.170+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:51.172+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:51.175+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:51.178+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:51.214+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:45:51.215+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.219+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a69befc]
2026-01-30T11:45:51.219+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.220+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:51.220+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@966868857 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:51.220+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:45:51.221+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.222+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:51.225+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:51.231+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:51.238+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.239+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80] from current transaction
2026-01-30T11:45:51.240+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.241+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.250+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.257+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.258+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80] from current transaction
2026-01-30T11:45:51.259+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.261+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.281+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.281+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.283+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80] from current transaction
2026-01-30T11:45:51.287+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.289+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 44(Long), 3(Long)
2026-01-30T11:45:51.296+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:51.296+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.296+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.297+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.297+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f9ad80]
2026-01-30T11:45:51.354+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.358+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.360+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964072767 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:51.361+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.362+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:51.382+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:51.386+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.387+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2] from current transaction
2026-01-30T11:45:51.388+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.389+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.394+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.394+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.394+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2] from current transaction
2026-01-30T11:45:51.394+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.395+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.398+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.408+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2] from current transaction
2026-01-30T11:45:51.410+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.411+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 45(Long), 3(Long)
2026-01-30T11:45:51.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:51.413+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.414+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4084d3b2]
2026-01-30T11:45:51.425+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.425+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.425+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1926525721 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:45:51.426+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.427+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:51.430+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:51.431+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.432+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c] from current transaction
2026-01-30T11:45:51.436+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.437+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.442+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.443+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.444+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c] from current transaction
2026-01-30T11:45:51.445+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.445+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.447+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.448+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.448+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c] from current transaction
2026-01-30T11:45:51.452+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.455+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 46(Long), 3(Long)
2026-01-30T11:45:51.459+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:51.460+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.461+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bdd183c]
2026-01-30T11:45:51.474+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.476+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a7874b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.476+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558393134 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:51.478+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.478+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.481+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.488+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a7874b]
2026-01-30T11:45:51.488+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.488+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62fc3291] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.488+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@766405722 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:51.489+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.490+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.491+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 3
2026-01-30T11:45:51.492+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62fc3291]
2026-01-30T11:45:51.492+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.493+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7e8eaf] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.493+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152391115 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:51.494+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:51.494+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:51.496+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:51.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7e8eaf]
2026-01-30T11:45:51.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:51.497+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=42, drafterId=6, r (truncated)...]
2026-01-30T11:45:51.498+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:51.513+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/42
2026-01-30T11:45:51.517+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/42
2026-01-30T11:45:51.519+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/42
2026-01-30T11:45:51.519+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/42", parameters={}
2026-01-30T11:45:51.521+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:45:51.522+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.523+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@387e25b1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.524+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1082679443 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.526+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:45:51.527+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.529+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:45:51.530+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@387e25b1]
2026-01-30T11:45:51.531+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.534+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca6d21b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.535+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975270291 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.543+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.546+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.563+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.563+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca6d21b]
2026-01-30T11:45:51.572+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.573+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.573+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1215553416 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:45:51.575+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.577+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:51.579+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:51.580+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.580+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe] from current transaction
2026-01-30T11:45:51.581+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.581+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.588+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.590+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.590+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe] from current transaction
2026-01-30T11:45:51.591+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.592+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.595+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.597+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.598+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe] from current transaction
2026-01-30T11:45:51.605+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.606+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 44(Long), 3(Long)
2026-01-30T11:45:51.639+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:51.641+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.641+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.642+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.644+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56bb31fe]
2026-01-30T11:45:51.675+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.676+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.677+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1016343777 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:45:51.678+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.680+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:51.683+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:51.684+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.685+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad] from current transaction
2026-01-30T11:45:51.689+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.690+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.693+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.694+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.695+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad] from current transaction
2026-01-30T11:45:51.695+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.696+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.698+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.702+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.707+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad] from current transaction
2026-01-30T11:45:51.708+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.710+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 45(Long), 3(Long)
2026-01-30T11:45:51.713+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:51.713+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.713+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.714+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.714+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9916ad]
2026-01-30T11:45:51.726+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.726+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.727+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1004369013 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:45:51.727+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:51.728+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:45:51.732+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:45:51.740+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.740+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd] from current transaction
2026-01-30T11:45:51.741+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:45:51.742+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.758+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 3
2026-01-30T11:45:51.759+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.759+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd] from current transaction
2026-01-30T11:45:51.760+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.761+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.773+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.773+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.773+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd] from current transaction
2026-01-30T11:45:51.773+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.774+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 46(Long), 3(Long)
2026-01-30T11:45:51.776+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 0
2026-01-30T11:45:51.776+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.777+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.778+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.778+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@546d88dd]
2026-01-30T11:45:51.789+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.789+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7607a612] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.790+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1416408863 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.790+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:45:51.791+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.793+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:45:51.793+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7607a612]
2026-01-30T11:45:51.793+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.794+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71549ee8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.795+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@975737318 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.795+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:45:51.796+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 42(Long), 3(Long)
2026-01-30T11:45:51.799+09:00 DEBUG 268 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 3
2026-01-30T11:45:51.807+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71549ee8]
2026-01-30T11:45:51.807+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:51.808+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37887445] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:51.809+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1660817282 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:51.810+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:51.811+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:51.837+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:51.837+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37887445]
2026-01-30T11:45:51.838+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:51.838+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=42, drafterId=6, r (truncated)...]
2026-01-30T11:45:51.839+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:52.378+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:52.380+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:52.381+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:52.381+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:52.384+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:52.385+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:45:52.386+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:52.387+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:45:52.388+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:52.388+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:52.389+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:45:52.390+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:52.390+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:45:52.390+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:52.392+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:52.394+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.394+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac23649] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.391+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:52.391+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:45:52.391+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:52.392+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:45:52.403+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:52.404+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:45:52.404+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:52.409+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:52.405+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:45:52.407+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.408+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.411+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.411+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154217504 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:52.412+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:45:52.412+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5987892e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.413+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dce5b0e] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.414+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dce25a] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.415+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:52.418+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.445+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:52.453+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2623f2d3] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.457+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@256531318 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:52.458+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161420512 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:52.458+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@941772984 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:52.461+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:52.461+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@438842017 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:52.462+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:52.462+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:52.462+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:52.478+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:52.480+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:52.480+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac23649]
2026-01-30T11:45:52.481+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:52.482+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:52.509+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:52.509+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.514+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b18c8db] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.521+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:52.561+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1690721640 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:52.562+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:52.562+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:52.563+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:52.563+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5987892e]
2026-01-30T11:45:52.563+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:52.564+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2623f2d3]
2026-01-30T11:45:52.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dce5b0e]
2026-01-30T11:45:52.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53dce25a]
2026-01-30T11:45:52.565+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.565+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70edf537] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.566+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1724882821 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:52.571+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:52.564+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.564+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:52.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.565+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:52.572+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:52.572+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a913102] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.573+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f569257] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.574+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:45:52.574+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641240906 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:52.575+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:52.575+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:52.574+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1779338452 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:52.575+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:52.577+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:52.580+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:52.613+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:52.613+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:52.613+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:52.625+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f569257]
2026-01-30T11:45:52.629+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:52.631+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b18c8db]
2026-01-30T11:45:52.631+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70edf537]
2026-01-30T11:45:52.632+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:52.631+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.631+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a913102]
2026-01-30T11:45:52.632+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.632+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:52.643+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ff8b24] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.644+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:52.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203450278 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:52.644+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a75dc8] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.644+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:52.647+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:52.672+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:52.647+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:52.648+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:52.656+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@805061286 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:52.692+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:52.693+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:52.705+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:52.705+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:52.706+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:52.707+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:52.707+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:45:52.707+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:52.723+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:45:52.724+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:52.725+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:52.726+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:45:52.727+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.728+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ff8b24]
2026-01-30T11:45:52.728+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:45:52.728+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52692124] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.729+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.734+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.740+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:52.741+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1989206176 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:52.741+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f26e1e2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.742+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49df82ab] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.749+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30a75dc8]
2026-01-30T11:45:52.751+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:52.755+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1147926921 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:52.756+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750479738 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:52.756+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.759+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:52.759+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:52.762+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:45:52.762+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ceda0a1] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.763+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:52.764+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:45:52.772+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714350569 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:52.776+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:52.777+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:52.778+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52692124]
2026-01-30T11:45:52.798+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:52.798+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.804+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:45:52.805+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:52.855+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f26e1e2]
2026-01-30T11:45:52.856+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:52.856+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fecbd85] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.857+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@928870507 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:52.858+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:52.805+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24183f97] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:52.805+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49df82ab]
2026-01-30T11:45:52.859+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:52.860+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1063471665 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:45:52.870+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:52.948+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.028+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed64d44] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.027+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:53.028+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ceda0a1]
2026-01-30T11:45:53.029+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@464079087 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:45:53.031+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:45:53.040+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:45:53.030+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:53.031+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:53.043+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:53.048+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:53.054+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:53.055+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fecbd85]
2026-01-30T11:45:53.056+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.057+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac1d0c2] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.061+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:53.061+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1611354250 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:53.061+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24183f97]
2026-01-30T11:45:53.062+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:45:53.064+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:53.069+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:45:53.070+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:45:53.070+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:53.071+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:45:53.071+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:45:53.073+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:53.076+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:45:53.079+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:53.079+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ed64d44]
2026-01-30T11:45:53.080+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:45:53.080+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:45:53.086+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:53.086+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:45:53.087+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:45:53.087+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ac1d0c2]
2026-01-30T11:45:53.087+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:45:53.089+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:45:53.091+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.092+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.092+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:45:53.092+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e623ed] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.092+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:53.092+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bcaf951] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.093+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:45:53.095+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:53.099+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059679530 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:53.103+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:53.101+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.102+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163912146 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:53.104+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:45:53.104+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:53.104+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3570613d] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.104+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:53.105+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:45:53.105+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258658506 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:53.106+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:53.107+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:45:53.109+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:45:53.112+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:53.113+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:53.117+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bcaf951]
2026-01-30T11:45:53.113+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:45:53.114+09:00 DEBUG 268 --- [http-nio-8080-exec-10] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:45:53.119+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.119+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:45:53.119+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:45:53.119+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e623ed]
2026-01-30T11:45:53.120+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743250d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.120+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3570613d]
2026-01-30T11:45:53.122+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.125+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@956186482 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:53.125+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.126+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f824d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.126+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:53.126+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:53.126+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6544324] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.127+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@619046507 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:53.127+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:45:53.128+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:45:53.128+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@815506266 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:45:53.128+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:53.129+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:45:53.131+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:53.134+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:53.135+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:53.140+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:45:53.143+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@743250d4]
2026-01-30T11:45:53.145+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.145+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:53.146+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:53.146+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9e376b] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.146+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9f824d4]
2026-01-30T11:45:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212966556 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:45:53.147+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6544324]
2026-01-30T11:45:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5425b2a0] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.148+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:53.149+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:45:53.151+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@473166452 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:53.153+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:53.158+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:45:53.159+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:53.160+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:53.161+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:45:53.162+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:45:53.171+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9e376b]
2026-01-30T11:45:53.173+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:45:53.173+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:53.180+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:45:53.181+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:45:53.182+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:53.190+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:53.192+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5425b2a0]
2026-01-30T11:45:53.194+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:45:53.204+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69da5176] was not registered for synchronization because synchronization is not active
2026-01-30T11:45:53.193+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:45:53.205+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278089311 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:45:53.205+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:45:53.207+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:45:53.209+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:45:53.213+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:45:53.224+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses
2026-01-30T11:45:53.225+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:45:53.231+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses
2026-01-30T11:45:53.231+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69da5176]
2026-01-30T11:45:53.240+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:45:53.240+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:45:53.241+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:45:55.403+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-01-30T11:45:55.404+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses
2026-01-30T11:45:55.405+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses
2026-01-30T11:45:58.656+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:45:58.657+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:45:58.657+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:45:58.657+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/69
2026-01-30T11:45:58.657+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:58.658+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:45:58.658+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:45:58.658+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/69
2026-01-30T11:45:58.658+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/me/signatures
2026-01-30T11:45:58.658+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:45:58.659+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/69
2026-01-30T11:45:58.659+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/me/signatures
2026-01-30T11:45:58.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/69
2026-01-30T11:45:58.663+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:45:58.670+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/69
2026-01-30T11:45:58.676+09:00  WARN 268 --- [http-nio-8080-exec-8] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/me/signatures
2026-01-30T11:45:58.678+09:00  WARN 268 --- [http-nio-8080-exec-8] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/me/signatures
2026-01-30T11:45:58.677+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/69
2026-01-30T11:46:03.735+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-30T11:46:03.737+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T11:46:03.738+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-30T11:46:03.738+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-30T11:46:03.739+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-30T11:46:03.741+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-30T11:46:03.742+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-30T11:46:03.742+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:03.744+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dfbe69] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:03.751+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549858821 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:03.756+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-30T11:46:03.757+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-30T11:46:03.777+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-30T11:46:03.781+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30dfbe69]
2026-01-30T11:46:03.868+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:03.869+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152238dc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:03.870+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@324103971 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:03.870+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:03.871+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:03.890+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:03.895+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@152238dc]
2026-01-30T11:46:03.897+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 로그인 성공 - userId: 5, role: CEO, companyId: 3
2026-01-30T11:46:03.897+09:00  INFO 268 --- [http-nio-8080-exec-1] SECURITY                                 : LOGIN_SUCCESS userId=5 username=test_ceo role=CEO
2026-01-30T11:46:03.898+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:03.903+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=5, username=test_ceo, password=n (truncated)...]
2026-01-30T11:46:03.904+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:04.221+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-30T11:46:04.222+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/companies
2026-01-30T11:46:04.223+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/companies
2026-01-30T11:46:04.301+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:04.303+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:04.303+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:04.304+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:04.304+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:04.306+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:04.307+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:04.307+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:04.307+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:04.308+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:04.308+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:04.308+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses
2026-01-30T11:46:04.308+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:04.309+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:04.309+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:04.309+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:04.309+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:04.310+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses
2026-01-30T11:46:04.312+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:04.312+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:04.319+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:46:04.329+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/credits/total
2026-01-30T11:46:04.331+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/credits/total
2026-01-30T11:46:04.328+09:00  WARN 268 --- [http-nio-8080-exec-8] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/subscriptions/current
2026-01-30T11:46:04.330+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/companies
2026-01-30T11:46:04.337+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/companies
2026-01-30T11:46:04.336+09:00  WARN 268 --- [http-nio-8080-exec-8] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/subscriptions/current
2026-01-30T11:46:04.339+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:04.342+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:04.342+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:04.353+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:04.362+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:04.359+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:04.359+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:04.364+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:04.360+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:04.361+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:04.365+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses
2026-01-30T11:46:04.362+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:04.362+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:04.364+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:04.375+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:04.364+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:04.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:04.373+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses
2026-01-30T11:46:04.374+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:04.375+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:04.377+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:04.380+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/credits/total
2026-01-30T11:46:04.385+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/subscriptions/current
2026-01-30T11:46:04.387+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:04.390+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:04.390+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/credits/total
2026-01-30T11:46:04.390+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/subscriptions/current
2026-01-30T11:46:04.391+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:04.391+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:04.394+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:04.401+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:04.405+09:00  WARN 268 --- [http-nio-8080-exec-8] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:04.406+09:00  WARN 268 --- [http-nio-8080-exec-8] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:04.409+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:04.410+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:04.410+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:08.190+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:08.191+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:08.191+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:08.191+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:08.192+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:08.195+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:08.195+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:08.195+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:08.195+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:08.195+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:08.196+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:08.196+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:08.207+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:08.209+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:08.209+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:08.210+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:08.213+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:08.214+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:08.215+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:08.217+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:08.219+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:08.218+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:08.218+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:08.226+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:08.486+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:08.487+09:00  WARN 268 --- [http-nio-8080-exec-8] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:08.488+09:00  WARN 268 --- [http-nio-8080-exec-8] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/monthly-trend
2026-01-30T11:46:09.721+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:09.722+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:09.722+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-30T11:46:09.739+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:09.739+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:09.750+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/companies
2026-01-30T11:46:09.751+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:09.751+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:09.751+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/companies
2026-01-30T11:46:09.809+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:09.813+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:09.825+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:09.861+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:09.870+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:09.872+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:10.031+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:10.038+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:10.039+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:10.039+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:10.039+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:10.039+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:10.045+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:10.040+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:10.042+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:10.043+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:10.053+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:10.043+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:10.045+09:00  WARN 268 --- [http-nio-8080-exec-8] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:10.046+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:10.052+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses
2026-01-30T11:46:10.054+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:10.055+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:10.055+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:10.056+09:00  WARN 268 --- [http-nio-8080-exec-8] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:10.057+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses
2026-01-30T11:46:10.058+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:46:10.059+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/subscriptions/current
2026-01-30T11:46:10.073+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:10.063+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:10.068+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/credits/total
2026-01-30T11:46:10.070+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:10.073+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/companies
2026-01-30T11:46:10.073+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/subscriptions/current
2026-01-30T11:46:10.074+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:10.074+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/pending-approvals
2026-01-30T11:46:10.075+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/credits/total
2026-01-30T11:46:10.077+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/companies
2026-01-30T11:46:10.077+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:10.078+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:10.079+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:10.079+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/pending-approvals
2026-01-30T11:46:10.084+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:10.091+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:10.095+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:10.097+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:10.098+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:10.103+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:10.106+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:10.107+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses
2026-01-30T11:46:10.111+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:10.111+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/subscriptions/current
2026-01-30T11:46:10.111+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:10.113+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:10.113+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/credits/total
2026-01-30T11:46:10.113+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses
2026-01-30T11:46:10.114+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/subscriptions/current
2026-01-30T11:46:10.114+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:10.126+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/credits/total
2026-01-30T11:46:10.130+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:10.161+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:10.170+09:00  WARN 268 --- [http-nio-8080-exec-8] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:10.175+09:00  WARN 268 --- [http-nio-8080-exec-8] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:14.309+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:14.310+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:14.310+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:14.310+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:14.311+09:00  WARN 268 --- [http-nio-8080-exec-4] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:14.311+09:00  WARN 268 --- [http-nio-8080-exec-2] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:14.312+09:00  WARN 268 --- [http-nio-8080-exec-1] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:14.312+09:00  WARN 268 --- [http-nio-8080-exec-3] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:14.312+09:00  WARN 268 --- [http-nio-8080-exec-4] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:14.312+09:00  WARN 268 --- [http-nio-8080-exec-2] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:14.312+09:00  WARN 268 --- [http-nio-8080-exec-1] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:14.313+09:00  WARN 268 --- [http-nio-8080-exec-3] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:14.320+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:14.321+09:00  WARN 268 --- [http-nio-8080-exec-6] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/users/pending
2026-01-30T11:46:14.321+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:14.321+09:00  WARN 268 --- [http-nio-8080-exec-6] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/users/pending
2026-01-30T11:46:14.321+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:14.322+09:00  WARN 268 --- [http-nio-8080-exec-7] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/payment-method-summary
2026-01-30T11:46:14.324+09:00  WARN 268 --- [http-nio-8080-exec-10] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:14.327+09:00  WARN 268 --- [http-nio-8080-exec-10] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/category-ratio
2026-01-30T11:46:14.325+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:14.326+09:00  WARN 268 --- [http-nio-8080-exec-7] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/payment-method-summary
2026-01-30T11:46:14.330+09:00  WARN 268 --- [http-nio-8080-exec-9] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/user-stats
2026-01-30T11:46:14.337+09:00  WARN 268 --- [http-nio-8080-exec-9] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/user-stats
2026-01-30T11:46:14.608+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:14.609+09:00  WARN 268 --- [http-nio-8080-exec-5] c.i.backend.security.RateLimitFilter     : Rate limit exceeded for key: USER:5, path: /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:14.610+09:00  WARN 268 --- [http-nio-8080-exec-5] SECURITY                                 : RATE_LIMIT_EXCEEDED key=USER:5 path=/api/expenses/dashboard/monthly-trend
2026-01-30T11:46:14.982+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-30T11:46:14.987+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/logout
2026-01-30T11:46:14.990+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-30T11:46:14.993+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-30T11:46:14.993+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-30T11:46:15.008+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI1IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-30T11:46:15.014+09:00  INFO 268 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=5
2026-01-30T11:46:15.025+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:15.027+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-30T11:46:15.070+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:17.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-30T11:46:17.432+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-30T11:46:17.432+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-30T11:46:17.433+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-30T11:46:17.433+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-30T11:46:17.433+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-30T11:46:17.434+09:00  INFO 268 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-30T11:46:17.434+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:17.434+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@289e314d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:17.436+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357718497 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:17.437+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-30T11:46:17.439+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-30T11:46:17.441+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-30T11:46:17.441+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@289e314d]
2026-01-30T11:46:17.521+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:17.521+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca52141] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:17.523+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1196007244 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:17.523+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:17.523+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:17.525+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:17.526+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ca52141]
2026-01-30T11:46:17.526+09:00  INFO 268 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 성공 - userId: 5, role: CEO, companyId: 3
2026-01-30T11:46:17.526+09:00  INFO 268 --- [http-nio-8080-exec-4] SECURITY                                 : LOGIN_SUCCESS userId=5 username=test_ceo role=CEO
2026-01-30T11:46:17.527+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:17.528+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=5, username=test_ceo, password=n (truncated)...]
2026-01-30T11:46:17.528+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.137+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-30T11:46:18.138+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/companies
2026-01-30T11:46:18.139+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-30T11:46:18.141+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-30T11:46:18.141+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-30T11:46:18.142+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.142+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7cb17e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.152+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1092931700 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.156+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-30T11:46:18.158+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-30T11:46:18.163+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 3
2026-01-30T11:46:18.165+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7cb17e]
2026-01-30T11:46:18.169+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.170+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-01-30T11:46:18.172+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.214+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:18.214+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.217+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.218+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.219+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.219+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.221+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:18.222+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.222+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:46:18.222+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:18.223+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:46:18.223+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:18.223+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:18.224+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:18.223+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.224+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.224+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.224+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.224+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.225+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:18.225+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.226+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:46:18.226+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.226+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.226+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.226+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.227+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.227+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:46:18.228+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.227+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:46:18.227+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:46:18.227+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:18.227+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b8e57e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.228+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c569fac] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.228+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.228+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.228+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.229+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.231+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508411058 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.233+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.234+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742392063 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.235+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.236+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.236+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c19e1f] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.236+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:18.237+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.238+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.239+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.242+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.239+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.241+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:18.241+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501e5d85] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.242+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232784508 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.242+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f4aa9b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.242+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c91d8a3] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.243+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.244+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1268651026 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.245+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.245+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.245+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:18.245+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:46:18.245+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421234022 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.246+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c569fac]
2026-01-30T11:46:18.247+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b8e57e]
2026-01-30T11:46:18.247+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:46:18.249+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.248+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:46:18.248+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@925581817 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:18.253+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:46:18.251+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.252+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.253+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c19e1f]
2026-01-30T11:46:18.253+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:46:18.254+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3074917] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.255+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:46:18.255+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f51178b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.255+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.256+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:46:18.256+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:46:18.257+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@904873472 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.257+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70f4aa9b]
2026-01-30T11:46:18.257+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744860437 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.258+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.257+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5210ff4d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.257+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501e5d85]
2026-01-30T11:46:18.258+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.259+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.259+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:46:18.259+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814595359 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.259+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.260+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.260+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.260+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:46:18.260+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.260+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.260+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:46:18.261+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c91d8a3]
2026-01-30T11:46:18.262+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.263+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.263+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:18.272+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.274+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:46:18.273+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:18.275+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/subscriptions/current
2026-01-30T11:46:18.276+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.278+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/credits/total
2026-01-30T11:46:18.279+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-30T11:46:18.281+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.286+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:46:18.287+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.287+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.288+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-30T11:46:18.288+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-30T11:46:18.288+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f51178b]
2026-01-30T11:46:18.288+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3074917]
2026-01-30T11:46:18.289+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5210ff4d]
2026-01-30T11:46:18.289+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:46:18.290+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-30T11:46:18.290+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-30T11:46:18.290+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.290+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.291+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.292+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:46:18.292+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-30T11:46:18.292+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:46:18.292+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:18.292+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.293+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512d4874] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.294+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:46:18.294+09:00 DEBUG 268 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:46:18.294+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:46:18.295+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.295+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.295+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76689291 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.296+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:46:18.296+09:00 DEBUG 268 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:46:18.297+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.300+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.303+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.312+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:18.314+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.325+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.325+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d64cdd8] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.327+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:18.327+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:46:18.331+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@369ac65d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.331+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:18.331+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7fa197] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.331+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@566500189 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.331+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.333+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.336+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:46:18.339+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:46:18.334+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945126630 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.335+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074129020 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.336+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-30T11:46:18.336+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.339+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:46:18.341+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@512d4874]
2026-01-30T11:46:18.342+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.342+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-30T11:46:18.342+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-01-30T11:46:18.343+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:46:18.343+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.345+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792d09cc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.346+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123582069 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.343+09:00 DEBUG 268 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.344+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.344+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-01-30(LocalDate)
2026-01-30T11:46:18.345+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.347+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-01-30T11:46:18.354+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.357+09:00 DEBUG 268 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.363+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.363+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d64cdd8]
2026-01-30T11:46:18.363+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.364+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.365+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-30T11:46:18.365+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.367+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.369+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.372+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7058cf] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.372+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f7fa197]
2026-01-30T11:46:18.372+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@369ac65d]
2026-01-30T11:46:18.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8b439d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-01-30T11:46:18.374+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934635385 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.375+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.375+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.376+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2072113864 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.376+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.376+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:46:18.377+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-30T11:46:18.378+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:46:18.378+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:46:18.381+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.390+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:46:18.390+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.391+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.392+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:46:18.395+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:46:18.396+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.398+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:18.405+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.406+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.407+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@792d09cc]
2026-01-30T11:46:18.409+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:18.411+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.411+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.413+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.414+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:46:18.414+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:46:18.414+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:18.419+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:46:18.420+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.422+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eda4c72] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.422+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c8b439d]
2026-01-30T11:46:18.422+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7058cf]
2026-01-30T11:46:18.423+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:18.423+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.424+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1336429836 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.425+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.425+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.425+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:18.426+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:46:18.427+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:46:18.430+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.427+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.428+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.428+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:46:18.430+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.434+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:18.440+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f333182] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.445+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910864974 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:18.445+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:18.451+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:18.440+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112c3e77] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.440+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623a6ff6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.443+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:18.445+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/subscriptions/current
2026-01-30T11:46:18.449+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:46:18.454+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582982386 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.454+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540152663 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.455+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-30T11:46:18.455+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/credits/total
2026-01-30T11:46:18.455+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eda4c72]
2026-01-30T11:46:18.455+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:46:18.456+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.456+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-30T11:46:18.456+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-30T11:46:18.457+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.457+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:18.457+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:46:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-30T11:46:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-30T11:46:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69722e9] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.458+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f333182]
2026-01-30T11:46:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:46:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-30T11:46:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:46:18.460+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@178411413 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.461+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.461+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:46:18.461+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:46:18.461+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@623a6ff6]
2026-01-30T11:46:18.461+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112c3e77]
2026-01-30T11:46:18.462+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:18.462+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771121c3] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.462+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.462+09:00 DEBUG 268 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:46:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.463+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.465+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:18.465+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298361218 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:18.466+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a0f73b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.467+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.467+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1b9b76] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.467+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:46:18.468+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:46:18.470+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47529766 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.470+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5b3926] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.470+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468648988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.471+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69722e9]
2026-01-30T11:46:18.472+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-30T11:46:18.473+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2001351544 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.473+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.473+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.474+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-01-30T11:46:18.476+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-30T11:46:18.476+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.476+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.477+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6262e41e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.478+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-01-30(LocalDate)
2026-01-30T11:46:18.478+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@771121c3]
2026-01-30T11:46:18.479+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574769361 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.479+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-01-30T11:46:18.480+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.481+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.481+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.482+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-30T11:46:18.482+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57a0f73b]
2026-01-30T11:46:18.482+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:18.482+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.483+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a1b9b76]
2026-01-30T11:46:18.483+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5b3926]
2026-01-30T11:46:18.484+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.485+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.485+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-01-30T11:46:18.487+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.490+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6262e41e]
2026-01-30T11:46:18.488+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.488+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-30T11:46:18.488+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:18.490+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.490+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.492+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.494+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.496+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:18.496+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11fbe0] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.506+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-30T11:46:18.512+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1252440584 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.513+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:18.508+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.509+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-30T11:46:18.510+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:18.514+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.513+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/subscriptions/current
2026-01-30T11:46:18.513+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:46:18.514+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:18.514+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/credits/total
2026-01-30T11:46:18.514+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.514+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-30T11:46:18.518+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:46:18.515+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:18.516+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-30T11:46:18.518+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.518+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-30T11:46:18.518+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f11fbe0]
2026-01-30T11:46:18.519+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.519+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-30T11:46:18.519+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.519+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-30T11:46:18.520+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.520+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cfbbcc1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.521+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-30T11:46:18.522+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.523+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:46:18.522+09:00 DEBUG 268 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:46:18.522+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65591e04] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.523+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241880016 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.523+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a87580] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.524+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-30T11:46:18.524+09:00 DEBUG 268 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-30T11:46:18.524+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1437018036 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.524+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:18.524+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1585970074 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.525+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.525+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.525+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.526+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:18.526+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.526+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60efecf2] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.526+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2299f3c4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.527+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.527+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@650038489 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:18.529+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1121022436 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.530+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-30T11:46:18.530+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cfbbcc1]
2026-01-30T11:46:18.530+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-30T11:46:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-01-30(LocalDate)
2026-01-30T11:46:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.534+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a3d8309] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-01-30T11:46:18.531+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65591e04]
2026-01-30T11:46:18.532+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a87580]
2026-01-30T11:46:18.535+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@185675067 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.537+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.537+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.538+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.538+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-30T11:46:18.539+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:18.539+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fed4718] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.539+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 0
2026-01-30T11:46:18.539+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.539+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60efecf2]
2026-01-30T11:46:18.540+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997011728 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.540+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.541+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2299f3c4]
2026-01-30T11:46:18.543+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.544+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.544+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.545+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.559+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=null)]
2026-01-30T11:46:18.554+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:18.554+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-30T11:46:18.555+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a3d8309]
2026-01-30T11:46:18.556+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.561+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.575+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.562+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.565+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.573+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.576+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.577+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.578+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:46:18.579+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.586+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:18.587+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:18.588+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:18.589+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.590+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:46:18.591+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.593+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.604+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fed4718]
2026-01-30T11:46:18.593+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.594+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.594+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:46:18.595+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.596+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:18.605+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.606+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.606+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d7a8518] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.606+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:46:18.607+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.608+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.608+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:46:18.608+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:18.609+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037423942 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.618+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.610+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.611+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:46:18.611+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.613+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.613+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:18.619+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.620+09:00 DEBUG 268 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.622+09:00 DEBUG 268 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.623+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.624+09:00 DEBUG 268 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.624+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:18.625+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.626+09:00 DEBUG 268 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.626+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.626+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.627+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:18.628+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@313bba46] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.628+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.628+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.629+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.629+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529a3942] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.629+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d7a8518]
2026-01-30T11:46:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331333787 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a5e8ea] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.630+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.631+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38999301 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.631+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@588db95e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.631+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.632+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:46:18.634+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@647170467 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.635+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.636+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:46:18.636+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1839872352 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.639+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:46:18.636+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54390fae] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.638+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:46:18.639+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:46:18.639+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:18.640+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1307710068 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.642+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:46:18.642+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:46:18.642+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16dab66a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.643+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:46:18.644+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1004417931 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.643+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:18.644+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.644+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@529a3942]
2026-01-30T11:46:18.644+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@313bba46]
2026-01-30T11:46:18.645+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.645+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.646+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:46:18.646+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.646+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.647+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:18.647+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.648+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a5e8ea]
2026-01-30T11:46:18.648+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:46:18.648+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:46:18.651+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@588db95e]
2026-01-30T11:46:18.653+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.654+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.654+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.655+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.657+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.657+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.658+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:46:18.660+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.661+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1351e322] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.661+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.661+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54390fae]
2026-01-30T11:46:18.671+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.661+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16dab66a]
2026-01-30T11:46:18.661+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.662+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-01-30T11:46:18.670+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@648281951 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.671+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/payment-method-summary
2026-01-30T11:46:18.672+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447eebdb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.674+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.676+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.678+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.678+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED
2026-01-30T11:46:18.679+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1487325317 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.684+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:18.679+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d6b3e5] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.680+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-01-30T11:46:18.681+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.681+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.683+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-01-01&endDate=2026-01-31&status%5B%5D=APPROVED", parameters={masked}
2026-01-30T11:46:18.690+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:18.690+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1274822003 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.690+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.691+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-30T11:46:18.691+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-01-30T11:46:18.691+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.692+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.692+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.692+09:00 DEBUG 268 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.694+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.694+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.694+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:46:18.694+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-30T11:46:18.694+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1351e322]
2026-01-30T11:46:18.695+09:00 DEBUG 268 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.695+09:00 DEBUG 268 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.695+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@447eebdb]
2026-01-30T11:46:18.696+09:00 DEBUG 268 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.697+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.698+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.698+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.698+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.700+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.702+09:00 DEBUG 268 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.702+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:18.702+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcbad3a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.703+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa55c54] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.703+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d6b3e5]
2026-01-30T11:46:18.703+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c7d5e6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.704+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.705+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.705+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585152069 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481712712 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.707+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a698cda] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.708+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@550026599 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-30T11:46:18.709+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.709+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.710+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127424790 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.713+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-30T11:46:18.710+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-01-30T11:46:18.711+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-30T11:46:18.711+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.712+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.715+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 3(Long)
2026-01-30T11:46:18.717+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.725+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 5
2026-01-30T11:46:18.719+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), APPROVED(String)
2026-01-30T11:46:18.725+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.726+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.726+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcbad3a]
2026-01-30T11:46:18.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.729+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-01-30T11:46:18.729+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 5
2026-01-30T11:46:18.729+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fa55c54]
2026-01-30T11:46:18.730+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.730+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.730+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c7d5e6]
2026-01-30T11:46:18.731+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a698cda]
2026-01-30T11:46:18.731+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.731+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=66000,  (truncated)...]
2026-01-30T11:46:18.734+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.736+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.736+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.736+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f7e503] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.737+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.738+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.739+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-01-30T11:46:18.739+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=6, userName=tes (truncated)...]
2026-01-30T11:46:18.743+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.740+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@573921877 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.740+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5f7ce] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.742+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.744+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:18.745+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429579079 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.746+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:46:18.746+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.747+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.762+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:46:18.768+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27f7e503]
2026-01-30T11:46:18.770+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.770+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.770+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c38d5e6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.770+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b5f7ce]
2026-01-30T11:46:18.772+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@880796319 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.772+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.773+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:18.773+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67833c5a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.775+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:18.776+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210559715 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.776+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.777+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.779+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.779+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:46:18.779+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67833c5a]
2026-01-30T11:46:18.780+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c38d5e6]
2026-01-30T11:46:18.780+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.780+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.781+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.781+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4918335c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.782+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.787+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@602228860 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.789+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.790+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.790+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.791+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.794+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.794+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.795+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.795+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.795+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4918335c]
2026-01-30T11:46:18.795+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.795+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.795+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14968963] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.796+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e37473] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.796+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@398844570 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.796+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.796+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1542008704 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.797+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.797+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:18.797+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:46:18.799+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.800+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:46:18.800+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14968963]
2026-01-30T11:46:18.800+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53e37473]
2026-01-30T11:46:18.801+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.801+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.802+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb568e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.802+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132e9cf1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.803+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624302789 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:18.803+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529229835 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:18.803+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.803+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.804+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.804+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.805+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.806+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.806+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@132e9cf1]
2026-01-30T11:46:18.806+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb568e]
2026-01-30T11:46:18.807+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.807+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.807+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.807+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:18.808+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.808+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.810+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.810+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.810+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.811+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:18.813+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.813+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-30T11:46:18.814+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.814+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.814+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-30T11:46:18.822+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:18.821+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.823+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.824+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ed24a1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.824+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d7e47a3] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.824+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1047553742 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.824+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@301677504 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:18.824+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.825+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.825+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.826+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.828+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.829+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.829+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ed24a1]
2026-01-30T11:46:18.829+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d7e47a3]
2026-01-30T11:46:18.830+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.830+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c27db57] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.830+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dae2d6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.831+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@340211806 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.831+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1234626289 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:18.832+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.833+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.834+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.834+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.838+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.838+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c27db57]
2026-01-30T11:46:18.838+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.838+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.839+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dae2d6]
2026-01-30T11:46:18.839+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5c24b5] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.840+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.840+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782479114 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.840+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.840+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:18.841+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.842+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:18.842+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:18.847+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:18.848+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:46:18.851+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:18.851+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c5c24b5]
2026-01-30T11:46:18.851+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:18.852+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.852+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:18.852+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d113d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.853+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.853+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68807969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.854+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.854+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39b2a935] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.854+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.855+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635831762 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.856+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:18.857+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:18.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@492d113d]
2026-01-30T11:46:18.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1c5946] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.859+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1251547617 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.859+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:18.859+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:18.860+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:46:18.860+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39b2a935]
2026-01-30T11:46:18.860+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.860+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73898f47] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.862+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600027394 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:18.862+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:46:18.862+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:18.862+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1c5946]
2026-01-30T11:46:18.863+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:18.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3820df74] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.864+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838821727 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.865+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:18.865+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:18.867+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:18.867+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73898f47]
2026-01-30T11:46:18.868+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.869+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:18.870+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.872+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 24
2026-01-30T11:46:18.872+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3820df74]
2026-01-30T11:46:18.874+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.877+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26378cb6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.876+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:18.877+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416427131 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.878+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.878+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:18.879+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.881+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-30T11:46:18.882+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-30T11:46:18.884+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-30T11:46:18.886+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.887+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.887+09:00 DEBUG 268 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-30T11:46:18.887+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26378cb6]
2026-01-30T11:46:18.887+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.888+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.888+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382856cc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.888+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17045a30] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.889+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585117507 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.889+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720411310 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:18.889+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:18.889+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-30T11:46:18.890+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long)
2026-01-30T11:46:18.890+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-01-30T11:46:18.892+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 24
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17045a30]
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@382856cc]
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-30T11:46:18.893+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12917637] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:18.894+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:18.895+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1760939167 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:18.897+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:18.898+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:18.905+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:18.907+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12917637]
2026-01-30T11:46:18.908+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:18.909+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:18.911+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.141+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:21.141+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:21.142+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:46:21.144+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:21.145+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:21.142+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:46:21.142+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:46:21.144+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:21.145+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:21.152+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:21.146+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:46:21.147+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:46:21.148+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:46:21.148+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:21.152+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:21.153+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:46:21.153+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:46:21.154+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:46:21.156+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:21.156+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.158+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:21.158+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:46:21.174+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:46:21.174+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:21.175+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad116bf] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.175+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.176+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:46:21.176+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:46:21.176+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.177+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d9c43] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.178+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.178+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.178+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191abd73] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.181+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2088129e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.188+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31651edc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.189+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1107600219 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.189+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721367419 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:21.191+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.192+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:21.192+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.194+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:21.197+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1279242405 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.197+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066783847 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.197+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723678380 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:21.198+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.205+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.205+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:21.205+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.206+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.206+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d9c43]
2026-01-30T11:46:21.208+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:21.208+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:21.208+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.209+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.210+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ad116bf]
2026-01-30T11:46:21.211+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4b820] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.211+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.212+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@848030038 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.213+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:21.213+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:21.213+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c63b4da] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.213+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:46:21.213+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191abd73]
2026-01-30T11:46:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31651edc]
2026-01-30T11:46:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658232953 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2088129e]
2026-01-30T11:46:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.214+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.215+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.218+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:21.218+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.219+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2660c236] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.220+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:46:21.221+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:21.221+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a16aa0b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.221+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513461540 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.222+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.224+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@414857251 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:21.224+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.228+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.228+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.228+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.229+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.230+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4b820]
2026-01-30T11:46:21.230+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:21.232+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.235+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c63b4da]
2026-01-30T11:46:21.236+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.237+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.237+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a16aa0b]
2026-01-30T11:46:21.237+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a007c6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.237+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.237+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2660c236]
2026-01-30T11:46:21.238+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.239+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@641047178 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.239+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:21.240+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.240+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@681ee821] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.240+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:21.241+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.241+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:21.241+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664224219 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:21.243+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:21.244+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:21.244+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.246+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:21.248+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:21.255+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:46:21.256+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:21.261+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:21.262+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:21.262+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:21.264+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:21.269+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a007c6]
2026-01-30T11:46:21.269+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.271+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7b1ea5] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.272+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207861275 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.273+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.268+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:21.269+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:21.274+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.275+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.275+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:21.275+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a557fbf] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.276+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:46:21.278+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1308337936 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.277+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:21.278+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@681ee821]
2026-01-30T11:46:21.278+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:21.278+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.278+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.281+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.285+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:21.285+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784573f4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.289+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63690aaa] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.289+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a7b1ea5]
2026-01-30T11:46:21.291+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2083109126 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:21.292+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.292+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390537428 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:21.292+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:21.292+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.292+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@520b94b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.293+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.293+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a557fbf]
2026-01-30T11:46:21.293+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.294+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467744636 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.295+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.295+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.296+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:21.296+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ddca69] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.298+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676998922 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.298+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:21.297+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:21.302+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:21.303+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.303+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:21.305+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63690aaa]
2026-01-30T11:46:21.306+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@784573f4]
2026-01-30T11:46:21.307+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:21.307+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.307+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.307+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@520b94b]
2026-01-30T11:46:21.308+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:46:21.308+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:21.308+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a62f13f] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.308+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.309+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.314+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ddca69]
2026-01-30T11:46:21.314+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:46:21.315+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@877091625 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:21.315+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412f4c2] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.326+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.330+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:46:21.330+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.330+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@83427306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.332+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:21.333+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:46:21.334+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.334+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:21.335+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:46:21.335+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.339+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:21.339+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:46:21.342+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:21.345+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.346+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.347+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:21.347+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a62f13f]
2026-01-30T11:46:21.348+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64523427] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.348+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:21.348+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:21.353+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:21.352+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.353+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537113181 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:21.353+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412f4c2]
2026-01-30T11:46:21.354+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:21.354+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:21.354+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.354+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.355+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.356+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.359+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.359+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:21.360+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f0ef] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.364+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:21.360+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f7dbbe] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.364+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@321237193 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.369+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.365+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:21.367+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@345489514 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.371+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.371+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:21.371+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:21.373+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:21.374+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:46:21.376+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:21.377+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.377+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.377+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64523427]
2026-01-30T11:46:21.378+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238827e2] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.378+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f0ef]
2026-01-30T11:46:21.379+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.380+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@984730986 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.380+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.381+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2409b742] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.381+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:21.382+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.385+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e6de35] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.386+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359957224 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:21.386+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21f7dbbe]
2026-01-30T11:46:21.390+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.392+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@938792782 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.392+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.393+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.393+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:21.393+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.394+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d123c4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.395+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:21.396+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1290020907 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.405+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:21.407+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:21.407+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:21.407+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.410+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:21.410+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238827e2]
2026-01-30T11:46:21.412+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2409b742]
2026-01-30T11:46:21.412+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e6de35]
2026-01-30T11:46:21.413+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.414+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.415+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:21.420+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.421+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54e59f3a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.422+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aee75de] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.422+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53d123c4]
2026-01-30T11:46:21.423+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5187e71e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.424+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@909116787 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.424+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127507046 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200000109 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:21.425+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.426+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.427+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:46:21.427+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.428+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.432+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:21.437+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.437+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:46:21.439+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:21.439+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54e59f3a]
2026-01-30T11:46:21.439+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2aee75de]
2026-01-30T11:46:21.440+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:21.440+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.440+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:21.440+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.440+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.440+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5187e71e]
2026-01-30T11:46:21.441+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:21.441+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:21.441+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c788044] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.441+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.442+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.444+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@358698128 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:21.444+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.444+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:21.445+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9eb71] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.445+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.445+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:21.453+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.455+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155704229 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.456+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.458+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:21.461+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:46:21.478+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:21.480+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:21.481+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:21.481+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:21.481+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:21.490+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:46:21.491+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:21.492+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:46:21.492+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.492+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:21.492+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.494+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c65de32] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.494+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c788044]
2026-01-30T11:46:21.494+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.495+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099339264 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.496+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.496+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d173ec0] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.499+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222705702 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.500+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.502+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.497+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.497+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:46:21.508+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:21.511+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.512+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.512+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.514+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9eb71]
2026-01-30T11:46:21.518+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d173ec0]
2026-01-30T11:46:21.521+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.522+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.523+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e13ea11] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.525+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65aa749e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.525+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903045825 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.526+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910486997 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.526+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:21.527+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.528+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:21.531+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.534+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:21.538+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c65de32]
2026-01-30T11:46:21.539+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.540+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f50049f] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.541+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1561779977 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:21.542+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.543+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:21.543+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.543+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65aa749e]
2026-01-30T11:46:21.543+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e13ea11]
2026-01-30T11:46:21.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.545+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.545+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.547+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610f6734] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.547+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:21.548+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471668495 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.549+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.553+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:21.562+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:21.563+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.563+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:21.564+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f50049f]
2026-01-30T11:46:21.567+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:21.568+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.575+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:21.568+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:21.576+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.576+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:21.589+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:21.590+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:21.594+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:21.595+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.597+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610f6734]
2026-01-30T11:46:21.612+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.597+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:21.617+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:21.597+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273f3080] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.613+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e46aae] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.626+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:21.627+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203969175 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:21.627+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@768122273 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.628+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:21.629+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:21.629+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.630+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.634+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:21.636+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.638+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0abcfb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.640+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669901809 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.645+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:21.654+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:21.654+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.655+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:21.657+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37e46aae]
2026-01-30T11:46:21.657+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273f3080]
2026-01-30T11:46:21.657+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.660+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.663+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae3d803] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.671+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ef195d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.672+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1581673195 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.673+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871348944 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:21.674+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:21.674+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:21.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:21.678+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:21.680+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:21.695+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f0abcfb]
2026-01-30T11:46:21.695+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.696+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c960487] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.696+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455526026 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:21.721+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.722+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:21.741+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.741+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ae3d803]
2026-01-30T11:46:21.742+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.757+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:21.757+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f59f2b6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.759+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31ef195d]
2026-01-30T11:46:21.759+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1538134174 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.760+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.760+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:21.760+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:21.767+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:21.768+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.802+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.817+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c960487]
2026-01-30T11:46:21.817+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.818+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:21.820+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:21.832+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:21.849+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f59f2b6]
2026-01-30T11:46:21.850+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.860+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b15596] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.860+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@398311828 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.861+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.863+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.875+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.875+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b15596]
2026-01-30T11:46:21.876+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.877+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b88b510] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.880+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1187532306 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.883+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:21.886+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:21.909+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:21.910+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b88b510]
2026-01-30T11:46:21.934+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:21.934+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a81432] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:21.935+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1037442402 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:21.935+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:21.935+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:21.957+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:21.961+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63a81432]
2026-01-30T11:46:21.961+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:21.965+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:21.969+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:26.356+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&paymentMethod=CARD
2026-01-30T11:46:26.359+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&paymentMethod=CARD
2026-01-30T11:46:26.360+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:26.360+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&paymentMethod=CARD
2026-01-30T11:46:26.361+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&paymentMethod=CARD", parameters={masked}
2026-01-30T11:46:26.361+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:26.362+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.362+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf1a5c7] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.364+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187475737 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.369+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:26.370+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:26.372+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:26.373+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf1a5c7]
2026-01-30T11:46:26.375+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.377+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d055ebb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.377+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213251851 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.378+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:26.378+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:26.380+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:26.380+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d055ebb]
2026-01-30T11:46:26.381+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.381+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@427e7c35] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.387+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705574983 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.388+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND EXISTS ( SELECT 1 FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.payment_method = ? AND d.company_id = r.company_id ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:26.391+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), CARD(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:26.395+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-01-30T11:46:26.396+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@427e7c35]
2026-01-30T11:46:26.397+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.397+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58fd607b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.398+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775448197 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.403+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:26.404+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:26.407+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:26.408+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58fd607b]
2026-01-30T11:46:26.410+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.410+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11543fe5] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.411+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@580483852 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.411+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:26.412+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 60(Long), 47(Long)
2026-01-30T11:46:26.415+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-30T11:46:26.417+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11543fe5]
2026-01-30T11:46:26.419+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.419+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bf425eb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.420+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200248935 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.420+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND EXISTS ( SELECT 1 FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.payment_method = ? AND d.company_id = r.company_id ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:26.421+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), CARD(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:26.424+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-01-30T11:46:26.424+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bf425eb]
2026-01-30T11:46:26.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.425+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41dc51a7] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1528688394 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:26.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:26.428+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:26.428+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41dc51a7]
2026-01-30T11:46:26.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c59996] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404546880 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:26.431+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 60(Long), 47(Long)
2026-01-30T11:46:26.433+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-30T11:46:26.434+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c59996]
2026-01-30T11:46:26.434+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:26.435+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dff6ed9] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:26.436+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@564806105 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:26.436+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:26.436+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:26.439+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:26.439+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dff6ed9]
2026-01-30T11:46:26.441+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:26.441+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:26.442+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:27.527+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-30T11:46:27.527+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:27.528+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:27.528+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/60
2026-01-30T11:46:27.528+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:46:27.529+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:27.529+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:27.530+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:46:27.530+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-30T11:46:27.530+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:27.531+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:27.531+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:27.533+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:27.531+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:46:27.531+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/60
2026-01-30T11:46:27.532+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:27.534+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:27.536+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:46:27.536+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-30T11:46:27.536+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.537+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.537+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:46:27.537+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-30T11:46:27.537+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a148bc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.538+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d24f52a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.538+09:00  INFO 268 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:46:27.538+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:27.543+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.544+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f435c6c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.544+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25768b70] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.548+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250014950 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:27.554+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:27.549+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1280244880 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:27.558+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:27.554+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2067643502 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:27.557+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:27.559+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:27.559+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:46:27.559+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:27.560+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@849250774 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:27.560+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:27.560+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.562+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:27.563+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:27.563+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d24f52a]
2026-01-30T11:46:27.563+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a148bc]
2026-01-30T11:46:27.563+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.564+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25dc76f1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.564+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ab4ccee] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.565+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596971654 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:27.567+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:27.565+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:46:27.565+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1881719171 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:27.567+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:27.567+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f435c6c]
2026-01-30T11:46:27.568+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:27.569+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:27.569+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:27.569+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:46:27.570+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:27.577+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:27.578+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25768b70]
2026-01-30T11:46:27.578+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.579+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66192469] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.581+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773867013 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:27.581+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:27.581+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.583+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:46:27.587+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:46:27.587+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:46:27.588+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:46:27.588+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:46:27.588+09:00  INFO 268 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:46:27.589+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.589+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56772b89] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.589+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@177844220 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:27.590+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:46:27.590+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:27.590+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:27.590+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:27.591+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ab4ccee]
2026-01-30T11:46:27.591+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25dc76f1]
2026-01-30T11:46:27.591+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:27.591+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:27.591+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:27.591+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:27.592+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:27.592+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:27.599+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:27.601+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66192469]
2026-01-30T11:46:27.608+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:46:27.608+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56772b89]
2026-01-30T11:46:27.608+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:27.609+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:46:27.609+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:27.624+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.624+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.625+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904275404 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:46:27.625+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:27.625+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:27.628+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:27.629+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.629+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838] from current transaction
2026-01-30T11:46:27.629+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:27.630+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.631+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:27.631+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.631+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838] from current transaction
2026-01-30T11:46:27.633+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:27.634+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:27.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838] from current transaction
2026-01-30T11:46:27.639+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:27.640+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:27.641+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:27.641+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.642+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838] from current transaction
2026-01-30T11:46:27.642+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:27.642+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 62(Long), 3(Long)
2026-01-30T11:46:27.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:27.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.644+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.645+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@196cd838]
2026-01-30T11:46:27.648+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.648+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f3ef80] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.648+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1822652839 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:27.649+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:27.651+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.655+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:27.655+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f3ef80]
2026-01-30T11:46:27.656+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.656+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c1b5478] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.656+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1969038228 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:27.656+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:27.657+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.659+09:00 DEBUG 268 --- [http-nio-8080-exec-5] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:27.659+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c1b5478]
2026-01-30T11:46:27.659+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.660+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@131a85fb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.660+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975827316 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:27.660+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:27.660+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:27.662+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:27.662+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@131a85fb]
2026-01-30T11:46:27.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:27.663+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=6, r (truncated)...]
2026-01-30T11:46:27.664+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:27.675+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/60
2026-01-30T11:46:27.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/60
2026-01-30T11:46:27.678+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/60
2026-01-30T11:46:27.679+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/60", parameters={}
2026-01-30T11:46:27.680+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:27.683+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.684+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e02c61] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.694+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746227149 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:27.695+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:27.695+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.707+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:27.708+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e02c61]
2026-01-30T11:46:27.708+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451af90c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@833113821 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:27.709+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:27.710+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.721+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:27.722+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451af90c]
2026-01-30T11:46:27.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.729+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.730+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012101442 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will be managed by Spring
2026-01-30T11:46:27.730+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:27.731+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:27.733+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:27.734+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.734+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4] from current transaction
2026-01-30T11:46:27.734+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:27.735+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.738+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:27.738+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.738+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4] from current transaction
2026-01-30T11:46:27.738+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:27.739+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.741+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:27.741+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.742+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4] from current transaction
2026-01-30T11:46:27.743+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:27.743+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:27.745+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:27.745+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.745+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4] from current transaction
2026-01-30T11:46:27.746+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:27.746+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 62(Long), 3(Long)
2026-01-30T11:46:27.748+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:27.749+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.750+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.751+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.751+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e50e4]
2026-01-30T11:46:27.754+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.755+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c09af59] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.756+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@139872936 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:27.757+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:27.757+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.759+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:27.759+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c09af59]
2026-01-30T11:46:27.759+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.760+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7482cd9a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.760+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1161877300 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:27.760+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:27.761+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 60(Long), 3(Long)
2026-01-30T11:46:27.763+09:00 DEBUG 268 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:27.763+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7482cd9a]
2026-01-30T11:46:27.763+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:27.763+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e408] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:27.764+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57285555 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:27.764+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:27.764+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:27.766+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:27.766+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e6e408]
2026-01-30T11:46:27.767+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:27.768+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=60, drafterId=6, r (truncated)...]
2026-01-30T11:46:27.769+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.680+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:29.680+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:29.681+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:46:29.681+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:46:29.681+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-30T11:46:29.690+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:46:29.690+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/companies
2026-01-30T11:46:29.684+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:29.688+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:29.689+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:29.690+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:46:29.691+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-30T11:46:29.691+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:29.691+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:29.692+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:46:29.692+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:46:29.704+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-30T11:46:29.704+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:29.704+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:29.704+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:46:29.705+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:46:29.705+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-30T11:46:29.705+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:29.706+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:29.706+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:29.707+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.707+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.707+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.708+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.709+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.710+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da02c3d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.712+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595086d1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.712+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5c244c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.712+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc74316] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.713+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0b1949] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.740+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802900344 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:29.740+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262818556 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:29.740+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@432633521 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:29.740+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63099854 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.740+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847546360 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:29.741+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:29.741+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:29.741+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:29.742+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.742+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:29.743+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:29.744+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:29.744+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:29.745+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.746+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:29.752+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:46:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:29.753+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d0b1949]
2026-01-30T11:46:29.754+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5da02c3d]
2026-01-30T11:46:29.755+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@595086d1]
2026-01-30T11:46:29.755+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bc74316]
2026-01-30T11:46:29.755+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5c244c]
2026-01-30T11:46:29.756+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.756+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.757+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:29.757+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.757+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.757+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669ae5d1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.757+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a3ed0e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.757+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=3, userId=5, companyId=3 (truncated)...]
2026-01-30T11:46:29.758+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956e3e7] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.758+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2800f7] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.758+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@698753316 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.759+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736798580 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:29.759+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.760+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389557547 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:29.760+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803177436 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:29.764+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.761+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.763+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:29.767+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.768+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.768+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.768+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:29.774+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.774+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.774+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.774+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:29.774+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2800f7]
2026-01-30T11:46:29.775+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669ae5d1]
2026-01-30T11:46:29.776+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a3ed0e]
2026-01-30T11:46:29.777+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4956e3e7]
2026-01-30T11:46:29.778+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:29.778+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.778+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.779+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:29.779+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:29.780+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfca4bb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.780+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deeb638] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.780+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:29.780+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.784+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@234449560 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.785+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@640611606 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:29.785+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.787+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:29.788+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:29.790+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:29.790+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:29.806+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:29.807+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:29.808+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:29.808+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:46:29.808+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:29.808+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:29.826+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:29.826+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:29.827+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:29.827+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:29.830+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.831+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.837+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518ca72e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.840+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1692cc87] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.842+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@396437520 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:29.842+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:29.844+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:29.847+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:46:29.848+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:29.855+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2deeb638]
2026-01-30T11:46:29.857+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218061584 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:29.858+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfca4bb]
2026-01-30T11:46:29.858+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.859+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:29.859+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.859+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3e2c82] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.861+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:29.861+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5738c0e5] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.862+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@599329451 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:29.862+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@246968261 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.863+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.863+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.864+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.864+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.864+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:29.873+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@518ca72e]
2026-01-30T11:46:29.874+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:29.877+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.877+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1692cc87]
2026-01-30T11:46:29.878+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ed40b7] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.878+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.879+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.879+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.880+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384574995 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:29.880+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41412704] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.881+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3e2c82]
2026-01-30T11:46:29.882+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5738c0e5]
2026-01-30T11:46:29.886+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.887+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@376685490 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:29.892+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:29.895+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.895+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.897+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:29.898+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:46:29.904+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd6c3ed] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.911+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:29.912+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.912+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@980943258 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.927+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:29.927+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-01-30T11:46:29.930+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:29.931+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/my-approvals
2026-01-30T11:46:29.937+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-01-30T11:46:29.938+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.938+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:29.940+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-01-30T11:46:29.941+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22ed40b7]
2026-01-30T11:46:29.941+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41412704]
2026-01-30T11:46:29.942+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-01-30T11:46:29.942+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:29.943+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:29.943+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.946+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:29.947+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:29.953+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:29.954+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22300d1b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.954+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd6c3ed]
2026-01-30T11:46:29.955+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.955+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:29.956+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1307857335 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:29.956+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.972+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:29.972+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ba6af0] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.973+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:29.974+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@963517473 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.975+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:29.977+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:29.979+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:29.980+09:00 DEBUG 268 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-01-30T11:46:29.980+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:29.981+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:29.985+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:29.986+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22300d1b]
2026-01-30T11:46:29.986+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:29.986+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:29.988+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.990+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6d3a06] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.988+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:29.989+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:29.991+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226287781 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:29.991+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:29.992+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:29.992+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:29.992+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:29.993+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.993+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.993+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:29.993+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ba6af0]
2026-01-30T11:46:29.993+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6972eb] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.993+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7129f39f] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.994+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:29.995+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203096864 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:29.996+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@666472214 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:29.996+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:29.996+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c2d053] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:29.996+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:29.997+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:29.997+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6d3a06]
2026-01-30T11:46:29.997+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1599656529 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:29.998+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:29.998+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:29.999+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.002+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.004+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc5e92] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.005+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.005+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@29616609 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:30.006+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:30.006+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:30.006+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:30.006+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7129f39f]
2026-01-30T11:46:30.006+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b6972eb]
2026-01-30T11:46:30.007+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.007+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 44(Long), 42(Long), 34(Long), 10(Long), 6(Long), 1(Long)
2026-01-30T11:46:30.007+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.007+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.007+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c2d053]
2026-01-30T11:46:30.008+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e530ba] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.008+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e518532] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.008+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.009+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250517554 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:30.009+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117029433 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:30.009+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 8
2026-01-30T11:46:30.009+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca549d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.010+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:30.010+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.010+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fc5e92]
2026-01-30T11:46:30.011+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1857308319 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.011+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:30.011+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.012+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.013+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:30.014+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a455372] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.014+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:30.015+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1001164390 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:30.017+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:30.019+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.019+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30e530ba]
2026-01-30T11:46:30.020+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.020+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.021+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:30.021+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.021+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e518532]
2026-01-30T11:46:30.022+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ca549d]
2026-01-30T11:46:30.022+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:30.023+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.023+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.023+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.024+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.024+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:30.025+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1389f50b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.025+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a455372]
2026-01-30T11:46:30.027+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.029+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@291841371 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.030+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.036+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:30.041+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:30.042+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.044+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=44, drafterI (truncated)...]
2026-01-30T11:46:30.045+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:30.045+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:30.045+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.046+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.057+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:30.058+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:30.059+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:30.059+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:30.059+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:30.059+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:30.064+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.066+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.072+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.072+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30fb9409] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.072+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1389f50b]
2026-01-30T11:46:30.072+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eefcc06] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.073+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@886128920 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:30.073+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.074+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1111248020 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:30.074+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:30.075+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:30.075+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:30.076+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:30.077+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.077+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:30.079+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-30T11:46:30.086+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:30.110+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-30T11:46:30.122+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:30.123+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:30.127+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-30T11:46:30.127+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eefcc06]
2026-01-30T11:46:30.127+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30fb9409]
2026-01-30T11:46:30.128+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:30.128+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.128+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.129+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.130+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d92380a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.136+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5e937d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.137+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2a6c2f] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.137+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574783042 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:30.138+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625883939 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:30.138+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1402862518 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.138+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.139+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:30.139+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.140+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.140+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:30.140+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.155+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.155+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:30.155+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.157+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d2a6c2f]
2026-01-30T11:46:30.157+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c5e937d]
2026-01-30T11:46:30.158+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d92380a]
2026-01-30T11:46:30.158+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.159+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.159+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.159+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67318a9b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:30.160+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:30.161+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@419748166 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.161+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.165+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.167+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:30.173+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:30.174+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.179+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.178+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:30.179+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:30.181+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:30.184+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:30.181+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:30.187+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:30.186+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:30.187+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:30.188+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.189+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.189+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fac22a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.189+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbb087] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.189+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1932180395 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:30.190+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@796638259 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:30.190+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:30.190+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:30.191+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:30.192+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:30.204+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:30.204+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:30.204+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.205+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fac22a]
2026-01-30T11:46:30.205+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67dbb087]
2026-01-30T11:46:30.205+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67318a9b]
2026-01-30T11:46:30.206+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.206+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.206+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.207+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cabaf08] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.207+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bbb75c0] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.207+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769dfeb2] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.208+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862967077 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:30.208+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1910422456 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:30.209+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487839656 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.210+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:30.210+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.210+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:30.211+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:30.211+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.213+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:30.229+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.229+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:30.230+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bbb75c0]
2026-01-30T11:46:30.230+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769dfeb2]
2026-01-30T11:46:30.230+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:30.231+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.231+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.231+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cabaf08]
2026-01-30T11:46:30.234+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:30.234+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f50a6b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.235+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.236+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.241+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1485051017 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.241+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:30.243+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.244+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:30.247+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.261+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.261+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f50a6b]
2026-01-30T11:46:30.262+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.263+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee399ad] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.264+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120348744 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.268+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:30.269+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:30.275+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:30.276+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ee399ad]
2026-01-30T11:46:30.277+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.277+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfa1926] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.278+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@531028933 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.278+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:30.280+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:30.284+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 30
2026-01-30T11:46:30.286+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dfa1926]
2026-01-30T11:46:30.287+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.290+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a41280] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.292+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@430578715 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.293+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.293+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.296+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.296+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24a41280]
2026-01-30T11:46:30.327+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.362+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d385240] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.366+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697066869 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.405+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:30.415+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-01-30T11:46:30.424+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 30
2026-01-30T11:46:30.426+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d385240]
2026-01-30T11:46:30.427+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:30.428+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb8edc6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669141571 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:30.429+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:30.450+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:30.456+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cb8edc6]
2026-01-30T11:46:30.457+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:30.459+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:30.460+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:34.172+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&paymentMethod=COMPANY_CARD
2026-01-30T11:46:34.174+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&paymentMethod=COMPANY_CARD
2026-01-30T11:46:34.175+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:34.176+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&paymentMethod=COMPANY_CARD
2026-01-30T11:46:34.176+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&paymentMethod=COMPANY_CARD", parameters={masked}
2026-01-30T11:46:34.176+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:34.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:34.177+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7e6f98] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:34.179+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533912519 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:34.180+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:34.180+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:34.182+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:34.185+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7e6f98]
2026-01-30T11:46:34.185+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:34.186+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566353a6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:34.186+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@205280431 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:34.187+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:34.187+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:34.190+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:34.190+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566353a6]
2026-01-30T11:46:34.191+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:34.191+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b54fc82] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:34.192+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1743152173 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:34.192+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND EXISTS ( SELECT 1 FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.payment_method = ? AND d.company_id = r.company_id ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:34.193+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), COMPANY_CARD(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:34.196+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-30T11:46:34.197+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b54fc82]
2026-01-30T11:46:34.198+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:34.201+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41307fb6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:34.202+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1292643326 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:34.202+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND EXISTS ( SELECT 1 FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.payment_method = ? AND d.company_id = r.company_id ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:34.205+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), COMPANY_CARD(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:34.209+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-30T11:46:34.209+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41307fb6]
2026-01-30T11:46:34.210+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:34.210+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-30T11:46:34.211+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:39.313+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&paymentMethod=CARD
2026-01-30T11:46:39.314+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses
2026-01-30T11:46:39.322+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&paymentMethod=CARD
2026-01-30T11:46:39.323+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&paymentMethod=CARD", parameters={masked}
2026-01-30T11:46:39.324+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-30T11:46:39.325+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.325+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e7512a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.327+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548924147 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.328+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:39.329+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:39.333+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:39.336+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e7512a]
2026-01-30T11:46:39.336+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.337+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2caa5eac] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.338+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1639726662 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.338+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:39.339+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:39.340+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:39.342+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2caa5eac]
2026-01-30T11:46:39.342+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.342+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa66293] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.343+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17239285 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.343+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND EXISTS ( SELECT 1 FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.payment_method = ? AND d.company_id = r.company_id ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:39.345+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), CARD(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:39.348+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-01-30T11:46:39.348+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fa66293]
2026-01-30T11:46:39.352+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.353+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ee3874] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.354+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@772832320 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.354+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:39.354+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:39.356+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:39.356+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ee3874]
2026-01-30T11:46:39.357+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.357+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caf3603] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.358+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1334941818 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.359+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:39.359+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 60(Long), 47(Long)
2026-01-30T11:46:39.361+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-30T11:46:39.361+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5caf3603]
2026-01-30T11:46:39.361+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.361+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3833011b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.362+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@495527728 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.363+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND EXISTS ( SELECT 1 FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.payment_method = ? AND d.company_id = r.company_id ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-30T11:46:39.363+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), CARD(String), 2147483647(Integer), 0(Integer)
2026-01-30T11:46:39.367+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-01-30T11:46:39.367+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3833011b]
2026-01-30T11:46:39.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c39297b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814217278 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.369+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:39.369+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:39.371+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:39.372+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c39297b]
2026-01-30T11:46:39.372+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.372+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27341420] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.372+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@583238476 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.373+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-30T11:46:39.373+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 60(Long), 47(Long)
2026-01-30T11:46:39.375+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-30T11:46:39.375+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27341420]
2026-01-30T11:46:39.375+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:39.375+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56833a94] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:39.376+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360114032 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:39.376+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:39.376+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:39.377+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:39.377+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56833a94]
2026-01-30T11:46:39.378+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:39.379+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-30T11:46:39.379+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:40.487+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/47
2026-01-30T11:46:40.488+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/47
2026-01-30T11:46:40.488+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:40.489+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:40.490+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:40.490+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:46:40.491+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:40.491+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/47
2026-01-30T11:46:40.491+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:40.492+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:40.492+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:46:40.493+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:40.493+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/47
2026-01-30T11:46:40.493+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:40.494+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:46:40.495+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:40.495+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/47
2026-01-30T11:46:40.497+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/47", parameters={}
2026-01-30T11:46:40.495+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:40.495+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:46:40.505+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:46:40.496+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.500+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:40.504+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.509+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92df96a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.506+09:00  INFO 268 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:46:40.507+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46c73616] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.509+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.511+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.512+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653a8233] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.513+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de343c0] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.524+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844830089 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:40.524+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@378690105 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:40.524+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1763937598 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:40.525+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:40.525+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239505334 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:40.525+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:40.526+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:40.529+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:40.529+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:46:40.530+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:40.530+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.531+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:40.540+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:40.540+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:40.540+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:40.540+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92df96a]
2026-01-30T11:46:40.540+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653a8233]
2026-01-30T11:46:40.541+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46c73616]
2026-01-30T11:46:40.541+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.541+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.542+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.542+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610a66d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.542+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:46:40.543+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdce1bc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.543+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4535d4f2] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.543+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@501837368 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:40.544+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de343c0]
2026-01-30T11:46:40.544+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518794654 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:40.544+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799240284 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:40.545+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:40.545+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:40.545+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:40.546+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.545+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:40.545+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:40.546+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:46:40.546+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:40.548+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:40.555+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:46:40.555+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:40.556+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:40.556+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:40.556+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bdce1bc]
2026-01-30T11:46:40.557+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:46:40.557+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@610a66d]
2026-01-30T11:46:40.557+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4535d4f2]
2026-01-30T11:46:40.558+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:46:40.558+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:40.559+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:40.559+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:46:40.560+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:40.560+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:40.562+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:40.561+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:46:40.561+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:40.574+09:00  INFO 268 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:46:40.575+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.578+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.580+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.580+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@571955499 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:46:40.580+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36743a0b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.581+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:40.582+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2104043486 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:40.584+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:40.584+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:46:40.587+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:40.685+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:40.689+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.689+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:46:40.690+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e] from current transaction
2026-01-30T11:46:40.690+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36743a0b]
2026-01-30T11:46:40.691+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:40.692+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:40.692+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.692+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:46:40.693+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:40.703+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:40.711+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.712+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e] from current transaction
2026-01-30T11:46:40.712+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:40.713+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.729+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:40.730+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.730+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e] from current transaction
2026-01-30T11:46:40.730+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:40.734+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 52(Long), 3(Long)
2026-01-30T11:46:40.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:40.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.738+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.738+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.738+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134daf8e]
2026-01-30T11:46:40.742+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.742+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326e5b6e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.743+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1745073946 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:40.744+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:40.745+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.747+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:40.747+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326e5b6e]
2026-01-30T11:46:40.748+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.751+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46635460] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.751+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@102159081 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:40.752+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:40.752+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.755+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:40.755+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46635460]
2026-01-30T11:46:40.756+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.756+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6fe8e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.756+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942646592 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:40.757+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:40.757+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:40.759+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:40.760+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd6fe8e]
2026-01-30T11:46:40.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:40.761+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=47, drafterId=6, r (truncated)...]
2026-01-30T11:46:40.762+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:40.774+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/47
2026-01-30T11:46:40.775+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/47
2026-01-30T11:46:40.776+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/47
2026-01-30T11:46:40.778+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/47", parameters={}
2026-01-30T11:46:40.783+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:40.783+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.785+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1887c947] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.787+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1481675699 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:40.788+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:40.789+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:40.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1887c947]
2026-01-30T11:46:40.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.792+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f056b10] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.793+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1794435760 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:40.793+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:40.793+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.802+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:40.802+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f056b10]
2026-01-30T11:46:40.808+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.809+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72461861 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:46:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:40.810+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:40.813+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:40.814+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.814+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b] from current transaction
2026-01-30T11:46:40.814+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:40.815+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.817+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:40.818+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.818+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b] from current transaction
2026-01-30T11:46:40.819+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:40.820+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b] from current transaction
2026-01-30T11:46:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:40.825+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 52(Long), 3(Long)
2026-01-30T11:46:40.828+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:40.828+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.828+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.829+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.829+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d44d78b]
2026-01-30T11:46:40.833+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.834+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af14c80] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.835+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@721586098 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:40.835+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:40.836+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.840+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:40.840+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af14c80]
2026-01-30T11:46:40.841+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.841+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f283405] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.842+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266203180 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:40.842+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:40.842+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:40.844+09:00 DEBUG 268 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:40.845+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f283405]
2026-01-30T11:46:40.845+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:40.845+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47fcba5f] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:40.846+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1775908537 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:40.846+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:40.847+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:40.849+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:40.850+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47fcba5f]
2026-01-30T11:46:40.850+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:40.851+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=47, drafterId=6, r (truncated)...]
2026-01-30T11:46:40.853+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.236+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:46.237+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:46.254+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:46.237+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-30T11:46:46.255+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:46.257+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/companies
2026-01-30T11:46:46.255+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:46.258+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:46.260+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-30T11:46:46.260+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:46.267+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:46.261+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:46.262+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-30T11:46:46.269+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.269+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:46.269+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-30T11:46:46.270+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.270+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.269+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee35c52] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.270+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6340705d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.270+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d80393] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.291+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1450598911 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:46.291+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1881022449 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:46.291+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1880346191 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:46.324+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-30T11:46:46.324+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:46.325+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:46.337+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-30T11:46:46.338+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:46.339+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:46.368+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:46.369+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 3
2026-01-30T11:46:46.369+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:46.374+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6340705d]
2026-01-30T11:46:46.374+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79d80393]
2026-01-30T11:46:46.375+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee35c52]
2026-01-30T11:46:46.376+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.376+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.377+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.377+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9ecec4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.377+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-01-30T11:46:46.377+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12245260] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.378+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@581337061 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:46.378+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.379+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@748271158 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:46.407+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:46.380+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:46.407+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:46.408+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:46.429+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:46.429+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:46.431+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12245260]
2026-01-30T11:46:46.431+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9ecec4]
2026-01-30T11:46:46.433+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.437+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.437+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:46.438+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:46.439+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.444+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.457+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:46.466+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:46.469+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:46.471+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:46.458+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:46.476+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:46.490+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:46.491+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.492+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:46.492+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145d747a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.493+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:46.495+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:46.504+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.528+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1893155317 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:46.533+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/47
2026-01-30T11:46:46.534+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:46:46.535+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d82b061] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.537+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:46.545+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/47
2026-01-30T11:46:46.546+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:46:46.547+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096710008 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:46.560+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:46.561+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/47
2026-01-30T11:46:46.561+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:46:46.562+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:46.562+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/47", parameters={}
2026-01-30T11:46:46.563+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:46:46.575+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:46.578+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:46.590+09:00 DEBUG 268 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:46.590+09:00 DEBUG 268 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:46:46.591+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@145d747a]
2026-01-30T11:46:46.592+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.592+09:00  INFO 268 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:46:46.592+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.593+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a20536a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.593+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789b0750] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.593+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.594+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1436377131 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:46.604+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102e6186] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.604+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:46.605+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:46.610+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:46.616+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d82b061]
2026-01-30T11:46:46.617+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.618+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38bea6c6] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.619+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278333448 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:46.620+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:46.621+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:46.624+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170258647 wrapping com.mysql.cj.jdbc.ConnectionImpl@628d8aa0] will not be managed by Spring
2026-01-30T11:46:46.624+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662138197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:46.626+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:46:46.627+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:46.631+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:46.637+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:46.638+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:46.638+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:46.639+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38bea6c6]
2026-01-30T11:46:46.640+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a20536a]
2026-01-30T11:46:46.641+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.643+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.643+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:46.643+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:46.647+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.656+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.665+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:46.666+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:46.668+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:46.676+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789b0750]
2026-01-30T11:46:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.685+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93ca2e4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.687+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@212652112 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:46.677+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:46.678+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:46.679+09:00 DEBUG 268 --- [http-nio-8080-exec-7] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:46:46.688+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:46.688+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:46.689+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:46.689+09:00 DEBUG 268 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@102e6186]
2026-01-30T11:46:46.690+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:46.691+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:46.709+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:46.692+09:00 DEBUG 268 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:46.708+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.731+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:46.737+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.749+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e276dd] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.750+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1750648001 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:46.752+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:46.746+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.747+09:00 DEBUG 268 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:46:46.747+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@93ca2e4]
2026-01-30T11:46:46.755+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:46.757+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9333bd] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.757+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.784+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-01-30T11:46:46.805+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/me/signatures
2026-01-30T11:46:46.800+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260453446 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:46.807+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-01-30T11:46:46.808+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-01-30T11:46:46.820+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-01-30T11:46:46.807+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:46.809+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:46.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70e276dd]
2026-01-30T11:46:46.825+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 5, companyId: 3
2026-01-30T11:46:46.841+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.841+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572eb929] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.843+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965215697 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:46.845+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-01-30T11:46:46.854+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:46.827+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:46.828+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.859+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50799c9c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.875+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.893+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.U.findByUserId                   : <==      Total: 0
2026-01-30T11:46:46.893+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:46.894+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869162192 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:46.897+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:46.898+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@572eb929]
2026-01-30T11:46:46.923+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c9333bd]
2026-01-30T11:46:46.947+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:46.958+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407112475 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will be managed by Spring
2026-01-30T11:46:46.969+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:46.972+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:46.972+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:46.973+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:46.973+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[])]
2026-01-30T11:46:46.973+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66be87e4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:46.977+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:46.988+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:46.989+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@594894421 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:46.990+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:46.992+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:46.998+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:47.006+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50799c9c]
2026-01-30T11:46:47.009+09:00 DEBUG 268 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:47.009+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:47.010+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.012+09:00 DEBUG 268 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66be87e4]
2026-01-30T11:46:47.019+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.020+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:47.020+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.021+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5] from current transaction
2026-01-30T11:46:47.025+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.025+09:00 DEBUG 268 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:47.028+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:47.028+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:47.037+09:00 DEBUG 268 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.039+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:47.039+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.043+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:47.044+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:47.052+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:47.053+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:47.053+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:47.055+09:00 DEBUG 268 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:47.055+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:47.056+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.056+09:00 DEBUG 268 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:47.060+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d47d6c1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.062+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.062+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:47.063+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@67167929 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:47.063+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c4f969] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.063+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.064+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:47.064+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5] from current transaction
2026-01-30T11:46:47.069+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:47.069+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:47.070+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.070+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151663739 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:47.071+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:47.074+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:47.074+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:47.075+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:47.075+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d47d6c1]
2026-01-30T11:46:47.075+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.076+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.076+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5] from current transaction
2026-01-30T11:46:47.076+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31bc934b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.076+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:47.076+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:47.077+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@844016227 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:47.077+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 52(Long), 3(Long)
2026-01-30T11:46:47.077+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c4f969]
2026-01-30T11:46:47.077+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:47.079+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.080+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:47.080+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fb443] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.081+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008437480 wrapping com.mysql.cj.jdbc.ConnectionImpl@3377d040] will not be managed by Spring
2026-01-30T11:46:47.083+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:47.083+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:47.084+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.084+09:00 DEBUG 268 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:47.085+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:47.085+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.086+09:00 DEBUG 268 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31bc934b]
2026-01-30T11:46:47.087+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.087+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.087+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55dd1fe5]
2026-01-30T11:46:47.091+09:00 DEBUG 268 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:47.093+09:00 DEBUG 268 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.103+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-30T11:46:47.108+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/pending-approvals
2026-01-30T11:46:47.109+09:00 DEBUG 268 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:47.111+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-30T11:46:47.111+09:00 DEBUG 268 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73fb443]
2026-01-30T11:46:47.111+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-30T11:46:47.113+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.114+09:00 DEBUG 268 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-30T11:46:47.114+09:00 DEBUG 268 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:47.117+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.123+09:00 DEBUG 268 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.123+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3f1f58] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.130+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1349129429 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:47.140+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-30T11:46:47.152+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.155+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c34c7a0] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.153+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:47.154+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/users/pending
2026-01-30T11:46:47.155+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@440772321 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:47.158+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 3(Long)
2026-01-30T11:46:47.158+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-30T11:46:47.159+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:47.159+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-30T11:46:47.160+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.160+09:00 DEBUG 268 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-30T11:46:47.161+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.164+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dae775b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.166+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1617657022 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:47.167+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-30T11:46:47.168+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:47.168+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 6
2026-01-30T11:46:47.170+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-30T11:46:47.170+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c34c7a0]
2026-01-30T11:46:47.170+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d3f1f58]
2026-01-30T11:46:47.172+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.174+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.174+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240a5df1] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.174+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b91042c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128185111 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321272793 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 3
2026-01-30T11:46:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.176+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:47.177+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dae775b]
2026-01-30T11:46:47.177+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:47.178+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.178+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@683280d4] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.179+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@922232358 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will not be managed by Spring
2026-01-30T11:46:47.179+09:00 DEBUG 268 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:47.179+09:00 DEBUG 268 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:47.180+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-30T11:46:47.180+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240a5df1]
2026-01-30T11:46:47.181+09:00 DEBUG 268 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b91042c]
2026-01-30T11:46:47.183+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-01-30T11:46:47.183+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.183+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.184+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dfb8351] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.185+09:00 DEBUG 268 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=65, drafterId= (truncated)...]
2026-01-30T11:46:47.186+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810407626 wrapping com.mysql.cj.jdbc.ConnectionImpl@4c1604dc] will not be managed by Spring
2026-01-30T11:46:47.188+09:00 DEBUG 268 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.190+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:47.191+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:47.196+09:00 DEBUG 268 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-30T11:46:47.201+09:00 DEBUG 268 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@683280d4]
2026-01-30T11:46:47.202+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.203+09:00 DEBUG 268 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-30T11:46:47.203+09:00 DEBUG 268 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:47.204+09:00 DEBUG 268 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.204+09:00 DEBUG 268 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dfb8351]
2026-01-30T11:46:47.208+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.211+09:00 DEBUG 268 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=47, drafterId=6, r (truncated)...]
2026-01-30T11:46:47.213+09:00 DEBUG 268 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:47.225+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/47
2026-01-30T11:46:47.228+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/47
2026-01-30T11:46:47.229+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/47
2026-01-30T11:46:47.239+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/47", parameters={}
2026-01-30T11:46:47.241+09:00 DEBUG 268 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:47.243+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.243+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726b5460] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.247+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1783161412 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:47.253+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:47.255+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.297+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:47.306+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@726b5460]
2026-01-30T11:46:47.306+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.306+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dc796c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.324+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423424867 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:47.335+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:47.338+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.348+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:47.350+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31dc796c]
2026-01-30T11:46:47.352+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.353+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.354+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@518205275 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will be managed by Spring
2026-01-30T11:46:47.355+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:47.356+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:47.360+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:47.360+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.361+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee] from current transaction
2026-01-30T11:46:47.362+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:47.362+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.364+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:47.366+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.367+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee] from current transaction
2026-01-30T11:46:47.368+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:47.368+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.379+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:47.380+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.381+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee] from current transaction
2026-01-30T11:46:47.382+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:47.386+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 52(Long), 3(Long)
2026-01-30T11:46:47.389+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:47.390+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.391+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.391+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.391+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@327f67ee]
2026-01-30T11:46:47.396+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.396+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d20bad] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.396+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262519427 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:47.397+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:47.398+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.400+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:47.401+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d20bad]
2026-01-30T11:46:47.401+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.401+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb1b34a] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.402+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@484004082 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:47.403+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:47.404+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:47.406+09:00 DEBUG 268 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:47.407+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bb1b34a]
2026-01-30T11:46:47.408+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:47.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1495c59b] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:47.409+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648889760 wrapping com.mysql.cj.jdbc.ConnectionImpl@6f1b1104] will not be managed by Spring
2026-01-30T11:46:47.410+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:47.411+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:47.412+09:00 DEBUG 268 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:47.413+09:00 DEBUG 268 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1495c59b]
2026-01-30T11:46:47.413+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:47.415+09:00 DEBUG 268 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=47, drafterId=6, r (truncated)...]
2026-01-30T11:46:47.422+09:00 DEBUG 268 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:51.873+09:00 DEBUG 268 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/47/approve
2026-01-30T11:46:51.877+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/47/approve
2026-01-30T11:46:51.896+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/47/approve
2026-01-30T11:46:51.897+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/47/approve
2026-01-30T11:46:51.897+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/47/approve", parameters={}
2026-01-30T11:46:51.901+09:00 DEBUG 268 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#approveExpense(Long, ApprovalLineDto)
2026-01-30T11:46:51.913+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ApprovalLineDto(approvalLineId=null, expenseReportId=null, approverId=5, stepOrder=null, status=null (truncated)...]
2026-01-30T11:46:52.080+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 결재 승인 요청 - expenseId: 47, approverId: 5
2026-01-30T11:46:52.174+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.175+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.176+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474350620 wrapping com.mysql.cj.jdbc.ConnectionImpl@2e14e77a] will be managed by Spring
2026-01-30T11:46:52.176+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:52.177+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.179+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:52.179+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.180+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a] from current transaction
2026-01-30T11:46:52.184+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.updateApprovalLine             : ==>  Preparing: UPDATE approval_line_tb SET status = 'APPROVED', signature_data = ?, approval_date = NOW() WHERE expense_report_id = ? AND approver_id = ? AND company_id = ?
2026-01-30T11:46:52.189+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.updateApprovalLine             : ==> Parameters: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAADICAYAAADFjnuPAAAQAElEQVR4AeydrbocxRZA+0NgUeioWKKwwcBjgAkadSwKi4oGk7wBFkywwaBR5xFiY+5lDdknlU73/FZ118+6392p6p7uql2rzqypqZlz+OTt27f/M2Tgz4A/A/4M1Pcz8Mnk/yQgAQlIoEoCCrrKaTEpCUjgJIEBLlDQA0yyQ5SABNokoKDbnDezloAEBiCgoAeYZIc4IgHH3AMBBd3DLDoGCUigSwIKustpdVASkEAPBBR0D7PoGC4l4PUSaIKAgm5imkxSAhIYkYCCHnHWHbMEJNAEAQXdxDRtm6S9SUACdRBQ0HXMg1lIQAIS+IiAgv4IiSckIAEJ1EFAQV86D14vAQlIYCMCCnoj0HYjAQlI4FICCvpSYl4vAQlIYCMCmQW9UdZ2IwEJSGAAAgp6gEl2iBKQQJsEFHSb82bWEpBAZgI1Nqega5wVc5KABCTwLwEF/S8E/y8BCUigRgIKusZZMScJ1EbAfHYhoKB3wW6nEpCABE4TUNCnGXmFBCQggV0IKOhdsNtpXwQcjQTKEFDQZbjaqgQkIIGbCSjomxHagAQkIIEyBBR0Ga62+p6ANQlI4EoCCvpKcN4mAQlIoDQBBV2asO1LQAISuJKAgr4SXK7bbEcCEpDAGgEFvUbG8xKQgAR2JqCgd54Au5eABCSwRqBuQa9l7XkJSEACAxBQ0ANMskOUgATaJKCg25w3s5aABOomkCU7BZ0Fo41IQAISyE9AQednaosSkIAEshBQ0Fkw2ogEJHAJAa89j4CCPo+TV0lAAhLYnICC3hy5HUpAAhI4j4CCPo+TV0lgOwL2JIF3BBT0OxAWEpCABGojoKBrmxHzkYAEJPCOgIJ+B8KiDQKvXr2aXr3KEzFi2ot6lHEuyjhvKYEtCSjoLWl33hcyI3766acpja+//npK49NPP50IzlEuxdpj33zzzZQrol/ai3qUcS7KOD8vI0/KdMzUgwVl51Pv8AoRUNCFwPbYLKJBPMgojZAWMiO4Jo0///xzSgM2T58+PZyjvhZcsxQ//vjjNI+l6849R/9xLfVLgnFxPWU6ZurBgjIYRcnjacCWdgwJpAQUdEqj/Xr2ESAOZIxYEA1SQUZpRKchud9//31airdv304Rf/zxx0M9zqUlj6/FXM4cr117znn6jeuoLwXjifPUl4I80ggewSct4ZgGbGFMwJvHYJ/eY308Agp6vDk/a8TPnz8/bEsgDmTMTSEcJISgQlhRhuS++uqraSloo9VgPJE79aWASxrBI/hQwo2I64JptE0JbwQN+1TYnFPaEBonFPQ4c33WSBEAK7i7u7uHLQgkglRCOMgFQZ3VoBd9QABuBAyJYBry5lxE3BjCRtBI+/Hjx4cXT44J5oyI6y37ITCUoPuZtvwj4QmOmBEAQqCHVMxIhXNGOQIwDjlTIm2COsF80Pv9/f3hxRM5E8wZMV9tc63RNgEF3fb8Zck+nuSKOQvO7I0gZ4LV9pKw0w6ZQ+aTQNgEdSK9znobBBR0G/NULEueuER0ECJgNRfnLOsiwBwRc2GvZcn8Esp6jVC9598Lut4czawQAbY1eOJG8+wz88SPY8s2CDBnBKvrmMPYDpmPgPkmkDVbWtTn13hcDwEFXc9cbJ4Jb4ejU57grpqDRrslc8hcnrO6Zv4RdMj62bNnh9/SbHf0/WWuoPub07NGxNfoeHJyMU9ogrrRFwHmlWB1TUksjRBZv3z58vBbmiFsfj54l7V0fWXnuk1HQXc7tccH9ttvvz1csPakfbjAShcEmGcCWcdWyNrAEDaC5tshlMTatZ4vR0BBl2Nbbcs82XgCkiBPWEpjLAKxFYKsiW+//XYVAD8vEasX+UARAgq6CNZ2Gl37MKmdEZjpKQLnPP7rr78efvWeF2xi6R4lvUSl7DkFXZZvda2zp8gTjcR4IrKSom5IAAL8TBCsqinnL+D87Hz//fdcamxAQEFvALmmLmJro6aczKVOAgiab4NQphm+ePEiPbRekICCLgi3xqZZAUVe8ydenB+qdLAnCfBzMt+j5p3YyRu94GYCCvpmhO00oJzbmavaMmWPer7dUVuOPeajoHuc1TPG5JPtDEhe8gGB9PMKt8o+QFPsQEEXQ1tfw+nb0vTJtp6pj0jgPQHfgb1nsVVNQW9F2n4k0DCBVM7z/eiGh1V96gq6+inKn6DbG/mZ9twi77xSQbMf3fN4axqbgr5+NrxTAl0TQMz8xTt+3ZuB8sLO96OpG9sQUNDbcK6qF/efq5qO6pJJxcyHgYiZr9rxnejqku08IQXd+QSnw+PJxjFPQEpDAnMCbGWwYo6flRAz5fxaj8sTKCbo8qnbw6UEWAlxz5s3bygMCTwQQMz8mVFKTvLX7tjOUMzQ2C8U9H7sd+v5s88+261vO66LAO+mUjEjZMTsNlgd86Sg65iHTbOIt6+bdmpn1RBAynz4h5jZzuCdVYiZsppEd0ukno4VdD1zUTyTWBXxhCzemR1URyDEjJR5kebngK0MPvxTzNVN1yEhBX3A4D8S6JfAMTHHi3a/o297ZAq67fkzewksEkDK/HcnYxuDi1gts7/MivkGMdOUsREBBb0R6Jq64e1tTfmYSz4CiJlvYhB3d3cTWxdKOR/frVtS0FsTr6Q/nsiVpGIaGQgwn3zwx/4ydVbIrJgRdIbmbWInAgp6J/B22yeBrUeFjEPMvDNCyGxhUCLprfOxv7wEFHRenlW3xqf2VSdocmcTSMXMTayW2cpAzBwbfRBQ0H3M48WjYLV18U3esCsBpEzMP/hjxexqedepKda5gi6Gtr6GeRLHKpon+uYZ2uFVBJir2Mbgwz/mkBWzYr4KZ1M3Keimpitfsq6g87Es1VIqZvoIKStmaIwRCnqMeX4YZbpHiQAeHrBSDQFWybFiJqkQM++AODbGIaCgq5nrbRJJn+SIYJte7eUcAkiZ/WXmhXlSzOdQ6/saBd33/C6Ojj1MHnCbAwr7R4iZTJByfBsDSXPOGJeAgh5w7t3m2H/S2V5ipcyKmWwQs3vLkDBSAq0IOs3Z+o0EWJnFKhpJ3Nict19IgBUzv/HHbYoZCsYaAQW9Rqbz87GKZpuD1Vznw911ePDlhRAxE7xAuo2x65Q007mCbmaq8iaKJFxF52W61BpiZrWMpGHOCyOxdK3nOiVww7AU9A3wWr8VYTAGVtGURh4CyJiVMvvLCDq2MRBzMM/Tk630TkBB9z7DR8aHMOJhpBJ1y+sIIGPEzIqZFhAzWxlKGRrGNQQU9DXUOrrHbY7bJpMXNqQcq2VaQ8x+IwMS54TXHCOgoI/RGeAxRMIw2eZANtSN0wRghZhZLcOOdyOK+TQ3r7iMgIK+jFeXV7uKPm9aQ8qslhEzdyFmtjEo3cqAiJGTgILOSbPRtpALqbMSRELUjfcEYJKulnlBi9VysHt/ddaajQ1OQEEP/gPA8Fn5IR3qfNBFaUwTLNbEDDMZSaA0AQVdmnAj7cdKcPRVdKyW2cZA0EwfbNjGYL9eMUPE2IqAgt6KdOX9IJ7WVtE5kYaY2VvmRQoWbmPkJGxb1xBQ0NdQ6/QeVooMDUEhLOq9B+N0G6P3WW53fAq63bnLnvlIq2jFnP3HxwYLEFDQBaBW0eSVSaSr6NiDvbKpKm9TzFVOi0mtEFDQK2BGPc0qOiSNoIkeWCjmHmZxvDEo6PHm/OSIETTBhQgauVFvMch9vsfsNzJanMkxcx5U0GNO9iWjRtB8k4F7+GYDZUuBmHlxIXc+9GQsIeaWxmGuYxNQ0GPP/9HR871fxMZFrEIpWwhyRcwImvzj63It5G6OEkgJKOiUhvWPCCBpTrIKRXzUawxWzM+ePZv4BRNyTcXMvnqNOZuTBE4RWBL0qXt8fDACrEAZMuJ7/vw51aqClTLx8uXL6cmTJ1NsZSjmqqbJZK4goKCvgDbaLYgOST969Gi6u7ubWK3WwIA8WDEjZ148yPH169c1pGYOEshCQEFnwdh/I0j6l19+OQyU/V3keDjY4R/6RszkQfd8oMmqmRw5NgYm0NnQFXRnE1pyOAiQVSp9IEdESX2roD/2wembPmOfGUFzbEigNwIKurcZLTweJB1CRJRsLxTu8rClEmJmKyPEzAeY5FO6f9uXwF4EFPRe5BvuF0ETDAFBs7KlXiJonxcCxEz79KuYIXFNeE9rBBR0azNWSb6IkiAdBIpIqecKpM+qOdqNVXP0masf25FAzQQUdM2zU3luyJIgTURKUL81aAfpu2q+laT3t05AQbc+gzvnj6AJ0kCsBPVrYmnVzLczov1r2rzgHi+VQHUEFHR1U9JeQgiUIHMETVC/JLhnadV8SRteK4HeCCjo3mZ0p/EgaILukS3fU6bk+FRwHcF17jVDwZDAfwQU9H8c/PcEgXMeRtDplgTSJdbunW9pcL/f0Fij5fkRCSjoEWe98JgRLUE3CJrVNDLmOILz8y2NuCeusZTA6AQU9Og/AYXGj2z5rUO2LOgCGSNl6n59DgqGBE4TUNCnGZ2+wisWCfBbfmxZIGsuQNCPHz+e/PocNAwJnCagoE8z8oobCSDo77777tDK/f39ofz5558nzh8O/EcCElgkoKAXsXgyFwH2ntnSePHixaFJ/mQpFf5sKStq6oYEJLBMYANBL3fs2f4JIGD2ntMtjX/++Wdib5rR8zjypm5IQAIfE1DQHzPxzI0EYtWMgKMptjMIjtmbRtIcI++lb3lwnSGB0Qko6NF/AjKPHymnq2a+xZF+Nzq6Q9IImuAc93AvdUMCtRDYOw8FvfcMdNL/2qqZb3EcGyKCJrgGQRPUDQlIYJoUtD8FNxNAqqyA2a6IxmILI46PlQia61lt0xZbHpTH7vExCYxAQEGPMMsFx4hIiegCybKlwRZGnDun5HpW28ia62mToG5USsC0ihNQ0MUR99sB38BIJYpckewtI6YNgjZoe94H5w0JjEJAQY8y05nHiTyv3dI4lQqCZhXOapw+6Is4dZ+PS6A3Agq6txndYDzIkqArJMr+MVsUHOcMVuPImjbpj9U0H0ZyXH+YoQRuJ6Cgb2c4VAuIkohBI9ASck7b5wWAflhN82Fk2n9cZymBHgko6B5ntdCYECMRzSPOknKOfugDQROcIwe/6QEJo3cCCrr3Gc40PrYWEGM0hywRZxxfWF51OX2yN01JA+TDtgclx4YEeiOgoHub0ULj4Y8bRdMIkojjrUv6ZvVOybYHgia2zsP+JFCagIIuTbiD9pHf33//fRgJUiQOBzv+w+qdPAg+qCRHtz12nBC7LkJAQRfBelujNd2N+IjICSFGvYaSfPi2B39fWlHXMCPmkJOAgs5Js8O2apZzivuHH36YEDXC5jx5u6KGhNEyAQXd8uwVzh3JRReIj4jjWktynH+QqKhrnS3zOkWgPUGfGpGPZyPANzeyNbZxQ6OLmrlLX2A3xm93mQgo6Ewge2yGb0jEuBBe1FsqybvnFTUiJpAxXzkkeMcQv9DDcUvzH/528AAABepJREFUZa4fElDQH/Lw6B0BnvTvql38x117EjVzg3hDxCFjXlCJmDdKvu1CaVRB4OIkFPTFyMa4Yf5E72XUx0TNKrT2cZIjQj42P3ybhYjvitc+JvNbJ6Cg19n4SMcElkSN/FiZUtY29Fg1H8stpMy3WQhXz7XN4uX5KOjLmQ1xB0IYYaCpqKmzMkWCbB9Q7s2AeeBF49iq+cmTJxP77K1LeW/WNfavoGuclcpyYmVWWUrZ00HORLotgKBD1NSzd7rSIFImTomZeSHf169fr7Tk6dYJKOjWZ7BQ/qwko+mR3iozVkTNipQSBsg5Dc6ViFTKx1bMIWZXzCVmoa42FXRd82E2FRFA0IiaVSr1kDQrW2SaI1XaoT1W6kel/PTpxK+zk49izkG+jTYUdBvztGmWSCM6RExRH7Wcr6p5d4FMESvSvoYLjLmfdmhvqQ1WygQvEEiZX2dfus5z/RJQ0P3OrSMrQIAXLFaxlDSPoFn9UnJ8Kk6JGSHTdkgZMfMCcapdH++TgILuc16zjQphZGusWEPbN4xEkScipY6gj4n6mJhhTDsEbdKeUt5+TmvsUUHXOCsV5bT29ruiFHdNBZEiVORKORf1MTFzPatxpEw7xK6DsfPqCCjo6qZk/4QQBas6MkEwlMZxAjBDuARXhqiX9pi5BjFTcq0hgTUCCnqNTD/nrxpJyIMV9JdffnlVGyPexAsbsTT2R48eHX6hJNguXeM5CaQEFHRKw/oDgVgRcoL/3BUrQurGMgHeaZz6Vsb9/f3EdcsteFYCHxNQ0B8z8cw7Aqz0vvjii8MRgiYOB/5zIIBskTIfDs63MlhFE+xNx3YGdV74Djf7jwTOIDC8oM9gNPQlf/3118P4ETRSejgxYIXxwwExz6UMjpAyH/wRIWRe7KLOdYYEziGgoM+hNPg1rPwCAVJCUHHce5kKOaTM+NmbT8eeilkRp2Ss30JAQd9Cb5B7EU4qaQRFtDh8hEuQP8KdB9sVcY56vCAhZCIdc0iZLYx0tZxeY10CtxA4LuhbWvbergggad6mx6AQHIHs4lyNJfnNhTuXLuKNYAxpneMIhEzwYkUo5SBjWYqAgi5FtsN2ETQRQ0PQITvqcX7PEiGTC1KOFfCacCNPpEtwTJkGIiZilRxS5gWL6w0JlCSgoEvS7bBtBI2sKGN4CJFAiJRxvnSJjAlkHBEvGEh53n+IF+ESjINAukRa55hAxMS8LY+rJ9BFggq6i2ncfhAIGqFRpr0j6M8//3xCmNQRaPo4dc7NI67lPPV50F4ELwQEMiaQcQTtR6RCJleESyBcIq6zlECtBBR0rTPTSF4IGvlRRspv3ryZECaSRaDINA3OzSOu5Tz1edBeRPSTliFjSlbHBDImlHFKynpLBBR0S7NVca4IGlEjRuolUkW+EfRBXwT9IuIIhEyUyKGXNh1HGwQUdBvz1EyWiBF5Ik2CekQqV84h13lwDxHnqUeEgCm5n76IZuCYqAQuJKCgLwTm5ZcRQKQRiJWIY+Q6j2g9zsexpQRGJKCgR5x1x3ycgI9KoBICCrqSiTANCUhAAnMCCnpOxGMJSEAClRBQ0JVMRDtpmKkEJLAVAQW9FWn7kYAEJHAhAQV9ITAvl4AEJLAVAQWdl7StSUACEshGQEFnQ2lDEpCABPISUNB5edqaBCQggWwENhV0tqxtSAISkMAABBT0AJPsECUggTYJKOg2582sJSCBTQns05mC3oe7vUpAAhI4SUBBn0TkBRKQgAT2IaCg9+FurxLoiYBjKURAQRcCa7MSkIAEbiWgoG8l6P0SkIAEChFQ0IXA2qwEgoClBK4loKCvJed9EpCABAoTUNCFAdu8BCQggWsJKOhryXlfHgK2IgEJrBJQ0KtofEACEpDAvgQU9L787V0CEpDAKgEFvYqmhgfMQQISGJmAgh559h27BCRQNQEFXfX0mJwEJDAygZYFPfK8OXYJSGAAAgp6gEl2iBKQQJsEFHSb82bWEpBAywTOzF1BnwnKyyQgAQlsTeD/AAAA///X20bKAAAABklEQVQDAB80troEUTJHAAAAAElFTkSuQmCC(String), 47(Long), 5(Long), 3(Long)
2026-01-30T11:46:52.308+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.updateApprovalLine             : <==    Updates: 1
2026-01-30T11:46:52.309+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.309+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a] from current transaction
2026-01-30T11:46:52.309+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:52.310+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.312+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:52.313+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.313+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a] from current transaction
2026-01-30T11:46:52.313+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:52.317+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.329+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:52.336+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.338+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a] from current transaction
2026-01-30T11:46:52.339+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.updateExpenseReportStatus      : ==>  Preparing: UPDATE expense_report_tb SET status = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:52.341+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.updateExpenseReportStatus      : ==> Parameters: APPROVED(String), 47(Long), 3(Long)
2026-01-30T11:46:52.371+09:00 DEBUG 268 --- [http-nio-8080-exec-1] c.i.b.m.E.updateExpenseReportStatus      : <==    Updates: 1
2026-01-30T11:46:52.372+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.373+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.374+09:00 DEBUG 268 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718b076a]
2026-01-30T11:46:52.380+09:00  INFO 268 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 결재 승인 완료 - expenseId: 47
2026-01-30T11:46:52.381+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:52.383+09:00 DEBUG 268 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결제 승인 완료, data=null)]
2026-01-30T11:46:52.384+09:00 DEBUG 268 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-30T11:46:52.392+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/47
2026-01-30T11:46:52.394+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: CEO, companyId: 3, uri: /api/expenses/47
2026-01-30T11:46:52.394+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/47
2026-01-30T11:46:52.394+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/47", parameters={}
2026-01-30T11:46:52.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-30T11:46:52.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.395+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15693adc] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:52.397+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1216429232 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:52.398+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-30T11:46:52.400+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-30T11:46:52.403+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15693adc]
2026-01-30T11:46:52.405+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.405+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed3478c] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:52.408+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@834157958 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:52.409+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:52.409+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.411+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:52.411+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ed3478c]
2026-01-30T11:46:52.418+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.419+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.420+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1201086485 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will be managed by Spring
2026-01-30T11:46:52.424+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-30T11:46:52.424+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : ==> Parameters: 3(Long)
2026-01-30T11:46:52.428+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectExpenseList  : <==      Total: 30
2026-01-30T11:46:52.428+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4] from current transaction
2026-01-30T11:46:52.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT expense_detail_id, expense_report_id, category, merchant_name, description, amount, actual_paid_amount, payment_method, payment_req_date, card_number, is_pre_approval, note, is_tax_deductible, non_deductible_reason, company_id FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-30T11:46:52.429+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.432+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-30T11:46:52.434+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.434+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4] from current transaction
2026-01-30T11:46:52.435+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:52.435+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.438+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:52.439+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.439+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4] from current transaction
2026-01-30T11:46:52.440+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_detail_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:52.440+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : ==> Parameters: 52(Long), 3(Long)
2026-01-30T11:46:52.442+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseDetailId : <==      Total: 1
2026-01-30T11:46:52.442+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.442+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.443+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.443+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5338bda4]
2026-01-30T11:46:52.446+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.446+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9274d] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:52.447+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@277923765 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:52.447+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-30T11:46:52.448+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.451+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-30T11:46:52.452+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c9274d]
2026-01-30T11:46:52.453+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.453+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d1e076] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:52.454+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852463278 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:52.454+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-30T11:46:52.454+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 47(Long), 3(Long)
2026-01-30T11:46:52.456+09:00 DEBUG 268 --- [http-nio-8080-exec-2] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-30T11:46:52.456+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d1e076]
2026-01-30T11:46:52.457+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-30T11:46:52.457+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c31a5e] was not registered for synchronization because synchronization is not active
2026-01-30T11:46:52.457+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1253610496 wrapping com.mysql.cj.jdbc.ConnectionImpl@132cb39c] will not be managed by Spring
2026-01-30T11:46:52.458+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-30T11:46:52.458+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-30T11:46:52.460+09:00 DEBUG 268 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-30T11:46:52.460+09:00 DEBUG 268 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c31a5e]
2026-01-30T11:46:52.461+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-30T11:46:52.461+09:00 DEBUG 268 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=47, drafterId=6, r (truncated)...]
2026-01-30T11:46:52.462+09:00 DEBUG 268 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
