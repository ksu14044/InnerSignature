2026-01-14T08:56:22.589+09:00  INFO 11588 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 11588 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-14T08:56:22.608+09:00 DEBUG 11588 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-14T08:56:22.621+09:00  INFO 11588 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-14T10:34:59.485+09:00  INFO 28060 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 28060 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-14T10:34:59.489+09:00 DEBUG 28060 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-14T10:34:59.491+09:00  INFO 28060 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-14T10:35:01.509+09:00 DEBUG 28060 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-14T10:35:01.510+09:00 DEBUG 28060 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-14T10:35:01.809+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-14T10:35:01.809+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-14T10:35:01.810+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-14T10:35:01.811+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-14T10:35:01.811+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyCardMapper.class]
2026-01-14T10:35:01.812+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-14T10:35:01.812+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-14T10:35:01.813+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseCategoryMapper.class]
2026-01-14T10:35:01.814+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-14T10:35:01.814+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-14T10:35:01.819+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-14T10:35:01.820+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-14T10:35:01.825+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-14T10:35:01.830+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-14T10:35:01.832+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserApproverMapper.class]
2026-01-14T10:35:01.836+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserCardMapper.class]
2026-01-14T10:35:01.840+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-14T10:35:01.842+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserSignatureMapper.class]
2026-01-14T10:35:01.849+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-14T10:35:01.856+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-14T10:35:01.861+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-14T10:35:01.862+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-14T10:35:01.864+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyCardMapper' and 'com.innersignature.backend.mapper.CompanyCardMapper' mapperInterface
2026-01-14T10:35:01.866+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-14T10:35:01.869+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-14T10:35:01.870+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseCategoryMapper' and 'com.innersignature.backend.mapper.ExpenseCategoryMapper' mapperInterface
2026-01-14T10:35:01.873+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-14T10:35:01.875+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-14T10:35:01.877+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-14T10:35:01.879+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-14T10:35:01.880+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-14T10:35:01.883+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-14T10:35:01.885+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userApproverMapper' and 'com.innersignature.backend.mapper.UserApproverMapper' mapperInterface
2026-01-14T10:35:01.888+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userCardMapper' and 'com.innersignature.backend.mapper.UserCardMapper' mapperInterface
2026-01-14T10:35:01.890+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-14T10:35:01.891+09:00 DEBUG 28060 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userSignatureMapper' and 'com.innersignature.backend.mapper.UserSignatureMapper' mapperInterface
2026-01-14T10:35:02.940+09:00  INFO 28060 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-14T10:35:02.966+09:00  INFO 28060 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-14T10:35:02.969+09:00  INFO 28060 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-14T10:35:03.161+09:00  INFO 28060 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-14T10:35:03.163+09:00  INFO 28060 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3588 ms
2026-01-14T10:35:03.468+09:00 DEBUG 28060 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-14T10:35:03.472+09:00 DEBUG 28060 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-14T10:35:04.176+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-14T10:35:04.235+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-14T10:35:04.320+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-14T10:35:04.359+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-14T10:35:04.391+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyCardMapper.xml]'
2026-01-14T10:35:04.423+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-14T10:35:04.525+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-14T10:35:04.610+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseCategoryMapper.xml]'
2026-01-14T10:35:04.882+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-14T10:35:04.908+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-14T10:35:04.924+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-14T10:35:05.011+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-14T10:35:05.036+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-14T10:35:05.058+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-14T10:35:05.080+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserApproverMapper.xml]'
2026-01-14T10:35:05.109+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserCardMapper.xml]'
2026-01-14T10:35:05.152+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-14T10:35:05.177+09:00 DEBUG 28060 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserSignatureMapper.xml]'
2026-01-14T10:35:10.789+09:00 DEBUG 28060 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 154 mappings in 'requestMappingHandlerMapping'
2026-01-14T10:35:11.142+09:00 DEBUG 28060 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-14T10:35:11.283+09:00  WARN 28060 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e187aefd-c96f-4442-a2e0-e118af76fa22

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-14T10:35:11.310+09:00  INFO 28060 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-14T10:35:11.669+09:00 DEBUG 28060 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-14T10:35:11.970+09:00 DEBUG 28060 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-14T10:35:12.197+09:00 DEBUG 28060 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-14T10:35:12.210+09:00 DEBUG 28060 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-14T10:35:12.527+09:00  INFO 28060 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-14T10:35:12.562+09:00  INFO 28060 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 14.036 seconds (process running for 14.594)
2026-01-14T10:35:15.935+09:00  INFO 28060 --- [http-nio-8080-exec-5] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-14T10:35:16.093+09:00  INFO 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-14T10:35:16.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-14T10:35:16.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-14T10:35:16.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-14T10:35:16.264+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2c668c2a
2026-01-14T10:35:16.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@6cc8adff
2026-01-14T10:35:16.387+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-14T10:35:16.410+09:00  INFO 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed initialization in 262 ms
2026-01-14T10:35:16.542+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:16.542+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:16.542+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:16.543+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:16.543+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:16.544+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-14T10:35:16.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:16.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-14T10:35:16.707+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:16.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats
2026-01-14T10:35:16.721+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-14T10:35:16.725+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:16.769+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:35:16.769+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T10:35:16.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:16.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T10:35:16.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:16.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-14T10:35:16.811+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:16.821+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats
2026-01-14T10:35:16.823+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-14T10:35:16.828+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:16.828+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:35:16.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T10:35:16.842+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T10:35:16.845+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:16.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:16.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:16.855+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T10:35:16.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:16.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:16.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-14T10:35:17.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:35:17.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:17.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:17.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:17.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:17.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/companies
2026-01-14T10:35:17.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:17.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T10:35:17.122+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-14T10:35:17.146+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-14T10:35:17.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:17.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:17.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:17.140+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:17.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:35:17.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T10:35:17.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T10:35:17.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:17.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:17.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:17.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:17.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:17.165+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:17.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:17.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.259+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4f82b] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.216+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:17.247+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a0653f] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.249+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a75e687] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b5784cf] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e9533c9] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.274+09:00  INFO 28060 --- [http-nio-8080-exec-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-14T10:35:17.294+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:17.337+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.340+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bafb16] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.648+09:00  INFO 28060 --- [http-nio-8080-exec-5] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c03d32c
2026-01-14T10:35:17.650+09:00  INFO 28060 --- [http-nio-8080-exec-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-14T10:35:17.659+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1033324159 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:17.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1263959738 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:17.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:17.671+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:17.706+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:17.706+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:17.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1689652686 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:17.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-14T10:35:17.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-14T10:35:17.737+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:35:17.742+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:17.742+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:17.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bafb16]
2026-01-14T10:35:17.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4f82b]
2026-01-14T10:35:17.763+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278517826 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:17.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:17.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e9533c9]
2026-01-14T10:35:17.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1543005188 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:17.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.788+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c52c05] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.780+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:17.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658535656 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:17.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.787+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T10:35:17.793+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:17.794+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0574e4] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-14T10:35:17.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:17.802+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a75e687]
2026-01-14T10:35:17.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:17.804+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:17.804+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1589498174 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:17.805+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c0df7c] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:17.806+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:17.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:17.815+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-14T10:35:17.822+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b5784cf]
2026-01-14T10:35:17.823+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:17.823+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170639856 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:17.824+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:17.826+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:17.827+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:17.830+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=2133783, totalCo (truncated)...]
2026-01-14T10:35:17.838+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:17.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T10:35:17.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c52c05]
2026-01-14T10:35:17.871+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:17.871+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:17.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:17.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:17.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1182029405 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:17.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats
2026-01-14T10:35:17.905+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:17.906+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67a0653f]
2026-01-14T10:35:17.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:17.971+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:17.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:18.005+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:35:18.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:18.022+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.043+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.081+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c0574e4]
2026-01-14T10:35:18.097+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats
2026-01-14T10:35:18.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats", parameters={}
2026-01-14T10:35:18.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:35:18.097+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:18.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:18.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ef1cb] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.104+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-14T10:35:18.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.146+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:35:18.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1720972582 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:18.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:35:18.145+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:18.147+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51618aa3] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.147+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:35:18.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033010148 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:18.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:18.216+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-14T10:35:18.198+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.208+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:18.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c0df7c]
2026-01-14T10:35:18.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:35:18.217+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:18.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 1(Long)
2026-01-14T10:35:18.221+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.238+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7b398f] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.221+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-14T10:35:18.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:18.232+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.240+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179815542 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:18.254+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:35:18.256+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:35:18.242+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:35:18.249+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:18.254+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:18.260+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.261+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:18.262+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.262+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:18.273+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:18.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:18.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.291+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:35:18.327+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51618aa3]
2026-01-14T10:35:18.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:35:18.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.306+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:18.309+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ef1cb]
2026-01-14T10:35:18.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:18.343+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.343+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:18.327+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5ec74d] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7b398f]
2026-01-14T10:35:18.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=3, userName=tes (truncated)...]
2026-01-14T10:35:18.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.344+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:18.344+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:18.345+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@970600901 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:18.357+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.362+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe71512] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.372+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.373+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:18.373+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:35:18.375+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:35:18.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:18.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@824241310 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:18.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:18.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-14T10:35:18.440+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:18.440+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.447+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:18.441+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:18.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae2c3f0] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:18.448+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:18.449+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:18.455+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@69549276 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:18.455+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:18.455+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:18.455+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:18.456+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:18.460+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:18.556+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:18.558+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:18.559+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 7
2026-01-14T10:35:18.560+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:18.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:18.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:18.567+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fe71512]
2026-01-14T10:35:18.570+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5ec74d]
2026-01-14T10:35:18.571+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da167b2] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.573+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:18.606+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:18.585+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.594+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.605+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909091367 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:18.606+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:18.609+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae2c3f0]
2026-01-14T10:35:18.611+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a262054] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.611+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a77459] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:18.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-14T10:35:18.613+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@619563de] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.614+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.615+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530801778 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:18.621+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@252051041 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:18.624+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:18.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749794c8] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.629+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:18.629+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:18.638+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624413096 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:18.641+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@77578921 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:18.642+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:18.643+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:18.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-14T10:35:18.647+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:18.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:18.649+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:18.656+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2da167b2]
2026-01-14T10:35:18.662+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:35:18.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:18.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:18.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:18.673+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:18.676+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28db7505] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-14T10:35:18.679+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a77459]
2026-01-14T10:35:18.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a262054]
2026-01-14T10:35:18.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:18.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:18.688+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756625006 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:18.689+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-14T10:35:18.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.691+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@749794c8]
2026-01-14T10:35:18.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@619563de]
2026-01-14T10:35:18.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:18.694+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:35:18.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:18.697+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c978228] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.696+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.696+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.696+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:18.697+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.698+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@878719351 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:18.704+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0214ab] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.705+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:18.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:35:18.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:18.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@194847177 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:18.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.720+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:18.725+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d09cb3b] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.726+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:18.726+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:18.728+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:35:18.729+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T10:35:18.729+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28db7505]
2026-01-14T10:35:18.738+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501146923 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:18.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:18.735+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:35:18.741+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-14T10:35:18.744+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:18.745+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-14T10:35:18.747+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:35:18.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T10:35:18.754+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-14T10:35:18.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:35:18.776+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T10:35:18.762+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T10:35:18.777+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32b346d7] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.780+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:18.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:18.791+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T10:35:18.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:35:18.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:35:18.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-14T10:35:18.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:35:18.806+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1182121472 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:18.807+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0214ab]
2026-01-14T10:35:18.807+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c978228]
2026-01-14T10:35:18.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d09cb3b]
2026-01-14T10:35:18.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T10:35:18.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T10:35:18.812+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.812+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:18.813+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:18.813+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.814+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.822+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T10:35:18.823+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629ab7bd] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.827+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:18.830+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:18.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=2133783, totalCo (truncated)...]
2026-01-14T10:35:18.839+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:35:18.839+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1072897503 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:18.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:18.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:35:18.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T10:35:18.856+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:18.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T10:35:18.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats
2026-01-14T10:35:18.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:18.875+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:18.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:35:18.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-14T10:35:18.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:35:18.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:35:18.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c33c9a] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.880+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.880+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats
2026-01-14T10:35:18.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.881+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590316845 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:18.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:35:18.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats", parameters={}
2026-01-14T10:35:18.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69be1353] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T10:35:18.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:18.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32b346d7]
2026-01-14T10:35:18.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a7fdbb] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.895+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-14T10:35:18.896+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:35:18.907+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.897+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283592565 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:18.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T10:35:18.904+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@420122790 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:18.919+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:18.905+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-14T10:35:18.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:35:18.920+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:18.921+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:35:18.922+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.924+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:35:18.926+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.926+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@98430f1] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.929+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:18.930+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124729109 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:18.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:35:18.937+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 1(Long)
2026-01-14T10:35:18.933+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a578c6] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.934+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T10:35:18.939+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561614894 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:18.940+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:18.941+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:35:18.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T10:35:18.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66c33c9a]
2026-01-14T10:35:18.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:35:18.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a7fdbb]
2026-01-14T10:35:18.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69be1353]
2026-01-14T10:35:18.949+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T10:35:18.960+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-14T10:35:18.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:18.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:18.971+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:35:18.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T10:35:18.992+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ddde3aa] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:18.993+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:35:18.994+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@98430f1]
2026-01-14T10:35:18.999+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@873223952 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T10:35:19.021+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T10:35:19.025+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:19.039+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=3, userName=tes (truncated)...]
2026-01-14T10:35:19.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:19.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:35:19.038+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@629ab7bd]
2026-01-14T10:35:19.057+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.042+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.043+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:19.046+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:19.058+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:35:19.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T10:35:19.074+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T10:35:19.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:19.079+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:35:19.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-14T10:35:19.088+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.091+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:19.091+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:35:19.092+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T10:35:19.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T10:35:19.094+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T10:35:19.104+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:19.115+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:35:19.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T10:35:19.122+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.124+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-14T10:35:19.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:35:19.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:35:19.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8a028e] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T10:35:19.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T10:35:19.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4c31b2] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1586112871 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:19.143+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:19.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:19.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T10:35:19.158+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:35:19.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@91539740 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:19.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cdcf327] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.159+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:35:19.159+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.160+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607447444 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:19.161+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.175+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.177+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T10:35:19.178+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e1528b8] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.180+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T10:35:19.180+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674090135 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:19.182+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T10:35:19.188+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:19.203+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T10:35:19.207+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T10:35:19.208+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:35:19.221+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d8a028e]
2026-01-14T10:35:19.229+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T10:35:19.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 7
2026-01-14T10:35:19.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4c31b2]
2026-01-14T10:35:19.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ddde3aa]
2026-01-14T10:35:19.245+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.246+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a578c6]
2026-01-14T10:35:19.246+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.247+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T10:35:19.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.254+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669c8003] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.255+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.256+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f74ae83] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.256+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e1528b8]
2026-01-14T10:35:19.258+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@586e70ab] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.259+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@461332524 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:19.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@547067064 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.260+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-14T10:35:19.261+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72274302 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:19.262+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:19.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T10:35:19.267+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.272+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.273+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T10:35:19.274+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:19.275+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T10:35:19.287+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:19.291+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.292+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cdcf327]
2026-01-14T10:35:19.306+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:35:19.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:19.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:19.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:19.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:19.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T10:35:19.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@669c8003]
2026-01-14T10:35:19.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:19.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.326+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:19.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.354+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@586e70ab]
2026-01-14T10:35:19.338+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:35:19.355+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.356+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682ce79c] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.341+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T10:35:19.353+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T10:35:19.382+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:19.353+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:19.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:19.359+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.360+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.363+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1556414970 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.387+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:19.391+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:19.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647889b5] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f74ae83]
2026-01-14T10:35:19.404+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:19.407+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:19.409+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:19.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:19.412+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:19.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482613626 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:19.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.415+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:35:19.420+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:35:19.423+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:19.447+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:19.424+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:19.424+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6982ee89] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.448+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:19.449+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:19.450+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.480+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269f30e8] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.470+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869815692 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:19.478+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.478+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:35:19.487+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608260323 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:19.524+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:19.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:19.512+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13cdaa0e] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.526+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:19.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647889b5]
2026-01-14T10:35:19.528+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:19.529+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423573031 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:19.531+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9ba703] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:35:19.571+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:19.572+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf1c06f] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.572+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210084427 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:19.572+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@682ce79c]
2026-01-14T10:35:19.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:19.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1420504131 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:19.579+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fdfc1c2] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.605+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1204452754 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.583+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.587+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.610+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:19.613+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:19.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:35:19.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6982ee89]
2026-01-14T10:35:19.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:19.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.662+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e9ba703]
2026-01-14T10:35:19.663+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf1c06f]
2026-01-14T10:35:19.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13cdaa0e]
2026-01-14T10:35:19.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bc82d4] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.673+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:35:19.678+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532148604 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:19.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75aaf35a] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8e71be] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.688+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fdfc1c2]
2026-01-14T10:35:19.689+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55c4364f] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.689+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.697+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@651882835 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:19.698+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042166008 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:19.698+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:19.725+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.755+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f65d7b6] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.726+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732392227 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:19.744+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.744+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.745+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:19.750+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@269f30e8]
2026-01-14T10:35:19.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:19.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1671301889 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.798+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:19.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.811+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f36e9c0] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.812+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@625691721 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:19.813+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.814+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.821+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.811+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:19.830+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.835+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.844+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:35:19.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:19.857+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f65d7b6]
2026-01-14T10:35:19.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f36e9c0]
2026-01-14T10:35:19.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75aaf35a]
2026-01-14T10:35:19.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67bc82d4]
2026-01-14T10:35:19.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c8e71be]
2026-01-14T10:35:19.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55c4364f]
2026-01-14T10:35:19.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.875+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:19.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32150e4b] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:19.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352a8946] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e550a6] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cee9f9a] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:19.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@66893784 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.888+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397974682 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:19.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2128661730 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:19.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868355640 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:19.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T10:35:19.896+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:19.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:19.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:19.906+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:19.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T10:35:19.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-14T10:35:19.922+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:35:19.924+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:19.930+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:35:19.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.937+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-14T10:35:19.937+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T10:35:19.942+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T10:35:19.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T10:35:19.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T10:35:19.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cee9f9a]
2026-01-14T10:35:19.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T10:35:19.953+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:35:19.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32150e4b]
2026-01-14T10:35:19.956+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T10:35:19.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:35:19.960+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.961+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:35:19.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:35:19.972+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28e550a6]
2026-01-14T10:35:19.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e99f101] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.974+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:35:19.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c0620c2] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:35:19.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@929418662 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:19.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474418621 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:19.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:19.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:19.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:19.980+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4e1ea8] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.981+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:19.981+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5a9023] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.991+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b04b138] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:19.992+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@690756359 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:19.993+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:35:19.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1277939055 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:19.999+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T10:35:19.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919520496 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:19.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:19.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:19.997+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:35:20.005+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T10:35:20.006+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T10:35:20.007+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c0620c2]
2026-01-14T10:35:20.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@352a8946]
2026-01-14T10:35:20.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:20.010+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T10:35:20.011+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7c6fd] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T10:35:20.023+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:35:20.025+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:35:20.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691750328 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:20.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T10:35:20.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e99f101]
2026-01-14T10:35:20.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.094+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.039+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.046+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:35:20.049+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.109+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b4e1ea8]
2026-01-14T10:35:20.110+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61db415a] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1885058457 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:20.113+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c41705] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.115+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T10:35:20.115+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T10:35:20.177+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:20.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:20.272+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1747248267 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:20.274+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b04b138]
2026-01-14T10:35:20.275+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T10:35:20.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7c6fd]
2026-01-14T10:35:20.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:20.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.283+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:20.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.289+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T10:35:20.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5a9023]
2026-01-14T10:35:20.287+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.288+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.291+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.292+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd1b957] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.305+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:20.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:35:20.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.318+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T10:35:20.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.322+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654996510 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:20.324+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61db415a]
2026-01-14T10:35:20.354+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.357+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c41705]
2026-01-14T10:35:20.335+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:20.341+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:35:20.348+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:20.356+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a371422] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.359+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:20.359+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.363+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.363+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:20.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:35:20.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299712943 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:20.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa9e421] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:20.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.399+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:35:20.411+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2034678350 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:20.447+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:20.439+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:20.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:20.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:20.445+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.449+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:35:20.449+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:20.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:35:20.454+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:20.456+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:20.456+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.457+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:20.460+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:20.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:20.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:20.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:35:20.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41131d3f] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.463+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:20.478+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:20.480+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.480+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d186dae] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.463+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@688100404 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:20.483+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:20.464+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9161af] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.466+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.466+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:35:20.472+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:35:20.481+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@891171295 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:20.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:20.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632420632 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:20.493+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a371422]
2026-01-14T10:35:20.493+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cd1b957]
2026-01-14T10:35:20.494+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa9e421]
2026-01-14T10:35:20.494+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:35:20.512+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:20.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780e42f] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:35:20.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:20.522+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352614137 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:20.522+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4c7fa1] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.523+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0d855d] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.525+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:20.526+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@499541118 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:20.540+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:35:20.529+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065758801 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:20.542+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.543+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:35:20.537+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:35:20.543+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.546+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:20.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:35:20.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:20.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:35:20.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41131d3f]
2026-01-14T10:35:20.588+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.589+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cbd1865] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.590+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@85859368 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:20.591+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.571+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d186dae]
2026-01-14T10:35:20.572+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c9161af]
2026-01-14T10:35:20.676+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c69f7d] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.679+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2721935 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:20.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:35:20.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780e42f]
2026-01-14T10:35:20.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce18533] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.583+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c4c7fa1]
2026-01-14T10:35:20.593+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.657+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:20.687+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1816179996 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:20.688+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e0d855d]
2026-01-14T10:35:20.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.692+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:35:20.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:20.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.694+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7307fb64] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.696+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.704+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:35:20.705+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1493077729 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:20.706+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:20.724+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.740+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:20.741+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.742+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:20.754+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:20.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67c69f7d]
2026-01-14T10:35:20.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cbd1865]
2026-01-14T10:35:20.791+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:20.761+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:20.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:35:20.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:35:20.763+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:20.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.790+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:20.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:20.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:20.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:20.871+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ce18533]
2026-01-14T10:35:20.872+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:20.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:20.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:20.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7307fb64]
2026-01-14T10:35:20.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:20.903+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:35:20.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:35:20.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:20.925+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:20.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41bda082] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.908+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:20.924+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c093e6] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.926+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:35:20.926+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:35:20.926+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:20.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@229486346 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:20.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@456737403 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:20.950+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:35:20.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:35:20.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4251073e] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:20.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:35:20.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:35:20.954+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:35:20.955+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:35:20.955+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:20.956+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086859581 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:20.957+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:20.957+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:35:20.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:35:20.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:35:20.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:21.027+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:35:20.959+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:21.007+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:35:21.016+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:21.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41bda082]
2026-01-14T10:35:21.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:35:21.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c093e6]
2026-01-14T10:35:21.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85e4ad6] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423392788 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:21.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53238f8e] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:35:21.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:35:21.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@141f4b4] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134285528 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:21.040+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.043+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:35:21.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:21.054+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:21.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@783082320 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:21.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c19813] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:21.053+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:21.057+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:35:21.058+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1016787704 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:21.061+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4251073e]
2026-01-14T10:35:21.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T10:35:21.063+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:21.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:21.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:35:21.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:35:21.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.074+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:35:21.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:21.070+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53238f8e]
2026-01-14T10:35:21.071+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@85e4ad6]
2026-01-14T10:35:21.074+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad68417] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.076+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:21.080+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7602820 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:21.076+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.078+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:35:21.080+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:21.081+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:21.081+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:35:21.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:35:21.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@717c4954] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@141f4b4]
2026-01-14T10:35:21.083+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.090+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:21.093+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12c19813]
2026-01-14T10:35:21.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.170+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:35:21.175+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@193897815 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:35:21.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c5ef9e] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.113+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:21.182+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:21.206+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:35:21.207+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:21.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:35:21.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T10:35:21.207+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:21.208+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:21.208+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:35:21.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:35:21.212+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:35:21.260+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:21.304+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132002783 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:21.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:21.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:35:21.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad68417]
2026-01-14T10:35:21.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:21.314+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:35:21.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:35:21.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.318+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.318+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:21.319+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:21.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.322+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:35:21.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:21.327+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:21.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b454fb7] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@717c4954]
2026-01-14T10:35:21.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2131695754 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:21.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:21.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:35:21.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:35:21.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.335+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c5ef9e]
2026-01-14T10:35:21.336+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:21.345+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f0ab238] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.355+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.348+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:35:21.348+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:35:21.441+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.348+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d60d86] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1838987110 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:35:21.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:21.448+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:21.350+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1281682387 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:35:21.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:35:21.404+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.454+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:35:21.455+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:35:21.455+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48961aa1] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.458+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:35:21.458+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:35:21.477+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:35:21.490+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:35:21.723+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b454fb7]
2026-01-14T10:35:21.725+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:21.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@675202717 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:35:21.643+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:35:21.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:35:21.724+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:35:21.730+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:35:21.737+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.730+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d60d86]
2026-01-14T10:35:21.745+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.747+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:21.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:35:21.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f0ab238]
2026-01-14T10:35:21.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.734+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:35:21.790+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T10:35:21.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:35:21.805+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:35:21.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:35:21.817+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:35:21.837+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.817+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d4155ac] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.837+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b615d82] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.839+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942593071 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:35:21.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:35:21.845+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:35:21.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:35:21.857+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48961aa1]
2026-01-14T10:35:21.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146068613 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:21.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:35:21.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:35:21.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d4155ac]
2026-01-14T10:35:21.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T10:35:21.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:35:21.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:35:21.874+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:35:21.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:35:21.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b615d82]
2026-01-14T10:35:21.887+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:35:21.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c599429] was not registered for synchronization because synchronization is not active
2026-01-14T10:35:21.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@923265591 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:35:21.893+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:35:21.893+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:35:21.896+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:35:21.897+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c599429]
2026-01-14T10:35:21.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:35:21.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:35:21.900+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:46.929+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-14T10:36:46.940+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T10:36:46.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/companies
2026-01-14T10:36:46.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T10:36:46.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T10:36:46.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T10:36:46.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:46.992+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a3301a] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:47.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281827853 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:47.046+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T10:36:47.052+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-14T10:36:47.081+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-14T10:36:47.109+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a3301a]
2026-01-14T10:36:47.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:47.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T10:36:47.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:49.875+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-14T10:36:49.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-14T10:36:49.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-14T10:36:49.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-14T10:36:49.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-14T10:36:49.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-14T10:36:49.990+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user3, password=1234)]
2026-01-14T10:36:50.010+09:00  INFO 28060 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user3
2026-01-14T10:36:50.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:50.014+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55890aa6] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:50.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116351891 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:50.023+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-14T10:36:50.024+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user3(String)
2026-01-14T10:36:50.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-14T10:36:50.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55890aa6]
2026-01-14T10:36:50.138+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:50.138+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc20566] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:50.139+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924612916 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:50.139+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:36:50.140+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 4(Long)
2026-01-14T10:36:50.143+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-14T10:36:50.143+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bc20566]
2026-01-14T10:36:50.162+09:00  INFO 28060 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 4, role: ACCOUNTANT, companyId: 1
2026-01-14T10:36:50.166+09:00  INFO 28060 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=4 username=test_user3 role=ACCOUNTANT
2026-01-14T10:36:50.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:50.178+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=4, username=test_user3, password (truncated)...]
2026-01-14T10:36:50.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:50.632+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-14T10:36:50.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T10:36:50.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-14T10:36:50.652+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T10:36:50.663+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T10:36:50.663+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T10:36:50.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:50.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49cebbe2] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:50.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249286652 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:50.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T10:36:50.686+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-14T10:36:50.698+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-14T10:36:50.702+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49cebbe2]
2026-01-14T10:36:50.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:50.707+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T10:36:50.708+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:52.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:52.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:52.196+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:52.196+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:52.198+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:36:52.198+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:52.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:52.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:52.251+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:36:52.264+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:52.374+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:52.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:52.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:36:52.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:52.382+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:52.387+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:52.389+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:52.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:52.418+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:52.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:36:52.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:52.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:52.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:52.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:52.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:36:52.433+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:52.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:36:52.412+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:36:52.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:52.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:36:52.466+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:52.468+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c408db2] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.423+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:52.438+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.459+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:52.459+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:52.466+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.477+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:52.477+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300c1374] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.478+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:36:52.479+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.482+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5874660b] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.483+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:52.484+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908402465 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:52.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:36:52.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0a00d6] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.496+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1883935969 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:52.496+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:52.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:52.498+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.499+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.501+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.511+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.515+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7624aa06] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@151609193 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:52.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532642039 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:52.527+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a73a2f4] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.552+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.552+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.554+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:52.559+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.560+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@300c1374]
2026-01-14T10:36:52.560+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c408db2]
2026-01-14T10:36:52.561+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:52.561+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.564+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.564+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ee89b2] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30faf871] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@82071598 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:52.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355892864 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:52.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.570+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@864235469 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:52.573+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@280099519 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:52.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.585+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:52.586+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.587+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.594+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:52.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.616+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e0a00d6]
2026-01-14T10:36:52.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:52.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a73a2f4]
2026-01-14T10:36:52.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.621+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:52.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7624aa06]
2026-01-14T10:36:52.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.663+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5874660b]
2026-01-14T10:36:52.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ee89b2]
2026-01-14T10:36:52.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30faf871]
2026-01-14T10:36:52.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6414f980] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@125f56aa] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30176bbc] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415870955 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:52.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@400657616 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:52.671+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5f6ec5] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.746+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423434814 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:52.754+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.751+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8a2a33b] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db92cbd] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.776+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.753+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@418638811 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:52.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.755+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@711425035 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:52.776+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@592507846 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:52.779+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.792+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:52.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.804+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:52.815+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:52.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30176bbc]
2026-01-14T10:36:52.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@125f56aa]
2026-01-14T10:36:52.818+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.818+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:52.828+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.830+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de1c853] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635645251 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:52.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:52.834+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6414f980]
2026-01-14T10:36:52.839+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:36:52.844+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d5f6ec5]
2026-01-14T10:36:52.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b44b01] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:52.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:52.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db92cbd]
2026-01-14T10:36:52.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:52.881+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341493920 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:52.881+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:52.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:52.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64fa9e84] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.895+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:52.897+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:52.901+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:52.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:52.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612876386 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:52.908+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:52.908+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:52.911+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:52.917+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:52.918+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:52.919+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de1c853]
2026-01-14T10:36:52.919+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8a2a33b]
2026-01-14T10:36:52.925+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:52.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:52.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:52.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:52.935+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:36:52.936+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:52.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:52.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b44b01]
2026-01-14T10:36:52.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92478fc] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1745b927] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:52.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:36:52.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:52.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:52.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:52.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254394587 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:52.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2058188266 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.006+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:53.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5878c7ff] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64fa9e84]
2026-01-14T10:36:53.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.040+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.042+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65067ada] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb43bbf] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056076722 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:53.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.041+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.042+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@15117841 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.043+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@408936912 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:53.044+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.046+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@630808cb] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.057+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.059+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:53.059+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404478608 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:53.072+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1745b927]
2026-01-14T10:36:53.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@92478fc]
2026-01-14T10:36:53.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:53.072+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.073+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:36:53.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df123da] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c65a2] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.146+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65067ada]
2026-01-14T10:36:53.146+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5878c7ff]
2026-01-14T10:36:53.147+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:53.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@390544322 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529860717 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:53.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb43bbf]
2026-01-14T10:36:53.157+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.159+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:36:53.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44387708] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.163+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270fd4b7] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.165+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@630808cb]
2026-01-14T10:36:53.165+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:53.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@306058751 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.172+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:53.176+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5bf45b] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.176+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961984662 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:53.178+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.179+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.181+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@76302700 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:53.192+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fdb2cc] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:36:53.195+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410380456 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:53.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:53.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:36:53.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.266+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:53.279+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:53.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@355c65a2]
2026-01-14T10:36:53.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44387708]
2026-01-14T10:36:53.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.326+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@270fd4b7]
2026-01-14T10:36:53.326+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a5bf45b]
2026-01-14T10:36:53.327+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2df123da]
2026-01-14T10:36:53.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:53.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e185c59] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e9d956] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45061457] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480542541 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:53.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63cbc332] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:53.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1097758388 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:53.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@477481516 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:53.352+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:53.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:53.341+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1191236450 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.344+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.350+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:53.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:36:53.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:53.386+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fdb2cc]
2026-01-14T10:36:53.368+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:53.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:53.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:53.386+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.391+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:53.399+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f423679] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.400+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:53.408+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355700367 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:53.409+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:53.410+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:36:53.411+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:36:53.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45061457]
2026-01-14T10:36:53.415+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:53.442+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:53.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:53.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e185c59]
2026-01-14T10:36:53.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e9d956]
2026-01-14T10:36:53.421+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:53.433+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.445+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.445+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.447+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63cbc332]
2026-01-14T10:36:53.448+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d51187] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.449+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b60317] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.450+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d023c1] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.451+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697668b8] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.451+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350835654 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:53.454+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.457+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11505882 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.458+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:53.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@476464918 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:53.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641889705 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f32718e] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:53.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.463+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1927145737 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:53.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.470+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.475+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.481+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.486+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.486+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.486+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:53.490+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.490+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d51187]
2026-01-14T10:36:53.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f423679]
2026-01-14T10:36:53.493+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23b60317]
2026-01-14T10:36:53.494+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697668b8]
2026-01-14T10:36:53.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50d023c1]
2026-01-14T10:36:53.498+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f32718e]
2026-01-14T10:36:53.498+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.498+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.499+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.499+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.501+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.503+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.512+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@282a449d] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.512+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e50d9f] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ee3cd6] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18f6e747] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d537ab] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6129f4c9] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.515+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@637415734 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:53.515+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208617156 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:53.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364402471 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.517+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117749065 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2009781915 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:53.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036736355 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:53.520+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.525+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.527+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.527+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.528+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:36:53.531+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:36:53.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:36:53.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:53.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:53.549+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:36:53.551+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:36:53.551+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:53.551+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.553+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:36:53.557+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@282a449d]
2026-01-14T10:36:53.557+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18f6e747]
2026-01-14T10:36:53.558+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26d537ab]
2026-01-14T10:36:53.559+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42ee3cd6]
2026-01-14T10:36:53.560+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e50d9f]
2026-01-14T10:36:53.562+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.564+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ca3997] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3806c4cc] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.566+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fba6ce2] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.567+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:53.568+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a837794] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.569+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1505660895 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:53.570+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@392544340 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.574+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1616733905 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:53.575+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148456110 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:53.582+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:53.583+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.585+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:53.605+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:53.616+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6129f4c9]
2026-01-14T10:36:53.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.625+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:53.626+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.631+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:53.636+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.638+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:53.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb52fbe] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.652+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:53.652+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@9705757 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:53.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:53.655+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.658+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240e0659] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.658+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389383810 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:36:53.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ca3997]
2026-01-14T10:36:53.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:53.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a837794]
2026-01-14T10:36:53.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3806c4cc]
2026-01-14T10:36:53.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fba6ce2]
2026-01-14T10:36:53.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.686+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.688+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:53.689+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.691+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb52fbe]
2026-01-14T10:36:53.692+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:53.698+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:53.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dfbb4d5] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.701+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:53.702+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.716+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:53.705+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1398090498 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.716+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.719+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:53.775+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.776+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240e0659]
2026-01-14T10:36:53.779+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.784+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40aa34c3] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@348315201 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:53.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:53.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dfbb4d5]
2026-01-14T10:36:53.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:53.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:53.828+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@856b47b] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:53.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:53.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@135001272 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:53.904+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:53.904+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:53.905+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:53.905+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:53.933+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40aa34c3]
2026-01-14T10:36:53.934+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:53.938+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:36:53.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:53.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:53.949+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:36:53.959+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:53.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:53.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:53.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:53.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:53.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:53.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:53.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:53.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:53.983+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:36:53.983+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:53.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:53.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:54.005+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:36:53.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:54.007+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:54.011+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:53.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:36:54.003+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:54.003+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:54.006+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:54.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:54.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:36:54.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:36:54.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@856b47b]
2026-01-14T10:36:54.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:54.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:54.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.058+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:36:54.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f62245] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:54.070+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.075+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c583e55] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.076+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e04d46f] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2092868460 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:54.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.078+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b3ecd85] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.078+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1528246975 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:54.079+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603923264 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:54.081+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3440a0b] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9c76fc] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.085+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2002740604 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:54.085+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.086+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:54.087+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677744230 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.087+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.089+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@157871769 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.091+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:54.091+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.093+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:54.093+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.094+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:54.096+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:54.100+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.101+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:54.108+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.108+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41f62245]
2026-01-14T10:36:54.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c583e55]
2026-01-14T10:36:54.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:54.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:54.114+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:54.118+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.118+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b3ecd85]
2026-01-14T10:36:54.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b9c76fc]
2026-01-14T10:36:54.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3440a0b]
2026-01-14T10:36:54.122+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e04d46f]
2026-01-14T10:36:54.125+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:54.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a70751] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403716902 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:54.136+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbe4312] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.139+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@426c4949] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bb3c35] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608e7f] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.152+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:36:54.153+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.154+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@273801669 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:36:54.155+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1516239982 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.156+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1108112987 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.157+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479508912 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:54.160+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:36:54.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.163+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.165+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:36:54.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.169+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.169+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.169+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:36:54.179+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:36:54.182+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.182+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.184+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.184+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@426c4949]
2026-01-14T10:36:54.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a70751]
2026-01-14T10:36:54.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6594614] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.191+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9db932] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1614655583 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:54.187+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916041610 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:54.190+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:54.199+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:54.199+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:36:54.200+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.210+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.212+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61bb3c35]
2026-01-14T10:36:54.212+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:36:54.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30608e7f]
2026-01-14T10:36:54.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbe4312]
2026-01-14T10:36:54.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52ab423] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:54.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:54.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1036544551 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:54.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:54.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:54.244+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:54.261+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:36:54.261+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52ab423]
2026-01-14T10:36:54.269+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d9db932]
2026-01-14T10:36:54.269+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6594614]
2026-01-14T10:36:54.269+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.270+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.270+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.272+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ccf10e5] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.274+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e66bf1] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.276+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35289485] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.277+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090087155 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.277+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813831926 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2039287250 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:36:54.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.295+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35289485]
2026-01-14T10:36:54.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e66bf1]
2026-01-14T10:36:54.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ccf10e5]
2026-01-14T10:36:54.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.301+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.302+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:36:54.303+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3c38e4] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.303+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2568ef14] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.305+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.307+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481715985 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.311+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903463268 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.317+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:54.318+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:54.319+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:54.322+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:54.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:54.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:54.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2568ef14]
2026-01-14T10:36:54.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f3c38e4]
2026-01-14T10:36:54.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31742cc4] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61690dd] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.337+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1401316785 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.339+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1210278883 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.340+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:54.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:36:54.344+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:54.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:36:54.356+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:54.357+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:36:54.363+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61690dd]
2026-01-14T10:36:54.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31742cc4]
2026-01-14T10:36:54.365+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.371+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443c4561] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bcb8566] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.379+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990112579 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808368855 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.381+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.381+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.381+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.387+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.389+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.391+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443c4561]
2026-01-14T10:36:54.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bcb8566]
2026-01-14T10:36:54.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525c616c] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.395+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a47f107] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1291889052 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953313035 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.398+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:54.399+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:36:54.399+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:54.400+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:36:54.405+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:54.405+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:36:54.409+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@525c616c]
2026-01-14T10:36:54.409+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a47f107]
2026-01-14T10:36:54.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.414+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de19527] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.414+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7728dc23] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.415+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812449526 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@582140936 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:36:54.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:36:54.417+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.417+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:36:54.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:36:54.434+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7728dc23]
2026-01-14T10:36:54.435+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de19527]
2026-01-14T10:36:54.439+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.440+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.441+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:54.441+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:36:54.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.448+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:54.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:36:54.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:54.874+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:54.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:36:54.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:54.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:36:54.880+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:36:54.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:54.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:36:54.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:36:54.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:36:54.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:36:54.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:36:54.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:36:54.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:36:54.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:36:54.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:36:54.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:36:54.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:36:54.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:36:54.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb3105c] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.921+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:36:54.922+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:36:54.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.934+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:36:54.935+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de38515] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.936+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:36:54.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4632bf] was not registered for synchronization because synchronization is not active
2026-01-14T10:36:54.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1175164590 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:36:54.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:36:54.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:36:54.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1565710123 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:36:54.960+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:36:54.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@525934869 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:36:54.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:36:54.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:36:54.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:36:54.972+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:36:54.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fb3105c]
2026-01-14T10:36:54.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:54.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:36:54.984+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:36:54.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:36:54.988+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:54.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de38515]
2026-01-14T10:36:55.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a4632bf]
2026-01-14T10:36:55.008+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:55.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:36:55.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:36:55.014+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:36:55.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:36:55.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:00.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:00.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:00.797+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:00.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:00.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-01-14T10:37:00.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:00.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:00.811+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd59a0d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:00.827+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1416239426 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:00.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:00.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:00.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:00.835+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fd59a0d]
2026-01-14T10:37:00.837+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:00.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca0938c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:00.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1032548255 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:00.844+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:00.844+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:00.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:00.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ca0938c]
2026-01-14T10:37:00.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:00.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9a7e2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:00.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099084832 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:00.851+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:00.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:00.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-14T10:37:00.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35e9a7e2]
2026-01-14T10:37:00.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:00.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cef5f76] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:00.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616637886 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:00.865+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:00.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:00.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-14T10:37:00.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cef5f76]
2026-01-14T10:37:00.871+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:00.874+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=1000, totalE (truncated)...]
2026-01-14T10:37:00.875+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:00.974+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:00.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:00.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:00.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:00.980+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:00.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:00.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:00.998+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:01.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:01.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:01.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:01.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:01.004+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.004+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.005+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.007+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:01.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:01.016+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:01.016+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:01.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:01.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:01.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:01.021+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:01.027+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:01.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:01.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:01.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eba4ba4] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:01.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:01.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:01.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434955c1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20180ec7] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:01.058+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:01.050+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:01.060+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c0eced] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@577933104 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:01.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869745740 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:01.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:01.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe065a5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5334c8a5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:01.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:01.071+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@904888800 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.071+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184323717 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:01.078+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:01.079+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.080+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1608093079 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.080+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1354702722 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:01.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:01.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:01.085+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:01.086+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.089+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:01.091+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4eba4ba4]
2026-01-14T10:37:01.092+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:01.095+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49c0eced]
2026-01-14T10:37:01.095+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.095+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.096+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:01.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@494faaf8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434955c1]
2026-01-14T10:37:01.099+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20180ec7]
2026-01-14T10:37:01.100+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfc6194] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.100+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388875946 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:01.101+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.103+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.104+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.105+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1670727490 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:01.107+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.107+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133fee97] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.108+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b3ff1a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.109+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fe065a5]
2026-01-14T10:37:01.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811183511 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.113+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841576691 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.114+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e41d76] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.121+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.122+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.122+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@535386561 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.124+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.125+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:01.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5334c8a5]
2026-01-14T10:37:01.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e07414d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165704363 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:01.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@133fee97]
2026-01-14T10:37:01.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33b3ff1a]
2026-01-14T10:37:01.137+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dfc6194]
2026-01-14T10:37:01.137+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e41d76]
2026-01-14T10:37:01.138+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@494faaf8]
2026-01-14T10:37:01.138+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.187+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.138+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.188+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.188+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:01.188+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720ef69] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.257+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:01.275+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:01.276+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3ac5a3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1804067404 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.305+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@478306847 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.307+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:01.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:01.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:01.317+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:01.319+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:01.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:01.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.338+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:01.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:01.386+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:01.397+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:01.400+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:01.401+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-01-14T10:37:01.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:01.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e07414d]
2026-01-14T10:37:01.399+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:01.402+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:01.405+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.406+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:01.407+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:01.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-01-14T10:37:01.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:01.479+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:01.510+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:01.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:01.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:01.526+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-01-14T10:37:01.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720ef69]
2026-01-14T10:37:01.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b3ac5a3]
2026-01-14T10:37:01.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.525+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:01.526+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:01.531+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:01.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:01.538+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:01.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b19af95] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:01.544+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.545+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed9d6a1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.545+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38857aa4] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.545+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1190359688 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.546+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456f0476] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.546+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:01.546+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845634996 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@429622775 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1762158830 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:01.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:01.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:01.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@553430f7] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.549+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.551+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-01-14T10:37:01.600+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-01-14T10:37:01.600+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1628985539 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:01.605+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.610+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:01.611+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b19af95]
2026-01-14T10:37:01.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.616+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:01.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ed9d6a1]
2026-01-14T10:37:01.623+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5c0e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.624+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.626+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1987849873 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221f36ce] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.629+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:01.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 0
2026-01-14T10:37:01.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:01.632+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47415538 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.632+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:01.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456f0476]
2026-01-14T10:37:01.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38857aa4]
2026-01-14T10:37:01.635+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:01.635+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:01.636+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.637+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.641+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@553430f7]
2026-01-14T10:37:01.643+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:01.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[])]
2026-01-14T10:37:01.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=0, totalCount=0, (truncated)...]
2026-01-14T10:37:01.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.649+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:01.650+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:01.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f5c0e]
2026-01-14T10:37:01.654+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.659+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.659+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1104f2a5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.661+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:01.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802584999 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@221f36ce]
2026-01-14T10:37:01.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:01.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.689+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:01.691+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1e747e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@90996789 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.697+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:01.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:01.717+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:01.723+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1104f2a5]
2026-01-14T10:37:01.724+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.724+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649f43d2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.725+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387791422 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.727+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.728+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.729+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:01.730+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e1e747e]
2026-01-14T10:37:01.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f15e065] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1384498813 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649f43d2]
2026-01-14T10:37:01.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.735+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.736+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3857763d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:01.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@642261814 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.757+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:01.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:01.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:01.761+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f15e065]
2026-01-14T10:37:01.763+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.763+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a259eaf] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248023366 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:01.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:01.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:01.766+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:01.767+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:01.768+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:01.768+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:01.770+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3857763d]
2026-01-14T10:37:01.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.775+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2095b9] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.777+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:01.777+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d85b38b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.779+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742779134 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:01.781+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a259eaf]
2026-01-14T10:37:01.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529530296 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.783+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.783+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.784+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.786+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49968db5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.788+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.791+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146476750 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:01.792+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.793+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f2095b9]
2026-01-14T10:37:01.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d85b38b]
2026-01-14T10:37:01.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:01.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.802+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e4b3db] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.811+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49968db5]
2026-01-14T10:37:01.818+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728922439 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.818+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.819+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:01.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.822+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.842+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e4b3db]
2026-01-14T10:37:01.844+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.845+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3458b994] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.845+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@101760687 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:01.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:01.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:01.855+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3458b994]
2026-01-14T10:37:01.856+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.856+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb52bbe] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.857+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@709930309 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.857+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bb52bbe]
2026-01-14T10:37:01.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74735c4b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@107569568 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:01.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:01.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:01.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74735c4b]
2026-01-14T10:37:01.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@348c9d4f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1525882513 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:01.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:01.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:01.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@348c9d4f]
2026-01-14T10:37:01.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581c2dee] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@145401159 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.881+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581c2dee]
2026-01-14T10:37:01.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df29676] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@876132731 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:01.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:01.887+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:01.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@df29676]
2026-01-14T10:37:01.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:01.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1377d2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:01.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1137384384 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:01.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:01.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:01.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:01.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a1377d2]
2026-01-14T10:37:01.895+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:01.896+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:01.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:01.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:01.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:01.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:01.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:01.980+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.989+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.990+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.990+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.991+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:01.991+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.993+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:02.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:01.994+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:01.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:01.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:02.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:02.001+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:02.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:02.007+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:02.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:02.010+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:02.010+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:02.011+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:02.011+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:02.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:02.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:02.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:02.014+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:02.017+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:02.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:02.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:02.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:02.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:02.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:02.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737b2fa7] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:02.027+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65214716 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:02.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.041+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d42124] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571a83ad] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d68191c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f9f14e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2821b712] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:02.044+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@714885086 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:02.050+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@532134597 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.050+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932554148 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.051+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807385455 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.052+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:02.053+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074590115 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:02.063+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:02.071+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:02.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:02.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:02.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.092+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:02.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:02.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:02.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737b2fa7]
2026-01-14T10:37:02.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:02.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:02.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:02.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d68191c]
2026-01-14T10:37:02.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d42124]
2026-01-14T10:37:02.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76f9f14e]
2026-01-14T10:37:02.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2821b712]
2026-01-14T10:37:02.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571a83ad]
2026-01-14T10:37:02.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22355e22] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.136+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.136+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.137+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144264148 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:02.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ec940] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b384380] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5221f524] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.143+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f289a32] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.144+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3687920b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.145+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.147+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@264470760 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852471868 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:02.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1802177967 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169091554 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897808541 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:02.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.153+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.153+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.159+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.160+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.160+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.161+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.161+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.165+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.171+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.182+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22355e22]
2026-01-14T10:37:02.183+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.184+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:02.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.190+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.199+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b384380]
2026-01-14T10:37:02.201+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5221f524]
2026-01-14T10:37:02.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.201+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3687920b]
2026-01-14T10:37:02.202+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26ec940]
2026-01-14T10:37:02.202+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f289a32]
2026-01-14T10:37:02.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:02.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.219+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.219+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f9182] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.225+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1570430074 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:02.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:02.224+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4c1203] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.224+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:02.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:02.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537014371 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.236+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.247+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:02.261+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:02.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:02.279+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:02.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:02.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:02.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f9182]
2026-01-14T10:37:02.337+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:02.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:02.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:02.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:02.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b12a00] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:02.363+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:02.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:02.347+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:02.348+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:02.351+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4c1203]
2026-01-14T10:37:02.370+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.370+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f7243c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.352+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@713974485 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.376+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.369+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:02.369+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:02.369+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:02.375+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694480619 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.376+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:02.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:02.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:02.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.379+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:02.389+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c4557f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948492555 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:02.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:02.381+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:02.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:02.386+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.395+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:02.397+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.397+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:02.398+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:02.401+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56b12a00]
2026-01-14T10:37:02.412+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:02.414+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:02.415+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326035f2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.418+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:02.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fcd8ae3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1834940564 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b99a1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:02.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.442+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258993253 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:02.442+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:02.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@763821795 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:02.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30c4557f]
2026-01-14T10:37:02.443+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f7243c]
2026-01-14T10:37:02.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:02.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:02.445+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:02.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.447+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:02.449+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:02.450+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:02.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:02.458+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e283f9] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.458+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:02.459+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.460+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:02.463+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1567326557 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.464+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@326035f2]
2026-01-14T10:37:02.467+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:02.467+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:02.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2025-12-01&endDate=2025-12-31", parameters={masked}
2026-01-14T10:37:02.470+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:02.476+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75b5c8c3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.476+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:02.479+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179233314 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.480+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.480+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:02.482+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455b227e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.485+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:02.486+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@784976365 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.489+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:02.489+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:37:02.489+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:02.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fcd8ae3]
2026-01-14T10:37:02.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40b99a1]
2026-01-14T10:37:02.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e283f9]
2026-01-14T10:37:02.492+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.493+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.493+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.493+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:02.498+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:37:02.499+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:37:02.499+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7cf6f3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.500+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@455b227e]
2026-01-14T10:37:02.500+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75b5c8c3]
2026-01-14T10:37:02.509+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152963900 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.501+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.503+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.509+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c4f7a6] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.510+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.510+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:02.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140168562 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.526+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45add0c1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.520+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:02.527+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.528+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1380089357 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.529+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.530+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:02.536+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63c4f7a6]
2026-01-14T10:37:02.537+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.536+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7cf6f3]
2026-01-14T10:37:02.539+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f2da1b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.540+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.540+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.541+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298811076 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.542+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4277eb3a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.542+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45add0c1]
2026-01-14T10:37:02.543+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:02.545+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327441238 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.547+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:02.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.548+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487dc67f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.549+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.550+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669147753 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.550+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:02.557+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:02.559+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.560+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:02.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4277eb3a]
2026-01-14T10:37:02.564+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55f2da1b]
2026-01-14T10:37:02.564+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.571+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d6fe58b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.576+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403d9a2e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1891426599 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.579+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@56406576 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.579+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:02.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:02.580+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.581+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:02.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487dc67f]
2026-01-14T10:37:02.593+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.594+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.595+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:02.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4efbded3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@403d9a2e]
2026-01-14T10:37:02.599+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d6fe58b]
2026-01-14T10:37:02.600+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1754507085 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:02.600+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.601+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.601+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.601+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4439a578] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.602+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfbba3b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.602+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1752808251 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.604+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@239754130 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:02.607+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:02.608+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.609+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:02.609+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T10:37:02.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.632+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cfbba3b]
2026-01-14T10:37:02.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4439a578]
2026-01-14T10:37:02.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4efbded3]
2026-01-14T10:37:02.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.636+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.640+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.641+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:02.642+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e4a4e0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.643+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:02.647+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@285200577 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.656+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:02.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:02.720+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:02.729+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e4a4e0]
2026-01-14T10:37:02.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.735+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fde5f6] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.737+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352491405 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29fde5f6]
2026-01-14T10:37:02.767+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.768+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e867ce1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1477638290 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.779+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:02.779+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:02.806+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-14T10:37:02.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e867ce1]
2026-01-14T10:37:02.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:02.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4b9977] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:02.827+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638029195 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:02.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:02.834+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:02.865+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:02.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b4b9977]
2026-01-14T10:37:02.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:02.874+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:02.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:02.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:02.972+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:02.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:02.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:02.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:02.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:03.075+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:03.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:03.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:03.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:03.258+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:03.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:03.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:03.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:03.245+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:03.259+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:03.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:03.276+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:03.277+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:03.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:03.279+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.279+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:03.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:03.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:03.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:03.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:03.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3944d7e6] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:03.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:03.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:03.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:03.294+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:03.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:03.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:03.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:03.302+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066816192 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:03.307+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:03.309+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:03.309+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.309+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280da658] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10be0bff] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.314+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:03.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:03.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1032d2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347f8e63] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.319+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:03.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180852774 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:03.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:03.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1ab0b7] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:03.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538344048 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.329+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1697598617 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:03.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:03.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371451751 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:03.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3944d7e6]
2026-01-14T10:37:03.335+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.335+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.337+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081298477 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:03.337+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:03.338+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:03.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.344+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.345+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:03.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1032d2]
2026-01-14T10:37:03.350+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a6384d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.351+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.351+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:03.360+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:03.360+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.362+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217464288 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:03.362+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@280da658]
2026-01-14T10:37:03.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10be0bff]
2026-01-14T10:37:03.368+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80d3938] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.369+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.371+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.372+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@347f8e63]
2026-01-14T10:37:03.372+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.376+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414995017 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:03.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd6da30] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb9d849] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.381+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:03.381+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@325257480 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3650b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.386+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283630531 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:03.387+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b1ab0b7]
2026-01-14T10:37:03.388+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.389+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.389+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2011701213 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.395+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8740e0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.398+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.410+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667448163 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:03.410+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a6384d]
2026-01-14T10:37:03.412+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.417+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.417+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.420+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.424+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.425+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@80d3938]
2026-01-14T10:37:03.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45a3650b]
2026-01-14T10:37:03.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bd6da30]
2026-01-14T10:37:03.428+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:03.434+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.435+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.435+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.436+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:03.436+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.473+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.483+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:03.447+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.490+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb9d849]
2026-01-14T10:37:03.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.491+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:03.459+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61decc0d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.507+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1066104320 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.472+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a651ce1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.480+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:03.489+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:03.506+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.508+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:03.509+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8740e0]
2026-01-14T10:37:03.509+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@400508103 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:03.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:03.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:03.522+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:03.523+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:03.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:03.536+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:03.552+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:03.567+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:03.572+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:03.574+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:03.576+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:03.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61decc0d]
2026-01-14T10:37:03.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:03.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:03.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:03.583+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:03.583+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31", parameters={masked}
2026-01-14T10:37:03.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31", parameters={masked}
2026-01-14T10:37:03.585+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:03.586+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a651ce1]
2026-01-14T10:37:03.586+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16235bdd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.592+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17449904 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.594+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.586+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:03.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:03.599+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:03.601+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.611+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7deb2f91] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@367835241 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:03.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:03.614+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate)
2026-01-14T10:37:03.587+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:03.591+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:03.591+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.596+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:03.621+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:03.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:03.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3544f148] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.627+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.629+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@935620885 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e35ccee] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e00c9c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.636+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298786981 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:03.641+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.641+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:03.643+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@583721086 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:03.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:03.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16235bdd]
2026-01-14T10:37:03.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7deb2f91]
2026-01-14T10:37:03.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:03.655+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate)
2026-01-14T10:37:03.656+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.658+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.663+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:03.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a566de] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1851783, totalCo (truncated)...]
2026-01-14T10:37:03.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3544f148]
2026-01-14T10:37:03.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894709636 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.673+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:03.673+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6979bd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.718+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:03.719+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@758452649 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.722+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:03.739+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-14T10:37:03.740+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:03.741+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:03.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:03.784+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e35ccee]
2026-01-14T10:37:03.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e00c9c]
2026-01-14T10:37:03.793+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.795+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:03.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39a566de]
2026-01-14T10:37:03.797+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.790+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:03.797+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606872 (truncated)...]
2026-01-14T10:37:03.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7fe54e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.817+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:03.818+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@973006185 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:03.821+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:03.855+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6979bd]
2026-01-14T10:37:03.857+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f286fa] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:03.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279097160 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.872+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:03.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:03.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:03.898+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:03.908+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64f286fa]
2026-01-14T10:37:03.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7fe54e]
2026-01-14T10:37:03.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a92445] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c59bf3d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@807190524 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.911+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@416835181 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:03.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:03.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.933+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:03.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c59bf3d]
2026-01-14T10:37:03.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40a92445]
2026-01-14T10:37:03.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d14469a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a545e60] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823849554 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:03.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406587491 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:03.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:03.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:03.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:03.949+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:03.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:03.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:03.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a545e60]
2026-01-14T10:37:03.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d14469a]
2026-01-14T10:37:03.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:03.989+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6a8970] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:03.989+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7965e168] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:04.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1194682275 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:04.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@915036232 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:04.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:04.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:04.001+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:04.001+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:04.024+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:04.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:04.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7965e168]
2026-01-14T10:37:04.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f6a8970]
2026-01-14T10:37:04.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:04.049+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:04.051+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:04.051+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:04.053+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:04.054+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:04.471+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:04.475+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:04.475+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:04.512+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:04.512+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:04.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:04.531+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:04.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:04.528+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:04.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:04.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2025-12-01&endDate=2025-12-31", parameters={masked}
2026-01-14T10:37:04.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31
2026-01-14T10:37:04.534+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:04.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:04.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2025-12-01&endDate=2025-12-31", parameters={masked}
2026-01-14T10:37:04.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:04.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:04.585+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:04.586+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:04.591+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:04.594+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:04.594+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:04.595+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:04.596+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:04.595+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:04.596+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@821c950] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:04.597+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:04.597+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:04.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c01c3b5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:04.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571f2a7f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:04.602+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097619930 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:04.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1237532079 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:04.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@686635164 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:04.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:04.606+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:04.608+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:04.609+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate)
2026-01-14T10:37:04.610+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2025-12-01(LocalDate), 2025-12-31(LocalDate)
2026-01-14T10:37:04.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:04.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:04.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-14T10:37:04.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571f2a7f]
2026-01-14T10:37:04.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@821c950]
2026-01-14T10:37:04.624+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:04.625+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:04.626+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:04.626+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1851783, totalCo (truncated)...]
2026-01-14T10:37:04.627+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c01c3b5]
2026-01-14T10:37:04.627+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606872 (truncated)...]
2026-01-14T10:37:04.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:04.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:04.629+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:04.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:04.642+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:07.855+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:07.873+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:07.880+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:07.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:07.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:07.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:07.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:07.895+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598f5c0c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:07.917+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361013989 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:07.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:07.933+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:07.953+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:07.961+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@598f5c0c]
2026-01-14T10:37:07.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:07.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4f680] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:07.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364607360 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:07.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:07.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:07.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:07.970+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4f680]
2026-01-14T10:37:07.970+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:07.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d45205] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:07.980+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@985069417 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:07.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:07.983+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:07.988+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:07.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18d45205]
2026-01-14T10:37:07.997+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb63fb] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@999644601 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.010+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.025+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1eb63fb]
2026-01-14T10:37:08.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1063353a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254979702 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:08.042+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:08.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:08.049+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1063353a]
2026-01-14T10:37:08.049+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.050+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4268527a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.051+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1269528040 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.051+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:08.059+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:08.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:08.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4268527a]
2026-01-14T10:37:08.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bff7f4] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@356818107 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bff7f4]
2026-01-14T10:37:08.072+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.073+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4a58e5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.075+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@538973711 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:08.079+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:08.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:08.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a4a58e5]
2026-01-14T10:37:08.217+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.379+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119e84d3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@160136053 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@119e84d3]
2026-01-14T10:37:08.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:08.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.511+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:08.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:08.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:08.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:08.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:08.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:08.552+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:08.553+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:08.554+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:08.561+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:08.564+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:08.556+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:08.557+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:08.568+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:08.569+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:08.561+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:08.571+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:08.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:08.565+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:08.569+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:08.570+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:08.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:08.572+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:08.575+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:08.576+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:08.583+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:08.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:08.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:08.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:08.584+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:08.586+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.587+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:08.595+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:08.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa177cf] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.596+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.621+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e522253] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.602+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.608+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:08.611+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be4083d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.617+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:08.625+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f22d9a1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.626+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:08.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407259659 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:08.629+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1479926417 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:08.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518299786 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.631+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569347d3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.632+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:08.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1972455037 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.633+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:08.634+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:08.635+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.636+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.637+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:08.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:08.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097687744 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:08.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e8e3e96] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.649+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:08.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:08.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@184169753 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:08.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:08.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:08.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:08.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f22d9a1]
2026-01-14T10:37:08.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7be4083d]
2026-01-14T10:37:08.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:08.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6aa177cf]
2026-01-14T10:37:08.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e522253]
2026-01-14T10:37:08.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569347d3]
2026-01-14T10:37:08.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.678+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74499a58] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.676+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:08.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.678+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d1255e5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@222585190 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414816823 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fee5e7f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfbacde] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43eb964f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1579998693 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:08.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288811856 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:08.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590654742 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:08.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d1255e5]
2026-01-14T10:37:08.700+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74499a58]
2026-01-14T10:37:08.700+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fee5e7f]
2026-01-14T10:37:08.700+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.701+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.700+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.701+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:08.701+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1257752f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.702+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ecd4ff] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097526781 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.704+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1531906432 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.704+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:08.705+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:08.706+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:08.706+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e8e3e96]
2026-01-14T10:37:08.707+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:08.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:08.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63dabfce] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.710+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1489421029 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:08.710+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.710+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.710+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43eb964f]
2026-01-14T10:37:08.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:08.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cfbacde]
2026-01-14T10:37:08.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.713+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.713+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:08.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:08.751+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63dabfce]
2026-01-14T10:37:08.751+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1257752f]
2026-01-14T10:37:08.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:08.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c27b1fc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:08.753+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.757+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@628114266 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.757+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63ecd4ff]
2026-01-14T10:37:08.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ceeefe2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.768+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1226867116 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.769+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.770+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.770+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c27b1fc]
2026-01-14T10:37:08.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.777+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a207f2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.784+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1983637163 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.798+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:08.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ceeefe2]
2026-01-14T10:37:08.802+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:08.802+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4dab73] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.815+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:08.817+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:08.819+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:08.828+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424476295 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:08.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:08.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:08.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:08.855+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:08.856+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:08.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47a207f2]
2026-01-14T10:37:08.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:08.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:08.865+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:08.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:08.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:08.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:08.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715e91df] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:08.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:08.900+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:08.901+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638883217 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.901+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:08.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:08.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:08.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:08.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:08.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:08.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:08.911+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:08.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:08.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:08.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:08.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47992a37] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70333224] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651d9c26] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1491047781 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:08.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@945634140 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:08.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838615444 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:08.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:08.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:08.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:08.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:08.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:08.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:08.917+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:08.917+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4dab73]
2026-01-14T10:37:08.918+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.919+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777997ed] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.920+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970121794 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.921+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:08.922+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:08.929+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:08.929+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@715e91df]
2026-01-14T10:37:08.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e29722c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803343455 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.933+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:08.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70333224]
2026-01-14T10:37:08.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:08.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777997ed]
2026-01-14T10:37:08.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:37:08.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e703984] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93128536 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:08.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:08.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:08.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:08.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:37:08.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@651d9c26]
2026-01-14T10:37:08.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47992a37]
2026-01-14T10:37:08.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.970+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:08.970+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:08.971+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:37:08.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:08.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:08.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e29722c]
2026-01-14T10:37:08.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:08.980+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f69cbc3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:08.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1517579792 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:08.983+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:08.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:09.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:09.049+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e703984]
2026-01-14T10:37:09.079+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:09.102+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f69cbc3]
2026-01-14T10:37:09.101+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:09.107+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:09.109+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5e32eb] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:09.108+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250a2e0d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:09.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1012455248 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:09.115+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:09.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:09.113+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436834097 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:09.117+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:09.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:09.146+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:09.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d5e32eb]
2026-01-14T10:37:09.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:09.374+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:09.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@250a2e0d]
2026-01-14T10:37:09.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:09.399+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:09.400+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:09.412+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f21440e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:09.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1261399969 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:09.439+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:09.490+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:09.562+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:09.563+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f21440e]
2026-01-14T10:37:09.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:09.579+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:09.595+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:09.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:09.978+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:09.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:09.988+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:09.988+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:10.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:09.991+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:09.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:10.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:10.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:10.001+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:10.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:10.005+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:10.008+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:10.008+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:10.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:10.003+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:10.003+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:10.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:10.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:10.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:10.014+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:10.017+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:10.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:10.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@323af48d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:10.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:10.021+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:10.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3af339] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:10.030+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:10.031+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2217d277] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:10.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@139610343 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:10.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838464046 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:10.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:10.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:10.041+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:10.045+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:10.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948599099 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:10.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:10.049+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:10.059+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:10.060+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:37:10.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:10.063+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2217d277]
2026-01-14T10:37:10.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@323af48d]
2026-01-14T10:37:10.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3af339]
2026-01-14T10:37:10.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:10.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:10.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:10.074+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:10.075+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:37:10.075+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:37:10.076+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:10.083+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:10.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:15.544+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:15.546+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-14T10:37:15.553+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:15.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:15.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:15.673+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T10:37:15.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:15.763+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:15.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:15.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-14T10:37:15.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:15.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:15.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T10:37:15.887+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:15.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:15.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T10:37:15.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T10:37:15.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:15.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fcdffd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:15.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:15.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:15.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75552238] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:15.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:15.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4514ef3d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:15.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1879258226 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:15.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@498674145 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:15.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@918182949 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:15.952+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:15.952+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:15.953+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T10:37:15.954+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:15.956+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:15.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 4(Long)
2026-01-14T10:37:16.055+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-14T10:37:16.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:16.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:16.073+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fcdffd]
2026-01-14T10:37:16.073+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4514ef3d]
2026-01-14T10:37:16.073+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75552238]
2026-01-14T10:37:16.074+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.137+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7310d6c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.191+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1141937144 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:16.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:16.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:16.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T10:37:16.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79488f71] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.314+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@833414569 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.284+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:37:16.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:16.305+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:16.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.317+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.321+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:37:16.321+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:16.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:16.343+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.345+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:16.353+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:16.357+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:16.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:16.382+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.382+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.404+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79488f71]
2026-01-14T10:37:16.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:16.400+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:16.402+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:16.403+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:16.403+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7310d6c]
2026-01-14T10:37:16.412+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:16.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:16.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:16.420+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:16.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:16.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:16.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:16.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:16.453+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:16.465+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:16.466+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.500+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.479+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:16.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.479+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:16.481+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:16.497+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:16.524+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.502+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:37:16.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:16.523+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d398081] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.523+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.524+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.524+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e504143] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.527+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:16.535+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:16.536+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e59ae72] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.536+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7697f522] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.593+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442950014 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:16.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:16.593+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@679299139 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.597+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:37:16.602+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:16.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1488614575 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:16.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:37:16.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:16.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:16.626+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:16.620+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.620+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:16.621+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:16.631+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.652+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c79f1f2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.656+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d585b0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.661+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1106762251 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1543600023 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:16.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.666+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:16.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.685+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:16.686+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e59ae72]
2026-01-14T10:37:16.687+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e504143]
2026-01-14T10:37:16.687+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d398081]
2026-01-14T10:37:16.694+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:16.694+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.694+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.696+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553371500 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.707+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eeb4fd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.708+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6893a0fd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6baff0ba] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1621598412 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@355718992 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.711+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369464608 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:16.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.713+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.716+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.716+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.717+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c79f1f2]
2026-01-14T10:37:16.718+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.718+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:16.726+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.726+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27d585b0]
2026-01-14T10:37:16.726+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7697f522]
2026-01-14T10:37:16.727+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60081428] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.727+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.728+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405980602 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26172906] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f8ab53] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@393239238 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274097584 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.734+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.734+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.734+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.736+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.736+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.738+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.739+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.740+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.742+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6893a0fd]
2026-01-14T10:37:16.743+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6baff0ba]
2026-01-14T10:37:16.743+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eeb4fd]
2026-01-14T10:37:16.743+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e99ed14] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.750+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.756+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f8ab53]
2026-01-14T10:37:16.750+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.751+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.752+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:16.753+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:16.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.759+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.754+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1266169458 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.757+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60081428]
2026-01-14T10:37:16.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26172906]
2026-01-14T10:37:16.762+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:16.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:37:16.767+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:16.769+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.786+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:16.790+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:16.792+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.792+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd4928f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.792+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a9e7fc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.798+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:16.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:37:16.805+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:16.813+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@475887721 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.813+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2112466358 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:16.814+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:16.814+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:37:16.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:16.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.817+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:16.817+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:16.819+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:16.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e99ed14]
2026-01-14T10:37:16.822+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.824+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.824+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:16.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:16.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcf5bcd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62417262] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6281512c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.833+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:16.833+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:16.834+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.834+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1949963518 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:16.834+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323080819 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.835+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1973742387 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62a9e7fc]
2026-01-14T10:37:16.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cd4928f]
2026-01-14T10:37:16.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cc46ffa] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:16.837+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.837+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.837+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.838+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.839+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069239758 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.840+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:16.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70736578] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26c0f747] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.845+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573452429 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:16.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050167802 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6281512c]
2026-01-14T10:37:16.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62417262]
2026-01-14T10:37:16.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcf5bcd]
2026-01-14T10:37:16.849+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.851+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e656dc4] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.851+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.855+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15281426] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.851+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.851+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18eb791d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.854+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734269960 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:16.856+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314455165 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:16.857+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cc46ffa]
2026-01-14T10:37:16.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888178973 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:16.864+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.865+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70736578]
2026-01-14T10:37:16.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593dc2da] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.873+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.876+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26c0f747]
2026-01-14T10:37:16.877+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982455224 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.878+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e81cc1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.880+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:16.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1029438401 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb4a7e5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e656dc4]
2026-01-14T10:37:16.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:16.887+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601113531 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.893+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15281426]
2026-01-14T10:37:16.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18eb791d]
2026-01-14T10:37:16.896+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:16.896+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:16.897+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66e36c82] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:16.901+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:16.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1137518295 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:16.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3beafa55] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.911+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:16.918+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013941668 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.916+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@593dc2da]
2026-01-14T10:37:16.917+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:16.919+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:16.920+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.921+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.922+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56e81cc1]
2026-01-14T10:37:16.923+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb4a7e5]
2026-01-14T10:37:16.924+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:16.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:16.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8a821f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.932+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.934+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66e36c82]
2026-01-14T10:37:16.936+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:16.936+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1553381030 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.937+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ebde91] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.937+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6570ce4d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.938+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:16.939+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.941+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064554873 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050723977 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3beafa55]
2026-01-14T10:37:16.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2245d924] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.944+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:16.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:16.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.946+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606362770 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:16.949+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.950+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:16.951+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56096fba] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.951+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:16.951+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.951+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:16.952+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b8a821f]
2026-01-14T10:37:16.953+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@979181436 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.954+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.957+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:16.958+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.961+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b697834] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.959+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.960+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:16.960+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:16.961+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@885819708 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.961+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29ebde91]
2026-01-14T10:37:16.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:16.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2245d924]
2026-01-14T10:37:16.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6570ce4d]
2026-01-14T10:37:16.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29f5133c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1116afa8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56096fba]
2026-01-14T10:37:16.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607078819 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:16.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1727980621 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:16.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372f9967] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180170d6] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.975+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:16.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:16.976+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1001384543 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:16.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2078332733 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:16.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e810f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b697834]
2026-01-14T10:37:16.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:16.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:16.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:16.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:16.981+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1087852973 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:16.983+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7f9358] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:16.984+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:16.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:16.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:16.991+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@706211579 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:16.992+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:16.999+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.000+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.001+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:17.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:17.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1116afa8]
2026-01-14T10:37:17.003+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29f5133c]
2026-01-14T10:37:17.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.011+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:17.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.012+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fce882b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:17.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:17.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180170d6]
2026-01-14T10:37:17.016+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372f9967]
2026-01-14T10:37:17.016+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7488560c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.017+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@453053333 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.017+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7f9358]
2026-01-14T10:37:17.017+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d3e810f]
2026-01-14T10:37:17.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1977993042 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:17.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72497092] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aaac4ba] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.022+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.023+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:17.023+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fcd833] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.023+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234f57c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.024+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641884109 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:17.025+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1359319593 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:17.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@9399527 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@724253388 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:17.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.040+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:17.040+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7488560c]
2026-01-14T10:37:17.041+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.042+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3fce882b]
2026-01-14T10:37:17.045+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.046+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.051+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:17.054+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.055+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:17.060+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aaac4ba]
2026-01-14T10:37:17.057+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75dbb816] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.061+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042282838 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.058+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.060+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72497092]
2026-01-14T10:37:17.061+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.061+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:17.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:17.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.065+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:17.067+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:17.083+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.083+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@234f57c]
2026-01-14T10:37:17.083+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16fcd833]
2026-01-14T10:37:17.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39026cdf] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.085+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.093+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7755405 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:17.086+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:17.091+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.102+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba3c498] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.092+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.094+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.094+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:17.103+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2123978117 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.110+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6db21f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:17.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.114+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.124+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75dbb816]
2026-01-14T10:37:17.118+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262197377 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:17.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:17.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104c67dd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.136+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@818865332 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.147+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39026cdf]
2026-01-14T10:37:17.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.151+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ba3c498]
2026-01-14T10:37:17.152+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f6db21f]
2026-01-14T10:37:17.153+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:17.160+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.163+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.161+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.163+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f722cb] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c2a99] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.173+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119203753 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.175+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@573803463 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.175+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.176+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.177+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:17.179+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:17.189+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104c67dd]
2026-01-14T10:37:17.196+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:17.197+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:17.197+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.197+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@305c2a99]
2026-01-14T10:37:17.198+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f722cb]
2026-01-14T10:37:17.198+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3422f87d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.198+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.199+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.200+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1201869739 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.200+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44acf620] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.200+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d77eafc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.201+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.202+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@368383182 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.202+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1940420835 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.202+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.202+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.203+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.205+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.205+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d77eafc]
2026-01-14T10:37:17.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3422f87d]
2026-01-14T10:37:17.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44acf620]
2026-01-14T10:37:17.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.212+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:17.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@205ef9ea] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:17.215+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@52173964 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.221+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.239+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:17.244+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@205ef9ea]
2026-01-14T10:37:17.251+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.251+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21aa84e3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1986832533 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.274+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:17.277+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:17.284+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:17.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:17.280+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:17.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:17.281+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:17.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:17.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:17.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:17.301+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:17.302+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.305+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:17.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:17.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:17.308+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:17.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:17.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:17.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-14T10:37:17.422+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:17.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:17.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:17.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:17.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&status%5B%5D=APPROVED
2026-01-14T10:37:17.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&status%5B%5D=APPROVED", parameters={masked}
2026-01-14T10:37:17.437+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:17.458+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:17.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:17.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d92d187] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:17.464+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:17.467+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21aa84e3]
2026-01-14T10:37:17.468+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.468+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:17.469+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061216963 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.476+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.477+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:17.478+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.479+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737eee0b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.503+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.508+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.509+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719bb4a8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.510+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.510+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f51418] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.513+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1346374578 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edd9015] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.514+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.515+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608638873 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.515+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6455cae] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1468862777 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:17.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:17.518+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947433861 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:17.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.519+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152075111 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:17.530+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:17.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:17.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.543+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.579+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:17.592+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:17.599+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:17.600+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d92d187]
2026-01-14T10:37:17.605+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:17.607+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.608+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ebfad0a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.609+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905598899 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.610+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.610+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.628+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:17.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@719bb4a8]
2026-01-14T10:37:17.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@737eee0b]
2026-01-14T10:37:17.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.645+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4bfbb8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:17.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:17.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:17.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7055a549] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.649+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742284941 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.649+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ebfad0a]
2026-01-14T10:37:17.650+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f51418]
2026-01-14T10:37:17.650+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edd9015]
2026-01-14T10:37:17.650+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6455cae]
2026-01-14T10:37:17.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960776702 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.652+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.655+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.655+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.656+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.656+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2e1c85] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.657+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6878bb01] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.657+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22caa08b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.658+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8a74e3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.658+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.660+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1852451287 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646737346 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:17.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279302655 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:17.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1736892688 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:17.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.676+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4bfbb8]
2026-01-14T10:37:17.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7055a549]
2026-01-14T10:37:17.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@721bf1b5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.685+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:17.686+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1712931445 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.687+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.687+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.692+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:17.697+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.700+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 4, role: ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:17.702+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:17.708+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:17.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:17.713+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:17.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b8a74e3]
2026-01-14T10:37:17.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22caa08b]
2026-01-14T10:37:17.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d2e1c85]
2026-01-14T10:37:17.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6878bb01]
2026-01-14T10:37:17.718+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.719+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c59a43] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.720+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@97029353 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:17.720+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.722+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:17.716+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.717+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.745+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:17.718+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:17.734+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.734+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:17.747+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231d953f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@721bf1b5]
2026-01-14T10:37:17.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b470c5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@777678829 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.789+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.753+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.780+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1837595501 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.793+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28c59a43]
2026-01-14T10:37:17.796+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439e35ce] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:17.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.801+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847980625 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.802+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 4(Long), 1(Long)
2026-01-14T10:37:17.802+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649fc0c4] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.814+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.822+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1619810710 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:17.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@231d953f]
2026-01-14T10:37:17.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d34e8b2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 9
2026-01-14T10:37:17.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:17.833+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.840+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38746182 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.845+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b470c5]
2026-01-14T10:37:17.847+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@439e35ce]
2026-01-14T10:37:17.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.848+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:17.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e2b3eb] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eaefd6a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.852+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:17.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874253898 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:17.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814856500 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.858+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@649fc0c4]
2026-01-14T10:37:17.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:17.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e72bfa9] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:17.865+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@879870787 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:17.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d34e8b2]
2026-01-14T10:37:17.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b2e0a8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170517876 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.874+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.880+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9e2b3eb]
2026-01-14T10:37:17.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.884+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:17.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=43, drafterId= (truncated)...]
2026-01-14T10:37:17.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e72bfa9]
2026-01-14T10:37:17.912+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:17.913+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:17.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eaefd6a]
2026-01-14T10:37:17.901+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.914+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:17.915+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:17.919+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.931+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60b2e0a8]
2026-01-14T10:37:17.949+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777b7264] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.957+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36581d93] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578603596 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1092095056 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:17.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:17.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:17.970+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:17.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:17.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 23
2026-01-14T10:37:17.985+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36581d93]
2026-01-14T10:37:17.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777b7264]
2026-01-14T10:37:17.987+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.987+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:17.988+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e810e2f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.989+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29935655] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:17.990+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026057449 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:17.996+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@98040145 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:17.997+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:17.997+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:18.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:18.009+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:18.018+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:18.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:18.019+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29935655]
2026-01-14T10:37:18.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e810e2f]
2026-01-14T10:37:18.022+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:18.025+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:18.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e4037b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:18.026+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703de1b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:18.027+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1459015788 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:18.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24463522 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:18.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:18.028+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:18.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 41(Long), 40(Long), 39(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 8(Long), 6(Long), 1(Long)
2026-01-14T10:37:18.029+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:18.032+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:18.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 31
2026-01-14T10:37:18.033+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703de1b]
2026-01-14T10:37:18.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e4037b]
2026-01-14T10:37:18.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:18.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:18.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:18.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef1c96b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:18.038+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:18.044+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1263266837 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:18.052+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:18.060+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-14T10:37:18.070+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:18.071+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ef1c96b]
2026-01-14T10:37:18.077+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:18.079+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:18.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:27.228+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-14T10:37:27.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-14T10:37:27.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-14T10:37:27.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-14T10:37:27.232+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-14T10:37:27.232+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-14T10:37:27.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user4, password=1234)]
2026-01-14T10:37:27.233+09:00  INFO 28060 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user4
2026-01-14T10:37:27.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:27.234+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b702f8e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:27.242+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@653963120 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:27.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-14T10:37:27.244+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user4(String)
2026-01-14T10:37:27.247+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-14T10:37:27.249+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b702f8e]
2026-01-14T10:37:27.423+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:27.424+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3dcc92] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:27.424+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1988723687 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:27.425+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:27.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:27.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:27.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3dcc92]
2026-01-14T10:37:27.431+09:00  INFO 28060 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 5, role: ADMIN, companyId: 1
2026-01-14T10:37:27.431+09:00  INFO 28060 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=5 username=test_user4 role=ADMIN
2026-01-14T10:37:27.433+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:27.433+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=5, username=test_user4, password (truncated)...]
2026-01-14T10:37:27.434+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:27.797+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-14T10:37:27.816+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-14T10:37:27.823+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/companies
2026-01-14T10:37:27.825+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-14T10:37:27.827+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-14T10:37:27.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-14T10:37:27.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:27.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38103778] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:27.865+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1778261365 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:27.881+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-14T10:37:27.883+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 5(Long)
2026-01-14T10:37:27.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-14T10:37:27.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38103778]
2026-01-14T10:37:27.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:27.889+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-14T10:37:27.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:27.935+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:27.936+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:27.936+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:27.977+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-14T10:37:27.979+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:27.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:27.943+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-14T10:37:27.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:27.984+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T10:37:27.968+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats
2026-01-14T10:37:27.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:27.982+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:37:28.001+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.006+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-14T10:37:27.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T10:37:27.986+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:27.987+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:27.992+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-14T10:37:28.013+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:28.020+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000
2026-01-14T10:37:28.037+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T10:37:28.047+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T10:37:28.059+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-14T10:37:28.062+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-14T10:37:28.048+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:28.050+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:28.053+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:28.053+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:28.064+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:28.066+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:28.069+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:28.070+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:28.078+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:28.078+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:28.080+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:28.080+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:28.081+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:28.082+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1e2885] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.083+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.084+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:28.085+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@acaa2cd] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.086+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-14T10:37:28.090+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:28.090+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-14T10:37:28.093+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:28.094+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:28.095+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:28.098+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:28.100+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1844422223 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.101+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-14T10:37:28.103+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:28.105+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:28.109+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:28.106+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-14T10:37:28.107+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:28.107+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-14T10:37:28.108+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:28.110+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.110+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-14T10:37:28.110+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1325845379 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:37:28.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:28.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:28.113+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.111+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25715750] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:28.112+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:28.113+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:28.114+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.115+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:37:28.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:37:28.116+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826389010 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.117+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.117+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.117+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.118+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1e2885]
2026-01-14T10:37:28.118+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:28.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a550b84] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:37:28.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:28.123+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1055589460 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.125+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:28.123+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5af66f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.123+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6926fb63] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.123+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f02c9] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.123+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@acaa2cd]
2026-01-14T10:37:28.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:28.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-14T10:37:28.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247855838 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.128+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25715750]
2026-01-14T10:37:28.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1195889016 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1466254377 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:28.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db2b67a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@49982941 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-14T10:37:28.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 7
2026-01-14T10:37:28.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:28.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1611a1ba] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-14T10:37:28.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a550b84]
2026-01-14T10:37:28.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132401896 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.134+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:28.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:28.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:28.136+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-14T10:37:28.136+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a5af66f]
2026-01-14T10:37:28.138+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.139+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.140+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:28.140+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6926fb63]
2026-01-14T10:37:28.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.141+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.142+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278f02c9]
2026-01-14T10:37:28.143+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4db2b67a]
2026-01-14T10:37:28.144+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.145+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:28.147+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.148+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=2133783, totalCo (truncated)...]
2026-01-14T10:37:28.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:37:28.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T10:37:28.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:37:28.153+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.154+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:28.159+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.161+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.161+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1611a1ba]
2026-01-14T10:37:28.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-14T10:37:28.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.163+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T10:37:28.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:37:28.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:28.164+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T10:37:28.165+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:37:28.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:28.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T10:37:28.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-14T10:37:28.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:37:28.171+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:37:28.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:37:28.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:28.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:28.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:28.168+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats", parameters={}
2026-01-14T10:37:28.192+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:28.201+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:37:28.208+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:28.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:28.209+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-14T10:37:28.210+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:37:28.213+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.217+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:28.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:28.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-14T10:37:28.221+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:28.218+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60146442] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e35d75d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:28.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:28.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.222+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.222+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281059020 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1383485237 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:28.223+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@591bc644] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.224+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.224+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.225+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T10:37:28.225+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69413b0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.225+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.225+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1101958376 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.228+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T10:37:28.228+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1033923388 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.229+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.229+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:28.229+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6154a7] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:37:28.232+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.232+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:28.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T10:37:28.234+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T10:37:28.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1877633956 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 1(Long)
2026-01-14T10:37:28.233+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de5288] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.234+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60146442]
2026-01-14T10:37:28.235+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:28.236+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@422196722 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.237+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.238+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-14T10:37:28.239+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:28.241+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:28.241+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T10:37:28.242+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:37:28.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613d6f8b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:28.246+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@591bc644]
2026-01-14T10:37:28.247+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T10:37:28.248+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69413b0]
2026-01-14T10:37:28.248+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@583545242 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.249+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 7
2026-01-14T10:37:28.252+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e35d75d]
2026-01-14T10:37:28.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.264+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.264+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:28.264+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@474f4503] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.268+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6154a7]
2026-01-14T10:37:28.268+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.268+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=3, userName=tes (truncated)...]
2026-01-14T10:37:28.270+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.271+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4de5288]
2026-01-14T10:37:28.277+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1088524872 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.278+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T10:37:28.283+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.285+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.285+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:28.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1640872 (truncated)...]
2026-01-14T10:37:28.287+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.291+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.295+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:28.296+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:28.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:28.302+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:28.313+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:28.303+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.310+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T10:37:28.314+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:28.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:28.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats
2026-01-14T10:37:28.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@613d6f8b]
2026-01-14T10:37:28.319+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-14T10:37:28.324+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:28.324+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:28.324+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats", parameters={}
2026-01-14T10:37:28.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eae4ba4] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T10:37:28.326+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.326+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:28.327+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:37:28.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1424307917 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.330+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T10:37:28.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232e4101] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:28.332+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:28.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:28.335+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T10:37:28.335+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384184068 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.336+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:28.336+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@474f4503]
2026-01-14T10:37:28.336+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.341+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:28.341+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:37:28.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:28.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.342+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.343+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.343+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:37:28.344+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:28.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c668c41] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:28.347+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d85f7d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.347+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:28.347+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.350+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e67178] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.348+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@123859462 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.349+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.350+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728945124 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.350+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5eae4ba4]
2026-01-14T10:37:28.352+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1019153144 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.353+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:28.354+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:28.356+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:28.359+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:37:28.360+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.362+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T10:37:28.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:37:28.364+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@232e4101]
2026-01-14T10:37:28.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 1(Long)
2026-01-14T10:37:28.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a6ef56] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:28.366+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T10:37:28.367+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.368+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054782285 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.368+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:28.369+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:37:28.372+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:37:28.369+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cff69e7] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.370+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.371+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:28.372+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45d85f7d]
2026-01-14T10:37:28.373+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T10:37:28.373+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c668c41]
2026-01-14T10:37:28.373+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2097681200 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.374+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.374+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:28.375+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.376+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64e67178]
2026-01-14T10:37:28.376+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.376+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:28.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:28.377+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=3, userName=tes (truncated)...]
2026-01-14T10:37:28.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c30576] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.378+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a0ae6b0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.379+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T10:37:28.379+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1047496555 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.383+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56a6ef56]
2026-01-14T10:37:28.383+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@212167122 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:28.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.392+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cff69e7]
2026-01-14T10:37:28.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.401+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-14T10:37:28.390+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.407+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247fbd98] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.391+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:28.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000
2026-01-14T10:37:28.401+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:28.404+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:28.409+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170356766 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.409+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.410+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:28.411+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.414+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:37:28.415+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-14T10:37:28.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:28.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16c30576]
2026-01-14T10:37:28.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T10:37:28.425+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000
2026-01-14T10:37:28.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-14T10:37:28.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:28.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:28.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000", parameters={masked}
2026-01-14T10:37:28.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:37:28.431+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:28.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-14T10:37:28.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a0ae6b0]
2026-01-14T10:37:28.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:28.433+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.434+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.436+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T10:37:28.439+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.440+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.442+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T10:37:28.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:28.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T10:37:28.446+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7ad1f1] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.451+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:28.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6e71c2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.468+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-14T10:37:28.510+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.569+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T10:37:28.570+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186504520 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.571+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@247fbd98]
2026-01-14T10:37:28.573+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@189645956 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.573+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T10:37:28.573+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d06437] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.574+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:37:28.575+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:28.575+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.575+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.576+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T10:37:28.576+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@163549663 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.576+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:37:28.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f7f604] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:28.577+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.578+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T10:37:28.579+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-14T10:37:28.598+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.599+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297603583 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.600+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:37:28.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-14T10:37:28.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:28.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76cabde0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.603+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:28.604+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:37:28.605+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6e71c2]
2026-01-14T10:37:28.606+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7ad1f1]
2026-01-14T10:37:28.607+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7797667 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.607+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:28.609+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:28.610+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.611+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.612+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T10:37:28.613+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69d06437]
2026-01-14T10:37:28.616+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.615+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67223774] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.615+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ffe410] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.615+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:28.616+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T10:37:28.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=2133783, totalCo (truncated)...]
2026-01-14T10:37:28.618+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1526206926 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159414124 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:28.619+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.622+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T10:37:28.630+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.631+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f7f604]
2026-01-14T10:37:28.635+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:28.636+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-14T10:37:28.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T10:37:28.644+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.646+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.648+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:28.649+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/subscriptions/current
2026-01-14T10:37:28.651+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344dc019] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.652+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:28.653+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T10:37:28.661+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-14T10:37:28.662+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1140676418 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.662+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T10:37:28.662+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.662+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:28.663+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T10:37:28.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-14T10:37:28.664+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67223774]
2026-01-14T10:37:28.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ffe410]
2026-01-14T10:37:28.665+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:28.667+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-14T10:37:28.668+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.669+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:37:28.679+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T10:37:28.680+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T10:37:28.681+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a84d186] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f96f46b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-14T10:37:28.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T10:37:28.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53634978 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.699+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:28.694+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1488091987 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.696+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76cabde0]
2026-01-14T10:37:28.697+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-14T10:37:28.703+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:28.704+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@344dc019]
2026-01-14T10:37:28.706+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:28.707+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b18aee] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.708+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.709+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/credits/total
2026-01-14T10:37:28.710+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.712+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:28.713+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235621649 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.713+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T10:37:28.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-14T10:37:28.716+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-14T10:37:28.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218e9b5a] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.714+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-14T10:37:28.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:28.715+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.720+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-14T10:37:28.730+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:37:28.721+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2073676410 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:28.732+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:28.723+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-14T10:37:28.723+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a84d186]
2026-01-14T10:37:28.727+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:28.730+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-14T10:37:28.731+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:28.733+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.740+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d04b8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.735+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:28.737+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.739+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f96f46b]
2026-01-14T10:37:28.740+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1310322068 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.741+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:28.742+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3f5aee] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.742+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.745+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.746+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:28.747+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@232300575 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c22cd4d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@663368202 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:28.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:28.748+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-14T10:37:28.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-14T10:37:28.749+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:28.750+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:28.760+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:28.753+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.756+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-14(LocalDate)
2026-01-14T10:37:28.757+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-14T10:37:28.758+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218e9b5a]
2026-01-14T10:37:28.762+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.763+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2111b3] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.764+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25d04b8]
2026-01-14T10:37:28.766+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:28.767+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c22cd4d]
2026-01-14T10:37:28.765+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549935540 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.766+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cee14b5] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.766+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcb6a5e] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.767+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-14T10:37:28.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660197275 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.770+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.778+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:28.770+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:28.771+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-14T10:37:28.773+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@158273593 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:28.775+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-14T10:37:28.777+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:28.780+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:37:28.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a3f5aee]
2026-01-14T10:37:28.786+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.786+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59b18aee]
2026-01-14T10:37:28.787+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:28.797+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:28.798+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-14T10:37:28.812+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:28.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-14T10:37:28.819+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:28.820+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:28.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.830+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:28.830+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses
2026-01-14T10:37:28.834+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:28.833+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:28.835+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:28.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-01-14T10:37:28.836+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e32ef9] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.840+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@779852333 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.841+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:28.838+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:28.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79989819] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@319011521 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.846+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:28.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:37:28.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4dcb6a5e]
2026-01-14T10:37:28.860+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cee14b5]
2026-01-14T10:37:28.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e2111b3]
2026-01-14T10:37:28.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c250972] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:28.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61df7483] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1512702770 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:28.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1205161346 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:28.899+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:28.900+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.901+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:28.940+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:28.940+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e32ef9]
2026-01-14T10:37:28.945+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.948+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:28.961+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79989819]
2026-01-14T10:37:28.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61df7483]
2026-01-14T10:37:28.965+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:28.963+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69276b73] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.964+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:28.966+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:37:28.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@862520392 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:28.967+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@602b4624] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:28.969+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:28.973+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:28.974+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573798504 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:28.984+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:28.987+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:28.990+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:28.995+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 32
2026-01-14T10:37:28.998+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c250972]
2026-01-14T10:37:29.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.002+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1fa795] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.003+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504713021 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:29.015+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:29.021+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:29.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69276b73]
2026-01-14T10:37:29.034+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:29.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.035+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:29.036+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.068+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:29.070+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:29.076+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.076+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:29.085+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:29.110+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.120+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@602b4624]
2026-01-14T10:37:29.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:29.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-01-14T10:37:29.149+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:29.135+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.150+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:29.156+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.157+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0b3b8f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.160+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-14T10:37:29.162+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:29.163+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:29.178+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a1fa795]
2026-01-14T10:37:29.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@808146572 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:29.166+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:29.167+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.170+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:29.183+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:29.175+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:29.179+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.180+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:29.181+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:29.181+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:29.185+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:29.186+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:29.187+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@161fbdc2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.190+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:29.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289117083 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:29.190+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:29.190+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.191+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:29.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:29.193+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:29.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:29.194+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:29.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:29.211+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:29.227+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a0b3b8f]
2026-01-14T10:37:29.214+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:29.219+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-14T10:37:29.219+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:29.220+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:29.221+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.228+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.229+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.231+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.232+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.236+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.236+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c35284] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.237+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37948e19] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.238+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31c8ca83] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.243+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.244+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.244+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919063280 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:29.245+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2083473662 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:29.245+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732552021 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:29.245+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.247+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667f25ce] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.248+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:29.249+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:29.249+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:29.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a32c5f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1186458565 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:29.250+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:29.251+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:37:29.252+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:29.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084884802 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:29.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 42
2026-01-14T10:37:29.261+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:29.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:29.264+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@161fbdc2]
2026-01-14T10:37:29.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:29.269+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:29.270+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.276+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565e1cd8] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.277+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027885692 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:29.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:29.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:37:29.282+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:29.283+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:29.283+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31c8ca83]
2026-01-14T10:37:29.284+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37948e19]
2026-01-14T10:37:29.284+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65c35284]
2026-01-14T10:37:29.285+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:29.285+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.285+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.291+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:29.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:29.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f9c80b] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.297+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1555dfa2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc75f60] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50a32c5f]
2026-01-14T10:37:29.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@667f25ce]
2026-01-14T10:37:29.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091731589 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:29.298+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@111312727 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:29.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1894738798 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:29.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:29.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.299+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:29.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:29.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:37:29.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:29.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:29.300+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:29.301+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:29.301+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.302+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.309+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.310+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.312+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:37:29.314+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:29.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:29.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:37:29.315+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:29.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:29.316+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.317+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.317+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.318+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.318+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6be4dc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.321+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb8c0bc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.320+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@192396049 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:29.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:37:29.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2044186536 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:29.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:29.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T10:37:29.323+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:29.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:29.325+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565e1cd8]
2026-01-14T10:37:29.326+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.327+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:29.328+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.331+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:29.333+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:29.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:29.334+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:29.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:29.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:37:29.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:29.385+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:37:29.386+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:29.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:29.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36f9c80b]
2026-01-14T10:37:29.413+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fb8c0bc]
2026-01-14T10:37:29.414+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1555dfa2]
2026-01-14T10:37:29.414+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c6be4dc]
2026-01-14T10:37:29.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc75f60]
2026-01-14T10:37:29.417+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.417+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.418+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.420+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.423+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.426+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23924bfa] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:29.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:37:29.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:37:29.428+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T10:37:29.428+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37265ba0] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.428+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434152032 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:29.429+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.432+09:00 DEBUG 28060 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.433+09:00 DEBUG 28060 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.434+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@45035131 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:29.444+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:29.448+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-01-14T10:37:29.464+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-14T10:37:29.465+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:29.466+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-14T10:37:29.527+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-01-14T10:37:29.474+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.475+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.475+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:29.516+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 2147483647(Integer), 0(Integer)
2026-01-14T10:37:29.529+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-01-14T10:37:29.530+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/user-stats
2026-01-14T10:37:29.532+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-14T10:37:29.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:29.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:29.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-14T10:37:29.533+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.545+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.670+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:29.671+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-14T10:37:29.674+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:29.675+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.677+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:29.678+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:29.678+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23924bfa]
2026-01-14T10:37:29.682+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37265ba0]
2026-01-14T10:37:29.683+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:29.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356dc003] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.684+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-01-14T10:37:29.686+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-14T10:37:29.768+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.772+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.690+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.693+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1740855598 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:29.782+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-14T10:37:29.695+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bde051c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.774+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5415d774] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.775+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cdcfe47] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.776+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa3674d] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.784+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 5(Long), 1(Long)
2026-01-14T10:37:29.785+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:29.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68158204 wrapping com.mysql.cj.jdbc.ConnectionImpl@55f6a22a] will not be managed by Spring
2026-01-14T10:37:29.799+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1701419927 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:29.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1235375911 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:29.800+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773996733 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:29.803+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ? AND report_date >= ? AND report_date <= ?
2026-01-14T10:37:29.808+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:29.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:29.809+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:29.810+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246600bc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.819+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:29.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:29.829+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:29.831+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:29.832+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982770875 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:29.843+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-01-14T10:37:29.850+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 4
2026-01-14T10:37:29.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate), 1(Long)
2026-01-14T10:37:29.853+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356dc003]
2026-01-14T10:37:29.854+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.856+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575eb534] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.859+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216537604 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:29.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:29.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:29.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-14T10:37:29.861+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:29.862+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:29.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cdcfe47]
2026-01-14T10:37:29.863+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa3674d]
2026-01-14T10:37:29.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bde051c]
2026-01-14T10:37:29.866+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5415d774]
2026-01-14T10:37:29.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:29.867+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:29.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.868+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f92b1dc] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.869+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7396930f] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:29.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=282000, totalCou (truncated)...]
2026-01-14T10:37:29.870+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:29.875+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@337071791 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:29.879+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 10
2026-01-14T10:37:29.882+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660278079 wrapping com.mysql.cj.jdbc.ConnectionImpl@22777850] will not be managed by Spring
2026-01-14T10:37:29.885+09:00 DEBUG 28060 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.886+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-14T10:37:29.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@246600bc]
2026-01-14T10:37:29.890+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:29.891+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 43(Long), 42(Long), 41(Long), 40(Long), 39(Long), 38(Long), 37(Long), 36(Long), 34(Long), 33(Long), 32(Long), 31(Long), 27(Long), 26(Long), 25(Long), 24(Long)
2026-01-14T10:37:29.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:29.892+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:29.894+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=2, userName=tes (truncated)...]
2026-01-14T10:37:29.900+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:29.939+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-14T10:37:29.947+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/users/pending
2026-01-14T10:37:29.962+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-14T10:37:29.970+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-14T10:37:29.909+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:29.910+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:29.917+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:30.126+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@575eb534]
2026-01-14T10:37:30.127+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:30.092+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:30.092+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 20
2026-01-14T10:37:30.097+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-14T10:37:30.119+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:30.124+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 5, role: ADMIN, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-14T10:37:30.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-14T10:37:30.129+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7396930f]
2026-01-14T10:37:30.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f92b1dc]
2026-01-14T10:37:30.130+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:30.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-14T10:37:30.131+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31
2026-01-14T10:37:30.241+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-01-01&endDate=2026-01-31", parameters={masked}
2026-01-14T10:37:30.242+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-14T10:37:30.132+09:00 DEBUG 28060 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:30.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:30.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:30.258+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566f9495] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:30.263+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2086261717 wrapping com.mysql.cj.jdbc.ConnectionImpl@32a6d7bd] will not be managed by Spring
2026-01-14T10:37:30.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-14T10:37:30.133+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f34128c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:30.228+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-14T10:37:30.266+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-14T10:37:30.269+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:30.245+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:30.253+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:30.265+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-14T10:37:30.266+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1807978038 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:30.270+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:30.274+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-14T10:37:30.283+09:00 DEBUG 28060 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:30.286+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-14T10:37:30.355+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 5(Long)
2026-01-14T10:37:30.290+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:30.358+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b01643c] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:30.293+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:30.346+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-14T10:37:30.361+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933593799 wrapping com.mysql.cj.jdbc.ConnectionImpl@c03d32c] will not be managed by Spring
2026-01-14T10:37:30.379+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480f37b2] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:30.380+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566f9495]
2026-01-14T10:37:30.383+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-14T10:37:30.384+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-14T10:37:30.393+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:30.394+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f34128c]
2026-01-14T10:37:30.395+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-14T10:37:30.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-14T10:37:30.396+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-14T10:37:30.398+09:00 DEBUG 28060 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:30.402+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b49fad] was not registered for synchronization because synchronization is not active
2026-01-14T10:37:30.403+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1498111365 wrapping com.mysql.cj.jdbc.ConnectionImpl@3a98645c] will not be managed by Spring
2026-01-14T10:37:30.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-14T10:37:30.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 2
2026-01-14T10:37:30.416+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1184273959 wrapping com.mysql.cj.jdbc.ConnectionImpl@219c6c72] will not be managed by Spring
2026-01-14T10:37:30.418+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-14T10:37:30.418+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b01643c]
2026-01-14T10:37:30.418+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-01-14T10:37:30.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:30.419+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long), 2026-01-01(LocalDate), 2026-01-31(LocalDate)
2026-01-14T10:37:30.427+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-14T10:37:30.430+09:00 DEBUG 28060 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:30.435+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-14T10:37:30.452+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b49fad]
2026-01-14T10:37:30.457+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 6
2026-01-14T10:37:30.460+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:30.461+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@480f37b2]
2026-01-14T10:37:30.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-14T10:37:30.462+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-14T10:37:30.463+09:00 DEBUG 28060 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-14T10:37:30.463+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=교통비, amount=80000, (truncated)...]
2026-01-14T10:37:30.468+09:00 DEBUG 28060 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
