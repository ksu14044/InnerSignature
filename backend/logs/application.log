2026-02-12T16:08:32.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2079689128 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:32.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327064932 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:32.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:32.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:32.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:32.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:32.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:32.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:32.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:32.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:32.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:32.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:32.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:32.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f61f35]
2026-02-12T16:08:32.243+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30bd69a3]
2026-02-12T16:08:32.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1607135f]
2026-02-12T16:08:32.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@631ffcd8]
2026-02-12T16:08:32.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:32.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:32.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:32.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:32.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5e3048] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:32.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cb8994] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:32.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7682b4e8] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:32.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21dd0266] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:32.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@439457665 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:32.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576718719 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:32.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@27770137 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:32.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027134393 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:32.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-12T16:08:32.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-12T16:08:32.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-02-12T16:08:32.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-02-12T16:08:32.254+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-12T16:08:32.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-12T16:08:32.257+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 3(Long)
2026-02-12T16:08:32.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 3(Long)
2026-02-12T16:08:32.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-12T16:08:32.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-12T16:08:32.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 5
2026-02-12T16:08:32.261+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 1
2026-02-12T16:08:32.264+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5e3048]
2026-02-12T16:08:32.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21dd0266]
2026-02-12T16:08:32.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79cb8994]
2026-02-12T16:08:32.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7682b4e8]
2026-02-12T16:08:32.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:32.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:32.271+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-12T16:08:32.271+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 3, count: 5
2026-02-12T16:08:32.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-12T16:08:32.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=30, userId=29, companyId (truncated)...]
2026-02-12T16:08:32.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:32.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:32.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:32.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:32.275+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-12T16:08:32.275+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=5, username=test_ceo, passw (truncated)...]
2026-02-12T16:08:32.281+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:32.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:32.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:32.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:32.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:32.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-12T16:08:32.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-12T16:08:32.900+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:08:32.919+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:32.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-12T16:08:32.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:32.933+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-12T16:08:32.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:08:32.935+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:32.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:32.949+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:32.949+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:32.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:32.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-12T16:08:32.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-12T16:08:32.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:08:32.957+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:32.957+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:32.959+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:32.959+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-12T16:08:32.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-12T16:08:32.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:32.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:08:32.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:32.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:32.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-12T16:08:32.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-12T16:08:32.977+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:32.977+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:08:32.990+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:32.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:32.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-12T16:08:32.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-12T16:08:32.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d48d99b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:32.994+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:08:32.994+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:32.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:32.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-12T16:08:32.998+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-12T16:08:33.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:08:33.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4292b8f2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2108280206 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:33.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705902f6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.026+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.027+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.027+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@190282837 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:33.036+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:33.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.040+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e4bfec] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:33.042+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:33.043+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7339234] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.043+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1399992374 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:33.044+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3da25a] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:33.051+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-12T16:08:33.058+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892532146 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:33.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1934936729 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:33.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:33.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1021763586 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:33.063+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-12T16:08:33.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-12T16:08:33.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:33.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d48d99b]
2026-02-12T16:08:33.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:08:33.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:33.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-12T16:08:33.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:33.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:08:33.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4292b8f2]
2026-02-12T16:08:33.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:33.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1b8c11] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1272714754 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:33.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:33.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:33.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:33.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:33.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:33.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:33.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:33.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3278e764] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1612648190 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:33.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:33.077+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:33.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-12T16:08:33.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@705902f6]
2026-02-12T16:08:33.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-12T16:08:33.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.086+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-12T16:08:33.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-12T16:08:33.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-12T16:08:33.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-12T16:08:33.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-12T16:08:33.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e65a7a] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247913554 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:33.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-12T16:08:33.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-12T16:08:33.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:08:33.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3da25a]
2026-02-12T16:08:33.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:33.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:33.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:08:33.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-12T16:08:33.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7339234]
2026-02-12T16:08:33.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-12T16:08:33.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:08:33.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-12T16:08:33.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-12T16:08:33.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:08:33.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:33.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-12T16:08:33.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:33.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:08:33.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-12T16:08:33.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:08:33.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:08:33.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:08:33.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:33.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e174da5] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224971752 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:33.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ddc5573] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-12T16:08:33.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1847231956 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:33.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-12T16:08:33.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:08:33.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:08:33.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-12T16:08:33.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e65a7a]
2026-02-12T16:08:33.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:33.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:33.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:33.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3278e764]
2026-02-12T16:08:33.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:33.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-12T16:08:33.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43e4bfec]
2026-02-12T16:08:33.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:33.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:33.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-12T16:08:33.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:08:33.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:33.178+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e174da5]
2026-02-12T16:08:33.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ddc5573]
2026-02-12T16:08:33.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f1b8c11]
2026-02-12T16:08:33.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.229+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:08:33.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:33.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:33.317+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:08:33.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:33.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.591+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:33.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:33.650+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:33.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:33.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:33.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:33.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:33.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:33.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:33.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:33.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72928461] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:33.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144753637 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:33.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149c66c] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:33.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:33.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206730269 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:33.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:33.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:33.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:33.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:33.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:33.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:33.702+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:33.715+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:33.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:33.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72928461]
2026-02-12T16:08:33.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:33.724+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:33.725+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:33.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:33.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@149c66c]
2026-02-12T16:08:33.744+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:33.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:33.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:34.086+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:34.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-12T16:08:34.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-12T16:08:34.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:34.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:34.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:08:34.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:08:34.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:34.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:34.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/cards/company
2026-02-12T16:08:34.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/cards/company
2026-02-12T16:08:34.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:34.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:34.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:34.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-12T16:08:34.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-12T16:08:34.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c53c84e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207aa6dd] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e32078e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f17ac3a] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@833267446 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:34.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258923544 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:34.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:34.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022929010 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:34.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-12T16:08:34.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777517158 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:34.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-12T16:08:34.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:34.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:34.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:34.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:34.109+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:34.109+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:34.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:34.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f17ac3a]
2026-02-12T16:08:34.111+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e32078e]
2026-02-12T16:08:34.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:34.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:34.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-12T16:08:34.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@207aa6dd]
2026-02-12T16:08:34.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1441b047] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:34.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:34.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1510071094 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:34.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c53c84e]
2026-02-12T16:08:34.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:34.123+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:34.123+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:34.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:34.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-12T16:08:34.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:34.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1441b047]
2026-02-12T16:08:34.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:34.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:34.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.187+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:34.188+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:34.195+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:34.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:34.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:34.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:34.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:34.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:34.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:34.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbddf77] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd86089] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:34.208+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@481916208 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:34.208+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:34.210+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:34.210+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638444391 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:34.210+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:34.214+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:34.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:34.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:34.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:34.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:34.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:34.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:34.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dbddf77]
2026-02-12T16:08:34.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:34.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:34.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:34.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:34.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd86089]
2026-02-12T16:08:34.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:34.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:34.232+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:34.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:34.994+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:34.996+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-12T16:08:34.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-12T16:08:35.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:35.002+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:35.002+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-12T16:08:35.003+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-12T16:08:35.003+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:35.003+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:35.004+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me/signatures
2026-02-12T16:08:35.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me/signatures
2026-02-12T16:08:35.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:35.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:35.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-12T16:08:35.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-12T16:08:35.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:35.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:35.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-12T16:08:35.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-12T16:08:35.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:35.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:35.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-12T16:08:35.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-12T16:08:35.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.010+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 3
2026-02-12T16:08:35.010+09:00  INFO 17136 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 9, companyId: 3
2026-02-12T16:08:35.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59012d28] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10fb505a] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed4c4cd] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b19bf0] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1251736736 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:35.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571666915 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:35.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:35.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1907130744 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:35.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1429591078 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:35.021+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:35.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:35.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-12T16:08:35.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-12T16:08:35.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:35.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:35.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:35.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:35.030+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59012d28]
2026-02-12T16:08:35.032+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:35.032+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:35.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10fb505a]
2026-02-12T16:08:35.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:35.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-12T16:08:35.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:35.034+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4612cf] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.034+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34b19bf0]
2026-02-12T16:08:35.036+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1789574004 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:35.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:35.040+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:35.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=2, userId=9, si (truncated)...]
2026-02-12T16:08:35.042+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:35.043+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:35.050+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-12T16:08:35.053+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed4c4cd]
2026-02-12T16:08:35.055+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:35.057+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=2, userId=9, si (truncated)...]
2026-02-12T16:08:35.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:35.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:35.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b4612cf]
2026-02-12T16:08:35.066+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:35.066+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:35.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:35.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:35.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:35.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:35.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:35.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:35.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:35.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:35.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:35.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:35.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:35.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:35.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:35.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:35.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:35.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:35.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:35.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324cb557] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:35.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df7f630] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:35.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584544520 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:35.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@695070638 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:35.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:35.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:35.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:35.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:35.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:35.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:35.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:35.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:35.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:35.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:35.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:35.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:35.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df7f630]
2026-02-12T16:08:35.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324cb557]
2026-02-12T16:08:35.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:35.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:35.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:35.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:35.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:35.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:37.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:37.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-12T16:08:37.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:37.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-12T16:08:37.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-12T16:08:37.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:37.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:37.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:37.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-02-12T16:08:37.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:37.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/my-approvals
2026-02-12T16:08:37.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-12T16:08:37.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:37.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:37.143+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:37.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:37.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:37.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-12T16:08:37.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-12T16:08:37.159+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:37.160+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/my-approvals
2026-02-12T16:08:37.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-12T16:08:37.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:37.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:37.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:37.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:37.158+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:37.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:37.160+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-12T16:08:37.160+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-12T16:08:37.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:37.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:37.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:37.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:37.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-12T16:08:37.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-12T16:08:37.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-12T16:08:37.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:37.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:37.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:37.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-12T16:08:37.176+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5153f8a1] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.176+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-12T16:08:37.176+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:37.177+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:37.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.182+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:37.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d33b4af] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583b792f] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9337a1] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.186+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.186+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c6be7f] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.186+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@890552148 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.196+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36924b89] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@669012038 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1498554212 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:37.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549055586 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.199+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:37.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@795743328 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:37.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:37.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@575216893 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:37.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:37.208+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.209+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e9337a1]
2026-02-12T16:08:37.209+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5153f8a1]
2026-02-12T16:08:37.210+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.210+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-02-12T16:08:37.211+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.212+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d33b4af]
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@583b792f]
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d05c8ef] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:37.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36924b89]
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20c6be7f]
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248927330 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51c592b6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@281116486 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4566eeb4] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:37.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7966ce] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:37.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@882034212 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:37.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:37.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:37.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136414371 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.225+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-12T16:08:37.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:37.228+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:37.232+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:37.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:37.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-02-12T16:08:37.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:37.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-02-12T16:08:37.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:37.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5503e0c2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011493262 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:37.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f2837e0] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:37.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@442254942 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:37.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.239+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4566eeb4]
2026-02-12T16:08:37.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51c592b6]
2026-02-12T16:08:37.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b1315e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10df1e4b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1909484754 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:37.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1836220100 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:37.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 63(Long), 44(Long), 31(Long), 10(Long), 6(Long), 1(Long)
2026-02-12T16:08:37.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e7966ce]
2026-02-12T16:08:37.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:37.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f2837e0]
2026-02-12T16:08:37.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5503e0c2]
2026-02-12T16:08:37.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b1ace8] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14af2277] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1783005237 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@279702918 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7369deba] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967189989 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:37.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:37.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:37.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:37.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d05c8ef]
2026-02-12T16:08:37.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:37.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/my-approvals
2026-02-12T16:08:37.255+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/my-approvals
2026-02-12T16:08:37.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/my-approvals
2026-02-12T16:08:37.257+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/my-approvals", parameters={}
2026-02-12T16:08:37.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMyApprovals()
2026-02-12T16:08:37.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c60c20] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1578746724 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status IN ('APPROVED', 'REJECTED') AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:37.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14af2277]
2026-02-12T16:08:37.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7369deba]
2026-02-12T16:08:37.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-12T16:08:37.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-02-12T16:08:37.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .i.b.m.E.selectMyApprovedReportsByUserId : <==      Total: 6
2026-02-12T16:08:37.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-12T16:08:37.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a355795] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b1ace8]
2026-02-12T16:08:37.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:37.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b1315e]
2026-02-12T16:08:37.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17c60c20]
2026-02-12T16:08:37.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10df1e4b]
2026-02-12T16:08:37.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@132410430 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356c8429] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.275+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.275+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587f4238] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.277+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-12T16:08:37.277+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterI (truncated)...]
2026-02-12T16:08:37.283+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317467048 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.283+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba5f832] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.285+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.286+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@283206451 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:37.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.289+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1138792011 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.290+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.290+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec
2026-02-12T16:08:37.292+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:37.298+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-12T16:08:37.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10&status%5B%5D=DRAFT&drafterName=test_exec", parameters={masked}
2026-02-12T16:08:37.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a355795]
2026-02-12T16:08:37.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:37.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@356c8429]
2026-02-12T16:08:37.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:37.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:37.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-12T16:08:37.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49918988] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:37.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930d79] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587f4238]
2026-02-12T16:08:37.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ba5f832]
2026-02-12T16:08:37.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@156821200 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ead730] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:37.311+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@428840334 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.311+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.313+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.313+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@266430216 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:37.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-12T16:08:37.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b15a562] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f614778] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 63(Long), 44(Long), 31(Long), 10(Long), 6(Long), 1(Long)
2026-02-12T16:08:37.316+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.316+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1601548890 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.319+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2036962749 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:37.321+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49918988]
2026-02-12T16:08:37.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:37.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:37.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.327+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:37.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 6
2026-02-12T16:08:37.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-12T16:08:37.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2b63c2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:37.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930d79]
2026-02-12T16:08:37.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1504932870 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ead730]
2026-02-12T16:08:37.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:37.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:37.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-12T16:08:37.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.358+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:37.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-12T16:08:37.369+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:37.369+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f614778]
2026-02-12T16:08:37.369+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b15a562]
2026-02-12T16:08:37.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=내 결재 문서 조회 성공, data=[ExpenseReportDto(expenseReportId=63, drafterI (truncated)...]
2026-02-12T16:08:37.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e5b680] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.374+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.383+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@733263835 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122b91a8] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:37.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b0b5bc] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-12T16:08:37.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:37.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:37.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122255306 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:37.396+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33038493 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.400+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c2b63c2]
2026-02-12T16:08:37.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:37.403+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:37.404+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:37.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:37.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:37.421+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:37.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757a580b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:37.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:37.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@839385109 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:37.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e5b680]
2026-02-12T16:08:37.432+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5387d70c] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:37.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@268844835 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676a5620] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@702a40b0] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:37.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-12T16:08:37.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1665117691 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1301011457 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:37.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122b91a8]
2026-02-12T16:08:37.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77b0b5bc]
2026-02-12T16:08:37.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.450+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 34
2026-02-12T16:08:37.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:37.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757a580b]
2026-02-12T16:08:37.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:37.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:37.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b6695e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a3ddf7b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5387d70c]
2026-02-12T16:08:37.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199104145 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:37.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@408066773 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7a27cc] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:37.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-12T16:08:37.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:37.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1541898824 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:37.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:37.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@676a5620]
2026-02-12T16:08:37.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@702a40b0]
2026-02-12T16:08:37.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:37.468+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:37.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:37.474+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.475+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d30841] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.475+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a9031b2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.478+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:37.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a3ddf7b]
2026-02-12T16:08:37.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1035834413 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486733712 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:37.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:37.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:37.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.status IN ( ? ) AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:37.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:37.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), DRAFT(String), test_exec(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:37.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:37.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45b6695e]
2026-02-12T16:08:37.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b10268] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:37.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:37.488+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:37.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1123277762 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:37.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c7a27cc]
2026-02-12T16:08:37.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:37.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:37.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-02-12T16:08:37.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7b4683] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-12T16:08:37.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8d30841]
2026-02-12T16:08:37.497+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13761c4d] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.497+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919255955 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:37.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:37.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042222504 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.503+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:37.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-02-12T16:08:37.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:37.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:37.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:37.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:37.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:37.509+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long), 76(Long), 75(Long), 72(Long), 71(Long), 69(Long), 67(Long), 66(Long), 65(Long), 64(Long), 63(Long), 62(Long), 61(Long), 60(Long), 59(Long), 58(Long), 51(Long), 47(Long), 44(Long), 42(Long), 41(Long), 38(Long), 34(Long), 31(Long), 30(Long), 23(Long), 10(Long), 9(Long), 7(Long), 6(Long), 1(Long)
2026-02-12T16:08:37.511+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a9031b2]
2026-02-12T16:08:37.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:37.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:37.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-12T16:08:37.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:37.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46b10268]
2026-02-12T16:08:37.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:37.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:37.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:37.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b07122] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855416718 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:37.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:37.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:37.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 35
2026-02-12T16:08:37.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:37.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:37.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:37.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c7b4683]
2026-02-12T16:08:37.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13761c4d]
2026-02-12T16:08:37.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:37.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:37.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:37.567+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.567+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.571+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:37.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:37.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:37.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:37.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:37.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:37.574+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.575+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.578+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:37.584+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:37.580+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:37.587+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d077048] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1624635731 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:37.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:37.592+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:37.592+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:37.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420c1039] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:37.601+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10b07122]
2026-02-12T16:08:37.601+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@872836543 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:37.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:37.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d39f695] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:37.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:37.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781433201 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:37.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:37.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:37.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:37.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:37.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:37.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:37.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:37.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:37.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:37.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:37.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d39f695]
2026-02-12T16:08:37.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d077048]
2026-02-12T16:08:37.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:37.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:37.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:37.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:37.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:37.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@420c1039]
2026-02-12T16:08:37.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:37.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:37.623+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:38.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:38.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:38.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:38.616+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:08:38.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:38.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:38.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:38.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:38.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:38.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:08:38.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:38.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:08:38.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:38.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:38.666+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:38.668+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:38.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:38.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:38.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:38.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:08:38.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:08:38.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:38.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:38.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:38.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:38.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:38.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:38.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:38.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:38.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:38.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:38.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:38.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:38.678+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:38.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3cf0a8] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:08:38.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:08:38.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:38.680+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:38.681+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459327504 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@316e14b4] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:38.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635403d3] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.686+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191c8638] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.686+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.686+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360030266 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:38.687+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:38.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5f5181] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:38.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1900612653 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:38.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2090818962 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:38.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c72ede3] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:38.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:38.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:38.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:38.693+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1816913237 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.693+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@296980045 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:38.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:08:38.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:38.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:38.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:38.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e3cf0a8]
2026-02-12T16:08:38.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:08:38.696+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:08:38.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@316e14b4]
2026-02-12T16:08:38.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:08:38.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5126b5db] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:38.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116509999 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:38.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.701+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:38.702+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.703+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:08:38.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:08:38.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2299cf51] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735429553 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:38.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:08:38.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:08:38.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:38.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5f5181]
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5126b5db]
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@635403d3]
2026-02-12T16:08:38.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:08:38.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:38.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2785b21b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1303090463 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:38.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:38.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:38.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:38.723+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.723+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:38.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.724+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:38.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:38.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:38.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e04a41d] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319934561 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105a3cd6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.734+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14401436 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.734+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.735+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.735+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.735+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:08:38.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:08:38.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c72ede3]
2026-02-12T16:08:38.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2299cf51]
2026-02-12T16:08:38.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:08:38.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:08:38.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:08:38.740+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:38.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:08:38.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:08:38.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:38.744+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:08:38.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:38.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:38.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:08:38.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:38.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:38.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:38.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42017511] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.749+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.749+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678529240 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:38.749+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10939156] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.750+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:38.755+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.755+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.759+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@105a3cd6]
2026-02-12T16:08:38.755+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:38.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606675830 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:38.758+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:38.759+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e04a41d]
2026-02-12T16:08:38.759+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:38.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:38.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:08:38.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6feb1076] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2785b21b]
2026-02-12T16:08:38.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191c8638]
2026-02-12T16:08:38.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:08:38.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b44d072] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773209553 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.769+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:38.770+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@274443595 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.772+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:08:38.772+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:38.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:38.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42017511]
2026-02-12T16:08:38.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10939156]
2026-02-12T16:08:38.774+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.774+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.774+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.774+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.775+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.780+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:38.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:38.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:08:38.789+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.793+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:38.794+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.794+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:38.798+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.799+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.800+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6feb1076]
2026-02-12T16:08:38.801+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:38.802+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:38.803+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.808+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b44d072]
2026-02-12T16:08:38.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:38.816+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:38.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e3dd14] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.818+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:38.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:08:38.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:38.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:38.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43332c80] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.820+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@658249694 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:38.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:38.823+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:38.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1316594644 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.825+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:38.826+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:38.827+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:38.827+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c6ed4d] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:38.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:38.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:08:38.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@839020555 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:38.843+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6794f4e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.843+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:38.844+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.847+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4a60dd] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.848+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.850+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1645586999 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:38.851+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:38.855+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1057491520 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:38.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:38.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10e3dd14]
2026-02-12T16:08:38.857+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.858+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:38.864+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:38.866+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:38.866+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.871+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f537e97] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:38.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43332c80]
2026-02-12T16:08:38.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a06346] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406979435 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:38.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:38.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c6ed4d]
2026-02-12T16:08:38.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665128987 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:08:38.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:38.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b563fbc] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:38.884+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:08:38.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@299584890 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3d02bc] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.886+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a4a60dd]
2026-02-12T16:08:38.886+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:38.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917796083 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:38.888+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.888+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.888+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:08:38.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:38.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277a41ec] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f537e97]
2026-02-12T16:08:38.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6794f4e]
2026-02-12T16:08:38.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29a06346]
2026-02-12T16:08:38.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1314881878 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:38.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.893+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b563fbc]
2026-02-12T16:08:38.893+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:38.893+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:08:38.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:38.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab7221] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:38.896+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674995041 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c3d02bc]
2026-02-12T16:08:38.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae78f32] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:38.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:38.904+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.905+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085733901 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:08:38.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:38.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:38.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50edd075] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:38.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.909+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:38.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@343998518 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:38.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:38.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.918+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:38.918+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:38.919+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:38.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:38.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:08:38.922+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@277a41ec]
2026-02-12T16:08:38.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:38.924+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:38.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab7221]
2026-02-12T16:08:38.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:38.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:38.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae78f32]
2026-02-12T16:08:38.926+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:38.933+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:38.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:38.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449c5840] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.935+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.936+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.937+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60453088] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50edd075]
2026-02-12T16:08:38.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503255176 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507e0656] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@734f53c9] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.941+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725803949 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.941+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.943+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:38.944+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1443607046 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:38.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2035294929 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:38.950+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:08:38.950+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:38.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283d75de] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:38.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:08:38.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:38.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.956+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384661204 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:38.956+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:38.958+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:08:38.958+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:38.959+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.963+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:08:38.963+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.964+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.965+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:38.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:38.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:38.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:38.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:08:38.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@449c5840]
2026-02-12T16:08:38.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283d75de]
2026-02-12T16:08:38.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:38.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507e0656]
2026-02-12T16:08:38.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e12be0] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:38.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45cb2a96] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1744927536 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:38.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab94b6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60453088]
2026-02-12T16:08:38.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:08:38.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1664295991 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:38.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:08:38.975+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1182503512 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:38.975+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.975+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:08:38.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:38.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741b4a05] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.977+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.978+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:38.978+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1024718206 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:38.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.983+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.981+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.984+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:38.984+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:38.985+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:38.985+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:38.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:38.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60ba1dfb] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:38.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1815034267 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:38.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:38.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:38.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:38.990+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:38.990+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@734f53c9]
2026-02-12T16:08:38.991+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:38.991+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:38.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:38.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:38.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:38.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:39.000+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:39.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bda015] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@557765107 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.002+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.002+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@741b4a05]
2026-02-12T16:08:39.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b9e985] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784469621 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:39.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:08:39.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21e12be0]
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ab94b6]
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45cb2a96]
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60ba1dfb]
2026-02-12T16:08:39.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bda015]
2026-02-12T16:08:39.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:08:39.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b88f94d] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f2b6d1] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650443438 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39fc08d9] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4856c753] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@678536515 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@161062872 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@545487684 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:39.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:39.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58553409] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@392063270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:39.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44b9e985]
2026-02-12T16:08:39.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:39.026+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.029+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:08:39.034+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:08:39.035+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:08:39.036+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:08:39.036+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:08:39.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227d3088] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.038+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1476227082 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:08:39.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:08:39.040+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39fc08d9]
2026-02-12T16:08:39.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34f2b6d1]
2026-02-12T16:08:39.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb33840] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.050+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473266575 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.051+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:39.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.053+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.057+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.058+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:39.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:39.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:08:39.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:39.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4856c753]
2026-02-12T16:08:39.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58553409]
2026-02-12T16:08:39.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@227d3088]
2026-02-12T16:08:39.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b88f94d]
2026-02-12T16:08:39.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:39.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:39.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493bb9f] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15cb5750] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046920705 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:08:39.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b9eb2c0] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@eb33840]
2026-02-12T16:08:39.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:39.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691344028 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461740655 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.108+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.109+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:39.109+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.112+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:08:39.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7299fc39] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:08:39.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1702869778 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:39.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28322b23] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:08:39.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@493bb9f]
2026-02-12T16:08:39.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@148817093 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:08:39.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:39.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:08:39.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a62206b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.143+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:39.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:39.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b9eb2c0]
2026-02-12T16:08:39.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15cb5750]
2026-02-12T16:08:39.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62144507 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:08:39.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7299fc39]
2026-02-12T16:08:39.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:39.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ee810d] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@432b80e6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43056823] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:39.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311aca16] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@238563682 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202714628 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1002150968 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.160+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@215973944 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.165+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:08:39.165+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a62206b]
2026-02-12T16:08:39.165+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:08:39.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:39.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:39.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28174c97] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28322b23]
2026-02-12T16:08:39.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@603803782 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:39.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:39.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.186+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.187+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.187+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.190+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:39.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ee810d]
2026-02-12T16:08:39.199+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@432b80e6]
2026-02-12T16:08:39.199+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311aca16]
2026-02-12T16:08:39.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:39.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:08:39.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:39.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28174c97]
2026-02-12T16:08:39.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43056823]
2026-02-12T16:08:39.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:39.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:39.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720f3bd6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16847107] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.208+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.209+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.211+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:39.215+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1832692161 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1898529723 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b0d8555] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:08:39.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:39.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:39.228+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.232+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045517655 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:39.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:39.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.239+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.255+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:39.267+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:39.255+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:39.267+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:39.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c464e77] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2415e86] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@488842000 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1240713014 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:39.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:39.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:39.279+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.280+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.285+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:39.293+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:39.299+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@720f3bd6]
2026-02-12T16:08:39.300+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16847107]
2026-02-12T16:08:39.301+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b0d8555]
2026-02-12T16:08:39.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.301+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16299cb2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159f9281] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2ebb5d] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294224911 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@547804540 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1962208997 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:39.324+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:39.324+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:39.324+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:39.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c464e77]
2026-02-12T16:08:39.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2415e86]
2026-02-12T16:08:39.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a821a9] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e9ed98] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756282973 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1221869165 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:39.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:39.343+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:39.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:39.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f2ebb5d]
2026-02-12T16:08:39.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:08:39.356+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:08:39.358+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a70459] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1482275075 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.364+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.367+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16299cb2]
2026-02-12T16:08:39.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@159f9281]
2026-02-12T16:08:39.369+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.381+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240e0638] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.376+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:39.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:39.381+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c6cf3b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1307349922 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.383+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a821a9]
2026-02-12T16:08:39.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e9ed98]
2026-02-12T16:08:39.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@47191197 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.390+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:39.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:39.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.395+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:39.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:39.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a70459]
2026-02-12T16:08:39.400+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:39.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:39.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6129bba] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.417+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:39.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:39.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1820181229 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:08:39.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:39.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:39.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@240e0638]
2026-02-12T16:08:39.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:39.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.432+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:39.433+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58c6cf3b]
2026-02-12T16:08:39.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.450+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:39.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:39.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:39.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:39.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:39.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:08:39.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:39.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:39.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b706546] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66b82dbf] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:08:39.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1433822209 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.502+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6129bba]
2026-02-12T16:08:39.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@252b86a2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236197179 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:08:39.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:39.503+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@230496204 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:39.509+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.511+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:39.512+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8d7f6b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.512+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:08:39.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:39.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:08:39.516+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793836587 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:08:39.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:08:39.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2143de] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d34e22] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836722910 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1131868 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:08:39.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:08:39.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:08:39.534+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:08:39.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:08:39.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:39.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:39.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d8d7f6b]
2026-02-12T16:08:39.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@252b86a2]
2026-02-12T16:08:39.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:39.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:08:39.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:08:39.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b706546]
2026-02-12T16:08:39.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d34e22]
2026-02-12T16:08:39.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a2143de]
2026-02-12T16:08:39.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:39.552+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:08:39.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23762f41] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:39.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:08:39.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:08:39.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@184824892 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:39.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:08:39.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:08:39.567+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.568+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.571+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:39.578+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66b82dbf]
2026-02-12T16:08:39.579+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:08:39.581+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:08:39.582+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.583+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.584+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:39.585+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:39.585+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:08:39.585+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:08:39.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:39.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:39.591+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:08:39.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:08:39.594+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.599+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.601+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:08:39.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:08:39.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:39.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:39.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:08:39.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:39.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23762f41]
2026-02-12T16:08:39.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:39.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:39.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:08:39.616+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e83316e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.616+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:39.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66253559] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896453643 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:39.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bfc4c5e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:08:39.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@141857201 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1517b5] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:08:39.622+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1603777759 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491963543 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:08:39.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:08:39.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:08:39.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:08:39.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65309a09] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:08:39.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:08:39.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@153680672 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@bfc4c5e]
2026-02-12T16:08:39.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66253559]
2026-02-12T16:08:39.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e83316e]
2026-02-12T16:08:39.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:08:39.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:08:39.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:08:39.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:08:39.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104c3491] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d2c55b] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0c5805] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2033910906 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@940751109 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@744687691 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.724+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:08:39.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.725+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:08:39.725+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e041d7a] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.725+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.725+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:08:39.734+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:08:39.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911559871 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:08:39.740+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65309a09]
2026-02-12T16:08:39.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@104c3491]
2026-02-12T16:08:39.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:08:39.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:08:39.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f1517b5]
2026-02-12T16:08:39.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d2c55b]
2026-02-12T16:08:39.743+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17436f92] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.743+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:08:39.743+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b0c5805]
2026-02-12T16:08:39.744+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:08:39.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1717188951 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.749+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.750+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:08:39.752+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e196011] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.753+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.753+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.755+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:08:39.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:08:39.759+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862304916 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.767+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.767+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e041d7a]
2026-02-12T16:08:39.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:08:39.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.781+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.784+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:39.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:08:39.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:08:39.791+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:08:39.792+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.793+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.799+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.802+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17436f92]
2026-02-12T16:08:39.800+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:08:39.801+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:08:39.801+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:08:39.803+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-12T16:08:39.804+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:39.806+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.807+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:08:39.808+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:39.809+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.809+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e196011]
2026-02-12T16:08:39.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f65b906] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.816+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:08:39.818+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.820+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@324430471 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.822+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46335a5c] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.823+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-12T16:08:39.828+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6bce27] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.833+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718d5a76] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.833+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992089335 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.839+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.839+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.834+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-12T16:08:39.835+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587235ff] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@699871827 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.838+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1595810993 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.841+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-12T16:08:39.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2030458067 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:08:39.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.843+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-12T16:08:39.849+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:08:39.850+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.851+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-12T16:08:39.852+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:08:39.853+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.854+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:08:39.857+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.858+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.858+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.859+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46335a5c]
2026-02-12T16:08:39.859+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f65b906]
2026-02-12T16:08:39.859+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@833dbaf] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.860+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.864+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:08:39.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1315880405 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:08:39.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65750492] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c03aeee] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587235ff]
2026-02-12T16:08:39.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718d5a76]
2026-02-12T16:08:39.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c6bce27]
2026-02-12T16:08:39.886+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-12T16:08:39.886+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@961037274 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.886+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1310496225 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.888+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-12T16:08:39.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:08:39.893+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5257d66e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e641da8] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.901+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1225943224 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206366389 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.910+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-12T16:08:39.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.911+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:39.911+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@833dbaf]
2026-02-12T16:08:39.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:39.917+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-12T16:08:39.917+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.919+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:39.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65750492]
2026-02-12T16:08:39.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.926+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:39.927+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:39.928+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69b7f1d7] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.935+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c03aeee]
2026-02-12T16:08:39.935+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e641da8]
2026-02-12T16:08:39.935+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5257d66e]
2026-02-12T16:08:39.936+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@615197159 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.936+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.937+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.937+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a9c8ba] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fbca210] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa9f902] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.942+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.944+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@540830399 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.944+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@28013842 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.950+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1721871007 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:39.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.959+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:39.962+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69b7f1d7]
2026-02-12T16:08:39.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6cc2d0] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@990101475 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:39.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:39.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aa9f902]
2026-02-12T16:08:39.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a9c8ba]
2026-02-12T16:08:39.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c7b397] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e47c03] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@560150500 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487037693 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.975+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.975+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.980+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.983+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:39.983+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fbca210]
2026-02-12T16:08:39.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6cc2d0]
2026-02-12T16:08:39.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dd1b00e] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb532ad] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.991+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.991+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:39.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1200044422 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:39.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@633606121 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:39.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12e47c03]
2026-02-12T16:08:39.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64c7b397]
2026-02-12T16:08:39.995+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:39.995+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.996+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.996+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:39.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:39.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:39.998+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaeba01] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.998+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c5fa80] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:39.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1327220147 wrapping com.mysql.cj.jdbc.ConnectionImpl@2b58611f] will not be managed by Spring
2026-02-12T16:08:39.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1304930436 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:39.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:39.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:40.004+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:40.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:40.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:40.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:40.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dd1b00e]
2026-02-12T16:08:40.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb532ad]
2026-02-12T16:08:40.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.013+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d51d944] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@177bc4e6] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@229662496 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:08:40.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282901758 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:40.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:40.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:40.017+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:40.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:40.021+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:40.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:40.023+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14c5fa80]
2026-02-12T16:08:40.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eaeba01]
2026-02-12T16:08:40.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:40.026+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@535805d2] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.026+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:40.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1752364227 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:40.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:40.034+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:08:40.044+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:08:40.045+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:40.047+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:08:40.048+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d51d944]
2026-02-12T16:08:40.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@177bc4e6]
2026-02-12T16:08:40.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:40.050+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.051+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:40.051+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@640d260a] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:40.053+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@764969625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:40.056+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:40.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:40.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:08:40.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@535805d2]
2026-02-12T16:08:40.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769a160c] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711274904 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:40.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:40.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:08:40.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@640d260a]
2026-02-12T16:08:40.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:08:40.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa101c3] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.077+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1385251147 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:08:40.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:40.081+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:08:40.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:08:40.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@769a160c]
2026-02-12T16:08:40.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:08:40.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d54b169] was not registered for synchronization because synchronization is not active
2026-02-12T16:08:40.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@735640761 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:08:40.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:08:40.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:08:40.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa101c3]
2026-02-12T16:08:40.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:08:40.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:40.086+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:40.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:08:40.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:08:40.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d54b169]
2026-02-12T16:08:40.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:08:40.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:08:40.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:33.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:33.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:21:33.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-12T16:21:33.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-12T16:21:33.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:33.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:21:33.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:21:33.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:21:33.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:21:33.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:21:33.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/cards/company
2026-02-12T16:21:33.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/cards/company
2026-02-12T16:21:33.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:33.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:21:33.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-12T16:21:33.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-12T16:21:33.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:33.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:21:33.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-12T16:21:33.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-12T16:21:33.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:33.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:21:33.535+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-12T16:21:33.535+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-12T16:21:33.535+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.535+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3332cc78] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32828b74] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b083341] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.537+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20cc1c34] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186881205 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:33.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112170369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:33.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@492411414 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:33.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:33.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-12T16:21:33.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:33.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@573798715 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:33.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:21:33.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:33.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:33.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-12T16:21:33.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:33.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:33.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:33.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:21:33.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b083341]
2026-02-12T16:21:33.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32828b74]
2026-02-12T16:21:33.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3332cc78]
2026-02-12T16:21:33.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:33.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:33.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:33.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20cc1c34]
2026-02-12T16:21:33.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-12T16:21:33.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d49aae] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:21:33.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:33.557+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:33.557+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2010133188 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:33.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:33.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-12T16:21:33.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:21:33.567+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:33.574+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:21:33.586+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:21:33.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32d49aae]
2026-02-12T16:21:33.591+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:33.591+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:21:33.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:33.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:33.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:33.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:33.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:33.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:33.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:33.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:33.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:33.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:33.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:33.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:33.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:33.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:33.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b613f90] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:33.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1351940175 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:33.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:33.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:33.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:33.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:33.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:33.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188caf37] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:33.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@723832475 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:33.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:33.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:33.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:33.652+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:33.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:33.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:33.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:33.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:33.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b613f90]
2026-02-12T16:21:33.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@188caf37]
2026-02-12T16:21:33.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:33.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:33.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:33.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:34.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:21:34.146+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:34.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/9/approvers
2026-02-12T16:21:34.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:34.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/9/approvers
2026-02-12T16:21:34.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:34.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:21:34.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:34.159+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/9/approvers
2026-02-12T16:21:34.162+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:34.165+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/9/approvers
2026-02-12T16:21:34.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:21:34.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:21:34.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:34.167+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/9/approvers
2026-02-12T16:21:34.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:34.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:34.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/9/approvers
2026-02-12T16:21:34.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:21:34.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:34.170+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/9/approvers
2026-02-12T16:21:34.170+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:34.170+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:34.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/9/approvers
2026-02-12T16:21:34.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:21:34.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:34.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/9/approvers", parameters={}
2026-02-12T16:21:34.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:34.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:34.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/9/approvers", parameters={}
2026-02-12T16:21:34.174+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:21:34.174+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:34.175+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-12T16:21:34.178+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:34.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserApproverController#getApprovers(Long)
2026-02-12T16:21:34.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-12T16:21:34.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cf164e] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-12T16:21:34.182+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654497d9] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.182+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-12T16:21:34.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.184+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.UserApproverController.getApprovers(java.lang.Long); target is of class [com.innersignature.backend.controller.UserApproverController]
2026-02-12T16:21:34.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.187+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d3661] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.187+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.188+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db58171] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.188+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c9781c] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.188+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725601804 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:34.190+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d77ec9] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.196+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:34.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:21:34.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534215787 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:34.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@81756648 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:34.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1208442330 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:34.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124338575 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:34.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:34.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:34.199+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:34.199+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-12T16:21:34.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:34.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:34.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:21:34.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:34.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:21:34.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36cf164e]
2026-02-12T16:21:34.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:34.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:34.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1892923733 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:34.206+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-02-12T16:21:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:34.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:34.212+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==>  Preparing: SELECT uam.*, u.korean_name AS approver_name, uc.position AS approver_position FROM user_approver_mapping_tb uam JOIN user_tb u ON uam.approver_id = u.user_id LEFT JOIN user_company_tb uc ON uam.approver_id = uc.user_id AND uam.company_id = uc.company_id WHERE uam.user_id = ? AND uam.company_id = ? AND (uam.is_active IS NULL OR uam.is_active = 1) ORDER BY uam.priority ASC, uam.created_at ASC
2026-02-12T16:21:34.212+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:21:34.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db58171]
2026-02-12T16:21:34.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:34.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654497d9]
2026-02-12T16:21:34.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:21:34.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:34.225+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:34.225+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=2, userId=9, approve (truncated)...]
2026-02-12T16:21:34.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserApproverMapper.findByUserId  : <==      Total: 1
2026-02-12T16:21:34.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:34.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d3661]
2026-02-12T16:21:34.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3954d2d8] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49d77ec9]
2026-02-12T16:21:34.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c9781c]
2026-02-12T16:21:34.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751727793 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:34.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-12T16:21:34.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:34.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:21:34.254+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[UserApproverMappingDto(mappingId=2, userId=9, approve (truncated)...]
2026-02-12T16:21:34.254+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:34.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.257+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:21:34.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-02-12T16:21:34.282+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-12T16:21:34.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:21:34.289+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/approvers
2026-02-12T16:21:34.293+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-02-12T16:21:34.295+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3954d2d8]
2026-02-12T16:21:34.295+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-12T16:21:34.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/approvers
2026-02-12T16:21:34.298+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.300+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-12T16:21:34.302+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-02-12T16:21:34.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:21:34.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-12T16:21:34.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-02-12T16:21:34.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-02-12T16:21:34.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de5e29f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1951695308 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:34.318+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@998142d] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.318+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-12T16:21:34.319+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795844739 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:34.321+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-12T16:21:34.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-02-12T16:21:34.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 3(Long)
2026-02-12T16:21:34.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-12T16:21:34.334+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5de5e29f]
2026-02-12T16:21:34.334+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 4
2026-02-12T16:21:34.334+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-12T16:21:34.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@998142d]
2026-02-12T16:21:34.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.336+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 3, count: 4
2026-02-12T16:21:34.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-12T16:21:34.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=7, username=test_accountant, pa (truncated)...]
2026-02-12T16:21:34.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:34.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:34.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:34.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:34.666+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:34.668+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:34.668+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:34.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:34.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:34.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.678+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:34.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:34.757+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.757+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:34.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcb673e] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.770+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:34.780+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:34.780+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588167402 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:34.781+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113f7456] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:34.782+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:34.792+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:34.805+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093986232 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:34.806+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:34.807+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:34.808+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:34.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:34.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:34.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:34.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:34.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:34.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcb673e]
2026-02-12T16:21:34.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.822+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:34.823+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:34.823+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:34.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:34.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113f7456]
2026-02-12T16:21:34.834+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:34.837+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:34.838+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:40.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:21:40.379+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:40.380+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-12T16:21:40.381+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-12T16:21:40.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:21:40.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:40.387+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-02-12T16:21:40.390+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-02-12T16:21:40.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:21:40.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:40.400+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:21:40.404+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:40.410+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:21:40.404+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-12T16:21:40.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-12T16:21:40.407+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:21:40.407+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:21:40.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:21:40.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:40.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-12T16:21:40.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-12T16:21:40.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:40.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:21:40.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:21:40.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:40.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-12T16:21:40.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-12T16:21:40.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:40.415+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:21:40.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:21:40.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:40.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-12T16:21:40.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-12T16:21:40.417+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:40.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:21:40.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:40.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-12T16:21:40.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-12T16:21:40.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:21:40.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567f2717] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.420+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.420+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.420+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140f66cc] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.421+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7bc386] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739086939 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:40.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288587718 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:40.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:40.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487753722 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:40.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63570ad7] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13c49088] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:40.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:40.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-12T16:21:40.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4207a202] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:21:40.435+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@835571312 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:40.435+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@841465547 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:40.435+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-12T16:21:40.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-12T16:21:40.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:40.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449059346 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:40.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:40.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:21:40.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-12T16:21:40.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:40.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-12T16:21:40.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:21:40.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@567f2717]
2026-02-12T16:21:40.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140f66cc]
2026-02-12T16:21:40.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d7bc386]
2026-02-12T16:21:40.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:21:40.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-12T16:21:40.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:40.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6a34ed] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:21:40.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13c49088]
2026-02-12T16:21:40.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:40.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-12T16:21:40.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1059872551 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:40.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.449+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:21:40.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:21:40.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:40.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:21:40.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-02-12T16:21:40.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4207a202]
2026-02-12T16:21:40.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:21:40.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:40.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/plans
2026-02-12T16:21:40.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:40.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:40.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-02-12T16:21:40.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:21:40.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-02-12T16:21:40.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:40.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:40.471+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits
2026-02-12T16:21:40.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:21:40.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-02-12T16:21:40.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.474+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:40.475+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63570ad7]
2026-02-12T16:21:40.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:40.478+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-02-12T16:21:40.478+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b6a34ed]
2026-02-12T16:21:40.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-02-12T16:21:40.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:21:40.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-02-12T16:21:40.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:21:40.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f910d1f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.488+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@93779363 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:40.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-02-12T16:21:40.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-02-12T16:21:40.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:21:40.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-02-12T16:21:40.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:21:40.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@531452bb] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:21:40.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.497+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548d785d] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1230655603 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:40.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:21:40.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176575732 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:40.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:40.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-02-12T16:21:40.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:21:40.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:40.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 3(Long)
2026-02-12T16:21:40.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@521f8fd9] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@152914555 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:40.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:21:40.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:21:40.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 0
2026-02-12T16:21:40.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@548d785d]
2026-02-12T16:21:40.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:21:40.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findAllActive                  : <==      Total: 2
2026-02-12T16:21:40.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:40.516+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f910d1f]
2026-02-12T16:21:40.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:40.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-02-12T16:21:40.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:21:40.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@521f8fd9]
2026-02-12T16:21:40.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:21:40.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:40.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:40.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@531452bb]
2026-02-12T16:21:40.537+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.537+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:40.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:40.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:40.687+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:40.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:40.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:40.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:40.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:40.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:40.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:40.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:40.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:40.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.710+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:40.711+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.711+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:40.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757845b8] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:40.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@799938227 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:40.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5117c82b] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:40.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:40.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1823470887 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:40.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:40.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:40.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:40.724+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:40.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:40.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:40.729+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:40.729+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:40.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:40.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@757845b8]
2026-02-12T16:21:40.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:40.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:40.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:40.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:40.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5117c82b]
2026-02-12T16:21:40.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:40.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:40.749+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:41.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-12T16:21:41.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-12T16:21:41.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-12T16:21:41.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-12T16:21:41.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-12T16:21:41.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-12T16:21:41.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:41.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:41.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:41.678+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39350272] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:41.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@775563475 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:41.680+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:41.681+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-12T16:21:41.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:41.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:41.687+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:41.687+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:41.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:41.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:41.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:41.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:41.696+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:41.696+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 3
2026-02-12T16:21:41.696+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39350272]
2026-02-12T16:21:41.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:41.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, amount=9900 (truncated)...]
2026-02-12T16:21:41.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:43.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/payments
2026-02-12T16:21:43.477+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/payments
2026-02-12T16:21:43.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/payments
2026-02-12T16:21:43.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/payments
2026-02-12T16:21:43.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/payments", parameters={}
2026-02-12T16:21:43.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPayments()
2026-02-12T16:21:43.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:43.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getPayments(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:43.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:43.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410f023f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:43.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884527212 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:43.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : ==>  Preparing: SELECT p.* FROM payment_tb p INNER JOIN subscription_tb s ON p.subscription_id = s.subscription_id WHERE s.company_id = ? ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:43.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : ==> Parameters: 3(Long)
2026-02-12T16:21:43.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:43.488+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:43.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:43.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:43.494+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:43.494+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:43.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:43.497+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:43.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:43.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.PaymentMapper.findByCompanyId    : <==      Total: 3
2026-02-12T16:21:43.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@410f023f]
2026-02-12T16:21:43.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:43.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, amount=9900 (truncated)...]
2026-02-12T16:21:43.502+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:46.858+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:46.860+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:21:46.863+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-02-12T16:21:46.863+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-12T16:21:46.865+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-02-12T16:21:46.866+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-02-12T16:21:46.868+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:46.868+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:21:46.868+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-02-12T16:21:46.869+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-12T16:21:46.869+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-02-12T16:21:46.869+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-02-12T16:21:46.870+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:21:46.871+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:21:46.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies
2026-02-12T16:21:46.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-12T16:21:46.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/companies/pending
2026-02-12T16:21:46.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:46.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/me
2026-02-12T16:21:46.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:21:46.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-02-12T16:21:46.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-12T16:21:46.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-02-12T16:21:46.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:46.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-02-12T16:21:46.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:21:46.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-02-12T16:21:46.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-12T16:21:46.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-02-12T16:21:46.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:46.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-02-12T16:21:46.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:21:46.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-02-12T16:21:46.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-12T16:21:46.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-02-12T16:21:46.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-02-12T16:21:46.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.882+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-12T16:21:46.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d86b5f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20dd3ec5] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.883+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 9, companyId: 3
2026-02-12T16:21:46.884+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d1d2379] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.884+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.884+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1180f129] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.886+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a735975] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1882250038 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:46.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500441843 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:46.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:46.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@684807bf] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:46.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:21:46.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:46.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1816316899 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:46.901+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:46.902+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:46.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1740877303 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:46.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:21:46.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:46.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1558322823 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:46.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17811590 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:46.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:21:46.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20dd3ec5]
2026-02-12T16:21:46.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d86b5f]
2026-02-12T16:21:46.909+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:46.912+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:46.912+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:21:46.913+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:21:46.914+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:46.914+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:46.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 9(Long), PENDING(String)
2026-02-12T16:21:46.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d1d2379]
2026-02-12T16:21:46.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:21:46.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:21:46.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=7, userId=9, companyId=3 (truncated)...]
2026-02-12T16:21:46.917+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.918+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:46.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:46.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@798170c9] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.946+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1656430196 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:46.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:21:46.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-02-12T16:21:46.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:21:46.949+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:21:46.949+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a735975]
2026-02-12T16:21:46.949+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1180f129]
2026-02-12T16:21:46.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@684807bf]
2026-02-12T16:21:46.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:21:46.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:46.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:46.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29364a3f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:21:46.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1602befa] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:46.956+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212148309 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:46.956+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:46.958+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@896769364 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:46.961+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:46.961+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:21:46.964+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:46.966+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@798170c9]
2026-02-12T16:21:46.966+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:46.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:21:46.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:46.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:21:46.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:46.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:46.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:21:46.979+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1602befa]
2026-02-12T16:21:46.979+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29364a3f]
2026-02-12T16:21:46.980+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-12T16:21:46.980+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 9, companyId: 3, role: ADMIN
2026-02-12T16:21:46.981+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:46.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:46.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-12T16:21:46.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=9, username=test_exec, passwo (truncated)...]
2026-02-12T16:21:46.984+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:46.985+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:47.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:47.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:47.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:47.112+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:47.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:47.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:47.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:47.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:21:47.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:47.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:47.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:47.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:47.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:47.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:47.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:47.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:47.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf303aa] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:47.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:47.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616012265 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:47.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:47.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:47.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f3970e] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:47.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:47.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@711347162 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:47.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:21:47.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:21:47.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:47.123+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:47.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:47.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:47.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:47.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:47.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bf303aa]
2026-02-12T16:21:47.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:47.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:47.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:21:47.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:47.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f3970e]
2026-02-12T16:21:47.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:47.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:47.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:21:47.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:49.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-12T16:21:49.093+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-12T16:21:49.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/logout
2026-02-12T16:21:49.095+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-12T16:21:49.095+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-12T16:21:49.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-12T16:21:49.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI5IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-12T16:21:49.103+09:00  INFO 17136 --- [http-nio-8080-exec-7] SECURITY                                 : LOGOUT userId=9
2026-02-12T16:21:49.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:49.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-12T16:21:49.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:53.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-12T16:21:53.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-12T16:21:53.374+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:21:53.376+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-12T16:21:53.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-12T16:21:53.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-12T16:21:53.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=ksu14044, password=khs1704!)]
2026-02-12T16:21:53.397+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: ksu14044
2026-02-12T16:21:53.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:53.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2649c22] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:53.401+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@91491460 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:53.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-12T16:21:53.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: ksu14044(String)
2026-02-12T16:21:53.406+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-12T16:21:53.407+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2649c22]
2026-02-12T16:21:53.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:53.507+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9fb4d66] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:53.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455193268 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:53.511+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:21:53.512+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-02-12T16:21:53.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 0
2026-02-12T16:21:53.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9fb4d66]
2026-02-12T16:21:53.516+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 10, role: SUPERADMIN, companyId: null
2026-02-12T16:21:53.516+09:00  INFO 17136 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=10 username=ksu14044 role=SUPERADMIN
2026-02-12T16:21:53.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:53.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=10, username=ksu14044, password= (truncated)...]
2026-02-12T16:21:53.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-12T16:21:54.021+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-12T16:21:54.031+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/companies
2026-02-12T16:21:54.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-12T16:21:54.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-12T16:21:54.034+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-12T16:21:54.035+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.036+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb8f051] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.045+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@312351156 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:54.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-12T16:21:54.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-02-12T16:21:54.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 0
2026-02-12T16:21:54.112+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3eb8f051]
2026-02-12T16:21:54.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:21:54.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.300+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:54.301+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-02-12T16:21:54.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-02-12T16:21:54.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-02-12T16:21:54.311+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-02-12T16:21:54.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-02-12T16:21:54.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:54.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-02-12T16:21:54.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-02-12T16:21:54.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-02-12T16:21:54.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-02-12T16:21:54.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-02-12T16:21:54.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:54.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:54.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-02-12T16:21:54.342+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-02-12T16:21:54.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-02-12T16:21:54.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:21:54.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-02-12T16:21:54.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-02-12T16:21:54.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-02-12T16:21:54.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-02-12T16:21:54.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-02-12T16:21:54.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:54.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-02-12T16:21:54.358+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-02-12T16:21:54.359+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-02-12T16:21:54.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-02-12T16:21:54.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-02-12T16:21:54.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:54.364+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-02-12T16:21:54.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-02-12T16:21:54.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-02-12T16:21:54.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-02-12T16:21:54.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-02-12T16:21:54.379+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:54.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-02-12T16:21:54.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-02-12T16:21:54.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-02-12T16:21:54.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-02-12T16:21:54.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-02-12T16:21:54.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-02-12T16:21:54.387+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-02-12T16:21:54.388+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b50ce26] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.396+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.397+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.400+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.401+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.401+09:00  INFO 17136 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 10
2026-02-12T16:21:54.402+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 10
2026-02-12T16:21:54.402+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 10
2026-02-12T16:21:54.403+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 10
2026-02-12T16:21:54.412+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 10
2026-02-12T16:21:54.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.417+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c6b1337] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.417+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.417+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@81f54c5] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.421+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1144236179 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:54.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e7e611] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e35dcd0] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@12202996 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:54.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f05eb6] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:54.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:54.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2087476454 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:54.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1322317609 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:54.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@614449406 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:54.432+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023407323 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:54.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:54.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:21:54.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:54.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:54.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:54.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:54.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:54.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:54.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:21:54.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:54.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b50ce26]
2026-02-12T16:21:54.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c6b1337]
2026-02-12T16:21:54.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:21:54.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.468+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:54.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:54.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-02-12T16:21:54.477+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c25fa88] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.478+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@81f54c5]
2026-02-12T16:21:54.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e7e611]
2026-02-12T16:21:54.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:54.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-02-12T16:21:54.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1776099929 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:54.494+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 29
2026-02-12T16:21:54.501+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 10
2026-02-12T16:21:54.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-02-12T16:21:54.511+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:54.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-02-12T16:21:54.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:54.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=sooyoung, passwo (truncated)...]
2026-02-12T16:21:54.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=10, companyCode=NXXZW0, (truncated)...]
2026-02-12T16:21:54.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-02-12T16:21:54.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.534+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-02-12T16:21:54.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-02-12T16:21:54.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:54.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:54.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.581+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-02-12T16:21:54.586+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-02-12T16:21:54.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c25fa88]
2026-02-12T16:21:54.604+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 10
2026-02-12T16:21:54.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-02-12T16:21:54.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-02-12T16:21:54.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:54.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-02-12T16:21:54.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-02-12T16:21:54.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:54.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e7fe1] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a529b] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-02-12T16:21:54.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-02-12T16:21:54.622+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@207707095 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:54.623+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625008347 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:54.623+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:54.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:54.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:54.629+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:54.629+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 10
2026-02-12T16:21:54.630+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 10
2026-02-12T16:21:54.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:54.634+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:54.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fe9ecc] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd3deff] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e35dcd0]
2026-02-12T16:21:54.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@451801648 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:54.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:54.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:54.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1007939255 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:54.645+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 10
2026-02-12T16:21:54.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:54.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26a529b]
2026-02-12T16:21:54.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:54.650+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:54.652+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:54.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.667+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=10, companyId (truncated)...]
2026-02-12T16:21:54.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315eeb8] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:54.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:54.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1396411083 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:54.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:54.701+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c2e7fe1]
2026-02-12T16:21:54.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:54.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:54.703+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:21:54.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bea60fc] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:54.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1083650389 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:54.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-02-12T16:21:54.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:54.713+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:21:54.715+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:54.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:54.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:54.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68fe9ecc]
2026-02-12T16:21:54.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd3deff]
2026-02-12T16:21:54.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315eeb8]
2026-02-12T16:21:54.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:54.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:54.750+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 1
2026-02-12T16:21:54.750+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 29
2026-02-12T16:21:54.753+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 10
2026-02-12T16:21:54.754+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.754+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f05eb6]
2026-02-12T16:21:54.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.757+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.757+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.757+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61518e3d] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.758+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 7
2026-02-12T16:21:54.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae2fcea] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=sooyoung, passwo (truncated)...]
2026-02-12T16:21:54.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=10, companyCode=NXXZW0, (truncated)...]
2026-02-12T16:21:54.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1293798529 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:54.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@302142606 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:54.767+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.767+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:54.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.769+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:54.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, am (truncated)...]
2026-02-12T16:21:54.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:21:54.779+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:21:54.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-02-12T16:21:54.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-02-12T16:21:54.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:54.780+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.782+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-02-12T16:21:54.782+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-02-12T16:21:54.786+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:54.793+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-02-12T16:21:54.794+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-02-12T16:21:54.795+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-02-12T16:21:54.795+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:21:54.797+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-02-12T16:21:54.797+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-02-12T16:21:54.798+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:54.799+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.811+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.803+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:54.803+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-02-12T16:21:54.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.811+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:54.811+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.811+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-02-12T16:21:54.812+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.812+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:21:54.813+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.814+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:54.816+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:21:54.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae2fcea]
2026-02-12T16:21:54.817+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 10
2026-02-12T16:21:54.818+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:54.820+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.820+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 10
2026-02-12T16:21:54.821+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.822+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.823+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:54.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:54.825+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.826+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.827+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ea98ec] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.828+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a6174e] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.828+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61518e3d]
2026-02-12T16:21:54.829+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 1
2026-02-12T16:21:54.829+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77db6c0b] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1425156247 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:54.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1379824460 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:54.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766753658 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:54.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:54.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:21:54.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:54.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a741c9a] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.834+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:54.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd0b4ef] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:54.834+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-02-12T16:21:54.834+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967746193 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:54.835+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146327431 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:54.835+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.837+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.837+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:54.838+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:21:54.841+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-02-12T16:21:54.841+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ea98ec]
2026-02-12T16:21:54.839+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.839+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:54.840+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.841+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:21:54.842+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:21:54.844+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:54.844+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.845+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:54.849+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.850+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.851+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:54.853+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:21:54.858+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:54.858+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:21:54.860+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd0b4ef]
2026-02-12T16:21:54.861+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:54.861+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.862+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38fd635] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:54.865+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228041575 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:54.867+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:21:54.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:54.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bea60fc]
2026-02-12T16:21:54.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-02-12T16:21:54.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:54.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:54.884+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.888+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:54.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:54.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:54.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a6174e]
2026-02-12T16:21:54.896+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-02-12T16:21:54.896+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 10
2026-02-12T16:21:54.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.900+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-02-12T16:21:54.902+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.905+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38fd635]
2026-02-12T16:21:54.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:54.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:54.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=10, companyId (truncated)...]
2026-02-12T16:21:54.911+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:21:54.912+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.914+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.922+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.929+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.929+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.931+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:21:54.931+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:54.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:54.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.945+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:54.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:54.950+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.950+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.951+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:54.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:54.952+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:54.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:54.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:54.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:54.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a741c9a]
2026-02-12T16:21:54.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77db6c0b]
2026-02-12T16:21:54.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.956+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 7
2026-02-12T16:21:54.956+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-02-12T16:21:54.957+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:54.957+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:54.957+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, am (truncated)...]
2026-02-12T16:21:54.963+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:57.038+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-12T16:21:57.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:57.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:57.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-12T16:21:57.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:57.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:21:57.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/companies
2026-02-12T16:21:57.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-12T16:21:57.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:21:57.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:57.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-12T16:21:57.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:57.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:57.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-12T16:21:57.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:57.200+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:57.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:57.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112bf1b2] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c9f128] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1755992d] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1804210573 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:57.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406862837 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:57.212+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-12T16:21:57.213+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:57.213+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@109883653 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:57.213+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-02-12T16:21:57.214+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:21:57.214+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:57.217+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:21:57.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 0
2026-02-12T16:21:57.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:21:57.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33c9f128]
2026-02-12T16:21:57.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@112bf1b2]
2026-02-12T16:21:57.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:21:57.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:21:57.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:21:57.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1755992d]
2026-02-12T16:21:57.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.229+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:21:57.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.281+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:21:57.285+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:21:57.286+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:21:57.286+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:21:57.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:21:57.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:21:57.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6711916] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.289+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2066893203 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:57.289+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:21:57.290+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:21:57.294+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:21:57.294+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6711916]
2026-02-12T16:21:57.295+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.295+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:21:57.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.319+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-02-12T16:21:57.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-02-12T16:21:57.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-02-12T16:21:57.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-02-12T16:21:57.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-02-12T16:21:57.324+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:57.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-02-12T16:21:57.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-02-12T16:21:57.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-02-12T16:21:57.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-02-12T16:21:57.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-02-12T16:21:57.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:57.334+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-02-12T16:21:57.335+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-02-12T16:21:57.335+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-02-12T16:21:57.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-02-12T16:21:57.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-02-12T16:21:57.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-02-12T16:21:57.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-02-12T16:21:57.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-02-12T16:21:57.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-02-12T16:21:57.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:57.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-02-12T16:21:57.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-02-12T16:21:57.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-02-12T16:21:57.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-02-12T16:21:57.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-02-12T16:21:57.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-02-12T16:21:57.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-02-12T16:21:57.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:21:57.342+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-02-12T16:21:57.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-02-12T16:21:57.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-02-12T16:21:57.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-02-12T16:21:57.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-02-12T16:21:57.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:57.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-02-12T16:21:57.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-02-12T16:21:57.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-02-12T16:21:57.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-02-12T16:21:57.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-02-12T16:21:57.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:21:57.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.349+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 10
2026-02-12T16:21:57.349+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 10
2026-02-12T16:21:57.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.350+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 10
2026-02-12T16:21:57.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.352+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 10
2026-02-12T16:21:57.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f7081f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2856eaa4] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.353+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 10
2026-02-12T16:21:57.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b738008] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.354+09:00  INFO 17136 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 1
2026-02-12T16:21:57.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1749025918 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:57.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.356+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6696072b] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.356+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:57.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3195d600] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1851555306 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:57.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1103823174 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:57.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a210c4e] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@26933926 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:57.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:57.359+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@742914818 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:57.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:57.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:57.361+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:57.361+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:57.362+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.362+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:57.362+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898353265 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:57.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:57.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:57.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66f7081f]
2026-02-12T16:21:57.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b738008]
2026-02-12T16:21:57.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2856eaa4]
2026-02-12T16:21:57.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:57.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:57.369+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9b23bb] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.370+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 10
2026-02-12T16:21:57.370+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 29
2026-02-12T16:21:57.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:21:57.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:57.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953657095 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:57.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.371+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a210c4e]
2026-02-12T16:21:57.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6696072b]
2026-02-12T16:21:57.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:57.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=10, companyCode=NXXZW0, (truncated)...]
2026-02-12T16:21:57.374+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=sooyoung, passwo (truncated)...]
2026-02-12T16:21:57.374+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.376+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 10
2026-02-12T16:21:57.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.379+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35337bc9] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.380+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:57.383+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-02-12T16:21:57.387+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-02-12T16:21:57.388+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@26388240 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:57.388+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=10, companyId (truncated)...]
2026-02-12T16:21:57.389+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:57.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a9b23bb]
2026-02-12T16:21:57.390+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-02-12T16:21:57.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:21:57.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-02-12T16:21:57.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.395+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-02-12T16:21:57.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-02-12T16:21:57.400+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:57.401+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-02-12T16:21:57.407+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-02-12T16:21:57.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-02-12T16:21:57.404+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20230bbe] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-02-12T16:21:57.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.410+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-02-12T16:21:57.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-02-12T16:21:57.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406563066 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:57.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-02-12T16:21:57.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-02-12T16:21:57.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-02-12T16:21:57.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:57.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.415+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:57.415+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35337bc9]
2026-02-12T16:21:57.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-02-12T16:21:57.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:57.417+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.418+09:00  INFO 17136 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:21:57.418+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 10
2026-02-12T16:21:57.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-02-12T16:21:57.421+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.421+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 10
2026-02-12T16:21:57.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:21:57.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:57.427+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae4bb3f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.432+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630823613 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:21:57.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:57.431+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60571f2a] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.433+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-02-12T16:21:57.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:57.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-02-12T16:21:57.436+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 10
2026-02-12T16:21:57.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:57.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104323711 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:57.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:57.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-02-12T16:21:57.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:21:57.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:57.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-02-12T16:21:57.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d05d9d6] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:21:57.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20230bbe]
2026-02-12T16:21:57.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-02-12T16:21:57.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:57.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:57.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@541381323 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:57.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ae4bb3f]
2026-02-12T16:21:57.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:57.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe78d15] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.449+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.450+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 29
2026-02-12T16:21:57.450+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1061582257 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:57.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:21:57.451+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 10
2026-02-12T16:21:57.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:57.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3195d600]
2026-02-12T16:21:57.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:57.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60571f2a]
2026-02-12T16:21:57.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=sooyoung, passwo (truncated)...]
2026-02-12T16:21:57.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:57.453+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 7
2026-02-12T16:21:57.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a434bd6] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d05d9d6]
2026-02-12T16:21:57.459+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 10
2026-02-12T16:21:57.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd645e6] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@10467226 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:57.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, am (truncated)...]
2026-02-12T16:21:57.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-02-12T16:21:57.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1939911161 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:57.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:57.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:57.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=10, companyCode=NXXZW0, (truncated)...]
2026-02-12T16:21:57.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.471+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-02-12T16:21:57.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:21:57.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:57.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-02-12T16:21:57.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:57.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-02-12T16:21:57.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-02-12T16:21:57.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:21:57.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:21:57.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-02-12T16:21:57.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:21:57.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.493+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 10
2026-02-12T16:21:57.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:21:57.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd645e6]
2026-02-12T16:21:57.494+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:57.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:57.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.497+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647c49b8] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526b8e2] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:21:57.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1122988917 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:21:57.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@482747605 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:57.500+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 1
2026-02-12T16:21:57.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:57.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:21:57.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.502+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.502+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:21:57.503+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fdf9a] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@624240844 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:57.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:21:57.509+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:21:57.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:57.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:57.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.511+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:57.512+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:57.512+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:21:57.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:21:57.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a434bd6]
2026-02-12T16:21:57.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:57.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19fdf9a]
2026-02-12T16:21:57.516+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 10
2026-02-12T16:21:57.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:21:57.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:57.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac14401] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:21:57.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=10, companyId (truncated)...]
2026-02-12T16:21:57.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1163739084 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:21:57.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@526b8e2]
2026-02-12T16:21:57.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:21:57.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:57.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-02-12T16:21:57.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55514bb8] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:57.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:57.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:57.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2015116619 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:21:57.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:21:57.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.534+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:21:57.537+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:57.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-02-12T16:21:57.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ac14401]
2026-02-12T16:21:57.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:57.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:21:57.546+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:21:57.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:57.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:21:57.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:21:57.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:21:57.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:57.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fe78d15]
2026-02-12T16:21:57.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:57.568+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.569+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-02-12T16:21:57.570+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:21:57.571+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.582+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.582+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:21:57.583+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.584+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:57.586+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@647c49b8]
2026-02-12T16:21:57.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.589+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 7
2026-02-12T16:21:57.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:21:57.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, am (truncated)...]
2026-02-12T16:21:57.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:57.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:21:57.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:21:57.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:21:57.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:21:57.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55514bb8]
2026-02-12T16:21:57.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:57.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-02-12T16:21:57.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:58.966+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:58.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:21:58.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:58.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:21:58.979+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:58.983+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:21:58.984+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:58.985+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:21:59.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:21:59.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:21:59.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:21:59.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:59.009+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:21:59.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:21:59.013+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:21:59.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:59.013+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:59.013+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:21:59.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:21:59.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:59.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:59.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:21:59.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:21:59.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:21:59.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:59.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:59.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:59.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:21:59.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:21:59.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:21:59.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:21:59.031+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:21:59.032+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:21:59.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:21:59.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:21:59.034+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:21:59.034+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:59.034+09:00  WARN 17136 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:21:59.035+09:00  WARN 17136 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:21:59.035+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:21:59.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9151c8] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:59.038+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:59.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:59.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481b470f] was not registered for synchronization because synchronization is not active
2026-02-12T16:21:59.040+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:21:59.044+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:21:59.046+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:21:59.047+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@537783409 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:21:59.048+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:21:59.048+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:21:59.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:21:59.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:21:59.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:21:59.054+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219088508 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:21:59.056+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:21:59.057+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:21:59.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:21:59.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9151c8]
2026-02-12T16:21:59.061+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:21:59.063+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:21:59.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:21:59.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:21:59.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:21:59.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:21:59.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@481b470f]
2026-02-12T16:21:59.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:21:59.068+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:21:59.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:21:59.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:21:59.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:21:59.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:21:59.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:21:59.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:21:59.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:21:59.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:21:59.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:21:59.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:21:59.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:21:59.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:21:59.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:21:59.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:21:59.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:59.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:21:59.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:21:59.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:21:59.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:21:59.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:59.077+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:21:59.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:21:59.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:59.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:21:59.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:21:59.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:59.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:21:59.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:59.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:21:59.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:21:59.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:21:59.367+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:59.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:59.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:59.375+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:59.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:21:59.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:21:59.380+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:21:59.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:21:59.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:21:59.382+09:00  WARN 17136 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:21:59.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:21:59.383+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:59.383+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:21:59.384+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:21:59.385+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:21:59.387+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:21:59.395+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:21:59.394+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:21:59.397+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:21:59.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:21:59.427+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:21:59.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:22:06.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=20
2026-02-12T16:22:06.780+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=20
2026-02-12T16:22:06.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:22:06.789+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=20
2026-02-12T16:22:06.792+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=20", parameters={masked}
2026-02-12T16:22:06.792+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:22:06.795+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:06.804+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:06.810+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 20
2026-02-12T16:22:06.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:06.837+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162d87af] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:06.848+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438239763 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:06.849+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:22:06.850+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:22:06.853+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:22:06.854+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@162d87af]
2026-02-12T16:22:06.854+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:06.854+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4201e808] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:06.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2126356704 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:06.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:22:06.857+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 20(Integer), 0(Integer)
2026-02-12T16:22:06.869+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 20
2026-02-12T16:22:06.870+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4201e808]
2026-02-12T16:22:06.871+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:22:06.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:06.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:22:06.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.219+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses/72
2026-02-12T16:22:10.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses/72
2026-02-12T16:22:10.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses/72
2026-02-12T16:22:10.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses/72
2026-02-12T16:22:10.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses/72", parameters={}
2026-02-12T16:22:10.228+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseDetailForSuperAdmin(Long)
2026-02-12T16:22:10.229+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:10.231+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:10.232+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 요청 (SUPERADMIN) - userId: 10, expenseReportId: 72
2026-02-12T16:22:10.232+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298a79b3] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648459459 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.E.selectExpenseReportByIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.expense_report_id = ?
2026-02-12T16:22:10.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.E.selectExpenseReportByIdForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.247+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.E.selectExpenseReportByIdForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@298a79b3]
2026-02-12T16:22:10.248+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dc51b0] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@732622844 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .b.m.E.selectExpenseDetailsForSuperAdmin : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ?
2026-02-12T16:22:10.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .b.m.E.selectExpenseDetailsForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .b.m.E.selectExpenseDetailsForSuperAdmin : <==      Total: 2
2026-02-12T16:22:10.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46dc51b0]
2026-02-12T16:22:10.255+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a5410c] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1431359321 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] i.b.m.E.selectApprovalLinesForSuperAdmin : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al LEFT JOIN user_tb u ON al.approver_id = u.user_id LEFT JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? ORDER BY al.step_order ASC
2026-02-12T16:22:10.264+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] i.b.m.E.selectApprovalLinesForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.267+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] i.b.m.E.selectApprovalLinesForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.267+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71a5410c]
2026-02-12T16:22:10.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a37ec48] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@297892131 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] ctReceiptsByExpenseReportIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? ORDER BY r.uploaded_at DESC
2026-02-12T16:22:10.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] ctReceiptsByExpenseReportIdForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] ctReceiptsByExpenseReportIdForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.277+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a37ec48]
2026-02-12T16:22:10.278+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 완료 (SUPERADMIN) - expenseReportId: 72
2026-02-12T16:22:10.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterI (truncated)...]
2026-02-12T16:22:10.280+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:22:10.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:22:10.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses/72
2026-02-12T16:22:10.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-12T16:22:10.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:22:10.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:22:10.582+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:22:10.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:22:10.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses/72
2026-02-12T16:22:10.570+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-12T16:22:10.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:22:10.585+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:22:10.586+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses/72
2026-02-12T16:22:10.583+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:22:10.584+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:22:10.587+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-12T16:22:10.587+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:22:10.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses/72
2026-02-12T16:22:10.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:22:10.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:22:10.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/users/me/signatures
2026-02-12T16:22:10.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses/72
2026-02-12T16:22:10.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:22:10.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:22:10.592+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-12T16:22:10.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:22:10.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses/72
2026-02-12T16:22:10.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses/72", parameters={}
2026-02-12T16:22:10.598+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:22:10.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:22:10.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-12T16:22:10.601+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:22:10.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseDetailForSuperAdmin(Long)
2026-02-12T16:22:10.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses/72
2026-02-12T16:22:10.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-12T16:22:10.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:22:10.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:10.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses/72
2026-02-12T16:22:10.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:10.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f3662ea] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7faffc79] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:22:10.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses/72", parameters={}
2026-02-12T16:22:10.610+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 요청 (SUPERADMIN) - userId: 10, expenseReportId: 72
2026-02-12T16:22:10.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=회사 정보를 찾을 수 없습니다., data=null)]
2026-02-12T16:22:10.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:22:10.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@894121215 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:10.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1211718008 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:22:10.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseDetailForSuperAdmin(Long)
2026-02-12T16:22:10.616+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.616+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:22:10.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:22:10.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:10.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2358501d] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-12T16:22:10.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38625dc6] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:22:10.629+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:22:10.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseDetailForSuperAdmin(java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:10.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1450749330 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/users/me/signatures
2026-02-12T16:22:10.633+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 요청 (SUPERADMIN) - userId: 10, expenseReportId: 72
2026-02-12T16:22:10.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:22:10.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.E.selectExpenseReportByIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.expense_report_id = ?
2026-02-12T16:22:10.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-12T16:22:10.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:22:10.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@616822264 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:10.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f3662ea]
2026-02-12T16:22:10.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.E.selectExpenseReportByIdForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-12T16:22:10.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7faffc79]
2026-02-12T16:22:10.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bfefc49] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:22:10.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-12T16:22:10.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1418498378 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:10.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:22:10.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:22:10.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.E.selectExpenseReportByIdForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:22:10.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.E.selectExpenseReportByIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id WHERE r.expense_report_id = ?
2026-02-12T16:22:10.650+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.E.selectExpenseReportByIdForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=회사 정보를 찾을 수 없습니다., data=null)]
2026-02-12T16:22:10.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2358501d]
2026-02-12T16:22:10.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:22:10.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6033a9] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.667+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:22:10.669+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:22:10.681+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/users/pending
2026-02-12T16:22:10.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:22:10.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@760826496 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:22:10.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.E.selectExpenseReportByIdForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.681+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:22:10.681+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:22:10.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .b.m.E.selectExpenseDetailsForSuperAdmin : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ?
2026-02-12T16:22:10.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:22:10.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38625dc6]
2026-02-12T16:22:10.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bfefc49]
2026-02-12T16:22:10.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:22:10.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:22:10.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .b.m.E.selectExpenseDetailsForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:22:10.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:22:10.686+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:22:10.693+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:22:10.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:22:10.695+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0aa6ca] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.695+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .b.m.E.selectExpenseDetailsForSuperAdmin : <==      Total: 2
2026-02-12T16:22:10.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:22:10.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.701+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1366956438 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:10.702+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7d2cfe] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.703+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c6033a9]
2026-02-12T16:22:10.703+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556b570] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:22:10.711+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .b.m.E.selectExpenseDetailsForSuperAdmin : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ?
2026-02-12T16:22:10.712+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24dedd76] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.712+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1966457386 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.713+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ef2b50] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/users/pending
2026-02-12T16:22:10.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .b.m.E.selectExpenseDetailsForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@119761706 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:10.718+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:22:10.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@674561324 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:10.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:22:10.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:22:10.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .b.m.E.selectExpenseDetailsForSuperAdmin : <==      Total: 2
2026-02-12T16:22:10.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235144648 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:22:10.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-02-12T16:22:10.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:22:10.723+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:22:10.725+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:22:10.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d0aa6ca]
2026-02-12T16:22:10.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] i.b.m.E.selectApprovalLinesForSuperAdmin : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al LEFT JOIN user_tb u ON al.approver_id = u.user_id LEFT JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? ORDER BY al.step_order ASC
2026-02-12T16:22:10.728+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:22:10.728+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:22:10.729+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.729+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:22:10.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] i.b.m.E.selectApprovalLinesForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:22:10.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113ddc0a] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:22:10.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@556b570]
2026-02-12T16:22:10.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b7d2cfe]
2026-02-12T16:22:10.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21162406] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.734+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2045314065 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:10.734+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16ef2b50]
2026-02-12T16:22:10.735+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.735+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] i.b.m.E.selectApprovalLinesForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.735+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997518152 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:10.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] i.b.m.E.selectApprovalLinesForSuperAdmin : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al LEFT JOIN user_tb u ON al.approver_id = u.user_id LEFT JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? ORDER BY al.step_order ASC
2026-02-12T16:22:10.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.736+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:22:10.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24dedd76]
2026-02-12T16:22:10.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:22:10.737+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:22:10.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] i.b.m.E.selectApprovalLinesForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:22:10.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.743+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.744+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-02-12T16:22:10.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.750+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1144f8a5] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.763+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@180902421 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:22:10.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] ctReceiptsByExpenseReportIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? ORDER BY r.uploaded_at DESC
2026-02-12T16:22:10.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] i.b.m.E.selectApprovalLinesForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] ctReceiptsByExpenseReportIdForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@113ddc0a]
2026-02-12T16:22:10.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:10.768+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb4a27e] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:10.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:22:10.772+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1506318 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:10.775+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21162406]
2026-02-12T16:22:10.776+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] ctReceiptsByExpenseReportIdForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? ORDER BY r.uploaded_at DESC
2026-02-12T16:22:10.776+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] ctReceiptsByExpenseReportIdForSuperAdmin : ==> Parameters: 72(Long)
2026-02-12T16:22:10.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] ctReceiptsByExpenseReportIdForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-02-12T16:22:10.778+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1144f8a5]
2026-02-12T16:22:10.779+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.779+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 완료 (SUPERADMIN) - expenseReportId: 72
2026-02-12T16:22:10.782+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.785+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterI (truncated)...]
2026-02-12T16:22:10.786+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] ctReceiptsByExpenseReportIdForSuperAdmin : <==      Total: 1
2026-02-12T16:22:10.791+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fb4a27e]
2026-02-12T16:22:10.796+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 지출결의서 상세 조회 완료 (SUPERADMIN) - expenseReportId: 72
2026-02-12T16:22:10.796+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.799+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 상세 조회 성공, data=ExpenseReportDto(expenseReportId=72, drafterI (truncated)...]
2026-02-12T16:22:10.800+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:10.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:22:10.961+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:22:10.965+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:22:10.965+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:22:10.966+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:22:10.966+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:22:10.967+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:22:10.967+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:22:10.967+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:22:10.967+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:22:10.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:22:10.968+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:22:10.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:22:10.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:22:10.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:22:10.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:22:10.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:22:10.971+09:00  WARN 17136 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:22:10.971+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:22:10.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.972+09:00  WARN 17136 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:22:10.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:22:10.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:10.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:22:10.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:22:10.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:22:10.974+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:22:10.976+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:22:13.035+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:22:13.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-02-12T16:22:13.038+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-02-12T16:22:13.040+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-02-12T16:22:13.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/users
2026-02-12T16:22:13.046+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-02-12T16:22:13.046+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-02-12T16:22:13.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/subscriptions
2026-02-12T16:22:13.053+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/payments
2026-02-12T16:22:13.047+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-02-12T16:22:13.047+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/summary
2026-02-12T16:22:13.050+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/companies
2026-02-12T16:22:13.054+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/expenses?page=1&size=1
2026-02-12T16:22:13.061+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:22:13.061+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-02-12T16:22:13.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-02-12T16:22:13.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-02-12T16:22:13.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-02-12T16:22:13.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-02-12T16:22:13.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-02-12T16:22:13.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expenses/pending-approvals
2026-02-12T16:22:13.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-02-12T16:22:13.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-02-12T16:22:13.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-02-12T16:22:13.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-02-12T16:22:13.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-02-12T16:22:13.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:22:13.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-02-12T16:22:13.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-02-12T16:22:13.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-02-12T16:22:13.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-02-12T16:22:13.077+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-02-12T16:22:13.077+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:22:13.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-02-12T16:22:13.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-02-12T16:22:13.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-02-12T16:22:13.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-02-12T16:22:13.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-02-12T16:22:13.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:22:13.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-02-12T16:22:13.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-02-12T16:22:13.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-02-12T16:22:13.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-02-12T16:22:13.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b530573] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.081+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.081+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.081+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1964943474 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:13.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.086+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 10
2026-02-12T16:22:13.086+09:00  INFO 17136 --- [http-nio-8080-exec-8] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 10
2026-02-12T16:22:13.087+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 10
2026-02-12T16:22:13.088+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 10
2026-02-12T16:22:13.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:22:13.089+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 10
2026-02-12T16:22:13.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), null
2026-02-12T16:22:13.093+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138eff25] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7837add8] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a772d6a] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3398ba25] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.095+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd7f7dc] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:22:13.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017232833 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:13.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68190270 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:22:13.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88294438 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:13.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1648287091 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:13.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b530573]
2026-02-12T16:22:13.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2135226253 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:22:13.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:22:13.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:22:13.098+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:22:13.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:22:13.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:22:13.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:22:13.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:22:13.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:22:13.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:22:13.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:22:13.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:22:13.108+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a772d6a]
2026-02-12T16:22:13.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:22:13.113+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:22:13.113+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 29
2026-02-12T16:22:13.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:22:13.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:22:13.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:22:13.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:22:13.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3398ba25]
2026-02-12T16:22:13.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7837add8]
2026-02-12T16:22:13.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-02-12T16:22:13.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:22:13.119+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=sooyoung, passwo (truncated)...]
2026-02-12T16:22:13.119+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 10
2026-02-12T16:22:13.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:22:13.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:22:13.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=10, companyCode=NXXZW0, (truncated)...]
2026-02-12T16:22:13.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fad2700] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@138eff25]
2026-02-12T16:22:13.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/summary
2026-02-12T16:22:13.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@459202521 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:13.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:22:13.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.132+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 10
2026-02-12T16:22:13.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/summary
2026-02-12T16:22:13.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/users
2026-02-12T16:22:13.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:22:13.136+09:00  INFO 17136 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 1
2026-02-12T16:22:13.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/summary
2026-02-12T16:22:13.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/users
2026-02-12T16:22:13.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:22:13.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=10, companyId (truncated)...]
2026-02-12T16:22:13.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/summary", parameters={}
2026-02-12T16:22:13.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/users
2026-02-12T16:22:13.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7cd5e6] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getDashboardSummary()
2026-02-12T16:22:13.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:22:13.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/users", parameters={}
2026-02-12T16:22:13.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1726664530 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:13.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fad2700]
2026-02-12T16:22:13.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/companies
2026-02-12T16:22:13.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllUsers()
2026-02-12T16:22:13.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:22:13.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:22:13.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getDashboardSummary(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:22:13.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/companies
2026-02-12T16:22:13.154+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.controller.SuperAdminController    : 대시보드 요약 통계 조회 요청 - userId: 10
2026-02-12T16:22:13.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbbc718] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllUsers(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/companies
2026-02-12T16:22:13.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/companies", parameters={}
2026-02-12T16:22:13.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@725115528 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:13.160+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 요청 - userId: 10
2026-02-12T16:22:13.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllCompanies()
2026-02-12T16:22:13.162+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b8ce921] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.162+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:22:13.162+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:22:13.162+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@878116011 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:13.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:22:13.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a7cd5e6]
2026-02-12T16:22:13.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a1404d] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:22:13.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllCompanies(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:22:13.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.165+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503919438 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:13.167+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 요청 - userId: 10
2026-02-12T16:22:13.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:22:13.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b428df] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==>  Preparing: SELECT user_id, username, korean_name, email, position, role, is_active, company_id, approval_status, created_at, updated_at FROM user_tb ORDER BY user_id
2026-02-12T16:22:13.168+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:22:13.169+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1592464522 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:13.170+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : ==> Parameters: 
2026-02-12T16:22:13.170+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@755de3dc] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:22:13.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:22:13.171+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:22:13.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1471636791 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:22:13.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:22:13.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b8ce921]
2026-02-12T16:22:13.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectAllUsers   : <==      Total: 29
2026-02-12T16:22:13.174+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-02-12T16:22:13.177+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:22:13.178+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:22:13.178+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.178+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73a1404d]
2026-02-12T16:22:13.178+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dbbc718]
2026-02-12T16:22:13.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52667444] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.180+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.controller.SuperAdminController    : 전체 사용자 목록 조회 완료 - count: 29
2026-02-12T16:22:13.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:22:13.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-02-12T16:22:13.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1855933128 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:13.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd7f7dc]
2026-02-12T16:22:13.182+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 사용자 목록 조회 성공, data=[UserDto(userId=1, username=sooyoung, passwo (truncated)...]
2026-02-12T16:22:13.182+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:22:13.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501b4d67] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52b428df]
2026-02-12T16:22:13.183+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==>  Preparing: SELECT * FROM company_tb ORDER BY created_at DESC
2026-02-12T16:22:13.183+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 7
2026-02-12T16:22:13.184+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@755de3dc]
2026-02-12T16:22:13.184+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.184+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@945773006 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:22:13.184+09:00  INFO 17136 --- [http-nio-8080-exec-4] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:22:13.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.185+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.186+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 전체 회사 목록 조회 완료 - count: 10
2026-02-12T16:22:13.187+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/subscriptions
2026-02-12T16:22:13.188+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:22:13.188+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.189+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, am (truncated)...]
2026-02-12T16:22:13.189+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.190+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 회사 목록 조회 성공, data=[CompanyDto(companyId=10, companyCode=NXXZW0, (truncated)...]
2026-02-12T16:22:13.190+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/subscriptions
2026-02-12T16:22:13.192+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:22:13.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/subscriptions
2026-02-12T16:22:13.203+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/payments
2026-02-12T16:22:13.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/subscriptions", parameters={}
2026-02-12T16:22:13.204+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:22:13.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.findAll       : <==      Total: 10
2026-02-12T16:22:13.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/payments
2026-02-12T16:22:13.216+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllSubscriptions()
2026-02-12T16:22:13.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/expenses
2026-02-12T16:22:13.223+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:22:13.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52667444]
2026-02-12T16:22:13.228+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/payments
2026-02-12T16:22:13.229+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.229+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/expenses?page=1&size=1
2026-02-12T16:22:13.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.232+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/payments", parameters={}
2026-02-12T16:22:13.233+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllSubscriptions(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/expenses?page=1&size=1", parameters={masked}
2026-02-12T16:22:13.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e1270b] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getAllPayments()
2026-02-12T16:22:13.235+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 요청 - userId: 10
2026-02-12T16:22:13.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getExpenseListForSuperAdmin(int, int, String, String, Long, Long, String[], String, Boolean, String, Long)
2026-02-12T16:22:13.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:22:13.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@314882407 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:13.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:22:13.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getAllPayments(); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e7663dc] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:22:13.239+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2005552065 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:13.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getExpenseListForSuperAdmin(int,int,java.lang.String,java.lang.String,java.lang.Long,java.lang.Long,java.lang.String[],java.lang.String,java.lang.Boolean,java.lang.String,java.lang.Long); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:13.239+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:22:13.239+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 요청 - userId: 10
2026-02-12T16:22:13.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.243+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.240+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.SubscriptionMapper.findAll  : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id ORDER BY s.created_at DESC
2026-02-12T16:22:13.240+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 요청 - userId: 10, companyId: null, page: 1, size: 1
2026-02-12T16:22:13.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:22:13.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.SubscriptionMapper.findAll  : ==> Parameters: 
2026-02-12T16:22:13.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0bf71] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@144c7250] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1307942535 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:22:13.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@236250600 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:13.249+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:22:13.250+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:22:13.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : ==>  Preparing: SELECT COUNT(*) FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id
2026-02-12T16:22:13.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.251+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:22:13.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : ==> Parameters: 
2026-02-12T16:22:13.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:22:13.254+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:22:13.257+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:22:13.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:22:13.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.261+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.261+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.countExpenseListForSuperAdmin  : <==      Total: 1
2026-02-12T16:22:13.261+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e1270b]
2026-02-12T16:22:13.263+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.mapper.SubscriptionMapper.findAll  : <==      Total: 10
2026-02-12T16:22:13.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:22:13.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@144c7250]
2026-02-12T16:22:13.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e7663dc]
2026-02-12T16:22:13.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:22:13.266+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:13.266+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b02838a] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.267+09:00  INFO 17136 --- [http-nio-8080-exec-9] c.i.b.controller.SuperAdminController    : 전체 구독 목록 조회 완료 - count: 10
2026-02-12T16:22:13.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e48d391] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:13.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555697676 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:13.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@434234106 wrapping com.mysql.cj.jdbc.ConnectionImpl@583d9aee] will not be managed by Spring
2026-02-12T16:22:13.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:22:13.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 구독 목록 조회 성공, data=[SubscriptionDto(subscriptionId=10, companyId (truncated)...]
2026-02-12T16:22:13.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, c.company_name AS companyName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN company_tb c ON r.company_id = c.company_id ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:22:13.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:22:13.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:22:13.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:13.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : ==> Parameters: 1(Integer), 0(Integer)
2026-02-12T16:22:13.279+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@501b4d67]
2026-02-12T16:22:13.282+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.286+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-02-12T16:22:13.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.290+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:22:13.293+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListForSuperAdmin : <==      Total: 1
2026-02-12T16:22:13.294+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.297+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:22:13.297+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e48d391]
2026-02-12T16:22:13.298+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.298+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.controller.SuperAdminController    : 회사별 지출결의서 목록 조회 완료 - totalElements: 58
2026-02-12T16:22:13.299+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:22:13.299+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출결의서 목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expen (truncated)...]
2026-02-12T16:22:13.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:13.313+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:22:13.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.317+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.318+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:22:13.319+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:22:13.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:22:13.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.324+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:22:13.327+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:22:13.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:22:13.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e0bf71]
2026-02-12T16:22:13.330+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.controller.SuperAdminController    : 전체 결제 내역 조회 완료 - count: 7
2026-02-12T16:22:13.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:13.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=전체 결제 내역 조회 성공, data=[PaymentDto(paymentId=7, subscriptionId=9, am (truncated)...]
2026-02-12T16:22:13.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:22:13.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:13.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:13.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:22:13.342+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b02838a]
2026-02-12T16:22:13.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:13.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 요약 통계 조회 성공, data=AdminReportService.DashboardSummaryDto(tota (truncated)...]
2026-02-12T16:22:13.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:14.591+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/user-signups?from=2026-01-13&to=2026-02-12
2026-02-12T16:22:14.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/superadmin/reports/revenue?from=2026-01-13&to=2026-02-12
2026-02-12T16:22:14.599+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/user-signups?from=2026-01-13&to=2026-02-12
2026-02-12T16:22:14.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/superadmin/reports/revenue?from=2026-01-13&to=2026-02-12
2026-02-12T16:22:14.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/revenue
2026-02-12T16:22:14.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/revenue?from=2026-01-13&to=2026-02-12
2026-02-12T16:22:14.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/revenue?from=2026-01-13&to=2026-02-12", parameters={masked}
2026-02-12T16:22:14.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/superadmin/reports/user-signups
2026-02-12T16:22:14.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getRevenueTrend(LocalDate, LocalDate)
2026-02-12T16:22:14.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/superadmin/reports/user-signups?from=2026-01-13&to=2026-02-12
2026-02-12T16:22:14.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:14.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/superadmin/reports/user-signups?from=2026-01-13&to=2026-02-12", parameters={masked}
2026-02-12T16:22:14.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getRevenueTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:14.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SuperAdminController#getUserSignupTrend(LocalDate, LocalDate)
2026-02-12T16:22:14.623+09:00  INFO 17136 --- [http-nio-8080-exec-3] c.i.b.controller.SuperAdminController    : 매출 추이 조회 요청 - userId: 10, from: 2026-01-13, to: 2026-02-12
2026-02-12T16:22:14.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:14.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:14.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.SuperAdminController.getUserSignupTrend(java.time.LocalDate,java.time.LocalDate); target is of class [com.innersignature.backend.controller.SuperAdminController]
2026-02-12T16:22:14.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c863bb6] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:14.631+09:00  INFO 17136 --- [http-nio-8080-exec-2] c.i.b.controller.SuperAdminController    : 사용자 가입 추이 조회 요청 - userId: 10, from: 2026-01-13, to: 2026-02-12
2026-02-12T16:22:14.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:14.634+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38950b4f] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:14.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1521302472 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:22:14.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==>  Preparing: SELECT p.* FROM payment_tb p ORDER BY p.payment_date DESC, p.created_at DESC
2026-02-12T16:22:14.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917106234 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:22:14.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : ==> Parameters: 
2026-02-12T16:22:14.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUserSignupTrend          : ==>  Preparing: SELECT DATE(created_at) AS date, COUNT(*) AS count FROM user_tb WHERE DATE(created_at) BETWEEN ? AND ? GROUP BY DATE(created_at) ORDER BY date ASC
2026-02-12T16:22:14.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUserSignupTrend          : ==> Parameters: 2026-01-13(LocalDate), 2026-02-12(LocalDate)
2026-02-12T16:22:14.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:14.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 9(Long)
2026-02-12T16:22:14.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUserSignupTrend          : <==      Total: 2
2026-02-12T16:22:14.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38950b4f]
2026-02-12T16:22:14.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:22:14.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:14.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ======> Parameters: 1(Long)
2026-02-12T16:22:14.650+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자 가입 추이 조회 성공, data=[AdminReportService.UserSignupTrendDto(date= (truncated)...]
2026-02-12T16:22:14.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:14.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <======      Total: 1
2026-02-12T16:22:14.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:14.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:14.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 5(Long)
2026-02-12T16:22:14.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:14.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:14.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 3(Long)
2026-02-12T16:22:14.663+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:14.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.subscription_id = ? LIMIT 1
2026-02-12T16:22:14.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : ====> Parameters: 1(Long)
2026-02-12T16:22:14.666+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionMapper.findById      : <====      Total: 1
2026-02-12T16:22:14.667+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.PaymentMapper.findAll       : <==      Total: 7
2026-02-12T16:22:14.667+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c863bb6]
2026-02-12T16:22:14.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:14.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=매출 추이 조회 성공, data=[AdminReportService.RevenueTrendDto(date=2026-02 (truncated)...]
2026-02-12T16:22:14.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:20.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:22:20.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:22:20.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:22:20.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:22:20.117+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:22:20.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:22:20.118+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:22:20.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:22:20.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:22:20.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:22:20.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:22:20.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:22:20.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:22:20.122+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:22:20.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:22:20.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:22:20.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:22:20.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:22:20.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:22:20.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:22:20.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:22:20.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:22:20.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:22:20.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:22:20.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:22:20.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:22:20.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:22:20.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:22:20.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:22:20.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:22:20.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:22:20.133+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:22:20.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:22:20.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:22:20.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:22:20.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:20.134+09:00  WARN 17136 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:22:20.134+09:00  WARN 17136 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:22:20.134+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:22:20.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54536a3e] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:20.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:20.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:20.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:22:20.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:22:20.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:22:20.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416b36a5] was not registered for synchronization because synchronization is not active
2026-02-12T16:22:20.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1081891712 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:22:20.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:22:20.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:22:20.143+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:22:20.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:22:20.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:22:20.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:22:20.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1869968102 wrapping com.mysql.cj.jdbc.ConnectionImpl@419aa69b] will not be managed by Spring
2026-02-12T16:22:20.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:22:20.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:22:20.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:22:20.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54536a3e]
2026-02-12T16:22:20.150+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:22:20.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:22:20.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@416b36a5]
2026-02-12T16:22:20.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:22:20.151+09:00  INFO 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:22:20.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:22:20.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:22:20.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:22:20.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:22:20.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:22:20.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:22:20.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:22:20.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:22:20.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:22:20.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:22:20.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:22:20.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:22:20.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:20.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:22:20.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:22:20.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:22:20.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:22:20.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:20.156+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:22:20.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:22:20.161+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:20.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:22:20.163+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:22:20.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:22:20.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:22:20.342+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:22:20.343+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:22:20.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:22:20.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:22:20.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:22:20.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:22:20.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:22:20.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:22:20.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:22:20.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:22:20.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:22:20.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:22:20.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:22:20.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:22:20.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:22:20.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:22:20.350+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:22:20.350+09:00  WARN 17136 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:22:20.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:20.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:22:20.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:22:20.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:22:20.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:22:20.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:22:20.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:22:20.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:15.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:15.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:25:15.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:15.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:25:15.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:15.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:25:15.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:15.518+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:25:15.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:15.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:25:15.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:15.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:25:15.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:15.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:25:15.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:15.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:25:15.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:15.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:25:15.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:15.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:25:15.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:15.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:25:15.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:15.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:25:15.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:15.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:15.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:15.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:15.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:15.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:15.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:15.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:15.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:15.533+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:25:15.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:15.533+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:25:15.534+09:00  WARN 17136 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:15.534+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:15.534+09:00  WARN 17136 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:15.535+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:15.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:15.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5721cf] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:15.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:15.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae367e9] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:15.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:15.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:15.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:15.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:15.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:15.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:15.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1347125186 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:25:15.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247351972 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:25:15.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:25:15.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:25:15.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:25:15.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:25:15.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:25:15.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:25:15.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ae367e9]
2026-02-12T16:25:15.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e5721cf]
2026-02-12T16:25:15.556+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:25:15.557+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:25:15.557+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:25:15.557+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:25:15.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:25:15.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:25:15.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:25:15.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:25:15.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:25:15.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:25:15.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:25:15.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:25:15.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:25:15.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:25:15.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:25:15.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:25:15.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:25:15.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:25:15.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:25:15.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:25:15.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:25:15.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:25:15.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:25:15.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:25:15.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:25:15.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:25:15.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:15.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:15.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:25:15.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:25:15.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:15.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:15.774+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:15.774+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:15.781+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:15.781+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:15.782+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:15.783+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:15.783+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:15.783+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:15.783+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:15.783+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:15.784+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:15.784+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:15.784+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:15.784+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:15.785+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:15.785+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:15.785+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:15.785+09:00  WARN 17136 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:15.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:15.787+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:15.788+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:15.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:15.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:15.789+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:15.789+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:15.789+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:15.789+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:15.790+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:18.981+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-12T16:25:18.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-12T16:25:18.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/account-codes/list
2026-02-12T16:25:18.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-12T16:25:18.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-12T16:25:18.991+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-12T16:25:18.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:25:18.995+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:25:18.996+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:18.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4383bb] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:19.000+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227957014 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:25:19.000+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.A.findAll                        : ==>  Preparing: SELECT * FROM account_code_mapping_tb ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-12T16:25:19.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.A.findAll                        : ==> Parameters: 
2026-02-12T16:25:19.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.A.findAll                        : <==      Total: 12
2026-02-12T16:25:19.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4383bb]
2026-02-12T16:25:19.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:19.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-12T16:25:19.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:19.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:19.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:19.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:19.085+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:19.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:19.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:19.087+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:19.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:19.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:19.088+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:19.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:19.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:19.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:19.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:19.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:19.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:19.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:19.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:19.091+09:00  WARN 17136 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:19.092+09:00  WARN 17136 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:19.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:19.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:19.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:19.093+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:19.093+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:19.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:19.094+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:19.095+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:21.450+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:25:21.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:25:21.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:25:21.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:25:21.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:25:21.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:25:21.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:21.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:21.465+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:25:21.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:21.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18045699] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:21.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2084307650 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:25:21.471+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:25:21.475+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:25:21.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:25:21.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18045699]
2026-02-12T16:25:21.481+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:25:21.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:25:21.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:25:21.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:25:21.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:25:21.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:25:21.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:25:21.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:25:21.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:25:21.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:25:21.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:25:21.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:25:21.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:25:21.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:21.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:25:21.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:21.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:21.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:21.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:21.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:21.623+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:21.624+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:21.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:21.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:21.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:21.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:21.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:21.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:21.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:21.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:21.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:21.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:21.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:21.632+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:21.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:21.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:21.634+09:00  WARN 17136 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:21.634+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:21.634+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:21.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:21.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:21.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:21.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:21.642+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:22.701+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-12T16:25:22.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-12T16:25:22.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/account-codes/list
2026-02-12T16:25:22.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-12T16:25:22.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-12T16:25:22.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-12T16:25:22.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:25:22.711+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:25:22.712+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:22.713+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18fd7adc] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:22.714+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@505149729 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:25:22.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.A.findAll                        : ==>  Preparing: SELECT * FROM account_code_mapping_tb ORDER BY company_id DESC, category ASC, account_name ASC
2026-02-12T16:25:22.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.A.findAll                        : ==> Parameters: 
2026-02-12T16:25:22.763+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.A.findAll                        : <==      Total: 12
2026-02-12T16:25:22.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@18fd7adc]
2026-02-12T16:25:22.809+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:22.860+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[AccountCodeMappingDto(mappingId=3, companyId=null, ca (truncated)...]
2026-02-12T16:25:22.908+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:23.029+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:23.029+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:23.061+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:23.061+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:23.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:23.063+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:23.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:23.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:23.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:23.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:23.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:23.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:23.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:23.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:23.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:23.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:23.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:23.070+09:00  WARN 17136 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:23.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:23.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:23.071+09:00  WARN 17136 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:23.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:23.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:23.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:23.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:23.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:23.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:23.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:27.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:27.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:27.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:25:27.601+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/global
2026-02-12T16:25:27.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:27.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:25:27.615+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:27.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:25:27.616+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/global
2026-02-12T16:25:27.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:27.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:27.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:25:27.623+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/expense-categories/global
2026-02-12T16:25:27.624+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:27.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:27.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:25:27.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/global
2026-02-12T16:25:27.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:27.629+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:27.629+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:25:27.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/global", parameters={}
2026-02-12T16:25:27.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:27.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:27.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:27.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getGlobalCategories()
2026-02-12T16:25:27.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:27.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:27.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:27.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:27.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:27.634+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:27.634+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:25:27.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:27.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getGlobalCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:25:27.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:27.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:27.640+09:00  WARN 17136 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:27.640+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 시작
2026-02-12T16:25:27.641+09:00  WARN 17136 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:27.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6561b226] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:27.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:27.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:25:27.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:27.642+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:27.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ac02d8] was not registered for synchronization because synchronization is not active
2026-02-12T16:25:27.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:27.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:27.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1946101478 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:25:27.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:27.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:27.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:25:27.650+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:27.652+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:25:27.652+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2078152997 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:25:27.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findGlobalCategories           : ==>  Preparing: SELECT ec.*, 1 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec LEFT JOIN user_tb u ON ec.created_by = u.user_id WHERE ec.company_id IS NULL AND (ec.is_active IS NULL OR ec.is_active = 1) ORDER BY ec.display_order ASC, ec.category_name ASC
2026-02-12T16:25:27.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findGlobalCategories           : ==> Parameters: 
2026-02-12T16:25:27.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:25:27.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6561b226]
2026-02-12T16:25:27.658+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:25:27.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:25:27.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:25:27.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findGlobalCategories           : <==      Total: 12
2026-02-12T16:25:27.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:25:27.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35ac02d8]
2026-02-12T16:25:27.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:25:27.660+09:00  INFO 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리 조회 완료 - 항목 수: 12
2026-02-12T16:25:27.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:25:27.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=1, name=식비/회식, order=0, active=true
2026-02-12T16:25:27.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:25:27.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=3, name=거래처 접대, order=1, active=true
2026-02-12T16:25:27.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:25:27.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=2, name=출장/교통비, order=2, active=true
2026-02-12T16:25:27.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:25:27.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=4, name=사무용품, order=3, active=true
2026-02-12T16:25:27.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:25:27.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=5, name=수수료, order=4, active=true
2026-02-12T16:25:27.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:25:27.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=6, name=광고/홍보, order=5, active=true
2026-02-12T16:25:27.663+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:25:27.663+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=7, name=통신비, order=6, active=true
2026-02-12T16:25:27.663+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:25:27.663+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=8, name=차량비, order=7, active=true
2026-02-12T16:25:27.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=9, name=도서/인쇄, order=8, active=true
2026-02-12T16:25:27.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:27.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=10, name=세금/공과금, order=9, active=true
2026-02-12T16:25:27.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:25:27.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=11, name=급여, order=10, active=true
2026-02-12T16:25:27.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.service.ExpenseCategoryService     : 전역 카테고리: id=12, name=기타, order=11, active=true
2026-02-12T16:25:27.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:27.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:27.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:25:27.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:25:27.871+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:27.871+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:25:27.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:27.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:25:27.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:27.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/subscriptions/current
2026-02-12T16:25:27.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:27.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:25:27.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:27.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:25:27.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:27.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:25:27.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:27.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:25:27.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:27.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:25:27.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:27.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:25:27.880+09:00  WARN 17136 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:27.880+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:25:27.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:27.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:25:27.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:27.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:25:27.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:27.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:25:27.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:25:27.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:20.758+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-12T16:26:20.763+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-12T16:26:20.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: SUPERADMIN, companyId: null, uri: /api/logout
2026-02-12T16:26:20.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-12T16:26:20.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-12T16:26:20.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-12T16:26:20.767+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMCIsInVzZXJuYW1lIjo (truncated)...]
2026-02-12T16:26:20.772+09:00  INFO 17136 --- [http-nio-8080-exec-9] SECURITY                                 : LOGOUT userId=10
2026-02-12T16:26:20.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:20.775+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-12T16:26:20.778+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:21.795+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-12T16:26:21.796+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-02-12T16:26:21.797+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:26:21.798+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:26:32.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-12T16:26:32.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-12T16:26:32.235+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:26:32.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-12T16:26:32.236+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-12T16:26:32.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-12T16:26:32.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user, password=1234)]
2026-02-12T16:26:32.237+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user
2026-02-12T16:26:32.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:32.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be61334] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:32.243+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@960110909 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:32.243+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-12T16:26:32.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user(String)
2026-02-12T16:26:32.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-12T16:26:32.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6be61334]
2026-02-12T16:26:32.343+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:32.343+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac1eded] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:32.343+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@6596597 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:32.343+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:26:32.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 6(Long)
2026-02-12T16:26:32.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-02-12T16:26:32.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ac1eded]
2026-02-12T16:26:32.348+09:00  INFO 17136 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 성공 - userId: 6, role: USER, companyId: 3
2026-02-12T16:26:32.348+09:00  INFO 17136 --- [http-nio-8080-exec-10] SECURITY                                 : LOGIN_SUCCESS userId=6 username=test_user role=USER
2026-02-12T16:26:32.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:32.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=6, username=test_user, password= (truncated)...]
2026-02-12T16:26:32.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:32.581+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-12T16:26:32.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-12T16:26:32.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/companies
2026-02-12T16:26:32.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-12T16:26:32.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-12T16:26:32.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-12T16:26:32.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:32.624+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e1292c] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:32.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177099917 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:26:32.678+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-12T16:26:32.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 6(Long)
2026-02-12T16:26:32.794+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-02-12T16:26:32.798+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33e1292c]
2026-02-12T16:26:32.834+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:32.835+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-12T16:26:32.840+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.450+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:33.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:33.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:33.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-12T16:26:33.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:33.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:33.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-12T16:26:33.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:33.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:33.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:33.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:33.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:33.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:33.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:33.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-12T16:26:33.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:33.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:33.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:33.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:33.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:33.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-12T16:26:33.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:33.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:33.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:33.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:33.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:33.511+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-12T16:26:33.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:33.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:33.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:33.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:33.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:33.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-12T16:26:33.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:33.516+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:33.516+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:33.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.517+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:33.521+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:26:33.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:33.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:33.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60780a59] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:33.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:33.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db6cf5] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.525+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:33.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd41be0] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:33.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa79ef3] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:33.532+09:00  WARN 17136 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:33.532+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:33.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.537+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:33.537+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:33.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1415561634 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:33.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@790202950 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:26:33.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@819817312 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:33.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:33.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:33.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:33.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:33.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1462581145 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:26:33.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-12T16:26:33.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:33.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:33.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:33.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:33.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses
2026-02-12T16:26:33.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user
2026-02-12T16:26:33.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:33.558+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:33.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bd41be0]
2026-02-12T16:26:33.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28&drafterName=test_user", parameters={masked}
2026-02-12T16:26:33.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:33.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:33.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:33.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:26:33.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:33.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2db6cf5]
2026-02-12T16:26:33.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60780a59]
2026-02-12T16:26:33.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3a1961] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:33.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1228256155 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.565+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ecd7e57] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:33.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:33.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:33.567+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.569+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500842189 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:26:33.570+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d6a4d2] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fa79ef3]
2026-02-12T16:26:33.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.574+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.575+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.575+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@692160728 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.576+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.578+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:33.580+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.582+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:33.580+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:33.581+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:33.586+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:33.594+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:33.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:33.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:33.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.622+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ecd7e57]
2026-02-12T16:26:33.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f3a1961]
2026-02-12T16:26:33.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc73220] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:33.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.629+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@526951171 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:26:33.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77d6a4d2]
2026-02-12T16:26:33.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c2833eb] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476b5855] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:33.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1224921599 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.633+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756737736 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:33.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:33.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:26:33.642+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:33.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:26:33.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc73220]
2026-02-12T16:26:33.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:33.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-12T16:26:33.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c2833eb]
2026-02-12T16:26:33.678+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476b5855]
2026-02-12T16:26:33.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.680+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.680+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb3cb04] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.687+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1a436] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@865665618 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457571661 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:26:33.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:26:33.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-12T16:26:33.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f1a436]
2026-02-12T16:26:33.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2eb3cb04]
2026-02-12T16:26:33.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11fda8ea] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ec2d17] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@447114999 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1614227429 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:26:33.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-12T16:26:33.710+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.712+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.712+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-12T16:26:33.712+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50ec2d17]
2026-02-12T16:26:33.713+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11fda8ea]
2026-02-12T16:26:33.714+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3af5a4] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6921dc74] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.717+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@462414177 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@359105346 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:26:33.721+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:26:33.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-12T16:26:33.724+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:26:33.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-12T16:26:33.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-12T16:26:33.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a3af5a4]
2026-02-12T16:26:33.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6921dc74]
2026-02-12T16:26:33.728+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.728+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.729+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@602a01b8] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.729+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785d08a8] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490753996 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.730+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@528001451 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND u.korean_name LIKE CONCAT('%', ?, '%') ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:26:33.731+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), test_user(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:26:33.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 2
2026-02-12T16:26:33.738+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785d08a8]
2026-02-12T16:26:33.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@602a01b8]
2026-02-12T16:26:33.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.740+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.740+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76459561] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.740+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce46a17] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1716374345 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:33.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096338418 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:26:33.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:26:33.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-12T16:26:33.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 6(Long)
2026-02-12T16:26:33.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:26:33.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-12T16:26:33.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ce46a17]
2026-02-12T16:26:33.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76459561]
2026-02-12T16:26:33.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:33.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b85e958] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:33.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1960746221 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:33.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:26:33.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:26:33.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long)
2026-02-12T16:26:33.759+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-02-12T16:26:33.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b85e958]
2026-02-12T16:26:33.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.762+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:26:33.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:33.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:33.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:33.896+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:33.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:33.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:33.900+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:33.902+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:33.904+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:33.904+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:33.905+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:33.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:33.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:33.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:33.907+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:33.908+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:33.908+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:33.908+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:33.909+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:33.909+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:33.909+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.910+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:33.910+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:33.910+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:33.911+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:33.911+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:33.912+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:33.913+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:33.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:35.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:35.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-12T16:26:35.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me/signatures
2026-02-12T16:26:35.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:35.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-12T16:26:35.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:35.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me/signatures
2026-02-12T16:26:35.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:35.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-12T16:26:35.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/users/me/signatures
2026-02-12T16:26:35.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:35.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-12T16:26:35.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me/signatures
2026-02-12T16:26:35.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:35.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-12T16:26:35.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me/signatures", parameters={}
2026-02-12T16:26:35.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:35.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-12T16:26:35.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getMySignatures()
2026-02-12T16:26:35.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68575a8c] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:35.466+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-12T16:26:35.466+09:00  INFO 17136 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 내 서명/도장 목록 조회 요청 - userId: 6, companyId: 3
2026-02-12T16:26:35.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:35.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:35.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324a9ed4] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:35.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@639ba471] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:35.474+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2003758484 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:26:35.476+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:35.476+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373646356 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:35.477+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1465489814 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:35.477+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:35.477+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-12T16:26:35.478+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==>  Preparing: SELECT * FROM user_signature_tb WHERE user_id = ? AND company_id = ? ORDER BY is_default DESC, created_at DESC
2026-02-12T16:26:35.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:35.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:35.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:35.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-12T16:26:35.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.U.findByUserId                   : <==      Total: 1
2026-02-12T16:26:35.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68575a8c]
2026-02-12T16:26:35.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@639ba471]
2026-02-12T16:26:35.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324a9ed4]
2026-02-12T16:26:35.484+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:35.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=5, userId=6, si (truncated)...]
2026-02-12T16:26:35.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=서명/도장 목록 조회 성공, data=[UserSignatureDto(signatureId=5, userId=6, si (truncated)...]
2026-02-12T16:26:35.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:35.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:35.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:35.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:35.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:35.592+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:35.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:35.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:35.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:35.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:35.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:35.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:35.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:35.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:35.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:35.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:35.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:35.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:35.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:35.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:35.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:35.610+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:35.611+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:35.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:35.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:35.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:35.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:35.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:35.614+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:35.859+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:26:35.859+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-12T16:26:35.860+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/cards/company
2026-02-12T16:26:35.867+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:26:35.867+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:26:35.868+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:26:35.870+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/company
2026-02-12T16:26:35.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-12T16:26:35.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:26:35.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/cards/company
2026-02-12T16:26:35.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-12T16:26:35.873+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:26:35.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/cards/company
2026-02-12T16:26:35.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-12T16:26:35.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:26:35.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/cards/company", parameters={}
2026-02-12T16:26:35.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:35.875+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:26:35.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CardController#getCompanyCards()
2026-02-12T16:26:35.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6370de] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:35.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:35.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:26:35.877+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042659335 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:26:35.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622fbce1] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:35.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7fd26d] was not registered for synchronization because synchronization is not active
2026-02-12T16:26:35.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-12T16:26:35.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862007731 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:26:35.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2111495281 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:26:35.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:26:35.888+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:26:35.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==>  Preparing: SELECT cc.*, u.korean_name AS created_by_name, c.company_name AS company_name FROM company_card_tb cc LEFT JOIN user_tb u ON cc.created_by = u.user_id LEFT JOIN company_tb c ON cc.company_id = c.company_id WHERE cc.company_id = ? AND cc.is_active = 1 ORDER BY cc.created_at DESC
2026-02-12T16:26:35.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 6(Long), 3(Long)
2026-02-12T16:26:35.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:26:35.904+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:26:35.908+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b6370de]
2026-02-12T16:26:35.910+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.911+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.C.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:26:35.911+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-02-12T16:26:35.914+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-12T16:26:35.914+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7fd26d]
2026-02-12T16:26:35.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@622fbce1]
2026-02-12T16:26:35.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:35.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.917+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 카드 목록 조회 성공, data=[CompanyCardDto(cardId=2, companyId=3, cardNa (truncated)...]
2026-02-12T16:26:35.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-02-12T16:26:35.924+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:35.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:26:35.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:35.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:26:35.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:35.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:26:35.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:35.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:26:35.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:35.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:26:35.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:35.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:26:35.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:35.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:26:35.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:35.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:26:35.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:35.990+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-02-12T16:26:35.990+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:35.991+09:00  WARN 17136 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:35.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:26:35.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.992+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:26:35.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:35.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:26:35.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:35.994+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:26:35.995+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:26:35.995+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:26:36.000+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:27:02.803+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-02-12T16:27:02.807+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-02-12T16:27:02.813+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 6, role: USER, companyId: 3, uri: /api/logout
2026-02-12T16:27:02.814+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-02-12T16:27:02.816+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-02-12T16:27:02.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-02-12T16:27:02.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiI2IiwidXNlcm5hbWUiOiJ (truncated)...]
2026-02-12T16:27:02.822+09:00  INFO 17136 --- [http-nio-8080-exec-1] SECURITY                                 : LOGOUT userId=6
2026-02-12T16:27:02.823+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:02.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-02-12T16:27:02.826+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:02.874+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:27:02.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/cards/company
2026-02-12T16:27:02.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:27:02.880+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:27:07.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-02-12T16:27:07.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-02-12T16:27:07.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-02-12T16:27:07.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-02-12T16:27:07.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-02-12T16:27:07.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-02-12T16:27:07.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_exec, password=1234)]
2026-02-12T16:27:07.543+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 시도 - username: test_exec
2026-02-12T16:27:07.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:07.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63099be0] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:07.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508287021 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:07.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-02-12T16:27:07.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_exec(String)
2026-02-12T16:27:07.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-02-12T16:27:07.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63099be0]
2026-02-12T16:27:07.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:07.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ded596] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:07.654+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1911873050 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:07.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:07.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:07.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:07.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25ded596]
2026-02-12T16:27:07.659+09:00  INFO 17136 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 로그인 성공 - userId: 9, role: ADMIN, companyId: 3
2026-02-12T16:27:07.659+09:00  INFO 17136 --- [http-nio-8080-exec-6] SECURITY                                 : LOGIN_SUCCESS userId=9 username=test_exec role=ADMIN
2026-02-12T16:27:07.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:07.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=9, username=test_exec, password= (truncated)...]
2026-02-12T16:27:07.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:07.838+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-02-12T16:27:07.841+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-02-12T16:27:07.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/companies
2026-02-12T16:27:07.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-02-12T16:27:07.842+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-02-12T16:27:07.843+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-02-12T16:27:07.844+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:07.844+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477f11d2] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:07.846+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@531477640 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:07.847+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-02-12T16:27:07.847+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 9(Long)
2026-02-12T16:27:07.849+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-02-12T16:27:07.850+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@477f11d2]
2026-02-12T16:27:07.851+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:07.852+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=3, companyCode=DYM7LX, companyNa (truncated)...]
2026-02-12T16:27:07.853+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:08.030+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.031+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:08.035+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.036+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.037+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.051+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.067+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:08.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:27:08.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:08.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.079+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.090+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.091+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.093+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.093+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.095+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:08.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:27:08.101+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:08.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:08.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:08.103+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:08.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:08.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:08.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:08.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:08.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:08.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:08.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:08.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:08.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c224a59] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.120+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:08.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.123+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@975157943 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:08.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7229216f] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0a7988] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:08.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bed353] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:08.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1080176135 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:08.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1373158337 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@831802946 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:08.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:08.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:08.130+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:08.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:08.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7976aa06] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:08.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:08.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c224a59]
2026-02-12T16:27:08.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292f39b] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:08.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@240444474 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1982970510 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:08.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:08.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7229216f]
2026-02-12T16:27:08.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:08.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:08.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:08.142+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c0a7988]
2026-02-12T16:27:08.143+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62bed353]
2026-02-12T16:27:08.146+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:08.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:08.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:08.157+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:27:08.158+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.158+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43279879] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.159+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.164+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e810aa5] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.165+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1954774537 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.166+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:08.174+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1244753517 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.174+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:08.177+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:08.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:27:08.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:27:08.179+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:08.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:08.180+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:08.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.181+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.182+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:08.201+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:08.202+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:08.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7976aa06]
2026-02-12T16:27:08.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:27:08.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:08.242+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:08.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:08.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e640467] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.245+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.257+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43279879]
2026-02-12T16:27:08.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e810aa5]
2026-02-12T16:27:08.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@292f39b]
2026-02-12T16:27:08.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2094454605 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.264+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9ee1e0] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.264+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.264+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:27:08.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:08.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:27:08.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146432185 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:08.266+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:08.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:08.269+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4515f0] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.272+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.289+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:27:08.276+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:08.276+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@793803590 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.292+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:27:08.280+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.283+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.291+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.293+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:27:08.295+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:27:08.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.296+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e640467]
2026-02-12T16:27:08.303+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.304+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:08.305+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:27:08.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:27:08.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.306+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f9ee1e0]
2026-02-12T16:27:08.307+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f4515f0]
2026-02-12T16:27:08.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.308+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:27:08.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:08.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:27:08.312+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d9361] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.313+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.314+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb3c596] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.320+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@822799103 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6eac15] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.327+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022889235 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:08.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:08.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:08.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:27:08.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1761391535 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:08.335+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:08.336+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:27:08.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.337+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:08.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.338+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:08.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:08.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.341+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:08.342+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:08.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:08.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:27:08.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10934f9a] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454da6ec] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.345+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:08.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e5d9361]
2026-02-12T16:27:08.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329687441 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bb3c596]
2026-02-12T16:27:08.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e6eac15]
2026-02-12T16:27:08.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2119484787 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:08.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:27:08.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da233cb] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:08.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d75ab75] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022232220 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912303306 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66137aa4] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@814842081 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:08.359+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.359+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.361+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:08.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:08.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.364+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:08.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:08.366+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:08.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:08.372+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10934f9a]
2026-02-12T16:27:08.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.375+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4da233cb]
2026-02-12T16:27:08.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.374+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:08.374+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.375+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d75ab75]
2026-02-12T16:27:08.375+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:08.376+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.376+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454da6ec]
2026-02-12T16:27:08.376+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:08.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:08.377+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373c8377] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c15c61b] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f690048] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.378+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@533147347 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.379+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1801245232 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.380+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a9ea5e] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.381+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@46968514 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:08.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071682049 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:08.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.395+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:08.395+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:08.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66137aa4]
2026-02-12T16:27:08.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.403+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.403+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f690048]
2026-02-12T16:27:08.405+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.406+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:08.406+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.406+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:08.407+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.408+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@373c8377]
2026-02-12T16:27:08.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c15c61b]
2026-02-12T16:27:08.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a6cdf9] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:08.409+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668ef1e2] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.410+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.410+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53a9ea5e]
2026-02-12T16:27:08.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@547026949 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510106930 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2687c1b9] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:08.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:08.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:08.415+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970522405 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.415+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:08.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32af891d] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:08.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:08.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776498700 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:27:08.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:08.429+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:27:08.436+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:08.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:27:08.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77a6cdf9]
2026-02-12T16:27:08.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@668ef1e2]
2026-02-12T16:27:08.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2687c1b9]
2026-02-12T16:27:08.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:27:08.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:27:08.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ebcf20] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7f0690] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f66e6a] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:08.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a60ed43] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:27:08.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@913746040 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.452+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2138557859 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.453+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@90606839 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32af891d]
2026-02-12T16:27:08.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1114793407 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:27:08.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:08.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:08.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.455+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:08.457+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:08.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fe4924f] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.458+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e956e8c] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.459+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@21831119 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.460+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:08.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:08.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:08.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f66e6a]
2026-02-12T16:27:08.462+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e7f0690]
2026-02-12T16:27:08.463+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@750082210 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.464+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a60ed43]
2026-02-12T16:27:08.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:27:08.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:08.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e5ec93] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.465+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.467+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b3547f8] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:27:08.466+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.468+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661142969 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.468+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@375566632 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:08.482+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:08.485+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.488+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:27:08.488+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ebcf20]
2026-02-12T16:27:08.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e956e8c]
2026-02-12T16:27:08.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fe4924f]
2026-02-12T16:27:08.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.494+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.494+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.494+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.495+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.498+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b3547f8]
2026-02-12T16:27:08.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61e5ec93]
2026-02-12T16:27:08.500+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:08.501+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.502+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:27:08.503+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7654d4d3] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.503+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238a9cb9] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.504+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@491345596 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73cae510] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf7fce4] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.506+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1636746546 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.508+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.509+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.514+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@304178710 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924664989 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:08.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:27:08.519+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:08.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:27:08.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.520+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:08.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:08.522+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7654d4d3]
2026-02-12T16:27:08.527+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:08.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.529+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:27:08.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:27:08.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5969d1c0] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.531+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:08.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164324466 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.532+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238a9cb9]
2026-02-12T16:27:08.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.533+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.539+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73cae510]
2026-02-12T16:27:08.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cf7fce4]
2026-02-12T16:27:08.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e6a8599] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c587d2b] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8d8acf] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.541+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:08.542+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@881844817 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1886546633 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@496352371 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350fdf35] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.543+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2016c9] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5969d1c0]
2026-02-12T16:27:08.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:27:08.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:27:08.544+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:08.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@298405601 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1548607736 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.545+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:27:08.546+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:27:08.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:08.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3696d159] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:27:08.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.550+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:27:08.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@560390554 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.551+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c587d2b]
2026-02-12T16:27:08.552+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e6a8599]
2026-02-12T16:27:08.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.554+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:27:08.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:27:08.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@350fdf35]
2026-02-12T16:27:08.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.560+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.561+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:08.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:08.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.564+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:27:08.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.566+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8d8acf]
2026-02-12T16:27:08.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d2016c9]
2026-02-12T16:27:08.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.575+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.576+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.577+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.577+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.581+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.582+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.586+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.589+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:08.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3696d159]
2026-02-12T16:27:08.590+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:08.591+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:27:08.600+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.594+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.594+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.598+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:08.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:08.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:08.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c994a2d] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:08.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3559058c] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565555d6] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@738548478 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:08.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@122566690 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.613+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.617+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1903682632 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.618+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:08.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:27:08.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ae0fa2] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:08.624+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:08.624+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:27:08.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@177755015 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.627+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:08.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:27:08.638+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644ba780] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.639+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39611179] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c994a2d]
2026-02-12T16:27:08.640+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3559058c]
2026-02-12T16:27:08.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1959887567 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@912233051 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.642+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@565555d6]
2026-02-12T16:27:08.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.643+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:08.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.644+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:08.645+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:27:08.646+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:08.648+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@370149e6] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.656+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9ae0fa2]
2026-02-12T16:27:08.666+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.668+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f87f5ac] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:08.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258705205 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:27:08.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1714236129 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:08.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:08.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:27:08.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39611179]
2026-02-12T16:27:08.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@644ba780]
2026-02-12T16:27:08.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:08.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:27:08.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:08.678+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:27:08.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d01119d] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:08.686+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.686+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:08.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:27:08.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1817852317 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f87f5ac]
2026-02-12T16:27:08.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.689+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@370149e6]
2026-02-12T16:27:08.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:27:08.692+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.692+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.694+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.696+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd9f458] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.696+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:27:08.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfeae44] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.701+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.702+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1185602748 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.706+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.707+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071206402 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.708+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.710+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5849e7] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.714+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522611ad] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.714+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.715+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1995719096 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-02-12T16:27:08.722+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421235371 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.724+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:08.739+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.740+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:27:08.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:08.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:08.744+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d01119d]
2026-02-12T16:27:08.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:27:08.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7bd9f458]
2026-02-12T16:27:08.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:08.747+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.748+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:08.751+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.751+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:08.752+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374766fd] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.752+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfeae44]
2026-02-12T16:27:08.758+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57641496] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.759+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:08.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1646204017 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.760+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1663783190 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.761+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:27:08.761+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:08.765+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:08.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.767+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508a65ee] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.769+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@522611ad]
2026-02-12T16:27:08.771+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:08.772+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.775+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.775+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124967221 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.776+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.776+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.779+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:27:08.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43670b3e] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.777+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.779+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.780+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057950069 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.781+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.782+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.788+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:08.791+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.792+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:08.793+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.794+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.794+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.810+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.811+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.814+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea62e5b] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.815+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249513893 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.817+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:08.818+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:08.818+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.819+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.822+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:08.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:08.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43670b3e]
2026-02-12T16:27:08.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508a65ee]
2026-02-12T16:27:08.824+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57641496]
2026-02-12T16:27:08.825+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:08.825+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.826+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c5849e7]
2026-02-12T16:27:08.826+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.828+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.829+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.829+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@374766fd]
2026-02-12T16:27:08.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:08.830+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b4581c8] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2967e3b2] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.831+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.832+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:08.833+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1491282523 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1590723244 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.836+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ba0a14] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.837+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.838+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:08.847+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea62e5b]
2026-02-12T16:27:08.838+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.839+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.843+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.845+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415692528 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.847+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.852+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.854+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:08.854+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.855+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.856+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.857+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a20f69] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.857+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.864+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.864+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247014896 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.865+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:08.867+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.868+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.869+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:08.870+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:08.871+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.872+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:08.876+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.878+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.879+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.881+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b4581c8]
2026-02-12T16:27:08.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14ba0a14]
2026-02-12T16:27:08.882+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2967e3b2]
2026-02-12T16:27:08.883+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:08.885+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.887+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:08.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41a20f69]
2026-02-12T16:27:08.889+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e341570] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd22588] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.890+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:08.891+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359bf22d] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.892+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.893+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@159944895 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006402252 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.894+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:08.896+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:08.896+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@603454815 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.896+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:08.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.897+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:08.898+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.899+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:08.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.903+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.904+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.905+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.906+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:08.908+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-02-12T16:27:08.913+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a84ffb] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.915+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:08.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:08.916+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/credits/total
2026-02-12T16:27:08.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1996829623 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:08.920+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e341570]
2026-02-12T16:27:08.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7fd22588]
2026-02-12T16:27:08.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@359bf22d]
2026-02-12T16:27:08.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-02-12T16:27:08.921+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.922+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:08.922+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.922+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.922+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-02-12T16:27:08.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.923+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:08.924+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54567402] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.924+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106e4d59] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.924+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cf1410] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.925+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-02-12T16:27:08.926+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.926+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@169305197 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.927+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130629817 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.927+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@573545918 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.927+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:27:08.928+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:08.929+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.929+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.929+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.929+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.930+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-02-12T16:27:08.930+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.931+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.931+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23a84ffb]
2026-02-12T16:27:08.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218c38fa] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.932+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.934+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8904f9] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.936+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@659625462 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:08.937+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bee7f4c] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.937+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100735841 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:08.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:08.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1247291997 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:08.938+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-02-12T16:27:08.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54567402]
2026-02-12T16:27:08.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:08.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48cf1410]
2026-02-12T16:27:08.939+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@106e4d59]
2026-02-12T16:27:08.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 3(Long), 2026-02-12(LocalDate)
2026-02-12T16:27:08.940+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.941+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.942+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:08.941+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.941+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.942+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b00bdf] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.942+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10a2bbd] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.942+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:08.943+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21785e96] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.944+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-02-12T16:27:08.945+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126091621 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.944+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@773951631 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:08.945+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@836096024 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:08.945+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8904f9]
2026-02-12T16:27:08.945+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:08.946+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.946+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.946+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:08.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bee7f4c]
2026-02-12T16:27:08.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:08.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:08.947+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-02-12T16:27:08.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.948+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:08.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278ad83e] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.953+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:08.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:08.954+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218c38fa]
2026-02-12T16:27:08.959+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.955+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:08.956+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.957+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2135345052 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:08.958+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21785e96]
2026-02-12T16:27:08.958+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10a2bbd]
2026-02-12T16:27:08.960+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:08.961+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49b00bdf]
2026-02-12T16:27:08.962+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:08.963+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:08.963+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.964+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.964+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.965+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:08.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5da701] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:08.969+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:08.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.970+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:08.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:08.972+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:08.973+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1773327410 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:08.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:08.989+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:08.979+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:08.982+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:08.987+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:08.990+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:08.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:08.993+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:08.998+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.003+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:09.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:09.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef86fd3] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:09.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:09.012+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:09.013+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213632515 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.013+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.014+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:09.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:09.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@a5da701]
2026-02-12T16:27:09.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e3ab23] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:09.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:09.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:09.021+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:09.021+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@615145771 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@278ad83e]
2026-02-12T16:27:09.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:09.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:09.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:09.024+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:09.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:09.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11bde139] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.025+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.026+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:09.027+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ef86fd3]
2026-02-12T16:27:09.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:09.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1611104280 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.028+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339e1c6f] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.029+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.033+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.035+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.038+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.045+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.039+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222369241 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.040+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e06902] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.041+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2f1bf4] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.045+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:09.045+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:27:09.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.049+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@661187056 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.050+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1371827541 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.050+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46e3ab23]
2026-02-12T16:27:09.051+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:09.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.052+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:09.053+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.054+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:09.055+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:09.055+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11bde139]
2026-02-12T16:27:09.056+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:09.056+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.056+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e71bc5] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.056+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:27:09.057+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@339e1c6f]
2026-02-12T16:27:09.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@193333321 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.059+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6538cc36] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.060+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.061+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:09.061+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:09.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@460475777 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.062+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f6470b] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:09.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:09.064+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:09.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.065+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172508990 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.066+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c2f1bf4]
2026-02-12T16:27:09.068+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2decd5fb] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:09.069+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:09.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:09.070+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.071+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867503229 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.072+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e71bc5]
2026-02-12T16:27:09.073+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:09.074+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:09.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:27:09.075+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76e06902]
2026-02-12T16:27:09.076+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.077+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:27:09.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:09.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.082+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:09.084+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:27:09.089+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.092+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6538cc36]
2026-02-12T16:27:09.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:27:09.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:27:09.097+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.099+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.100+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:09.102+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.104+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2decd5fb]
2026-02-12T16:27:09.105+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49f6470b]
2026-02-12T16:27:09.106+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:27:09.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@489ff138] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:09.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810222433 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.107+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:09.108+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.108+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.111+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c483b15] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.109+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.110+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:27:09.111+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:27:09.112+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013133704 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.112+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.112+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:09.114+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.115+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.116+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f4418f] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.121+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:09.123+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.124+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:09.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1487213602 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.128+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21733649] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:09.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:27:09.131+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@400386d7] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@267462061 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:09.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:27:09.133+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@348174065 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:27:09.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:09.135+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:09.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:27:09.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:09.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:09.137+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:09.138+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:27:09.139+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:09.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@489ff138]
2026-02-12T16:27:09.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c483b15]
2026-02-12T16:27:09.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77f4418f]
2026-02-12T16:27:09.140+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.141+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.144+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8d9035] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d19d291] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.145+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78ddd603] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.146+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:27:09.146+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21733649]
2026-02-12T16:27:09.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:27:09.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@479151594 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:09.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1513678907 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@897632926 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.147+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@400386d7]
2026-02-12T16:27:09.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.148+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:09.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.149+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.150+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.151+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:27:09.155+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.152+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:09.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:09.153+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@261133b9] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.159+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.170+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:09.172+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2054696082 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.191+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/payment-method-summary
2026-02-12T16:27:09.173+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:09.192+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.193+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.194+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:09.194+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/payment-method-summary?startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:09.195+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:09.195+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPaymentMethodSummary(String, String, String[], Boolean)
2026-02-12T16:27:09.196+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.196+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.197+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654aa017] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getPaymentMethodSummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@721637320 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.205+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.221+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:09.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:09.225+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1253b2a7] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.225+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78ddd603]
2026-02-12T16:27:09.225+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d19d291]
2026-02-12T16:27:09.226+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:09.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:09.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055383579 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.228+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.231+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a9d4ac] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==>  Preparing: SELECT CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END AS paymentMethod, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS totalAmount, COUNT(*) AS itemCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) GROUP BY CASE WHEN d.payment_method = 'BANK_TRANSFER' THEN 'CASH' WHEN d.payment_method IS NULL THEN 'CASH' ELSE d.payment_method END ORDER BY totalAmount DESC
2026-02-12T16:27:09.231+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33fc5b87] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.232+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1241980498 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.234+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String)
2026-02-12T16:27:09.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629665333 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.237+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.241+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:09.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:09.252+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@261133b9]
2026-02-12T16:27:09.253+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.254+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:09.254+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPaymentMethodSummary     : <==      Total: 1
2026-02-12T16:27:09.255+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:09.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7acb148a] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@654aa017]
2026-02-12T16:27:09.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1253b2a7]
2026-02-12T16:27:09.257+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:09.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1432906897 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.258+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.260+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8d9035]
2026-02-12T16:27:09.261+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.261+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2295a964] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.262+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=지출 수단별 합계 조회 성공, data=[PaymentMethodSummaryDto(paymentMethod=CASH, (truncated)...]
2026-02-12T16:27:09.262+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@33fc5b87]
2026-02-12T16:27:09.262+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a9d4ac]
2026-02-12T16:27:09.262+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.265+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@309325625 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.266+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.281+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718eb14e] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.274+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:09.277+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:09.280+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.283+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@553647259 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.284+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:09.285+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.286+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:09.287+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.288+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/category-ratio
2026-02-12T16:27:09.290+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.290+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.299+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:09.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.309+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.310+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/user-stats
2026-02-12T16:27:09.311+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:09.313+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:09.313+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7acb148a]
2026-02-12T16:27:09.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:09.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.315+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2295a964]
2026-02-12T16:27:09.321+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28
2026-02-12T16:27:09.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-02-12T16:27:09.322+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/user-stats?startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:09.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=1000&startDate=2026-02-01&endDate=2026-02-28", parameters={masked}
2026-02-12T16:27:09.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7699ef23] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.323+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:09.327+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@718eb14e]
2026-02-12T16:27:09.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getUserExpenseStats(String, String)
2026-02-12T16:27:09.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:09.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:09.325+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1423231550 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.326+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.327+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.328+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.329+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.330+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cc48298] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.331+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getUserExpenseStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.332+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.333+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d11af50] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.335+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12833ee3] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.335+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@683950735 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.339+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.340+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses
2026-02-12T16:27:09.342+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1748789572 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.344+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1917084202 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.346+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.347+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7699ef23]
2026-02-12T16:27:09.348+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d00] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED
2026-02-12T16:27:09.349+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? GROUP BY d.category ORDER BY amount DESC
2026-02-12T16:27:09.350+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.351+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.354+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a109cc] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1267336182 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=5&startDate=2026-02-01&endDate=2026-02-28&status%5B%5D=APPROVED", parameters={masked}
2026-02-12T16:27:09.352+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.353+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate)
2026-02-12T16:27:09.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811420236 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.355+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==>  Preparing: SELECT u.user_id AS userId, u.korean_name AS userName, COALESCE(SUM(COALESCE(r.actual_paid_amount, r.total_amount)), 0) AS totalAmount, COUNT(r.expense_report_id) AS itemCount FROM user_tb u LEFT JOIN expense_report_tb r ON u.user_id = r.drafter_id AND r.company_id = ? AND r.status = 'APPROVED' AND r.report_date >= ? AND r.report_date <= ? WHERE u.company_id = ? GROUP BY u.user_id, u.korean_name ORDER BY totalAmount DESC
2026-02-12T16:27:09.356+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, String, String, String)
2026-02-12T16:27:09.356+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.358+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.358+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.358+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-02-12T16:27:09.359+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 3(Long)
2026-02-12T16:27:09.359+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cc48298]
2026-02-12T16:27:09.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:09.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d11af50]
2026-02-12T16:27:09.360+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12833ee3]
2026-02-12T16:27:09.361+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.361+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5745216b] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.362+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.362+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.363+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f442cf] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.364+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967010678 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.364+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41df10b3] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식비/회식, amount=1000 (truncated)...]
2026-02-12T16:27:09.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1596771051 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.365+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.367+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1896107255 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.368+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.370+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.373+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.375+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:09.381+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:09.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] c.i.b.m.E.selectUserExpenseStats         : <==      Total: 6
2026-02-12T16:27:09.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:09.382+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.386+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:09.387+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24d00]
2026-02-12T16:27:09.387+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52a109cc]
2026-02-12T16:27:09.388+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:09.390+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.392+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a349d77] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:09.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887510164 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자별 지출 통계 조회 성공, data=[UserExpenseStatsDto(userId=7, userName=tes (truncated)...]
2026-02-12T16:27:09.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:09.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.394+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.395+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.398+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.399+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-02-12T16:27:09.402+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295e298d] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.406+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@647458955 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.407+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.408+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.408+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:09.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:09.411+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41df10b3]
2026-02-12T16:27:09.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57f442cf]
2026-02-12T16:27:09.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-02-12T16:27:09.412+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5745216b]
2026-02-12T16:27:09.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a349d77]
2026-02-12T16:27:09.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:09.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.414+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/dashboard/monthly-trend
2026-02-12T16:27:09.416+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.418+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214945ac] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:09.419+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-02-12T16:27:09.420+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbfe1b8] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.420+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3faa05fb] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.421+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405443518 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.421+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:09.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.422+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-02-12T16:27:09.423+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@848289597 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838596700 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.425+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295e298d]
2026-02-12T16:27:09.426+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-02-12T16:27:09.427+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.428+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.432+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.433+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.433+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f59b66] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.434+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-02-12T16:27:09.437+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@968869012 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:09.438+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:09.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:09.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55549955] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbfe1b8]
2026-02-12T16:27:09.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@214945ac]
2026-02-12T16:27:09.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3faa05fb]
2026-02-12T16:27:09.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:09.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1929325543 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:09.443+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.444+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e599dff] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? AND status = 'APPROVED' GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-02-12T16:27:09.445+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3c34ac] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1329e715] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.446+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223873453 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.447+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 3(Long)
2026-02-12T16:27:09.448+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@288582242 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.450+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093202774 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:09.451+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.454+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.456+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:09.473+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f59b66]
2026-02-12T16:27:09.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:09.481+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 3
2026-02-12T16:27:09.483+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.486+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.487+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:09.488+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55549955]
2026-02-12T16:27:09.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:09.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a3c34ac]
2026-02-12T16:27:09.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e599dff]
2026-02-12T16:27:09.489+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.490+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:09.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-02-12T16:27:09.492+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4674575f] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.493+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1329e715]
2026-02-12T16:27:09.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e5eb213] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.497+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.499+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1576440425 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.502+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.505+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203062850 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.507+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.509+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:09.510+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.512+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:09.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.515+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.562+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.563+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e5eb213]
2026-02-12T16:27:09.572+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4674575f]
2026-02-12T16:27:09.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@123b9010] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.573+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa841c1] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.574+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436102766 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.574+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@729954756 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.575+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.576+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.576+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:09.579+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.592+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:09.592+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 3
2026-02-12T16:27:09.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@123b9010]
2026-02-12T16:27:09.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fa841c1]
2026-02-12T16:27:09.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178282ca] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713fe272] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500982074 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2081686493 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName, (SELECT MAX(al.approval_date) FROM approval_line_tb al WHERE al.expense_report_id = r.expense_report_id AND al.status = 'APPROVED' AND al.company_id = r.company_id) AS finalApprovalDate, (SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL) AS minPaymentReqDate, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? AND r.report_date >= ? AND r.report_date <= ? AND r.status IN ( ? ) ORDER BY COALESCE((SELECT MIN(d.payment_req_date) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.payment_req_date IS NOT NULL), r.payment_req_date, r.report_date) DESC, r.expense_report_id DESC LIMIT ? OFFSET ?
2026-02-12T16:27:09.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 3(Long), 2026-02-01(LocalDate), 2026-02-28(LocalDate), APPROVED(String), 2147483647(Integer), 0(Integer)
2026-02-12T16:27:09.608+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.619+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-02-12T16:27:09.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@713fe272]
2026-02-12T16:27:09.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@178282ca]
2026-02-12T16:27:09.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c2fcf2] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8bb470] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.622+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2120264938 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:09.622+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958199097 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.623+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-02-12T16:27:09.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 80(Long), 79(Long), 78(Long)
2026-02-12T16:27:09.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 9(Long)
2026-02-12T16:27:09.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-02-12T16:27:09.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 4
2026-02-12T16:27:09.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a8bb470]
2026-02-12T16:27:09.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c2fcf2]
2026-02-12T16:27:09.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:09.629+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.630+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6dac16] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:09.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:09.631+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@170049023 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:09.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:09.632+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-02-12T16:27:09.636+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 3(Long), 78(Long)
2026-02-12T16:27:09.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-02-12T16:27:09.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d6dac16]
2026-02-12T16:27:09.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:09.684+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-02-12T16:27:09.685+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals
2026-02-12T16:27:10.598+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-02-12T16:27:10.604+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:10.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-12T16:27:10.606+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:10.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals
2026-02-12T16:27:10.620+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-02-12T16:27:10.621+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:10.625+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expense-categories/merged
2026-02-12T16:27:10.626+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-12T16:27:10.628+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:10.635+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expenses/pending-approvals
2026-02-12T16:27:10.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals
2026-02-12T16:27:10.651+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals", parameters={}
2026-02-12T16:27:10.637+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/users/pending
2026-02-12T16:27:10.641+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:10.647+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-12T16:27:10.649+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:10.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:10.652+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-02-12T16:27:10.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-02-12T16:27:10.653+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:10.655+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expense-categories/merged
2026-02-12T16:27:10.657+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-12T16:27:10.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-12T16:27:10.658+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:10.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-02-12T16:27:10.659+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:10.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/expense-categories/merged
2026-02-12T16:27:10.660+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-12T16:27:10.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:10.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b25b3e2] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.661+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-02-12T16:27:10.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:10.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expense-categories/merged
2026-02-12T16:27:10.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:27:10.662+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:10.663+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.664+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:10.665+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expense-categories/merged", parameters={}
2026-02-12T16:27:10.668+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:27:10.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:10.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d26dbe4] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.670+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:10.671+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseCategoryController#getMergedCategories()
2026-02-12T16:27:10.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.672+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.673+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@832229475 wrapping com.mysql.cj.jdbc.ConnectionImpl@3391c28c] will not be managed by Spring
2026-02-12T16:27:10.674+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:27:10.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76322925] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@361fc793] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a3020fc] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.675+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName, (SELECT d.description FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '' ORDER BY d.expense_detail_id ASC LIMIT 1) AS firstDescription, (SELECT COUNT(*) FROM expense_detail_tb d WHERE d.expense_report_id = r.expense_report_id AND d.company_id = r.company_id AND d.description IS NOT NULL AND TRIM(d.description) != '') AS descriptionCount FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-02-12T16:27:10.676+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.ExpenseCategoryController.getMergedCategories(); target is of class [com.innersignature.backend.controller.ExpenseCategoryController]
2026-02-12T16:27:10.677+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@937613657 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:10.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1658274408 wrapping com.mysql.cj.jdbc.ConnectionImpl@4f64ecb4] will not be managed by Spring
2026-02-12T16:27:10.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 9(Long), 3(Long)
2026-02-12T16:27:10.679+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1421189274 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:10.680+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1463112052 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:10.681+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-02-12T16:27:10.682+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-12T16:27:10.683+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:10.687+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:10.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf41ca8] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.688+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 9(Long)
2026-02-12T16:27:10.690+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-02-12T16:27:10.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-12T16:27:10.691+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:10.692+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:10.693+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b25b3e2]
2026-02-12T16:27:10.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:10.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-02-12T16:27:10.697+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@370096138 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:10.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:10.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-12T16:27:10.698+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=30, drafterId= (truncated)...]
2026-02-12T16:27:10.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d26dbe4]
2026-02-12T16:27:10.699+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==>  Preparing: ( -- 전역 카테고리 (회사별 오버라이드가 있으면 회사별 값 사용) SELECT COALESCE(ec_company.category_id, ec_global.category_id) AS category_id, COALESCE(ec_company.company_id, ec_global.company_id) AS company_id, COALESCE(ec_company.category_name, ec_global.category_name) AS category_name, COALESCE(ec_company.display_order, ec_global.display_order) AS display_order, COALESCE(ec_company.is_active, ec_global.is_active) AS is_active, COALESCE(ec_company.created_by, ec_global.created_by) AS created_by, COALESCE(ec_company.created_at, ec_global.created_at) AS created_at, COALESCE(ec_company.updated_at, ec_global.updated_at) AS updated_at, CASE WHEN ec_company.category_id IS NOT NULL THEN 0 ELSE 1 END AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_global LEFT JOIN expense_category_tb ec_company ON ec_global.category_name = ec_company.category_name AND ec_company.company_id = ? LEFT JOIN user_tb u ON COALESCE(ec_company.created_by, ec_global.created_by) = u.user_id WHERE ec_global.company_id IS NULL AND (ec_global.is_active IS NULL OR ec_global.is_active = 1) AND (ec_company.category_id IS NULL OR ec_company.is_active IS NULL OR ec_company.is_active = 1) ) UNION ( -- 회사별 카테고리 (전역에 없는 새로운 카테고리만) SELECT ec_company.category_id, ec_company.company_id, ec_company.category_name, ec_company.display_order, ec_company.is_active, ec_company.created_by, ec_company.created_at, ec_company.updated_at, 0 AS is_global, u.korean_name AS created_by_name FROM expense_category_tb ec_company LEFT JOIN expense_category_tb ec_global ON ec_company.category_name = ec_global.category_name AND ec_global.company_id IS NULL LEFT JOIN user_tb u ON ec_company.created_by = u.user_id WHERE ec_company.company_id = ? AND (ec_company.is_active IS NULL OR ec_company.is_active = 1) AND ec_global.category_id IS NULL -- 전역에 없는 회사별 카테고리만 ) ORDER BY display_order ASC, category_name ASC
2026-02-12T16:27:10.700+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:10.703+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76322925]
2026-02-12T16:27:10.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:10.704+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.705+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:10.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : ==> Parameters: 3(Long), 3(Long)
2026-02-12T16:27:10.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:10.709+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:10.711+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea92605] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:10.714+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:27:10.715+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2046708409 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:10.716+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.719+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-02-12T16:27:10.720+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:10.726+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 3(Long)
2026-02-12T16:27:10.727+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:10.728+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@361fc793]
2026-02-12T16:27:10.732+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:10.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:10.733+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:10.741+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-02-12T16:27:10.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.E.findMergedCategories           : <==      Total: 14
2026-02-12T16:27:10.742+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.744+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:10.745+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea92605]
2026-02-12T16:27:10.746+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cf41ca8]
2026-02-12T16:27:10.752+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a3020fc]
2026-02-12T16:27:10.754+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:10.755+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:10.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:10.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=29, username=test_user11, password=nul (truncated)...]
2026-02-12T16:27:10.756+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[ExpenseCategoryDto(categoryId=1, companyId=null, cate (truncated)...]
2026-02-12T16:27:10.761+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:10.764+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.766+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.773+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:10.994+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:10.994+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:10.998+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:10.999+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:11.000+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:11.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:11.001+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:11.002+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:11.003+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:11.004+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:11.004+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:11.004+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.004+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:11.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.005+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:11.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c3d815] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:11.006+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:11.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414792408 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:27:11.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76cc318d] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:11.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:11.007+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294549194 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:27:11.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:11.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:11.008+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:11.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:11.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:11.010+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:11.011+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:11.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:11.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:11.015+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:11.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:11.016+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76cc318d]
2026-02-12T16:27:11.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21c3d815]
2026-02-12T16:27:11.018+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:11.019+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:11.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:11.020+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:11.021+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:11.022+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:11.536+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-12T16:27:11.538+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-12T16:27:11.540+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-12T16:27:11.547+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-12T16:27:11.548+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-12T16:27:11.549+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-12T16:27:11.552+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:27:11.553+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-12T16:27:11.555+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:27:11.555+09:00  WARN 17136 --- [http-nio-8080-exec-1] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:27:11.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:11.556+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:27:11.557+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:27:11.559+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:27:11.587+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:11.588+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:27:11.593+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:11.594+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:27:11.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:11.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:27:11.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:11.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:27:11.595+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:11.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:27:11.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:11.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:27:11.596+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:27:11.597+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:11.598+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:27:11.598+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcb9ae4] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:11.598+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5768eb0f] was not registered for synchronization because synchronization is not active
2026-02-12T16:27:11.599+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@396099249 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:27:11.599+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573012751 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:27:11.602+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:11.603+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:27:11.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:11.605+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:27:11.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:11.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:27:11.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:11.607+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:27:11.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:11.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:27:11.609+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:11.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:27:11.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fcb9ae4]
2026-02-12T16:27:11.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5768eb0f]
2026-02-12T16:27:11.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:11.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:27:11.610+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:11.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:27:11.611+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:27:11.612+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:28:10.988+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-12T16:28:11.080+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-12T16:28:11.081+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-12T16:28:11.083+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-12T16:28:11.125+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-12T16:28:11.126+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-12T16:28:11.127+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:28:11.129+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-12T16:28:11.132+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:28:11.133+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:28:11.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:28:11.134+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:28:11.136+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:28:11.154+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:28:11.207+09:00 DEBUG 17136 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:28:11.209+09:00 DEBUG 17136 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:28:11.218+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:28:11.220+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:28:11.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:28:11.222+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:28:11.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:28:11.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:28:11.224+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:28:11.227+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:28:11.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:28:11.230+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:28:11.238+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:11.239+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:11.231+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:11.243+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:28:11.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:11.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ac4136] was not registered for synchronization because synchronization is not active
2026-02-12T16:28:11.246+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:28:11.256+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e73ebc0] was not registered for synchronization because synchronization is not active
2026-02-12T16:28:11.268+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@845207548 wrapping com.mysql.cj.jdbc.ConnectionImpl@13ec7daf] will not be managed by Spring
2026-02-12T16:28:11.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:28:11.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1320301092 wrapping com.mysql.cj.jdbc.ConnectionImpl@6eb3d755] will not be managed by Spring
2026-02-12T16:28:11.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:28:11.270+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:28:11.271+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:28:11.275+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:28:11.276+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:28:11.276+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:28:11.277+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:28:11.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:28:11.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:28:11.278+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:28:11.279+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ac4136]
2026-02-12T16:28:11.279+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:28:11.279+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:28:11.279+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e73ebc0]
2026-02-12T16:28:11.280+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:28:11.280+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:28:11.281+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:28:11.281+09:00 DEBUG 17136 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:28:11.283+09:00 DEBUG 17136 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:28:17.986+09:00 DEBUG 17136 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/account-codes/list
2026-02-12T16:28:17.992+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/account-codes/list
2026-02-12T16:28:17.997+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/account-codes/list
2026-02-12T16:28:17.998+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/account-codes/list
2026-02-12T16:28:18.078+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/account-codes/list", parameters={}
2026-02-12T16:28:18.111+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AccountCodeController#getMappingList()
2026-02-12T16:28:18.198+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController]
2026-02-12T16:28:18.228+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AccountCodeController.getMappingList(); target is of class [com.innersignature.backend.controller.AccountCodeController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@28cd8dc1 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('SUPERADMIN', 'TAX_ACCOUNTANT')]
2026-02-12T16:28:18.244+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-02-12T16:28:18.248+09:00  WARN 17136 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-02-12T16:28:18.259+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:28:18.273+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-02-12T16:28:18.276+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-02-12T16:28:18.292+09:00 DEBUG 17136 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-02-12T16:28:18.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:28:18.357+09:00 DEBUG 17136 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-02-12T16:28:18.380+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:28:18.391+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:28:18.393+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-02-12T16:28:18.397+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:28:18.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 9, role: ADMIN, companyId: 3, uri: /api/subscriptions/current
2026-02-12T16:28:18.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:28:18.413+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-02-12T16:28:18.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:28:18.424+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-02-12T16:28:18.430+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:18.439+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-02-12T16:28:18.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:18.440+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:18.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:28:18.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-02-12T16:28:18.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec1786a] was not registered for synchronization because synchronization is not active
2026-02-12T16:28:18.441+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-02-12T16:28:18.442+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e0983aa] was not registered for synchronization because synchronization is not active
2026-02-12T16:28:18.461+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@574117030 wrapping com.mysql.cj.jdbc.ConnectionImpl@4758f1a2] will not be managed by Spring
2026-02-12T16:28:18.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:28:18.469+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606461282 wrapping com.mysql.cj.jdbc.ConnectionImpl@7236be3e] will not be managed by Spring
2026-02-12T16:28:18.470+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:28:18.472+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-02-12T16:28:18.474+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 3(Long)
2026-02-12T16:28:18.479+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:28:18.480+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-02-12T16:28:18.491+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:28:18.496+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-02-12T16:28:18.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:28:18.513+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-02-12T16:28:18.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:28:18.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-02-12T16:28:18.523+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ec1786a]
2026-02-12T16:28:18.524+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e0983aa]
2026-02-12T16:28:18.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:28:18.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-02-12T16:28:18.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:28:18.526+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=9, companyId=3, planId= (truncated)...]
2026-02-12T16:28:18.528+09:00 DEBUG 17136 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-02-12T16:28:18.530+09:00 DEBUG 17136 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
