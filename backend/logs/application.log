2026-01-05T09:39:30.203+09:00  INFO 8676 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 8676 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-05T09:39:30.252+09:00 DEBUG 8676 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-05T09:39:30.278+09:00  INFO 8676 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-05T09:39:33.709+09:00 DEBUG 8676 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-05T09:39:33.735+09:00 DEBUG 8676 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-05T09:39:34.694+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-05T09:39:34.697+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-05T09:39:34.701+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-05T09:39:34.708+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-05T09:39:34.708+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-05T09:39:34.765+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-05T09:39:34.801+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-05T09:39:34.830+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-05T09:39:34.841+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-05T09:39:34.888+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-05T09:39:34.919+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-05T09:39:34.947+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-05T09:39:34.965+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-05T09:39:34.974+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-05T09:39:35.012+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-05T09:39:35.019+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-05T09:39:35.027+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-05T09:39:35.040+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-05T09:39:35.050+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-05T09:39:35.062+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-05T09:39:35.063+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-05T09:39:35.069+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-05T09:39:35.074+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-05T09:39:35.088+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-05T09:39:35.092+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-05T09:39:35.102+09:00 DEBUG 8676 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-05T09:39:36.802+09:00  INFO 8676 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-05T09:39:36.838+09:00  INFO 8676 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-05T09:39:36.868+09:00  INFO 8676 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-05T09:39:37.181+09:00  INFO 8676 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-05T09:39:37.186+09:00  INFO 8676 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6764 ms
2026-01-05T09:39:37.503+09:00 DEBUG 8676 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-05T09:39:37.595+09:00 DEBUG 8676 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-05T09:39:39.336+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-05T09:39:39.359+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-05T09:39:39.421+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-05T09:39:39.455+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-05T09:39:39.490+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-05T09:39:39.519+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-05T09:39:39.607+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-05T09:39:39.644+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-05T09:39:39.668+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-05T09:39:39.735+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-05T09:39:39.764+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-05T09:39:39.809+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-05T09:39:39.840+09:00 DEBUG 8676 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-05T09:39:41.770+09:00 DEBUG 8676 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 118 mappings in 'requestMappingHandlerMapping'
2026-01-05T09:39:42.087+09:00 DEBUG 8676 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-05T09:39:42.168+09:00  WARN 8676 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 27dfd675-39c3-4766-8488-8a83760ecb42

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-05T09:39:42.287+09:00  INFO 8676 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-05T09:39:42.535+09:00 DEBUG 8676 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-05T09:39:42.721+09:00 DEBUG 8676 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-05T09:39:43.031+09:00 DEBUG 8676 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-05T09:39:43.080+09:00 DEBUG 8676 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-05T09:39:43.535+09:00  INFO 8676 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-05T09:39:43.572+09:00  INFO 8676 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 14.859 seconds (process running for 15.504)
2026-01-05T09:39:44.681+09:00  INFO 8676 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-05T09:39:44.719+09:00  INFO 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-05T09:39:44.767+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-05T09:39:44.808+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-05T09:39:44.815+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-05T09:39:44.816+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@35e75f7a
2026-01-05T09:39:44.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4315fe1b
2026-01-05T09:39:44.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-05T09:39:44.819+09:00  INFO 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 52 ms
2026-01-05T09:39:44.865+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:39:44.921+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:39:44.935+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:39:44.940+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:39:44.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:39:44.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:39:45.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_user1, password=1234)]
2026-01-05T09:39:45.080+09:00  INFO 8676 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_user1
2026-01-05T09:39:45.106+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:45.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ded95cb] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:45.134+09:00  INFO 8676 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-05T09:39:45.471+09:00  INFO 8676 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@21369c20
2026-01-05T09:39:45.477+09:00  INFO 8676 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-05T09:39:45.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340922417 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:45.493+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:39:45.533+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_user1(String)
2026-01-05T09:39:45.581+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:39:45.591+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ded95cb]
2026-01-05T09:39:45.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:45.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e586210] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:45.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1464054645 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:45.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:45.701+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-05T09:39:45.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:39:45.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e586210]
2026-01-05T09:39:45.875+09:00  INFO 8676 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1
2026-01-05T09:39:45.878+09:00  INFO 8676 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=2 username=test_user1 role=TAX_ACCOUNTANT
2026-01-05T09:39:45.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:45.913+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=2, username=test_user1, password (truncated)...]
2026-01-05T09:39:45.938+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:46.575+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:39:46.606+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:46.606+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:39:46.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:46.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:39:46.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:46.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:39:46.636+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:39:46.637+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:46.732+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:46.731+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-05T09:39:46.735+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-05T09:39:46.736+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:46.754+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=2", parameters={masked}
2026-01-05T09:39:46.764+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:46.739+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:39:46.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:39:46.779+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:46.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:39:46.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:39:46.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52dc2286] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:46.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:39:46.786+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:39:46.790+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:46.796+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:46.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef35041] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:46.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae1f984] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:46.822+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1155400403 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:46.839+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:46.842+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-05T09:39:46.846+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1522756358 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:46.849+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:39:46.853+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 2(Long)
2026-01-05T09:39:46.884+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@613467204 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:46.884+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-05T09:39:46.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:39:46.886+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef35041]
2026-01-05T09:39:46.887+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:39:46.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:46.905+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:39:46.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ae1f984]
2026-01-05T09:39:46.908+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:46.912+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:39:46.925+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a75c5a1] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:46.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:46.955+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@932848481 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:46.957+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:46.972+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:46.974+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:46.986+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52dc2286]
2026-01-05T09:39:46.987+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:46.988+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7f5fc2] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:46.988+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:46.989+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@855199763 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:46.989+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a75c5a1]
2026-01-05T09:39:46.990+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:46.991+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:46.997+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:46.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587e3ec9] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.004+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1770944080 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:47.005+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7f5fc2]
2026-01-05T09:39:47.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:39:47.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8f96a7] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1808751995 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.019+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.020+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 2(Long)
2026-01-05T09:39:47.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:39:47.040+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@587e3ec9]
2026-01-05T09:39:47.043+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-05T09:39:47.048+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa07229] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a8f96a7]
2026-01-05T09:39:47.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@680992618 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:47.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.054+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:39:47.055+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d457a99] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.058+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:39:47.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1797912888 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:39:47.070+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7aa07229]
2026-01-05T09:39:47.070+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.071+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3b64f4] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.071+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@317940352 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:47.071+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.072+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.072+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.072+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d457a99]
2026-01-05T09:39:47.073+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:47.074+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b3b64f4]
2026-01-05T09:39:47.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5511708e] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.085+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-05T09:39:47.087+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1706926620 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:47.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.097+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:47.105+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:39:47.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:47.137+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:39:47.139+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5511708e]
2026-01-05T09:39:47.140+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.141+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42555caa] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@933867226 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:47.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:47.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:47.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=2", parameters={masked}
2026-01-05T09:39:47.152+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:47.153+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.154+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.155+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6301e1] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.155+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42555caa]
2026-01-05T09:39:47.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2003492609 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.157+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:47.158+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:47.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-05T09:39:47.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:39:47.169+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:47.169+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6301e1]
2026-01-05T09:39:47.171+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.172+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:47.173+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4dac0f] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.174+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469270580 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.175+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.178+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:39:47.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-05T09:39:47.203+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:39:47.203+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.206+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:39:47.208+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f4dac0f]
2026-01-05T09:39:47.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:39:47.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.221+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcaf2a6] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.222+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764bf99d] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.224+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@111096310 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.231+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.227+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2022443300 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.233+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 2(Long)
2026-01-05T09:39:47.234+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:39:47.236+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:39:47.238+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-05T09:39:47.243+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dcaf2a6]
2026-01-05T09:39:47.244+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfece27] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@828070460 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.252+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.265+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:39:47.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764bf99d]
2026-01-05T09:39:47.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599efc50] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.282+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905467756 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.288+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.291+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfece27]
2026-01-05T09:39:47.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:47.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-05T09:39:47.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:47.304+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.307+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599efc50]
2026-01-05T09:39:47.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7302cf23] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.320+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573962095 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.321+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.323+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:47.324+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:39:47.352+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:47.354+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:47.356+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=2", parameters={masked}
2026-01-05T09:39:47.361+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:39:47.365+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:47.365+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7302cf23]
2026-01-05T09:39:47.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74899d86] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c248d2d] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051960167 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322650361 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.369+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:39:47.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:47.371+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:39:47.372+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-05T09:39:47.381+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:39:47.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:47.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74899d86]
2026-01-05T09:39:47.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c248d2d]
2026-01-05T09:39:47.386+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.386+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.386+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b73675c] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.387+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f0b5ec] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.387+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53393433 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.388+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@998575450 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.388+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.389+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.389+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.389+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.402+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.402+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b73675c]
2026-01-05T09:39:47.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f0b5ec]
2026-01-05T09:39:47.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3559ae] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.405+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74aabe4a] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.405+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1532794899 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.407+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.407+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@377126435 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.408+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 2(Long)
2026-01-05T09:39:47.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.459+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:39:47.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-05T09:39:47.601+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b3559ae]
2026-01-05T09:39:47.602+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.605+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:39:47.616+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3118f05f] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.616+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74aabe4a]
2026-01-05T09:39:47.617+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1613838331 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.617+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.617+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.618+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4c6244] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.618+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.619+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1173039372 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:47.620+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.622+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.622+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.623+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3118f05f]
2026-01-05T09:39:47.623+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:47.625+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.626+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-05T09:39:47.628+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4c6244]
2026-01-05T09:39:47.631+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:47.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:39:47.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:47.636+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:47.647+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:47.656+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:47.662+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:47.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=2", parameters={masked}
2026-01-05T09:39:47.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:47.668+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.669+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f52ad] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.669+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@195607664 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.670+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:47.671+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-05T09:39:47.674+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:47.674+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f52ad]
2026-01-05T09:39:47.676+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.677+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a95b64b] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@898662286 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.679+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.680+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.684+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a95b64b]
2026-01-05T09:39:47.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d7a890e] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.687+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@716851460 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:47.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 2(Long)
2026-01-05T09:39:47.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-05T09:39:47.705+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d7a890e]
2026-01-05T09:39:47.705+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:47.708+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd5d4a0] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:47.711+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1451099821 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:47.713+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:47.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:47.716+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:47.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fd5d4a0]
2026-01-05T09:39:47.718+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:47.719+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-05T09:39:47.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:51.910+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-05T09:39:51.910+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-05T09:39:51.912+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:51.918+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-05T09:39:51.913+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/monthly-summary
2026-01-05T09:39:51.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/pending
2026-01-05T09:39:51.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/tax/status
2026-01-05T09:39:51.918+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:51.921+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:51.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-05T09:39:51.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-05T09:39:52.004+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:52.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-05T09:39:52.048+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:52.037+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:52.037+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-05T09:39:52.045+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-05T09:39:52.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-05T09:39:52.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=2
2026-01-05T09:39:52.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-05T09:39:52.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-05T09:39:52.052+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.052+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-05T09:39:52.057+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-05T09:39:52.053+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=2", parameters={masked}
2026-01-05T09:39:52.061+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:52.053+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-05T09:39:52.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.056+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-05T09:39:52.058+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-05T09:39:52.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-05T09:39:52.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7251ad77] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.072+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-05T09:39:52.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.085+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.089+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1525712863 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:52.117+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.119+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfdd65] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.119+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:52.119+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777d61ad] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.121+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27db3cc9] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.121+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507fea65] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.122+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 2(Long), 1(Long)
2026-01-05T09:39:52.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1179896731 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:52.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784498204 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:52.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-05T09:39:52.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:52.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1785428843 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:39:52.137+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-05T09:39:52.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1968341313 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:39:52.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-05T09:39:52.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:52.139+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7251ad77]
2026-01-05T09:39:52.137+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(total_amount), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN total_amount ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:39:52.138+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(total_amount), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN total_amount ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN total_amount ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-05T09:39:52.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-05T09:39:52.140+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.141+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-05T09:39:52.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 10
2026-01-05T09:39:52.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:39:52.152+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393a780a] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.153+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfdd65]
2026-01-05T09:39:52.153+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@777d61ad]
2026-01-05T09:39:52.154+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@509846312 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:52.158+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:52.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.158+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.160+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f1b9a6] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.158+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:52.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-05T09:39:52.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-05T09:39:52.160+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=20, drafte (truncated)...]
2026-01-05T09:39:52.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507fea65]
2026-01-05T09:39:52.170+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:52.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27db3cc9]
2026-01-05T09:39:52.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.170+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.170+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@393a780a]
2026-01-05T09:39:52.171+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.173+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-05T09:39:52.179+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 현황 통계 조회 성공, data=TaxStatusDto(totalCount=10, pendingCount=10 (truncated)...]
2026-01-05T09:39:52.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158764867 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:52.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.188+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 세무처리 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, co (truncated)...]
2026-01-05T09:39:52.191+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-05T09:39:52.194+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-05T09:39:52.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de0d5ab] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-05T09:39:52.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-05T09:39:52.201+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-05T09:39:52.201+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2070525121 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:52.202+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-05T09:39:52.203+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.204+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:52.206+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-05T09:39:52.207+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategorySummary          : <==      Total: 3
2026-01-05T09:39:52.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-05T09:39:52.212+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 12(Long), 2(Long)
2026-01-05T09:39:52.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50f1b9a6]
2026-01-05T09:39:52.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.217+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-05T09:39:52.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.219+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.220+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-05T09:39:52.221+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-05T09:39:52.221+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 2
2026-01-05T09:39:52.222+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.223+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-05T09:39:52.223+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-05T09:39:52.224+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-05T09:39:52.225+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7de0d5ab]
2026-01-05T09:39:52.225+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7823eaea] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.232+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.232+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.233+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.233+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:52.234+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1994660766 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:52.235+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.236+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.236+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7291d8] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.239+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469436767 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:52.238+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-05T09:39:52.238+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.239+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.239+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-05T09:39:52.240+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:52.240+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e894ff] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.240+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-05T09:39:52.241+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237f0389] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.241+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:52.242+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:39:52.242+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@406601199 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:39:52.251+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(total_amount), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN total_amount ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:39:52.245+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@767093142 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:52.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-05T09:39:52.253+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 10
2026-01-05T09:39:52.254+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-05T09:39:52.255+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(total_amount), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN total_amount ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN total_amount ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-05T09:39:52.255+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-05T09:39:52.255+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7823eaea]
2026-01-05T09:39:52.258+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:52.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-05T09:39:52.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f7291d8]
2026-01-05T09:39:52.270+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-05T09:39:52.274+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.272+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.273+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=20, drafte (truncated)...]
2026-01-05T09:39:52.274+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50e894ff]
2026-01-05T09:39:52.275+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=12, drafterId= (truncated)...]
2026-01-05T09:39:52.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.287+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-05T09:39:52.290+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.305+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25771521] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.307+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 세무처리 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, co (truncated)...]
2026-01-05T09:39:52.307+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@237f0389]
2026-01-05T09:39:52.313+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1800969946 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:52.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:52.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.322+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-05T09:39:52.322+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 현황 통계 조회 성공, data=TaxStatusDto(totalCount=10, pendingCount=10 (truncated)...]
2026-01-05T09:39:52.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.339+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:39:52.341+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25771521]
2026-01-05T09:39:52.342+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f41eda8] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.351+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@847391612 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:52.353+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-05T09:39:52.354+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-05T09:39:52.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategorySummary          : <==      Total: 3
2026-01-05T09:39:52.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f41eda8]
2026-01-05T09:39:52.361+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-05T09:39:52.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.446+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/pending
2026-01-05T09:39:52.446+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/status
2026-01-05T09:39:52.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:52.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.469+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/summary/by-category
2026-01-05T09:39:52.457+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/pending
2026-01-05T09:39:52.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/status
2026-01-05T09:39:52.470+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.472+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/summary/by-category?status%5B%5D=PAID
2026-01-05T09:39:52.473+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/pending
2026-01-05T09:39:52.473+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/status
2026-01-05T09:39:52.474+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/tax/monthly-summary
2026-01-05T09:39:52.475+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/summary/by-category?status%5B%5D=PAID", parameters={masked}
2026-01-05T09:39:52.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/pending", parameters={}
2026-01-05T09:39:52.482+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/status", parameters={}
2026-01-05T09:39:52.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/tax/monthly-summary", parameters={}
2026-01-05T09:39:52.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategorySummary(String, String, String[], Boolean, Boolean)
2026-01-05T09:39:52.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxPendingReports(String, String)
2026-01-05T09:39:52.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getTaxStatus(String, String)
2026-01-05T09:39:52.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTaxSummary(String, String)
2026-01-05T09:39:52.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.486+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.486+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.487+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategorySummary(java.lang.String,java.lang.String,java.lang.String[],java.lang.Boolean,java.lang.Boolean); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxPendingReports(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getTaxStatus(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.489+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTaxSummary(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:39:52.489+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.491+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73611b2b] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.489+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@455188061 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:39:52.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24457765] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.502+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b5e9243] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.502+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295d0722] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.503+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:52.505+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@78592594 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:52.506+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1248761644 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:52.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==>  Preparing: SELECT COUNT(*) AS totalCount, SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN 1 ELSE 0 END) AS pendingCount, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, CASE WHEN COUNT(*) > 0 THEN CAST(SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS DECIMAL) / COUNT(*) ELSE 0.0 END AS completionRate, COALESCE(SUM(total_amount), 0) AS totalAmount, COALESCE(SUM(CASE WHEN (tax_processed = 0 OR tax_processed IS NULL) THEN total_amount ELSE 0 END), 0) AS pendingAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN total_amount ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ?
2026-01-05T09:39:52.506+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373038607 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:52.519+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, SUM(CASE WHEN tax_processed = 1 THEN 1 ELSE 0 END) AS completedCount, COALESCE(SUM(total_amount), 0) AS totalAmount, COALESCE(SUM(CASE WHEN tax_processed = 1 THEN total_amount ELSE 0 END), 0) AS completedAmount FROM expense_report_tb WHERE status = 'PAID' AND company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:39:52.508+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-05T09:39:52.520+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : ==> Parameters: 1(Long)
2026-01-05T09:39:52.508+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.status = 'PAID' AND (r.tax_processed = 0 OR r.tax_processed IS NULL) AND r.company_id = ? ORDER BY r.report_date DESC, r.expense_report_id DESC
2026-01-05T09:39:52.518+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : ==> Parameters: 1(Long)
2026-01-05T09:39:52.524+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : ==> Parameters: 1(Long)
2026-01-05T09:39:52.542+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:39:52.546+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTaxSummary        : <==      Total: 1
2026-01-05T09:39:52.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectTaxStatus    : <==      Total: 1
2026-01-05T09:39:52.551+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectTaxPendingReports        : <==      Total: 10
2026-01-05T09:39:52.554+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73611b2b]
2026-01-05T09:39:52.555+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295d0722]
2026-01-05T09:39:52.555+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b5e9243]
2026-01-05T09:39:52.557+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24457765]
2026-01-05T09:39:52.558+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:52.558+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.558+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.562+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.565+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753994b] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:52.565+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 세무처리 집계 조회 성공, data=[MonthlyTaxSummaryDto(yearMonth=2025-12, co (truncated)...]
2026-01-05T09:39:52.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 현황 통계 조회 성공, data=TaxStatusDto(totalCount=10, pendingCount=10 (truncated)...]
2026-01-05T09:39:52.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=세무처리 대기 건 조회 성공, data=[ExpenseReportDto(expenseReportId=20, drafte (truncated)...]
2026-01-05T09:39:52.567+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089837257 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:39:52.568+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.569+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.573+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS totalAmount, COUNT(*) AS itemCount, COUNT(DISTINCT d.expense_report_id) AS reportCount FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? AND r.status IN ( ? ) GROUP BY d.category ORDER BY totalAmount DESC
2026-01-05T09:39:52.573+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:52.576+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : ==> Parameters: 1(Long), PAID(String)
2026-01-05T09:39:52.583+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategorySummary          : <==      Total: 3
2026-01-05T09:39:52.583+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753994b]
2026-01-05T09:39:52.585+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:52.586+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 요약 조회 성공, data=[CategorySummaryDto(category=식대, totalAmount= (truncated)...]
2026-01-05T09:39:52.587+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:55.880+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:39:55.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:39:55.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 2, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-05T09:39:55.886+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:39:55.887+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:39:55.889+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:39:55.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIyIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-05T09:39:55.897+09:00  INFO 8676 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=2
2026-01-05T09:39:55.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:55.900+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:39:55.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.143+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:39:59.144+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:39:59.144+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:39:59.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:39:59.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:39:59.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-05T09:39:59.148+09:00  INFO 8676 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-05T09:39:59.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1acd1391] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.154+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@406619404 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:59.154+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:39:59.154+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-05T09:39:59.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:39:59.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1acd1391]
2026-01-05T09:39:59.242+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.243+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@129d4c2d] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.243+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638180234 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:59.244+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:59.244+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:39:59.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:39:59.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@129d4c2d]
2026-01-05T09:39:59.249+09:00  INFO 8676 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-05T09:39:59.251+09:00  INFO 8676 --- [http-nio-8080-exec-5] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-05T09:39:59.251+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.251+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-05T09:39:59.252+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.653+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:39:59.663+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:39:59.663+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.669+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.663+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.675+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:39:59.663+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:39:59.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:39:59.671+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-05T09:39:59.671+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:39:59.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-05T09:39:59.688+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:39:59.695+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.700+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:39:59.702+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:39:59.704+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:39:59.704+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:59.708+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:39:59.711+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:39:59.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:39:59.716+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:39:59.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:39:59.719+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.721+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-05T09:39:59.722+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.723+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:39:59.723+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:39:59.724+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:39:59.726+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:39:59.729+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3c1beb] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.737+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.741+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f2dfa3] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.738+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:39:59.739+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:59.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e9ad0c4] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.740+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:39:59.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:39:59.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@916328734 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:59.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456633d4] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.749+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.751+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:59.755+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f22b9b] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.756+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@290307145 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:39:59.756+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869919890 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:39:59.756+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:39:59.758+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:39:59.764+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:39:59.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1183884391 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:59.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-05T09:39:59.768+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@149218537 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:39:59.768+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:59.769+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:59.771+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:39:59.774+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:39:59.775+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:39:59.779+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:39:59.779+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51f2dfa3]
2026-01-05T09:39:59.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e9ad0c4]
2026-01-05T09:39:59.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-05T09:39:59.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.786+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.787+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3c1beb]
2026-01-05T09:39:59.787+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f007ae] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.789+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.790+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:39:59.788+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e413a] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.789+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096954197 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.790+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:59.790+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:39:59.793+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13f22b9b]
2026-01-05T09:39:59.795+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@617753168 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:39:59.796+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:59.796+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@456633d4]
2026-01-05T09:39:59.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.800+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:39:59.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:39:59.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:39:59.806+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f1acf8] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.811+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-05T09:39:59.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@24695289 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:59.821+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.823+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:59.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:39:59.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:39:59.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:59.834+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f5e413a]
2026-01-05T09:39:59.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14f007ae]
2026-01-05T09:39:59.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.836+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bd0db3] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.836+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:59.838+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@23377373 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.837+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:39:59.838+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31f1acf8]
2026-01-05T09:39:59.840+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:59.841+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.841+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.843+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:39:59.847+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a62ca3] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1435290371 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:59.852+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:59.853+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:39:59.855+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:39:59.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:39:59.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:39:59.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15bd0db3]
2026-01-05T09:39:59.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:39:59.865+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69a62ca3]
2026-01-05T09:39:59.866+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.867+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:39:59.867+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.867+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7324529d] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:39:59.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174052be] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@235473375 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:39:59.871+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:39:59.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:39:59.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331410881 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:59.873+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:59.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:39:59.873+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.877+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:39:59.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70318f4a] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7324529d]
2026-01-05T09:39:59.893+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1798556102 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:39:59.897+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6dbc4d] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:39:59.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@789359015 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:59.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:39:59.902+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:39:59.904+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:59.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@174052be]
2026-01-05T09:39:59.908+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:59.908+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:39:59.909+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.911+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e6dbc4d]
2026-01-05T09:39:59.915+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.912+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70318f4a]
2026-01-05T09:39:59.913+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:39:59.918+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0063b8] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.918+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.919+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.920+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1813788609 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.920+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599025f2] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.921+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:39:59.923+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@631749205 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:39:59.924+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:39:59.927+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:39:59.929+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:39:59.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.937+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:39:59.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:39:59.941+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:39:59.941+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:39:59.941+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0063b8]
2026-01-05T09:39:59.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:39:59.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599025f2]
2026-01-05T09:39:59.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.952+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c86a84] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.952+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:39:59.952+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.954+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537851494 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:39:59.955+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:39:59.955+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:39:59.956+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:39:59.956+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24efd945] was not registered for synchronization because synchronization is not active
2026-01-05T09:39:59.957+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:39:59.957+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:39:59.958+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1699393261 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:39:59.968+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:39:59.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:39:59.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:39:59.974+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:39:59.981+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:39:59.983+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27c86a84]
2026-01-05T09:39:59.984+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:39:59.986+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:39:59.989+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:39:59.990+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:39:59.990+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:39:59.991+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:39:59.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24efd945]
2026-01-05T09:40:00.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:00.003+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf8c883] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@652b350] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546479406 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:00.069+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1407946709 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:00.073+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.073+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:00.085+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:00.168+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:00.169+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.174+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cf8c883]
2026-01-05T09:40:00.174+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@652b350]
2026-01-05T09:40:00.175+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.177+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.178+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3262e0f5] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.256+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014612202 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:00.258+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:40:00.266+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:40:00.181+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f824b49] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.271+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826209754 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:00.272+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:40:00.273+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:40:00.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:40:00.293+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-05T09:40:00.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:40:00.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:40:00.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:40:00.476+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f824b49]
2026-01-05T09:40:00.480+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.468+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:40:00.477+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3262e0f5]
2026-01-05T09:40:00.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330e3110] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:40:00.489+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:00.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1589374011 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:00.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:40:00.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5573b2d5] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.693+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:00.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.707+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.707+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662881769 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.725+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@330e3110]
2026-01-05T09:40:00.729+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:40:00.731+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:40:00.733+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:00.740+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:40:00.735+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:40:00.739+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:40:00.741+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:00.742+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:40:00.744+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:40:00.757+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:40:00.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.764+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:40:00.767+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:40:00.769+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454a63dd] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.773+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5573b2d5]
2026-01-05T09:40:00.775+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130777478 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:00.777+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:40:00.777+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.778+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:00.778+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:40:00.778+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f8bd9d] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:00.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:40:00.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955968146 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.787+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:40:00.791+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:00.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454a63dd]
2026-01-05T09:40:00.807+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64fc2fc2] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.808+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.811+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d150db7] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.813+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2077744963 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:00.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@87171464 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:40:00.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:40:00.819+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:40:00.819+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72f8bd9d]
2026-01-05T09:40:00.820+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:40:00.821+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:40:00.821+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.823+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190ba4d8] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.826+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782820913 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.829+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:40:00.830+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:40:00.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:40:00.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:40:00.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d150db7]
2026-01-05T09:40:00.836+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64fc2fc2]
2026-01-05T09:40:00.837+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:40:00.838+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:00.839+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.840+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@190ba4d8]
2026-01-05T09:40:00.841+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:40:00.842+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63422346] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.843+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:00.846+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@381831223 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:40:00.847+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7edfa35d] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@985064762 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:40:00.854+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:40:00.856+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63422346]
2026-01-05T09:40:00.858+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:40:00.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f44922] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.863+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7edfa35d]
2026-01-05T09:40:00.867+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@987630441 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:40:00.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:40:00.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554bad71] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:40:00.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919033190 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.873+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.873+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:40:00.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.875+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f44922]
2026-01-05T09:40:00.877+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.877+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5b9d1d] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.880+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369911533 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:40:00.880+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.884+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@554bad71]
2026-01-05T09:40:00.886+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.887+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d81d0] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.888+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@154506423 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.889+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:40:00.890+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:40:00.897+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c5b9d1d]
2026-01-05T09:40:00.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:40:00.900+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:00.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d81d0]
2026-01-05T09:40:00.902+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:40:00.903+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.904+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:00.905+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c22673a] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1104994415 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:00.913+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.916+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:40:00.919+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.922+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:40:00.924+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:40:00.927+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:40:00.930+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:40:00.932+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.936+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3344cdb0] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c22673a]
2026-01-05T09:40:00.940+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:00.941+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:40:00.942+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:00.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@563256818 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:00.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:40:00.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:40:00.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:40:00.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3344cdb0]
2026-01-05T09:40:00.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66e261c3] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1865883492 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:00.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.952+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.956+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.956+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66e261c3]
2026-01-05T09:40:00.957+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.957+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5978ded4] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.958+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@744575041 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:00.959+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:40:00.960+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:40:00.965+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:40:00.965+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5978ded4]
2026-01-05T09:40:00.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:00.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a375f0e] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:00.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1168553186 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:00.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:00.968+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:00.970+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:00.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a375f0e]
2026-01-05T09:40:00.972+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:00.973+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:40:00.974+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:40:02.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:40:02.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:40:02.406+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:40:02.406+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:40:02.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-05T09:40:02.408+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:40:02.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:40:02.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:40:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:40:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:40:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:40:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:40:02.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:40:02.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:40:02.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f094f80] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.419+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bcca2c0] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.421+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e058e8] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510340081 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:02.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@138309706 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:02.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1474965220 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:02.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:40:02.433+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.435+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:40:02.436+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.439+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:40:02.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.450+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6bcca2c0]
2026-01-05T09:40:02.451+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17e058e8]
2026-01-05T09:40:02.452+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f094f80]
2026-01-05T09:40:02.453+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.453+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.453+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.454+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35495a44] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.455+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-05T09:40:02.455+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5464432b] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.456+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@663224883 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:02.456+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.457+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@120953371 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:02.458+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:02.466+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:40:02.467+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:02.473+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:40:02.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:40:02.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:02.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/1/applications
2026-01-05T09:40:02.491+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/1
2026-01-05T09:40:02.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:40:02.502+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35495a44]
2026-01-05T09:40:02.503+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-05T09:40:02.504+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5464432b]
2026-01-05T09:40:02.505+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.506+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:40:02.507+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.507+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a04da2c] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@382708221 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:02.507+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:40:02.508+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:40:02.512+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:40:02.514+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:40:02.514+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.515+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:40:02.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.518+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdbc203] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.523+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:40:02.529+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-05T09:40:02.529+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a04da2c]
2026-01-05T09:40:02.534+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.535+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-05T09:40:02.535+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-05T09:40:02.537+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050432212 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:02.537+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e48e1f3] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.540+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-05T09:40:02.541+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-05T09:40:02.542+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.549+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1116833708 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:02.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:02.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-05T09:40:02.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-05T09:40:02.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.587+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:02.589+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:40:02.589+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-05T09:40:02.598+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:40:02.617+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:40:02.622+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.601+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:40:02.610+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:02.611+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.623+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d93f6] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563390833 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:02.625+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:02.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e48e1f3]
2026-01-05T09:40:02.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4fdbc203]
2026-01-05T09:40:02.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.636+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:02.637+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.637+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.641+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.641+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.642+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:40:02.645+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-05T09:40:02.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2910c8ac] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.648+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.652+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.658+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093825845 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:40:02.659+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.665+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@767d93f6]
2026-01-05T09:40:02.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.667+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.668+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bc3810] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.668+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1663987501 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:02.669+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.670+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:40:02.670+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2910c8ac]
2026-01-05T09:40:02.672+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-05T09:40:02.672+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.681+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368fe1e] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373906897 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:40:02.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:40:02.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:40:02.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bc3810]
2026-01-05T09:40:02.687+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-05T09:40:02.688+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:40:02.691+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.693+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 8
2026-01-05T09:40:02.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@368fe1e]
2026-01-05T09:40:02.698+09:00  INFO 8676 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 8
2026-01-05T09:40:02.700+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.702+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:40:02.703+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/1/applications
2026-01-05T09:40:02.705+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.713+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies/1/applications
2026-01-05T09:40:02.716+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/1/applications
2026-01-05T09:40:02.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/1/applications", parameters={}
2026-01-05T09:40:02.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:40:02.726+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:40:02.722+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-05T09:40:02.731+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:40:02.734+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-05T09:40:02.735+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.737+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-05T09:40:02.737+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ac0942] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.738+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-05T09:40:02.751+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051928100 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:02.752+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:40:02.752+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.753+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:02.755+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.756+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:02.758+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.765+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d03d3a3] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.765+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.780+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@766261794 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:02.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54ac0942]
2026-01-05T09:40:02.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:02.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:02.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60dad879] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1409825593 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:02.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:40:02.788+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 1(Long)
2026-01-05T09:40:02.797+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:02.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d03d3a3]
2026-01-05T09:40:02.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:40:02.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:02.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60dad879]
2026-01-05T09:40:02.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267f375a] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:02.800+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1974626045 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:02.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:40:02.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:40:02.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:02.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-05T09:40:02.807+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 8
2026-01-05T09:40:02.808+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267f375a]
2026-01-05T09:40:02.810+09:00  INFO 8676 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 8
2026-01-05T09:40:02.812+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:02.813+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:40:02.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:08.820+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/2/role
2026-01-05T09:40:08.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/2/role
2026-01-05T09:40:08.837+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/2/role
2026-01-05T09:40:08.838+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/2/role
2026-01-05T09:40:08.839+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/2/role", parameters={}
2026-01-05T09:40:08.840+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateUserRole(Long, UpdateRoleRequest)
2026-01-05T09:40:08.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.UpdateRoleRequest(role=USER)]
2026-01-05T09:40:08.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateUserRole(java.lang.Long,com.innersignature.backend.controller.UserController$UpdateRoleRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:08.853+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateUserRole(java.lang.Long,com.innersignature.backend.controller.UserController$UpdateRoleRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:08.855+09:00  INFO 8676 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 사용자 role 변경 시도 - userId: 2, newRole: USER, operatorId: 1
2026-01-05T09:40:08.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:08.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5cd683] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:08.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1708229020 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:08.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:08.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 2(Long)
2026-01-05T09:40:08.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:08.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d5cd683]
2026-01-05T09:40:08.875+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:08.886+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b94a89a] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:08.886+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@691335915 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:08.888+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:08.889+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:08.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:08.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b94a89a]
2026-01-05T09:40:08.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:08.900+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2253b338] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:08.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@746499635 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:08.901+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:08.903+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 2(Long)
2026-01-05T09:40:08.905+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:40:08.906+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2253b338]
2026-01-05T09:40:08.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:08.916+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b557da7] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:08.919+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467560446 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:08.920+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.U.updateUserCompanyRole          : ==>  Preparing: UPDATE user_company_tb SET role = ?, position = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:40:08.921+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.U.updateUserCompanyRole          : ==> Parameters: USER(String), 사원(String), 2(Long), 1(Long)
2026-01-05T09:40:08.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.U.updateUserCompanyRole          : <==    Updates: 1
2026-01-05T09:40:08.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b557da7]
2026-01-05T09:40:08.941+09:00  INFO 8676 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 사용자 role 변경 완료 - userId: 2, newRole: USER
2026-01-05T09:40:08.941+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:08.941+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=role이 변경되었습니다., data=null)]
2026-01-05T09:40:08.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:10.640+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company
2026-01-05T09:40:10.654+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company
2026-01-05T09:40:10.663+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company
2026-01-05T09:40:10.670+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company
2026-01-05T09:40:10.672+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company", parameters={}
2026-01-05T09:40:10.688+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsers()
2026-01-05T09:40:10.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsers(); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:10.693+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsers(); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:10.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:10.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4a885c] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:10.704+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@319772644 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:40:10.705+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:40:10.708+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-05T09:40:10.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 8
2026-01-05T09:40:10.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e4a885c]
2026-01-05T09:40:10.716+09:00  INFO 8676 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 8
2026-01-05T09:40:10.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:10.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:40:10.718+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:20.589+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/4/company/1/approver?isApprover=false
2026-01-05T09:40:20.616+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/4/company/1/approver?isApprover=false
2026-01-05T09:40:20.649+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/4/company/1/approver
2026-01-05T09:40:20.655+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/4/company/1/approver?isApprover=false
2026-01-05T09:40:20.662+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/4/company/1/approver?isApprover=false", parameters={masked}
2026-01-05T09:40:20.665+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateApproverStatus(Long, Long, Boolean)
2026-01-05T09:40:20.667+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:20.669+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:20.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:20.687+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.688+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179477458 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will be managed by Spring
2026-01-05T09:40:20.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:20.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:20.692+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:20.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0] from current transaction
2026-01-05T09:40:20.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:20.700+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 4(Long)
2026-01-05T09:40:20.702+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:20.703+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.703+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0] from current transaction
2026-01-05T09:40:20.705+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:20.706+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 4(Long)
2026-01-05T09:40:20.710+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:40:20.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.718+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0] from current transaction
2026-01-05T09:40:20.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.updateApproverStatus  : ==>  Preparing: UPDATE user_company_tb SET is_approver = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:40:20.721+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.updateApproverStatus  : ==> Parameters: false(Boolean), 4(Long), 1(Long)
2026-01-05T09:40:20.734+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.updateApproverStatus  : <==    Updates: 1
2026-01-05T09:40:20.735+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.736+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.737+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.738+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a399da0]
2026-01-05T09:40:20.750+09:00  INFO 8676 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 결재자 지정 변경 - operatorId: 1, userId: 4, companyId: 1, isApprover: false
2026-01-05T09:40:20.751+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:20.752+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 지정이 해제되었습니다., data=null)]
2026-01-05T09:40:20.753+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:20.772+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-05T09:40:20.778+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-05T09:40:20.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-05T09:40:20.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-05T09:40:20.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:40:20.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:20.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:20.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:20.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2795507d] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:20.790+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@433216857 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:20.790+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:20.800+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:20.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:20.807+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2795507d]
2026-01-05T09:40:20.807+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:20.813+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5d5030] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:20.815+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@38125749 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:40:20.816+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:40:20.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-05T09:40:20.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 8
2026-01-05T09:40:20.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d5d5030]
2026-01-05T09:40:20.837+09:00  INFO 8676 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 8
2026-01-05T09:40:20.838+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:20.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:40:20.847+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:22.497+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/5/company/1/approver?isApprover=false
2026-01-05T09:40:22.508+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/5/company/1/approver?isApprover=false
2026-01-05T09:40:22.518+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/5/company/1/approver
2026-01-05T09:40:22.523+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/5/company/1/approver?isApprover=false
2026-01-05T09:40:22.524+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/5/company/1/approver?isApprover=false", parameters={masked}
2026-01-05T09:40:22.535+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateApproverStatus(Long, Long, Boolean)
2026-01-05T09:40:22.544+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:22.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:22.557+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:22.557+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1381760258 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will be managed by Spring
2026-01-05T09:40:22.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:22.565+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:40:22.583+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:22.587+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.598+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431] from current transaction
2026-01-05T09:40:22.598+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:40:22.599+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 5(Long)
2026-01-05T09:40:22.603+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:40:22.603+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.605+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431] from current transaction
2026-01-05T09:40:22.606+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:22.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 5(Long)
2026-01-05T09:40:22.616+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 2
2026-01-05T09:40:22.616+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.618+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431] from current transaction
2026-01-05T09:40:22.619+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.updateApproverStatus  : ==>  Preparing: UPDATE user_company_tb SET is_approver = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:40:22.620+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.updateApproverStatus  : ==> Parameters: false(Boolean), 5(Long), 1(Long)
2026-01-05T09:40:22.631+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.updateApproverStatus  : <==    Updates: 1
2026-01-05T09:40:22.633+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.636+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.638+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.639+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@76b98431]
2026-01-05T09:40:22.656+09:00  INFO 8676 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 결재자 지정 변경 - operatorId: 1, userId: 5, companyId: 1, isApprover: false
2026-01-05T09:40:22.658+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:22.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 지정이 해제되었습니다., data=null)]
2026-01-05T09:40:22.667+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:22.681+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/1
2026-01-05T09:40:22.684+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/company/1
2026-01-05T09:40:22.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/1
2026-01-05T09:40:22.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/1", parameters={}
2026-01-05T09:40:22.687+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:40:22.689+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:22.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:40:22.695+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:22.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789149d7] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:22.707+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1543136433 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:22.718+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:40:22.722+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:40:22.733+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:40:22.734+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@789149d7]
2026-01-05T09:40:22.736+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:22.736+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a42588] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:22.739+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574683967 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:40:22.741+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:40:22.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 1(Long)
2026-01-05T09:40:22.750+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 8
2026-01-05T09:40:22.752+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a42588]
2026-01-05T09:40:22.753+09:00  INFO 8676 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 1, count: 8
2026-01-05T09:40:22.763+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:22.764+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:40:22.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:51.954+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:40:51.960+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/logout
2026-01-05T09:40:51.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:40:51.965+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:40:51.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:40:51.968+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-05T09:40:51.970+09:00  INFO 8676 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=1
2026-01-05T09:40:51.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:51.972+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:40:51.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:40:55.780+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=test
2026-01-05T09:40:55.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:40:55.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=test
2026-01-05T09:40:55.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=test", parameters={masked}
2026-01-05T09:40:55.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:40:55.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:40:55.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b88372a] was not registered for synchronization because synchronization is not active
2026-01-05T09:40:55.785+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409171941 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:40:55.786+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:40:55.788+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: test(String), test(String), test(String), test(String), test(String)
2026-01-05T09:40:55.792+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 6
2026-01-05T09:40:55.793+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b88372a]
2026-01-05T09:40:55.794+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:40:55.795+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=1, companyName=test_ (truncated)...]
2026-01-05T09:40:55.797+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:05.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/check-username?username=test_accountant
2026-01-05T09:41:05.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:05.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/check-username?username=test_accountant
2026-01-05T09:41:05.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/check-username?username=test_accountant", parameters={masked}
2026-01-05T09:41:05.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#checkUsername(String)
2026-01-05T09:41:05.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:05.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a334de9] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:05.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856822752 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:41:05.019+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.isUsernameExists      : ==>  Preparing: SELECT COUNT(*) > 0 FROM user_tb WHERE username = ?
2026-01-05T09:41:05.022+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.isUsernameExists      : ==> Parameters: test_accountant(String)
2026-01-05T09:41:05.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.isUsernameExists      : <==      Total: 1
2026-01-05T09:41:05.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a334de9]
2026-01-05T09:41:05.036+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:05.037+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용 가능한 username입니다., data={available=true, exists=false})]
2026-01-05T09:41:05.039+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:18.405+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=test_company
2026-01-05T09:41:18.405+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:18.406+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=test_company
2026-01-05T09:41:18.406+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=test_company", parameters={masked}
2026-01-05T09:41:18.407+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:41:18.409+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:18.409+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c221e24] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:18.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1127993641 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:41:18.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:41:18.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: testcompany(String), testcompany(String), testcompany(String), testcompany(String), testcompany(String)
2026-01-05T09:41:18.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 0
2026-01-05T09:41:18.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c221e24]
2026-01-05T09:41:18.419+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:18.421+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[])]
2026-01-05T09:41:18.422+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:20.996+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=test_
2026-01-05T09:41:20.997+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:20.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=test_
2026-01-05T09:41:20.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=test_", parameters={masked}
2026-01-05T09:41:20.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:41:21.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:21.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e905146] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:21.003+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1302952880 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:41:21.003+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:41:21.005+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: test(String), test(String), test(String), test(String), test(String)
2026-01-05T09:41:21.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 6
2026-01-05T09:41:21.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e905146]
2026-01-05T09:41:21.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:21.017+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=1, companyName=test_ (truncated)...]
2026-01-05T09:41:21.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:25.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/register
2026-01-05T09:41:26.002+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2026-01-05T09:41:26.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:26.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2026-01-05T09:41:26.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/register", parameters={}
2026-01-05T09:41:26.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#register(RegisterRequest)
2026-01-05T09:41:26.022+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RegisterRequest(username=test_accountant, password=1234, koreanName=test_accountant,  (truncated)...]
2026-01-05T09:41:26.093+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 회원가입 시도 - username: test_accountant, koreanName: test_accountant, role: USER
2026-01-05T09:41:26.093+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:26.094+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f8d611] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:26.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338441466 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:41:26.097+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.isUsernameExists      : ==>  Preparing: SELECT COUNT(*) > 0 FROM user_tb WHERE username = ?
2026-01-05T09:41:26.097+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.isUsernameExists      : ==> Parameters: test_accountant(String)
2026-01-05T09:41:26.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.isUsernameExists      : <==      Total: 1
2026-01-05T09:41:26.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20f8d611]
2026-01-05T09:41:26.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:26.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c510af7] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:26.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093462400 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:41:26.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.backend.mapper.UserMapper.register   : ==>  Preparing: INSERT INTO user_tb (username, password, korean_name, email, position, role, company_id, is_active, approval_status) VALUES (?, ?, ?, ?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 'APPROVED'))
2026-01-05T09:41:26.185+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.backend.mapper.UserMapper.register   : ==> Parameters: test_accountant(String), $2a$10$DDsXHpYdeiXjMNH/svUr8.jaebIUXArmu7./j9AtaMeTt/XjUpw9u(String), test_accountant(String), null, 경리(String), USER(String), 1(Long), false(Boolean), PENDING(String)
2026-01-05T09:41:26.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.backend.mapper.UserMapper.register   : <==    Updates: 1
2026-01-05T09:41:26.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c510af7]
2026-01-05T09:41:26.196+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:26.196+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434c3327] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:26.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@590520771 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:41:26.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:41:26.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-01-05T09:41:26.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:41:26.200+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@434c3327]
2026-01-05T09:41:26.202+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:26.202+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.203+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1285462973 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will be managed by Spring
2026-01-05T09:41:26.203+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:41:26.204+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:41:26.206+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:41:26.206+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5] from current transaction
2026-01-05T09:41:26.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:41:26.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long)
2026-01-05T09:41:26.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:41:26.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5] from current transaction
2026-01-05T09:41:26.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.applyToCompany   : ==>  Preparing: INSERT INTO user_company_tb (user_id, company_id, role, position, is_active, is_primary, is_approver, approval_status, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 0), COALESCE(?, 0), 'PENDING', NOW(), NOW())
2026-01-05T09:41:26.221+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.applyToCompany   : ==> Parameters: 10(Long), 1(Long), USER(String), 경리(String), true(Boolean), false(Boolean), false(Boolean)
2026-01-05T09:41:26.244+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.applyToCompany   : <==    Updates: 1
2026-01-05T09:41:26.245+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.245+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58e3d4a5]
2026-01-05T09:41:26.251+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 회원가입 완료 - username: test_accountant, role: USER
2026-01-05T09:41:26.252+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:26.253+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회원가입 신청이 완료되었습니다. 관리자 승인 후 사용 가능합니다., data=null)]
2026-01-05T09:41:26.254+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:32.837+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/check-username?username=test_exec
2026-01-05T09:41:32.853+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:32.855+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/check-username?username=test_exec
2026-01-05T09:41:32.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/check-username?username=test_exec", parameters={masked}
2026-01-05T09:41:32.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#checkUsername(String)
2026-01-05T09:41:32.886+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:32.895+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5a08f8] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:32.903+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1105911342 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:41:32.913+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.isUsernameExists      : ==>  Preparing: SELECT COUNT(*) > 0 FROM user_tb WHERE username = ?
2026-01-05T09:41:32.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.isUsernameExists      : ==> Parameters: test_exec(String)
2026-01-05T09:41:32.917+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.isUsernameExists      : <==      Total: 1
2026-01-05T09:41:32.918+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5a08f8]
2026-01-05T09:41:32.920+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:32.921+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용 가능한 username입니다., data={available=true, exists=false})]
2026-01-05T09:41:32.922+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:43.394+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2026-01-05T09:41:43.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:43.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2026-01-05T09:41:43.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/register", parameters={}
2026-01-05T09:41:43.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#register(RegisterRequest)
2026-01-05T09:41:43.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RegisterRequest(username=test_exec, password=1234, koreanName=test_exec, email=, posi (truncated)...]
2026-01-05T09:41:43.398+09:00  INFO 8676 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회원가입 시도 - username: test_exec, koreanName: test_exec, role: USER
2026-01-05T09:41:43.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:43.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714230b7] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:43.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@853401921 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:41:43.402+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.isUsernameExists      : ==>  Preparing: SELECT COUNT(*) > 0 FROM user_tb WHERE username = ?
2026-01-05T09:41:43.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.isUsernameExists      : ==> Parameters: test_exec(String)
2026-01-05T09:41:43.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.isUsernameExists      : <==      Total: 1
2026-01-05T09:41:43.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@714230b7]
2026-01-05T09:41:43.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:43.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402f1c0a] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:43.500+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1138959048 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:41:43.500+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.backend.mapper.UserMapper.register   : ==>  Preparing: INSERT INTO user_tb (username, password, korean_name, email, position, role, company_id, is_active, approval_status) VALUES (?, ?, ?, ?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 'APPROVED'))
2026-01-05T09:41:43.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.backend.mapper.UserMapper.register   : ==> Parameters: test_exec(String), $2a$10$rumlEruUkmhok7jt9TelA.hZ6D5gRkXOAdZbTBK/cn3oK9DkM1Aum(String), test_exec(String), null, 이사(String), USER(String), 1(Long), false(Boolean), PENDING(String)
2026-01-05T09:41:43.506+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.backend.mapper.UserMapper.register   : <==    Updates: 1
2026-01-05T09:41:43.507+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402f1c0a]
2026-01-05T09:41:43.507+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:43.509+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3a5182] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:43.509+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1154342211 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:41:43.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:41:43.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_exec(String)
2026-01-05T09:41:43.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:41:43.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c3a5182]
2026-01-05T09:41:43.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:43.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1290304722 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will be managed by Spring
2026-01-05T09:41:43.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:41:43.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:41:43.519+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:41:43.519+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.520+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54] from current transaction
2026-01-05T09:41:43.521+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:41:43.522+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long)
2026-01-05T09:41:43.525+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:41:43.526+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.529+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54] from current transaction
2026-01-05T09:41:43.529+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.applyToCompany   : ==>  Preparing: INSERT INTO user_company_tb (user_id, company_id, role, position, is_active, is_primary, is_approver, approval_status, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 0), COALESCE(?, 0), 'PENDING', NOW(), NOW())
2026-01-05T09:41:43.530+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.applyToCompany   : ==> Parameters: 11(Long), 1(Long), USER(String), 이사(String), true(Boolean), false(Boolean), false(Boolean)
2026-01-05T09:41:43.533+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.applyToCompany   : <==    Updates: 1
2026-01-05T09:41:43.533+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.534+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.534+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.535+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48fd7c54]
2026-01-05T09:41:43.539+09:00  INFO 8676 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회원가입 완료 - username: test_exec, role: USER
2026-01-05T09:41:43.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:43.546+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회원가입 신청이 완료되었습니다. 관리자 승인 후 사용 가능합니다., data=null)]
2026-01-05T09:41:43.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:50.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/check-username?username=test_tax
2026-01-05T09:41:50.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:50.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/check-username?username=test_tax
2026-01-05T09:41:50.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/check-username?username=test_tax", parameters={masked}
2026-01-05T09:41:50.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#checkUsername(String)
2026-01-05T09:41:50.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:50.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527cfda0] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:50.400+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774133993 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:41:50.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.isUsernameExists      : ==>  Preparing: SELECT COUNT(*) > 0 FROM user_tb WHERE username = ?
2026-01-05T09:41:50.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.isUsernameExists      : ==> Parameters: test_tax(String)
2026-01-05T09:41:50.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.isUsernameExists      : <==      Total: 1
2026-01-05T09:41:50.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527cfda0]
2026-01-05T09:41:50.405+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:50.405+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용 가능한 username입니다., data={available=true, exists=false})]
2026-01-05T09:41:50.410+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:41:57.887+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/register
2026-01-05T09:41:57.888+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:41:57.890+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/register
2026-01-05T09:41:57.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/register", parameters={}
2026-01-05T09:41:57.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#register(RegisterRequest)
2026-01-05T09:41:57.892+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RegisterRequest(username=test_tax, password=1234, koreanName=test_tax, email=, positi (truncated)...]
2026-01-05T09:41:57.893+09:00  INFO 8676 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 회원가입 시도 - username: test_tax, koreanName: test_tax, role: TAX_ACCOUNTANT
2026-01-05T09:41:57.893+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:57.895+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bec3d2a] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:57.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574447485 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:41:57.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.isUsernameExists      : ==>  Preparing: SELECT COUNT(*) > 0 FROM user_tb WHERE username = ?
2026-01-05T09:41:57.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.isUsernameExists      : ==> Parameters: test_tax(String)
2026-01-05T09:41:57.902+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.isUsernameExists      : <==      Total: 1
2026-01-05T09:41:57.903+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bec3d2a]
2026-01-05T09:41:58.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:58.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b7b001] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:58.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@439599920 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:41:58.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.backend.mapper.UserMapper.register   : ==>  Preparing: INSERT INTO user_tb (username, password, korean_name, email, position, role, company_id, is_active, approval_status) VALUES (?, ?, ?, ?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 'APPROVED'))
2026-01-05T09:41:58.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.backend.mapper.UserMapper.register   : ==> Parameters: test_tax(String), $2a$10$UoqB7aGDEX1bZfRstsrAheStoUvAxhHbYq2YpiNzhVsg4HIhN9/li(String), test_tax(String), null, 세무사(String), TAX_ACCOUNTANT(String), 1(Long), false(Boolean), PENDING(String)
2026-01-05T09:41:58.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.backend.mapper.UserMapper.register   : <==    Updates: 1
2026-01-05T09:41:58.033+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72b7b001]
2026-01-05T09:41:58.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:58.036+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f0a1e3] was not registered for synchronization because synchronization is not active
2026-01-05T09:41:58.037+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@126367556 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:41:58.038+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:41:58.039+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-01-05T09:41:58.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:41:58.052+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48f0a1e3]
2026-01-05T09:41:58.055+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:41:58.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1789414421 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will be managed by Spring
2026-01-05T09:41:58.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:41:58.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:41:58.071+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:41:58.071+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.074+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa] from current transaction
2026-01-05T09:41:58.077+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:41:58.079+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long)
2026-01-05T09:41:58.085+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:41:58.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.089+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa] from current transaction
2026-01-05T09:41:58.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.applyToCompany   : ==>  Preparing: INSERT INTO user_company_tb (user_id, company_id, role, position, is_active, is_primary, is_approver, approval_status, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 0), COALESCE(?, 0), 'PENDING', NOW(), NOW())
2026-01-05T09:41:58.105+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.applyToCompany   : ==> Parameters: 12(Long), 1(Long), TAX_ACCOUNTANT(String), 세무사(String), true(Boolean), false(Boolean), false(Boolean)
2026-01-05T09:41:58.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.applyToCompany   : <==    Updates: 1
2026-01-05T09:41:58.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61ee26aa]
2026-01-05T09:41:58.186+09:00  INFO 8676 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 회원가입 완료 - username: test_tax, role: TAX_ACCOUNTANT
2026-01-05T09:41:58.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:41:58.189+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회원가입 신청이 완료되었습니다. 관리자 승인 후 사용 가능합니다., data=null)]
2026-01-05T09:41:58.190+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:01.624+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:43:01.625+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:43:01.625+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:43:01.626+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:43:01.627+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:43:01.628+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-05T09:43:01.630+09:00  INFO 8676 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-05T09:43:01.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:01.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f48cdc] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:01.636+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1756697515 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:01.637+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:43:01.641+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-05T09:43:01.644+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:43:01.645+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22f48cdc]
2026-01-05T09:43:01.729+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:01.729+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e59b9e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:01.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@979053922 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:01.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:01.733+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:01.736+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:01.737+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26e59b9e]
2026-01-05T09:43:01.741+09:00  INFO 8676 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 1
2026-01-05T09:43:01.743+09:00  INFO 8676 --- [http-nio-8080-exec-10] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-05T09:43:01.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:01.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-05T09:43:01.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:01.976+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:43:01.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/companies
2026-01-05T09:43:02.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:43:02.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:43:02.007+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:02.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-05T09:43:02.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:02.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:02.007+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:43:02.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:02.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:43:02.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:43:02.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:02.023+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:02.023+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-05T09:43:02.024+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:43:02.026+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:43:02.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:43:02.026+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:02.029+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:02.030+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:43:02.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.033+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.048+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a9a44a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.042+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ef5131] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.044+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:43:02.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df85317] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b6f3aef] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:43:02.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653bd51b] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@761701927 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:02.070+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:02.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@513221488 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:02.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59375091 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.079+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2124744977 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.079+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688981858 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:43:02.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:02.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:02.085+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:02.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-05T09:43:02.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:02.088+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:02.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:02.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:02.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@653bd51b]
2026-01-05T09:43:02.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:02.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b6f3aef]
2026-01-05T09:43:02.137+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.140+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52e37283] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:02.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:02.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-05T09:43:02.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1225956969 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51a9a44a]
2026-01-05T09:43:02.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73ef5131]
2026-01-05T09:43:02.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1df85317]
2026-01-05T09:43:02.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-05T09:43:02.151+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:02.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.151+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.152+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.153+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:43:02.155+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:02.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b75cba1] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1508222203 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412a9b21] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.168+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.175+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.169+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@91424733 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.180+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:43:02.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52e37283]
2026-01-05T09:43:02.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b75cba1]
2026-01-05T09:43:02.185+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.186+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:43:02.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1718d5a5] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.191+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.194+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@840248356 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.194+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:02.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:02.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@412a9b21]
2026-01-05T09:43:02.200+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.202+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3202ef7e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.203+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:02.204+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:02.204+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@660904332 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.209+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.207+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:02.208+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1718d5a5]
2026-01-05T09:43:02.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:02.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:02.212+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:02.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee61540] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2130860228 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2693c554] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:02.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:02.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1222630725 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:02.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3202ef7e]
2026-01-05T09:43:02.217+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.217+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab3cc94] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:02.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@258977699 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.219+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:02.224+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ee61540]
2026-01-05T09:43:02.221+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:02.222+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.225+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.226+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.227+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e33abec] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.229+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@543290751 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.230+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.230+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:02.231+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.231+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2693c554]
2026-01-05T09:43:02.232+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.233+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.233+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ab3cc94]
2026-01-05T09:43:02.233+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b0e5d40] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.235+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.235+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1661962768 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.241+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:02.245+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:02.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:02.257+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.260+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.266+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e33abec]
2026-01-05T09:43:02.267+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:43:02.268+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.269+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b0e5d40]
2026-01-05T09:43:02.269+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:02.270+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40d01e35] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.275+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:43:02.276+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1663021320 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:02.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:02.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:02.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:02.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.290+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:02.290+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7645315] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.291+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:02.292+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:02.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40d01e35]
2026-01-05T09:43:02.293+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@357578069 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:02.293+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:02.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:02.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:02.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4353e07c] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@62025621 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a430b4] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7645315]
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1520427578 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.300+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36d354e8] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.300+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:02.301+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@327828956 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.301+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.302+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:02.302+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.302+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4353e07c]
2026-01-05T09:43:02.303+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.304+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.306+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:02.306+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:43:02.307+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a430b4]
2026-01-05T09:43:02.308+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:43:02.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e7b9489] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1050294882 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:02.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36d354e8]
2026-01-05T09:43:02.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-05T09:43:02.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:02.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e5e6f0] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:43:02.319+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774030512 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.320+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:43:02.324+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e7b9489]
2026-01-05T09:43:02.320+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:43:02.323+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.324+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.325+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:43:02.326+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:02.326+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:43:02.327+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.329+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.330+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef07fe0] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1500213470 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.332+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:02.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45e5e6f0]
2026-01-05T09:43:02.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:02.334+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:02.335+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e196898] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.335+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:02.335+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:02.336+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1688325581 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.340+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.336+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:02.341+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.342+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:02.345+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ef07fe0]
2026-01-05T09:43:02.343+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:02.345+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.346+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f22275a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.346+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:02.346+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1387286049 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e196898]
2026-01-05T09:43:02.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51605f5e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.349+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540560775 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:02.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:02.352+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.353+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:02.356+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f22275a]
2026-01-05T09:43:02.364+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.364+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f8e1e2f] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.364+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:02.365+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:02.365+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1095295603 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:02.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@51605f5e]
2026-01-05T09:43:02.369+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.370+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589d7a6a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.369+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:02.371+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@198460552 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:02.374+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:02.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f8e1e2f]
2026-01-05T09:43:02.374+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:02.377+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:02.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e6085e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:02.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786a4235] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1467356683 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:02.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1128452910 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.384+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:02.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:02.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:43:02.387+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:02.390+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@589d7a6a]
2026-01-05T09:43:02.391+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:02.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:43:02.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38e6085e]
2026-01-05T09:43:02.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.399+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b418271] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@65916863 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.407+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.409+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:02.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@786a4235]
2026-01-05T09:43:02.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31bd8ddb] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468453939 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b418271]
2026-01-05T09:43:02.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8042af] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1800738628 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:02.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31bd8ddb]
2026-01-05T09:43:02.419+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.427+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4b881a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.427+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@549785917 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.428+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:02.428+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c8042af]
2026-01-05T09:43:02.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:02.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e328b] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1856343317 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:02.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.435+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.436+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:02.440+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d4b881a]
2026-01-05T09:43:02.441+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.444+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632b44e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@664332234 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:02.446+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.446+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.452+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e328b]
2026-01-05T09:43:02.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:43:02.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632b44e]
2026-01-05T09:43:02.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.468+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.469+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:02.472+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:02.477+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:02.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:02.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:02.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:02.512+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ef6408] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@601624644 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:02.518+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:02.529+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:02.534+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:02.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ef6408]
2026-01-05T09:43:02.548+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.549+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4234b37] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1589031071 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:02.552+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.554+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.559+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.559+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4234b37]
2026-01-05T09:43:02.559+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.560+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10023d23] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.560+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@250001127 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:02.561+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:02.561+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:02.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:02.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10023d23]
2026-01-05T09:43:02.565+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:02.565+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26fe6e4b] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:02.565+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@655664274 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:02.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:02.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:02.568+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:02.568+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26fe6e4b]
2026-01-05T09:43:02.569+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:02.569+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:02.570+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:04.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/12/approval
2026-01-05T09:43:04.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/12/approval
2026-01-05T09:43:04.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/12/approval
2026-01-05T09:43:04.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/12/approval
2026-01-05T09:43:04.980+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/12/approval", parameters={}
2026-01-05T09:43:04.984+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#approveUser(Long, ApprovalRequest)
2026-01-05T09:43:04.988+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.ApprovalRequest(action=APPROVE)]
2026-01-05T09:43:04.991+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:43:04.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:43:04.994+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 사용자 승인/거부 시도 - userId: 12, action: APPROVE, operatorId: 1
2026-01-05T09:43:04.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:04.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112704590 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will be managed by Spring
2026-01-05T09:43:05.002+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:05.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:43:05.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:05.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.020+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:05.026+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:05.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:05.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:05.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:05.041+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:05.042+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.044+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.045+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:05.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long)
2026-01-05T09:43:05.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:43:05.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.052+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.countUsersByCompanyId          : ==>  Preparing: SELECT COUNT(DISTINCT uc.user_id) FROM user_company_tb uc WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND (uc.is_active IS NULL OR uc.is_active = 1)
2026-01-05T09:43:05.052+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.countUsersByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:05.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.countUsersByCompanyId          : <==      Total: 1
2026-01-05T09:43:05.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:05.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:05.075+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:05.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:05.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:05.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:05.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.085+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.updateUser       : ==>  Preparing: UPDATE user_tb SET korean_name = ?, email = ?, position = ?, role = ?, is_active = ?, company_id = ?, approval_status = ? WHERE user_id = ?
2026-01-05T09:43:05.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.updateUser       : ==> Parameters: test_tax(String), null, 세무사(String), TAX_ACCOUNTANT(String), true(Boolean), 1(Long), APPROVED(String), 12(Long)
2026-01-05T09:43:05.094+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.updateUser       : <==    Updates: 1
2026-01-05T09:43:05.094+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.095+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7] from current transaction
2026-01-05T09:43:05.095+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.approveUserCompany    : ==>  Preparing: UPDATE user_company_tb SET approval_status = 'APPROVED', is_active = 1, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:43:05.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.approveUserCompany    : ==> Parameters: 12(Long), 1(Long)
2026-01-05T09:43:05.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.approveUserCompany    : <==    Updates: 1
2026-01-05T09:43:05.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b8ef3a7]
2026-01-05T09:43:05.129+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 사용자 승인 완료 - userId: 12
2026-01-05T09:43:05.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:05.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자가 승인되었습니다., data=null)]
2026-01-05T09:43:05.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:05.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:05.139+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:05.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:05.144+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:05.144+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:05.160+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:05.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17919f5e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:05.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360172862 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:05.190+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:05.193+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:05.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:05.208+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17919f5e]
2026-01-05T09:43:05.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:05.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f40c61] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:05.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1392920205 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:05.217+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:05.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:05.250+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 2
2026-01-05T09:43:05.257+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61f40c61]
2026-01-05T09:43:05.270+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:05.276+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=11, username=test_exec, password=null, (truncated)...]
2026-01-05T09:43:05.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:06.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/11/approval
2026-01-05T09:43:06.789+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/users/11/approval
2026-01-05T09:43:06.793+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/11/approval
2026-01-05T09:43:06.794+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/users/11/approval
2026-01-05T09:43:06.796+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/users/11/approval", parameters={}
2026-01-05T09:43:06.798+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#approveUser(Long, ApprovalRequest)
2026-01-05T09:43:06.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.ApprovalRequest(action=APPROVE)]
2026-01-05T09:43:06.808+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:43:06.809+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:43:06.811+09:00  INFO 8676 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 사용자 승인/거부 시도 - userId: 11, action: APPROVE, operatorId: 1
2026-01-05T09:43:06.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:06.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@191554481 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will be managed by Spring
2026-01-05T09:43:06.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:06.819+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:43:06.821+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:06.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.825+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.827+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:06.829+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:06.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:06.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:06.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:06.837+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:06.839+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.841+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.841+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:06.842+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long)
2026-01-05T09:43:06.844+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:43:06.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.846+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.847+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.countUsersByCompanyId          : ==>  Preparing: SELECT COUNT(DISTINCT uc.user_id) FROM user_company_tb uc WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND (uc.is_active IS NULL OR uc.is_active = 1)
2026-01-05T09:43:06.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.countUsersByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:06.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.U.countUsersByCompanyId          : <==      Total: 1
2026-01-05T09:43:06.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.852+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:06.852+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:06.855+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:06.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:06.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:06.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:06.863+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.863+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.updateUser       : ==>  Preparing: UPDATE user_tb SET korean_name = ?, email = ?, position = ?, role = ?, is_active = ?, company_id = ?, approval_status = ? WHERE user_id = ?
2026-01-05T09:43:06.865+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.updateUser       : ==> Parameters: test_exec(String), null, 이사(String), USER(String), true(Boolean), 1(Long), APPROVED(String), 11(Long)
2026-01-05T09:43:06.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.updateUser       : <==    Updates: 1
2026-01-05T09:43:06.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b] from current transaction
2026-01-05T09:43:06.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.approveUserCompany    : ==>  Preparing: UPDATE user_company_tb SET approval_status = 'APPROVED', is_active = 1, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:43:06.870+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.approveUserCompany    : ==> Parameters: 11(Long), 1(Long)
2026-01-05T09:43:06.873+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.approveUserCompany    : <==    Updates: 1
2026-01-05T09:43:06.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.875+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.875+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.875+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e82522b]
2026-01-05T09:43:06.882+09:00  INFO 8676 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 사용자 승인 완료 - userId: 11
2026-01-05T09:43:06.882+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:06.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자가 승인되었습니다., data=null)]
2026-01-05T09:43:06.884+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:06.889+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:06.896+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:06.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:06.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:06.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:06.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:06.900+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20032b17] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:06.903+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1834504021 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:06.905+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:06.911+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:06.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:06.915+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20032b17]
2026-01-05T09:43:06.916+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:06.917+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@431170d4] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:06.917+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813586648 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:06.918+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:06.919+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:06.929+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-01-05T09:43:06.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@431170d4]
2026-01-05T09:43:06.933+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:06.934+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=10, username=test_accountant, password (truncated)...]
2026-01-05T09:43:06.935+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:08.374+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/10/approval
2026-01-05T09:43:08.377+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/10/approval
2026-01-05T09:43:08.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/10/approval
2026-01-05T09:43:08.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/10/approval
2026-01-05T09:43:08.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/10/approval", parameters={}
2026-01-05T09:43:08.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#approveUser(Long, ApprovalRequest)
2026-01-05T09:43:08.381+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.ApprovalRequest(action=APPROVE)]
2026-01-05T09:43:08.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:43:08.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:43:08.383+09:00  INFO 8676 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 사용자 승인/거부 시도 - userId: 10, action: APPROVE, operatorId: 1
2026-01-05T09:43:08.391+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:08.393+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.394+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1647512727 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will be managed by Spring
2026-01-05T09:43:08.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:08.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:43:08.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:08.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.402+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.402+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:08.403+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:08.410+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:08.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:08.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:08.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:08.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:08.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long)
2026-01-05T09:43:08.420+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:43:08.421+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.423+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.423+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.countUsersByCompanyId          : ==>  Preparing: SELECT COUNT(DISTINCT uc.user_id) FROM user_company_tb uc WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND (uc.is_active IS NULL OR uc.is_active = 1)
2026-01-05T09:43:08.426+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.countUsersByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:08.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.countUsersByCompanyId          : <==      Total: 1
2026-01-05T09:43:08.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:08.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:08.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:08.433+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:08.436+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:08.437+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:08.439+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.441+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.441+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.updateUser       : ==>  Preparing: UPDATE user_tb SET korean_name = ?, email = ?, position = ?, role = ?, is_active = ?, company_id = ?, approval_status = ? WHERE user_id = ?
2026-01-05T09:43:08.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.updateUser       : ==> Parameters: test_accountant(String), null, 경리(String), USER(String), true(Boolean), 1(Long), APPROVED(String), 10(Long)
2026-01-05T09:43:08.446+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.updateUser       : <==    Updates: 1
2026-01-05T09:43:08.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf] from current transaction
2026-01-05T09:43:08.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.approveUserCompany    : ==>  Preparing: UPDATE user_company_tb SET approval_status = 'APPROVED', is_active = 1, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:43:08.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.approveUserCompany    : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:43:08.450+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.approveUserCompany    : <==    Updates: 1
2026-01-05T09:43:08.451+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.451+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.451+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.451+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43b0eabf]
2026-01-05T09:43:08.463+09:00  INFO 8676 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 사용자 승인 완료 - userId: 10
2026-01-05T09:43:08.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:08.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자가 승인되었습니다., data=null)]
2026-01-05T09:43:08.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:08.467+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:08.470+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:08.471+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:08.471+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:08.473+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:08.474+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:08.474+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e0f8528] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:08.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572586446 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:08.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:08.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:08.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:08.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e0f8528]
2026-01-05T09:43:08.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:08.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a4a8bc] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:08.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@384737752 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:08.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:08.486+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:08.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:08.489+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a4a8bc]
2026-01-05T09:43:08.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:08.491+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:08.493+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:41.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:43:41.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.060+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:43:41.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.071+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:43:41.074+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:43:41.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:43:41.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:43:41.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:43:41.452+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:43:41.455+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:41.457+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:41.459+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:43:41.460+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.472+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:41.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:41.576+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:41.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:41.551+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-05T09:43:41.553+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.562+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.574+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:43:41.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:41.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:41.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:41.667+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:41.667+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:43:41.669+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:43:41.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.658+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:41.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:41.668+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443eb7a0] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.675+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:43:41.677+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:43:41.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.681+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:43:41.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:43:41.679+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.680+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.680+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:43:41.681+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:43:41.686+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:43:41.693+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b581d7] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.694+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.695+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.695+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.700+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@473866516 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:41.702+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c0eb9fe] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1348347303 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:41.725+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:41.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e0cc90f] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.731+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.734+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:41.736+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f431bf] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:41.769+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2880971b] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.769+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:41.781+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1812672018 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:41.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1924560430 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:41.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@905566337 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:41.792+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(total_amount), 0) AS averageAmount, COALESCE(MAX(total_amount), 0) AS maxAmount, COALESCE(MIN(total_amount), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:43:41.793+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:43:41.795+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:41.795+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:41.795+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:43:41.796+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-05T09:43:41.799+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-05T09:43:41.800+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443eb7a0]
2026-01-05T09:43:41.800+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b581d7]
2026-01-05T09:43:41.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-05T09:43:41.803+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.806+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1893226140 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:41.811+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.813+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59eb54a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.813+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(total_amount), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:43:41.814+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a71b0a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.828+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59502846 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:41.829+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-05T09:43:41.831+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:41.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:41.849+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:43:41.849+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-05T09:43:41.860+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:41.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:43:41.852+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f431bf]
2026-01-05T09:43:41.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-05T09:43:41.861+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e0cc90f]
2026-01-05T09:43:41.861+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59eb54a]
2026-01-05T09:43:41.861+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c0eb9fe]
2026-01-05T09:43:41.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:41.868+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@656569353 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:41.869+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2880971b]
2026-01-05T09:43:41.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:41.876+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:41.877+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:41.879+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-05T09:43:41.879+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:41.881+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:41.882+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606761 (truncated)...]
2026-01-05T09:43:41.882+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:41.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1927872, totalCo (truncated)...]
2026-01-05T09:43:41.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:41.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:41.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=10, totalAmo (truncated)...]
2026-01-05T09:43:41.893+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:41.894+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:41.895+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:41.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:41.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:41.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:43:41.929+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:41.930+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-05T09:43:41.932+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:41.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14a71b0a]
2026-01-05T09:43:41.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:43:41.935+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.940+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.942+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:41.942+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:43:41.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-05T09:43:41.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.960+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:41.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:43:41.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534c705] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.962+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:43:41.962+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:41.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:41.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:41.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:43:41.964+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@703063010 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:41.964+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:43:41.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:43:41.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:43:41.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:43:41.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:41.968+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:41.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:41.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.992+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:43:41.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:43:41.983+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:41.985+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:41.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:41.996+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:41.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20af0a89] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:41.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785f0452] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:42.002+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177979192 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:42.002+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.003+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813718621 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:42.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@534c705]
2026-01-05T09:43:42.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(total_amount), 0) AS averageAmount, COALESCE(MAX(total_amount), 0) AS maxAmount, COALESCE(MIN(total_amount), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:43:42.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233f59fe] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d009316] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:42.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.017+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-05T09:43:42.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461711880 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:42.027+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@552349506 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:42.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd5ffb0] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.039+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955911968 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:42.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:42.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:43:42.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:43:42.041+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:42.042+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-05T09:43:42.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-05T09:43:42.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:42.061+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:43:42.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:43:42.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20af0a89]
2026-01-05T09:43:42.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233f59fe]
2026-01-05T09:43:42.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:42.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:42.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-05T09:43:42.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:42.069+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:42.069+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1927872, totalCo (truncated)...]
2026-01-05T09:43:42.069+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bd5ffb0]
2026-01-05T09:43:42.070+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d009316]
2026-01-05T09:43:42.074+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@785f0452]
2026-01-05T09:43:42.076+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-05T09:43:42.079+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:42.079+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:42.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:42.091+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:42.092+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:42.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:42.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606761 (truncated)...]
2026-01-05T09:43:42.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:42.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:42.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:42.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:42.124+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:42.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:42.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:43:42.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:43:42.162+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:42.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:42.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:42.227+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:42.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:43:42.227+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-05T09:43:42.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:43:42.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:42.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:43:42.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:42.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:43:42.252+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:43:42.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:42.274+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:43:42.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:43:42.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:42.265+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.269+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:43:42.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:43:42.359+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:42.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:43:42.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:42.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.638+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.644+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.645+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74cf166] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:42.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a161f5f] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:42.649+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.647+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.648+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:42.661+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e04106] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.662+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3669c4] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.665+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:42.682+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a76e802] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:42.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2123271842 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:42.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@369282054 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:42.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:43:42.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@950273482 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:42.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@409178809 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:42.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@811101356 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:42.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(total_amount), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:43:42.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-05T09:43:42.716+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(total_amount), 0) AS averageAmount, COALESCE(MAX(total_amount), 0) AS maxAmount, COALESCE(MIN(total_amount), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:43:42.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:43:42.717+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:42.718+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-05T09:43:42.731+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-05T09:43:42.735+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-05T09:43:42.735+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:42.801+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:43.057+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a76e802]
2026-01-05T09:43:42.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:43:42.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-05T09:43:42.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-05T09:43:42.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:43:43.058+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:43.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74cf166]
2026-01-05T09:43:43.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a161f5f]
2026-01-05T09:43:43.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3669c4]
2026-01-05T09:43:43.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e04106]
2026-01-05T09:43:43.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:43.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:43.095+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.106+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-05T09:43:43.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.098+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d4f2656] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:43.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=10, totalAmo (truncated)...]
2026-01-05T09:43:43.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606761 (truncated)...]
2026-01-05T09:43:43.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1927872, totalCo (truncated)...]
2026-01-05T09:43:43.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1213711055 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:43.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:43.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:43.119+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.122+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.127+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:43.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:43.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:43:43.141+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:43.173+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:43.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:43:43.207+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:43.209+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:43.244+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:43.224+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:43:43.230+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:43.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:43.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:43.250+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:43.251+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:43.250+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:43.258+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:43.261+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0a0282] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:43.261+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1143162996 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:43.259+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:43.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:43.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13dcb486] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:43.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:43.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:43.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988614088 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:43.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:43.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@d4f2656]
2026-01-05T09:43:43.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(total_amount), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:43:43.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.293+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-05T09:43:43.311+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-05T09:43:43.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:43.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.334+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0a0282]
2026-01-05T09:43:43.345+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.346+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:43.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-05T09:43:43.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:43:43.390+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-05T09:43:43.392+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13dcb486]
2026-01-05T09:43:43.400+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:43:43.407+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=10, totalAmo (truncated)...]
2026-01-05T09:43:43.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:43:43.419+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:43:43.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:43.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:43.433+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:43.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:43.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39151007] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:43.449+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@218714346 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:43.462+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:43.532+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:43.597+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:43.612+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:43.680+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:43.684+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:43.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39151007]
2026-01-05T09:43:43.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:43.693+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-05T09:43:43.700+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:44.934+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-01-05T09:43:44.935+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits
2026-01-05T09:43:44.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:44.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:44.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:44.952+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:44.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:44.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-01-05T09:43:44.956+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:44.958+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:44.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:44.984+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits
2026-01-05T09:43:44.985+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:44.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:44.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:44.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-01-05T09:43:44.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:45.036+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:45.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5040b1b7] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.029+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:45.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-01-05T09:43:45.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409bd4f4] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.048+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:45.048+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-01-05T09:43:45.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.053+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1760eb82] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61012098] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405953721 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:45.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@216101438 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:45.098+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:45.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:45.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1400987994 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:45.109+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:45.111+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:45.111+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:45.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:45.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1305797395 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:45.136+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-01-05T09:43:45.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 1(Long)
2026-01-05T09:43:45.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:45.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:45.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:45.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1760eb82]
2026-01-05T09:43:45.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409bd4f4]
2026-01-05T09:43:45.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5040b1b7]
2026-01-05T09:43:45.152+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:45.162+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:45.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1921295a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363afeda] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.185+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:45.201+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458179865 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:45.211+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@633359364 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:45.212+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 1
2026-01-05T09:43:45.217+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:45.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:45.219+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61012098]
2026-01-05T09:43:45.220+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:45.227+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:45.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:45.238+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CreditDto(creditId=8, companyId=1, amount=5145, reaso (truncated)...]
2026-01-05T09:43:45.247+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:45.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:45.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits
2026-01-05T09:43:45.258+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:45.261+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits
2026-01-05T09:43:45.261+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:45.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:45.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits
2026-01-05T09:43:45.265+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:45.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:45.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:45.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1921295a]
2026-01-05T09:43:45.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits", parameters={}
2026-01-05T09:43:45.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@363afeda]
2026-01-05T09:43:45.282+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.282+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getCredits()
2026-01-05T09:43:45.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:45.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402166f4] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.288+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:45.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1356528723 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:45.296+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:45.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getCredits(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:45.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@addbb6a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.296+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:45.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1598245334 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:45.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:45.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54bbbbc3] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.313+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:45.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:45.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@426294724 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:45.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==>  Preparing: SELECT * FROM credit_tb WHERE company_id = ? ORDER BY created_at DESC
2026-01-05T09:43:45.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : ==> Parameters: 1(Long)
2026-01-05T09:43:45.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:45.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:45.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.CreditMapper.findByCompanyId     : <==      Total: 1
2026-01-05T09:43:45.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@402166f4]
2026-01-05T09:43:45.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@addbb6a]
2026-01-05T09:43:45.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54bbbbc3]
2026-01-05T09:43:45.390+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:45.391+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:45.391+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:45.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302827b8] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:45.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:45.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CreditDto(creditId=8, companyId=1, amount=5145, reaso (truncated)...]
2026-01-05T09:43:45.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071327119 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:45.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:45.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:45.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:45.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:45.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:45.435+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@302827b8]
2026-01-05T09:43:45.441+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:45.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:45.443+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.308+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:48.308+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:48.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:48.309+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:43:48.309+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:48.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-05T09:43:48.319+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:43:48.309+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:48.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:48.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:48.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:48.319+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:48.324+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:43:48.327+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:43:48.329+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:43:48.341+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:48.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:48.332+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:48.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:48.334+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:43:48.340+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:48.343+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:43:48.345+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:48.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:48.346+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:48.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:43:48.352+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.349+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:43:48.349+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:43:48.351+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.352+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:43:48.353+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae59fd6] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.359+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.359+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:43:48.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bc8ef3] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1322675548 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:48.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e4dcfc] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1633919653 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:48.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:48.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372ff313] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.375+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.377+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:48.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@203045993 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:48.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:48.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23682438] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7917821 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:48.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:48.384+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(total_amount), 0) AS averageAmount, COALESCE(MAX(total_amount), 0) AS maxAmount, COALESCE(MIN(total_amount), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:43:48.388+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f67e64] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.390+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:48.393+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:43:48.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@948904800 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:48.399+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:48.400+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-05T09:43:48.401+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ae59fd6]
2026-01-05T09:43:48.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1415755558 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:43:48.408+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-05T09:43:48.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:43:48.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bc8ef3]
2026-01-05T09:43:48.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(total_amount), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:43:48.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:43:48.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-05T09:43:48.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.419+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-05T09:43:48.419+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a644fe8] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.426+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-05T09:43:48.426+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69e4dcfc]
2026-01-05T09:43:48.428+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e02bc8a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.428+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@372ff313]
2026-01-05T09:43:48.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:43:48.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@669417930 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:48.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-05T09:43:48.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.433+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1321372502 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:48.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23682438]
2026-01-05T09:43:48.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:48.435+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47f67e64]
2026-01-05T09:43:48.435+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1927872, totalCo (truncated)...]
2026-01-05T09:43:48.436+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:48.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606761 (truncated)...]
2026-01-05T09:43:48.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:48.446+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:48.449+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.449+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-05T09:43:48.450+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=10, totalAmo (truncated)...]
2026-01-05T09:43:48.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:43:48.458+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:48.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-05T09:43:48.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:48.466+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:48.468+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:43:48.469+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:48.469+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:43:48.478+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:43:48.469+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:48.476+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:48.476+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a644fe8]
2026-01-05T09:43:48.478+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:43:48.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.478+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-05T09:43:48.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:43:48.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:48.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e02bc8a]
2026-01-05T09:43:48.480+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:48.480+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:48.480+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:43:48.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:48.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:48.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.482+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:43:48.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:43:48.493+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:48.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:48.494+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.494+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68414161] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:48.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee83c82] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.496+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1165308217 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:48.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:43:48.493+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:43:48.498+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.495+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:48.495+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@262185448 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:48.496+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:48.497+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:48.498+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.498+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:48.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:48.500+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:48.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:43:48.502+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:48.502+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50571a60] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.509+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3bfcca] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:43:48.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:48.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@838525598 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:48.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbf8] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@777979250 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:48.514+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@10108086 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:48.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:48.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ee83c82]
2026-01-05T09:43:48.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:48.514+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:43:48.514+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(total_amount), 0) AS averageAmount, COALESCE(MAX(total_amount), 0) AS maxAmount, COALESCE(MIN(total_amount), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:43:48.515+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:48.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.525+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7bd2db] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.527+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@285798330 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:48.527+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:48.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:48.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-05T09:43:48.518+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-05T09:43:48.531+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:48.525+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.526+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:48.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:48.532+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50571a60]
2026-01-05T09:43:48.533+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626dfb66] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.537+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:48.543+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.546+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:48.544+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569866106 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:48.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-05T09:43:48.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:43:48.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68414161]
2026-01-05T09:43:48.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:48.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.551+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-05T09:43:48.548+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.549+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:43:48.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f3bfcca]
2026-01-05T09:43:48.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@976fbf8]
2026-01-05T09:43:48.563+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.551+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e7bd2db]
2026-01-05T09:43:48.552+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.562+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:48.563+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-05T09:43:48.563+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1927872, totalCo (truncated)...]
2026-01-05T09:43:48.564+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:48.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:48.567+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:43:48.575+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606761 (truncated)...]
2026-01-05T09:43:48.597+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.581+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.585+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:48.585+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:48.600+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:43:48.615+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:43:48.626+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:43:48.617+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:48.628+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:48.629+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:48.624+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/subscriptions/current
2026-01-05T09:43:48.630+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:48.627+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.630+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:43:48.631+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:48.631+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:43:48.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:48.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194c0b31] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.633+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:43:48.633+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.633+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@626dfb66]
2026-01-05T09:43:48.634+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@831260340 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:48.635+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:43:48.639+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9ebc9c] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.642+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.643+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(total_amount), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:43:48.643+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:48.644+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@146928284 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:48.644+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-05T09:43:48.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.645+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-05T09:43:48.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:43:48.646+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:48.649+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:48.651+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185cc5f0] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:48.650+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:48.657+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1633183791 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:43:48.657+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-05T09:43:48.659+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:43:48.661+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194c0b31]
2026-01-05T09:43:48.662+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 1(Long)
2026-01-05T09:43:48.662+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=10, totalAmo (truncated)...]
2026-01-05T09:43:48.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:48.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.666+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====>  Preparing: SELECT * FROM subscription_plan_tb WHERE plan_id = ? LIMIT 1
2026-01-05T09:43:48.667+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b9ebc9c]
2026-01-05T09:43:48.668+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : ====> Parameters: 1(Long)
2026-01-05T09:43:48.670+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.677+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:48.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:48.680+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.SubscriptionPlanMapper.findById  : <====      Total: 1
2026-01-05T09:43:48.684+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:43:48.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@185cc5f0]
2026-01-05T09:43:48.694+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:48.696+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=1, companyId=1, planId= (truncated)...]
2026-01-05T09:43:48.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:49.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:43:49.048+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:49.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:49.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:49.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:49.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:43:49.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/stats
2026-01-05T09:43:49.073+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:43:49.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:43:49.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:43:49.090+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/credits/total
2026-01-05T09:43:49.091+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:43:49.091+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:43:49.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:43:49.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:43:49.098+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:43:49.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:43:49.098+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:43:49.098+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:43:49.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:43:49.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:43:49.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:43:49.102+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:43:49.104+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.107+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:43:49.107+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:43:49.108+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:49.111+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:43:49.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:49.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:49.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:43:49.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:49.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:49.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90577bc] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:49.117+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43893c0f] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:49.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:49.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d1dbc79] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:49.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45eaa1a4] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:49.119+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642719462 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:49.119+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1236036215 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:49.125+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53072135] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:49.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:43:49.128+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(total_amount), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:43:49.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1990560413 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:49.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@739459739 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:49.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 1(Long)
2026-01-05T09:43:49.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@100180415 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:49.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 1(Long)
2026-01-05T09:43:49.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(total_amount), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(total_amount), 0) AS averageAmount, COALESCE(MAX(total_amount), 0) AS maxAmount, COALESCE(MIN(total_amount), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:43:49.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:43:49.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(d.amount), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:43:49.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 1(Long)
2026-01-05T09:43:49.136+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:43:49.136+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 1(Long), 2026-01-05(LocalDate)
2026-01-05T09:43:49.140+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 1(Long)
2026-01-05T09:43:49.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@90577bc]
2026-01-05T09:43:49.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 2
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43893c0f]
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectCategoryRatio            : <==      Total: 4
2026-01-05T09:43:49.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2025-12, totalAmount= (truncated)...]
2026-01-05T09:43:49.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=10, totalAmo (truncated)...]
2026-01-05T09:43:49.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45eaa1a4]
2026-01-05T09:43:49.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d1dbc79]
2026-01-05T09:43:49.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53072135]
2026-01-05T09:43:49.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:49.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:49.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:49.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:49.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:49.151+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=5145})]
2026-01-05T09:43:49.152+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=1927872, totalCo (truncated)...]
2026-01-05T09:43:49.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=1606761 (truncated)...]
2026-01-05T09:43:49.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:49.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:49.162+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:57.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:57.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:57.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:43:57.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:43:57.949+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:57.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:57.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/companies
2026-01-05T09:43:57.949+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:57.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-05T09:43:57.952+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:57.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:57.959+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:43:57.959+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:57.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:57.960+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:43:57.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:57.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edb5d48] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:57.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:43:57.968+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:57.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:43:57.975+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:43:57.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:57.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:43:57.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@950400519 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:57.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:57.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233caf10] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:57.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:57.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:57.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48037f37] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:57.981+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:57.981+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea0b93f] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:57.982+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1641139185 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:57.983+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1897208241 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:57.983+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:57.986+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:57.985+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:57.986+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:57.987+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1722040242 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:57.989+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5edb5d48]
2026-01-05T09:43:57.991+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:57.994+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:57.994+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6703765] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:57.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:57.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:57.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:57.997+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:57.997+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1571228232 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:57.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@233caf10]
2026-01-05T09:43:57.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48037f37]
2026-01-05T09:43:58.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e2d39d9] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.004+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1089429589 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:58.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:58.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=1, userId=1, companyId=1 (truncated)...]
2026-01-05T09:43:58.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:58.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ea0b93f]
2026-01-05T09:43:58.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.017+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6703765]
2026-01-05T09:43:58.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:58.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.029+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2097f5f6] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.030+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1983869251 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:58.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60118642] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.033+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1742560826 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:58.033+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:58.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:58.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6e2d39d9]
2026-01-05T09:43:58.045+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.045+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:58.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:58.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2097f5f6]
2026-01-05T09:43:58.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74560de3] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@60118642]
2026-01-05T09:43:58.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:58.053+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810984666 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:58.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.061+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.061+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ddebcd] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168968898 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:43:58.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:58.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:58.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:58.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:58.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:58.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:58.069+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74560de3]
2026-01-05T09:43:58.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.075+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.077+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ddebcd]
2026-01-05T09:43:58.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@725ac2c8] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b190f8f] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.079+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@526661658 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:58.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1709848924 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:43:58.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:58.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:58.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:58.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:58.092+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.095+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:58.123+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:58.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b190f8f]
2026-01-05T09:43:58.123+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:58.125+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:58.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@725ac2c8]
2026-01-05T09:43:58.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a32aef] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@549d6733] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:58.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1223065255 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:43:58.134+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1206615896 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:58.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.141+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.134+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:58.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:58.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:58.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:58.143+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:58.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a55302] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1514103613 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:58.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:58.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:58.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@549d6733]
2026-01-05T09:43:58.151+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64a32aef]
2026-01-05T09:43:58.152+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:58.160+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e013179] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:58.168+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555383157 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:58.171+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.180+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:43:58.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:58.194+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:58.196+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a55302]
2026-01-05T09:43:58.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/pending
2026-01-05T09:43:58.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:43:58.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b131324] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.201+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@704410119 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:58.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:43:58.202+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.208+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:43:58.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:58.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e013179]
2026-01-05T09:43:58.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4c7cc7] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1515259630 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:43:58.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69bcb430] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.219+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.235+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667204172 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.243+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b131324]
2026-01-05T09:43:58.245+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:43:58.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:43:58.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43a38fb] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.250+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1741914475 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:58.261+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4c7cc7]
2026-01-05T09:43:58.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:58.265+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:43:58.267+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:43:58.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69bcb430]
2026-01-05T09:43:58.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67fc6a80] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:58.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1810714491 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43a38fb]
2026-01-05T09:43:58.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:43:58.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.292+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 1(Long)
2026-01-05T09:43:58.293+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8c3b56] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:43:58.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@782510396 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:43:58.296+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:43:58.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses
2026-01-05T09:43:58.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67fc6a80]
2026-01-05T09:43:58.300+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:43:58.303+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.311+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.311+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b8c3b56]
2026-01-05T09:43:58.311+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:43:58.311+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:43:58.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:43:58.313+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:58.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643ec0a7] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.325+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1901182404 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.327+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:58.328+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:58.329+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:58.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:58.332+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@643ec0a7]
2026-01-05T09:43:58.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:43:58.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.334+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67d175af] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:43:58.334+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1970842122 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.345+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.345+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.335+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:43:58.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:43:58.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ec8017] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.351+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@67d175af]
2026-01-05T09:43:58.353+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fee1756] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677616905 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@191918484 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:58.361+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:43:58.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:58.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 1(Long)
2026-01-05T09:43:58.376+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 2
2026-01-05T09:43:58.376+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:58.376+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ec8017]
2026-01-05T09:43:58.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fee1756]
2026-01-05T09:43:58.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbb3e31] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f4970] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@556554878 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:58.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2031401542 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:43:58.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.381+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:43:58.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fbb3e31]
2026-01-05T09:43:58.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:43:58.388+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.389+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63f4970]
2026-01-05T09:43:58.391+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34ed250e] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.392+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.394+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1112661780 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:58.394+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0e6265] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1938218557 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 5(Long), 4(Long)
2026-01-05T09:43:58.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.398+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 3
2026-01-05T09:43:58.399+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34ed250e]
2026-01-05T09:43:58.400+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.400+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b47c12a] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.404+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920603673 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:43:58.406+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.407+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.410+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.410+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0e6265]
2026-01-05T09:43:58.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b47c12a]
2026-01-05T09:43:58.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c7657c] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=5, drafterId=5 (truncated)...]
2026-01-05T09:43:58.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@681978059 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:43:58.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:43:58.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:43:58.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:43:58.424+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54c7657c]
2026-01-05T09:43:58.425+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:43:58.425+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26270d73] was not registered for synchronization because synchronization is not active
2026-01-05T09:43:58.426+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1227124814 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:43:58.426+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:43:58.427+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:43:58.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:43:58.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26270d73]
2026-01-05T09:43:58.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:43:58.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:43:58.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:01.104+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/switch-company
2026-01-05T09:44:01.107+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-01-05T09:44:01.108+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 1, uri: /api/users/switch-company
2026-01-05T09:44:01.109+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-01-05T09:44:01.109+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-01-05T09:44:01.110+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-01-05T09:44:01.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=2, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwid (truncated)...]
2026-01-05T09:44:01.112+09:00  INFO 8676 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 1, companyId: 2
2026-01-05T09:44:01.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:01.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56956b2] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:01.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@546379779 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:01.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:01.118+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:01.124+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:01.125+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56956b2]
2026-01-05T09:44:01.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:01.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@176399504 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will be managed by Spring
2026-01-05T09:44:01.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:01.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:01.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:01.135+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21] from current transaction
2026-01-05T09:44:01.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.setPrimaryCompany     : ==>  Preparing: UPDATE user_company_tb SET is_primary = CASE WHEN user_id = ? AND company_id = ? THEN 1 ELSE 0 END, updated_at = NOW() WHERE user_id = ?
2026-01-05T09:44:01.143+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.setPrimaryCompany     : ==> Parameters: 1(Long), 2(Long), 1(Long)
2026-01-05T09:44:01.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.setPrimaryCompany     : <==    Updates: 7
2026-01-05T09:44:01.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21] from current transaction
2026-01-05T09:44:01.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.updateUserCompanyId   : ==>  Preparing: UPDATE user_tb SET company_id = ? WHERE user_id = ?
2026-01-05T09:44:01.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.updateUserCompanyId   : ==> Parameters: 2(Long), 1(Long)
2026-01-05T09:44:01.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.updateUserCompanyId   : <==    Updates: 1
2026-01-05T09:44:01.157+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.158+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.160+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15304f21]
2026-01-05T09:44:01.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:01.166+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780ee08a] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:01.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@3389947 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:01.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:01.168+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:44:01.171+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:01.172+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@780ee08a]
2026-01-05T09:44:01.175+09:00  INFO 8676 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회사 전환 완료 - userId: 1, companyId: 2
2026-01-05T09:44:01.176+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:01.177+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 전환이 완료되었습니다., data={user=UserDto(userId=1, username=test_ceo, p (truncated)...]
2026-01-05T09:44:01.178+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:02.134+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:02.134+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:44:02.149+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:44:02.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:44:02.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:44:02.134+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:44:02.136+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:02.179+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.180+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:02.181+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:02.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.185+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dfc5c6a] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.141+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:02.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:02.200+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:02.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:44:02.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:44:02.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies
2026-01-05T09:44:02.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:44:02.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:44:02.213+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:02.214+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:02.215+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.217+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:44:02.225+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.218+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:02.223+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7bc9e4] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b5d618] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.244+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6afda7f4] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.245+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1632533299 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:02.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:02.261+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:02.262+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:02.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6343a380] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2079059995 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:02.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1472934447 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:02.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1829635483 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:02.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:02.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:02.285+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:44:02.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1696751469 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:44:02.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:02.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:02.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-05T09:44:02.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:02.325+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:02.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dfc5c6a]
2026-01-05T09:44:02.327+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.346+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:02.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.349+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:02.349+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:02.349+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-05T09:44:02.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:02.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6343a380]
2026-01-05T09:44:02.361+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6afda7f4]
2026-01-05T09:44:02.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b5d618]
2026-01-05T09:44:02.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b7bc9e4]
2026-01-05T09:44:02.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.369+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.375+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:02.377+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e85313] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@640ccd89] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:44:02.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.381+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:44:02.381+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1025961098 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:44:02.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@988963695 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:02.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.393+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:02.394+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.395+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:02.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:02.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:02.400+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:02.410+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:02.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ac577d] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:02.460+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1340112917 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:02.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@640ccd89]
2026-01-05T09:44:02.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:02.462+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:02.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.462+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:02.480+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:02.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73e85313]
2026-01-05T09:44:02.501+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.502+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:44:02.504+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.498+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:02.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:02.544+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:02.595+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55ac577d]
2026-01-05T09:44:02.546+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:02.549+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:02.597+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.601+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:44:02.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:02.610+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:02.612+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.614+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ae28a6] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.609+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:02.610+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:02.632+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.679+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@247911987 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:02.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:02.684+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:02.688+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.724+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:02.725+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:02.726+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:02.741+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.742+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:02.743+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:02.741+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6825407] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e61ddd2] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.750+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@118000950 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:02.751+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:02.751+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@11732984 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:02.760+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:02.760+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:02.762+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:02.767+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:02.776+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ae28a6]
2026-01-05T09:44:02.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.800+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@463abb2e] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@734891188 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:02.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:02.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:02.807+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:02.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6825407]
2026-01-05T09:44:02.852+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:02.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e61ddd2]
2026-01-05T09:44:02.934+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:02.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:02.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5553de5f] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:02.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:02.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1170998890 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:02.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:02.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:02.975+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:02.981+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:02.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:02.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:02.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:03.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@463abb2e]
2026-01-05T09:44:03.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:03.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5553de5f]
2026-01-05T09:44:03.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:03.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.002+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:44:03.002+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:03.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:03.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:03.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:03.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5ffa8] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635453646 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:03.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:03.017+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:03.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:03.030+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:03.030+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:03.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:03.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:03.042+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:03.043+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ae5ffa8]
2026-01-05T09:44:03.043+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.044+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.044+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430ed79a] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.044+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:03.044+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537295803 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:03.045+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:03.045+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:03.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:03.047+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:03.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:03.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:03.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:03.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:03.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@430ed79a]
2026-01-05T09:44:03.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:03.067+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@435bd551] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.068+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21157edb] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.076+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1985771687 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:03.077+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@90674484 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:03.077+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:03.077+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:03.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:03.078+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:03.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:03.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:03.081+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@435bd551]
2026-01-05T09:44:03.081+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21157edb]
2026-01-05T09:44:03.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.083+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:03.084+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:03.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:03.092+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:03.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:03.097+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:03.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:03.099+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:03.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:03.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.101+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa87f3b] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.112+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1752137126 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:03.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:03.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:03.117+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:03.125+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aa87f3b]
2026-01-05T09:44:03.125+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.125+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d2ef50] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@786206719 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:03.127+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:03.127+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:03.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:03.129+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13d2ef50]
2026-01-05T09:44:03.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.130+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:03.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:03.134+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:03.140+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:03.142+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:03.143+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:03.144+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:03.144+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@357f515a] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@924689145 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:03.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:03.151+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:03.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:03.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@357f515a]
2026-01-05T09:44:03.157+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:03.157+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69aff790] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:03.158+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638946942 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:03.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:03.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:03.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:03.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69aff790]
2026-01-05T09:44:03.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:03.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:03.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:08.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:44:08.707+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/logout
2026-01-05T09:44:08.709+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:44:08.711+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:44:08.715+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:44:08.716+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-05T09:44:08.725+09:00  INFO 8676 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=1
2026-01-05T09:44:08.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:08.732+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:44:08.733+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:19.751+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:44:19.866+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:44:19.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:44:20.017+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:44:20.041+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:44:20.075+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:44:20.098+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-05T09:44:20.105+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-05T09:44:20.111+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:20.114+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8335bb] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:20.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1342722976 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:20.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:44:20.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-05T09:44:20.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:44:20.176+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c8335bb]
2026-01-05T09:44:20.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:20.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ac2d00] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:20.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@936320828 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:20.300+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:20.328+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:20.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:20.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30ac2d00]
2026-01-05T09:44:20.383+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 2
2026-01-05T09:44:20.398+09:00  INFO 8676 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-05T09:44:20.399+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:20.409+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-05T09:44:20.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:21.027+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:44:21.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:44:21.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.182+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:44:21.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:44:21.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.200+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:44:21.230+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies
2026-01-05T09:44:21.392+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:44:21.393+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:44:21.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:44:21.424+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:44:21.424+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.425+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:44:21.466+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:44:21.506+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.507+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:21.509+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:21.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:21.518+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:21.523+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:44:21.549+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.550+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:21.584+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4abd0d56] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.596+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.597+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:21.598+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:21.600+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:21.606+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:21.613+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:21.614+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:21.656+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@604842606 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:21.659+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:21.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.683+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:21.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:21.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:21.678+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:21.682+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:44:21.683+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:21.683+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:21.684+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:21.685+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.694+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.694+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-05T09:44:21.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.701+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.701+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:21.711+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@94b9d3a] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.712+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10919608] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.713+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cd33f63] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1d5567] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.714+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-05T09:44:21.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1574187833 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:21.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27093459] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4abd0d56]
2026-01-05T09:44:21.732+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:21.734+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:21.737+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@843966274 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:21.752+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:21.740+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2144174146 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:21.740+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1207771953 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:21.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:21.749+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:44:21.750+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1774987131 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:44:21.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:21.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:21.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:21.763+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:21.768+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:21.779+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:21.780+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:21.784+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:21.810+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:21.817+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:44:21.823+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:21.831+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:21.831+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@94b9d3a]
2026-01-05T09:44:21.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:21.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:21.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:21.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:21.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:21.834+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:21.834+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:21.835+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:21.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1d5567]
2026-01-05T09:44:21.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cd33f63]
2026-01-05T09:44:21.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10919608]
2026-01-05T09:44:21.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27093459]
2026-01-05T09:44:21.860+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:21.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8df3dff] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.866+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:21.866+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.867+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.867+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:21.872+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:44:21.888+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@517625859 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:21.891+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:21.902+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e50038] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1808d132] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bdb4ca] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:21.917+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:44:21.928+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:21.929+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:21.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1691810771 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:21.935+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1818795365 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:21.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1554577541 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:44:21.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:44:21.949+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:21.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.965+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:21.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:21.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:21.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:21.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:44:21.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:21.989+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:21.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:21.994+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:44:21.994+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:21.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:22.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:22.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71e50038]
2026-01-05T09:44:22.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:22.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.000+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:22.001+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1808d132]
2026-01-05T09:44:22.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:22.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8df3dff]
2026-01-05T09:44:22.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af5c7ca] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:22.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:44:22.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@50bdb4ca]
2026-01-05T09:44:22.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1001684300 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:22.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:22.017+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4771d7e3] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.049+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@917518903 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:22.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:22.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f32e511] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.027+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:22.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:22.058+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:22.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:22.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1311182810 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:22.095+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:22.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.096+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:22.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:22.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:22.177+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:22.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:22.216+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:44:22.252+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:44:22.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:22.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af5c7ca]
2026-01-05T09:44:22.265+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:22.267+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:22.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4771d7e3]
2026-01-05T09:44:22.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.282+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:22.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:22.300+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:22.282+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:44:22.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:44:22.288+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.344+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d704887] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.310+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:22.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.344+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.344+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155583810 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:22.406+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:22.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:22.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:22.354+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:22.412+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:22.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:22.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:22.413+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f32e511]
2026-01-05T09:44:22.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7971d4] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@332512547 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:22.418+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:22.425+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:22.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:22.428+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:22.417+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:22.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a98266] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1242871019 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:22.431+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.432+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:22.434+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:22.476+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:22.478+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:22.478+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:22.482+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@13a98266]
2026-01-05T09:44:22.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d704887]
2026-01-05T09:44:22.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e7971d4]
2026-01-05T09:44:22.485+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.488+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:22.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b237bcb] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.490+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64feccb5] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:22.491+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:22.495+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1682338939 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:22.496+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069206237 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:22.497+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:22.592+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:22.500+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:22.608+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:22.627+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:22.641+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b237bcb]
2026-01-05T09:44:22.642+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.649+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:22.650+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.652+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:22.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64feccb5]
2026-01-05T09:44:22.709+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:22.711+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:22.713+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:22.973+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:22.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:44:22.981+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:44:22.981+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:44:23.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:23.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:44:23.018+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:44:23.030+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:44:23.062+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:44:23.174+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:44:23.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:44:23.192+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:44:23.193+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:44:23.194+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:44:23.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:44:23.191+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:44:23.196+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:44:23.192+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:44:23.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:44:23.194+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb171c4] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:44:23.197+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:23.201+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.201+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd504e2] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:44:23.200+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:44:23.205+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.205+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:44:23.207+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c68d2b5] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.209+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@368035860 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:23.209+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.208+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3720ffc] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.249+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125570915 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:23.249+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1835073682 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:23.275+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.249+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@405185745 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:23.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.250+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:23.274+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:23.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.282+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c68d2b5]
2026-01-05T09:44:23.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:44:23.303+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:23.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3720ffc]
2026-01-05T09:44:23.306+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.309+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:23.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:23.330+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba3188f] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.330+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cb171c4]
2026-01-05T09:44:23.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:44:23.332+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:23.333+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908703796 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:23.334+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:23.344+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:23.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3bd504e2]
2026-01-05T09:44:23.411+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:23.416+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:23.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:44:23.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:44:23.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/2/applications
2026-01-05T09:44:23.399+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:44:23.422+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:23.435+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:44:23.443+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:23.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/2/applications
2026-01-05T09:44:23.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:44:23.498+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/2/applications
2026-01-05T09:44:23.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:44:23.567+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies/2/applications
2026-01-05T09:44:23.543+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:44:23.573+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba3188f]
2026-01-05T09:44:23.568+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:44:23.570+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/2/applications
2026-01-05T09:44:23.576+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/2/applications", parameters={}
2026-01-05T09:44:23.575+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:23.575+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:44:23.576+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:44:23.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:23.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:44:23.579+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:44:23.581+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:23.659+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/2/applications
2026-01-05T09:44:23.664+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:44:23.783+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:44:23.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:44:23.814+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:44:23.763+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:44:23.823+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191081a1] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@618732968 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:23.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies/2/applications
2026-01-05T09:44:23.812+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:44:23.827+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:44:23.818+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:44:23.828+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.825+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.826+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/2/applications
2026-01-05T09:44:23.827+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:44:23.828+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e22fb1e] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.833+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.834+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/2/applications", parameters={}
2026-01-05T09:44:23.834+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:44:23.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:44:23.846+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:23.846+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@902319573 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:23.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@191081a1]
2026-01-05T09:44:23.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:44:23.849+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:44:23.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.859+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.850+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:44:23.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d62c854] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.862+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c025790] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1625445328 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:23.865+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c7afb6] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.876+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:23.877+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:44:23.879+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1846312840 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:23.879+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e22fb1e]
2026-01-05T09:44:23.880+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468567220 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:23.882+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 2(Long)
2026-01-05T09:44:23.882+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:23.884+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:23.892+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.893+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f75883f] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:23.894+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:44:23.895+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:44:23.896+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1503349067 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:23.897+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d62c854]
2026-01-05T09:44:23.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:44:23.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:23.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:44:23.899+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:23.900+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:23.900+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:23.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@69c7afb6]
2026-01-05T09:44:24.031+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:44:24.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 4
2026-01-05T09:44:24.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:24.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c025790]
2026-01-05T09:44:24.035+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f75883f]
2026-01-05T09:44:24.047+09:00  INFO 8676 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 4
2026-01-05T09:44:24.039+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735faa0c] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:24.041+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:24.050+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:24.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@665911758 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:24.051+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5214df] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:24.052+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:44:24.060+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:44:24.061+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@253411209 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:24.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:24.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 2(Long)
2026-01-05T09:44:24.064+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:44:24.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:44:24.100+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:44:24.124+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@735faa0c]
2026-01-05T09:44:24.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:24.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 4
2026-01-05T09:44:24.166+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f5214df]
2026-01-05T09:44:24.167+09:00  INFO 8676 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 4
2026-01-05T09:44:24.165+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:44:24.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:24.178+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:44:24.179+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:24.168+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:32.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:44:32.482+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:44:32.495+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/logout
2026-01-05T09:44:32.496+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:44:32.499+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:44:32.500+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:44:32.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-05T09:44:32.522+09:00  INFO 8676 --- [http-nio-8080-exec-4] SECURITY                                 : LOGOUT userId=1
2026-01-05T09:44:32.527+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:32.527+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:44:32.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:38.292+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:44:38.322+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:44:38.328+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:44:38.329+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:44:38.329+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:44:38.330+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:44:38.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountant, password=1234)]
2026-01-05T09:44:38.348+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountant
2026-01-05T09:44:38.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.351+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679eddd5] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1586056648 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:38.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:44:38.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-01-05T09:44:38.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:44:38.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@679eddd5]
2026-01-05T09:44:38.480+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.481+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af10100] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2096333714 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:38.484+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:44:38.500+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:44:38.508+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:44:38.509+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@af10100]
2026-01-05T09:44:38.510+09:00  INFO 8676 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 로그인 성공 - userId: 10, role: USER, companyId: 1
2026-01-05T09:44:38.510+09:00  INFO 8676 --- [http-nio-8080-exec-7] SECURITY                                 : LOGIN_SUCCESS userId=10 username=test_accountant role=USER
2026-01-05T09:44:38.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:38.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=10, username=test_accountant, pa (truncated)...]
2026-01-05T09:44:38.512+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:38.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:44:38.740+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.741+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:44:38.742+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:44:38.742+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.742+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:44:38.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:38.851+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:38.897+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/companies
2026-01-05T09:44:38.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:44:38.898+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:44:38.924+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:44:38.928+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:44:38.928+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:38.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:38.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:44:38.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:44:38.932+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:44:38.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:38.933+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.935+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:38.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:44:38.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.958+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:44:38.959+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:38.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:38.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6351e58c] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.962+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:44:38.964+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:38.949+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.950+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:38.960+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:38.965+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:44:38.967+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acf9d91] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.969+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119944485 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:38.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.976+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c69f6e9] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:38.980+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:44:38.980+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41145bdc] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.984+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1119237399 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:44:38.992+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b5429c] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:38.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:38.994+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T09:44:38.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:38.996+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868754864 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:39.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d73d8da] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:44:39.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811771835 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-05T09:44:39.016+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:39.027+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@289494611 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:39.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6351e58c]
2026-01-05T09:44:39.030+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:44:39.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:39.033+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:39.034+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.058+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:44:39.046+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:39.061+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:39.063+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186813461 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:44:39.065+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:39.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:39.107+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:44:39.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c69f6e9]
2026-01-05T09:44:39.104+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:39.109+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:39.115+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:39.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:39.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:39.126+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:39.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b5429c]
2026-01-05T09:44:39.133+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41145bdc]
2026-01-05T09:44:39.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.136+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2acf9d91]
2026-01-05T09:44:39.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.146+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776546c9] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.147+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e450f1] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.148+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@278779769 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.150+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:39.159+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:39.166+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:39.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@654918042 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.164+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:39.166+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d73d8da]
2026-01-05T09:44:39.166+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:39.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:39.167+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:39.195+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:39.196+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:39.198+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:39.207+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:44:39.210+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:44:39.263+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:39.264+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:39.275+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:44:39.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23e450f1]
2026-01-05T09:44:39.277+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776546c9]
2026-01-05T09:44:39.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:44:39.278+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657d66df] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.279+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2481bbca] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@955459511 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:39.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@635638899 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.283+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b26ac58] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.290+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:39.290+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:39.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:39.291+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677507955 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:44:39.295+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:44:39.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:44:39.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:39.297+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:39.299+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657d66df]
2026-01-05T09:44:39.298+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2481bbca]
2026-01-05T09:44:39.300+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.309+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.310+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5d43be] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.310+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ae37b] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.310+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:44:39.312+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806916404 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.313+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1449937065 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.314+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b26ac58]
2026-01-05T09:44:39.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:39.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:39.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:39.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:39.318+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:44:39.330+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:39.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:39.350+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:39.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f9ae37b]
2026-01-05T09:44:39.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e5d43be]
2026-01-05T09:44:39.361+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.361+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0cd09f] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f280a99] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1536701043 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.362+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1468120892 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:39.363+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:39.364+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:39.364+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:39.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:39.368+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:39.380+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f280a99]
2026-01-05T09:44:39.382+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f0cd09f]
2026-01-05T09:44:39.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.394+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e23db] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.384+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.397+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@95f5db] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.396+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@995990787 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.399+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1777616254 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.414+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:39.424+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:39.425+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:39.427+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:39.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:39.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:39.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41e23db]
2026-01-05T09:44:39.444+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.444+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66877af5] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.443+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@95f5db]
2026-01-05T09:44:39.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@326278405 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:44:39.449+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:39.449+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:39.450+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30137341] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:39.450+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:39.452+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@520582069 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:39.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:39.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:39.466+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:39.467+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66877af5]
2026-01-05T09:44:39.467+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.475+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:44:39.476+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:39.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:39.517+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30137341]
2026-01-05T09:44:39.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:39.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:44:39.529+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:45.829+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=2&size=10
2026-01-05T09:44:46.284+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=2&size=10
2026-01-05T09:44:46.360+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:44:46.423+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=2&size=10
2026-01-05T09:44:46.475+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=2&size=10", parameters={masked}
2026-01-05T09:44:46.521+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:46.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:46.583+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ca8761] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:46.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1563266007 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:46.705+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:46.706+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:46.720+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:46.727+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28ca8761]
2026-01-05T09:44:46.727+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:46.728+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63509d0f] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:46.728+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1746403580 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:46.729+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:46.730+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:46.743+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:46.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63509d0f]
2026-01-05T09:44:46.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:46.746+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29f73b9a] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:46.747+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1319658318 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:46.748+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:46.748+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:47.041+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:47.106+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29f73b9a]
2026-01-05T09:44:47.107+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:47.209+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da62eca] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:47.260+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099114767 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:47.265+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:47.267+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:47.310+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:47.316+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6da62eca]
2026-01-05T09:44:47.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:47.317+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8bcdcf] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:47.323+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@914845226 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:47.331+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:47.332+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:47.365+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:47.366+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a8bcdcf]
2026-01-05T09:44:47.367+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:47.374+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46bf6ac8] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:47.375+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919820389 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:47.383+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:47.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:47.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:47.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@46bf6ac8]
2026-01-05T09:44:47.461+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:47.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58915e26] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:47.464+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1699055318 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:44:47.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:47.466+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:47.476+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:47.478+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58915e26]
2026-01-05T09:44:47.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:47.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:44:47.483+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:44:50.725+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:44:51.199+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:44:51.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:44:51.392+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:44:51.457+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:44:51.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:44:51.677+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:51.878+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@578e9e6e] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:52.376+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1836243040 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:52.522+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:52.523+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:53.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:53.183+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@578e9e6e]
2026-01-05T09:44:53.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:53.184+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9a234e] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:53.186+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@483781677 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:53.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:53.188+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:53.347+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:53.512+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9a234e]
2026-01-05T09:44:53.704+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:53.907+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef8d729] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:54.187+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@806756331 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:54.315+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:54.444+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:54.808+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:54.880+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ef8d729]
2026-01-05T09:44:54.883+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:54.885+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182568d3] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:54.964+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@8168801 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:55.032+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:44:55.086+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:44:55.180+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:44:55.226+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@182568d3]
2026-01-05T09:44:55.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:55.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac469a9] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:55.248+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@957672402 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:55.321+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:55.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:55.779+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:55.830+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ac469a9]
2026-01-05T09:44:55.908+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:55.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74455d71] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:55.987+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566964593 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:56.015+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:44:56.033+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:44:56.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:44:56.161+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74455d71]
2026-01-05T09:44:56.173+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:44:56.173+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4ab8c8] was not registered for synchronization because synchronization is not active
2026-01-05T09:44:56.174+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1908065925 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:44:56.174+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:44:56.175+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:44:56.238+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:44:56.280+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f4ab8c8]
2026-01-05T09:44:56.281+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:44:56.294+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:44:56.358+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:41.592+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:45:41.598+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:45:41.606+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:45:41.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:45:41.609+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:45:41.655+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:45:41.657+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:45:41.658+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:45:41.658+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:45:41.874+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:45:41.888+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:45:41.880+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/me
2026-01-05T09:45:41.881+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies
2026-01-05T09:45:41.882+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:45:41.939+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:45:41.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:45:41.940+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:45:41.942+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:45:41.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:45:41.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:45:41.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:45:41.954+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:45:41.955+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:45:41.945+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:41.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc5249c] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:41.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/me
2026-01-05T09:45:41.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:45:41.949+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:45:41.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:45:41.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:41.972+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581bc581] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:41.965+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:45:41.966+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@265749643 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:45:41.970+09:00  INFO 8676 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 1
2026-01-05T09:45:41.971+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:41.977+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:45:41.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:45:41.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:41.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550d224a] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:41.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@42693543 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:45:41.980+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:45:41.982+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:45:41.982+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c47c74] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:41.986+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:45:41.988+09:00  INFO 8676 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 1
2026-01-05T09:45:41.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T09:45:41.994+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:41.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@486180531 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:45:41.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1978116290 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:45:41.996+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:45:41.997+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:45:41.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfc3e77] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:41.995+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:45:41.996+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:45:41.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:45:41.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:45:42.003+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1805436875 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:45:42.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:45:42.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc5249c]
2026-01-05T09:45:42.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@581bc581]
2026-01-05T09:45:42.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@53c47c74]
2026-01-05T09:45:42.007+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:45:42.007+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:42.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:42.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:42.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:45:42.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:45:42.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:45:42.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:45:42.009+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73694fa2] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:42.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:42.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:42.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@550d224a]
2026-01-05T09:45:42.010+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1341265176 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:45:42.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:45:42.011+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:42.012+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:45:42.013+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=19, userId=10, companyId (truncated)...]
2026-01-05T09:45:42.014+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:42.059+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:45:42.060+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:45:42.066+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfc3e77]
2026-01-05T09:45:42.075+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73694fa2]
2026-01-05T09:45:42.075+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:42.078+09:00  INFO 8676 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 1, role: USER
2026-01-05T09:45:42.080+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43fa9c70] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:42.082+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:42.094+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369694463 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:45:42.094+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T09:45:42.095+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:45:42.113+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:42.116+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:45:42.128+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:45:42.131+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43fa9c70]
2026-01-05T09:45:42.131+09:00  INFO 8676 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 1, role: USER
2026-01-05T09:45:42.132+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:42.145+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T09:45:42.163+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:48.508+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/search?name=test_
2026-01-05T09:45:48.513+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=test_
2026-01-05T09:45:48.514+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/companies/search
2026-01-05T09:45:48.515+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=test_
2026-01-05T09:45:48.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=test_", parameters={masked}
2026-01-05T09:45:48.544+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:45:48.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:48.560+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e608a4] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:48.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@125484676 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:45:48.566+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:45:48.574+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: test(String), test(String), test(String), test(String), test(String)
2026-01-05T09:45:48.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 6
2026-01-05T09:45:48.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e608a4]
2026-01-05T09:45:48.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:48.579+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=1, companyName=test_ (truncated)...]
2026-01-05T09:45:48.580+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:45:54.609+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/search?name=test_company2
2026-01-05T09:45:54.618+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=test_company2
2026-01-05T09:45:54.622+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/companies/search
2026-01-05T09:45:54.677+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=test_company2
2026-01-05T09:45:54.679+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=test_company2", parameters={masked}
2026-01-05T09:45:54.682+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:45:54.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:45:54.691+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6285349b] was not registered for synchronization because synchronization is not active
2026-01-05T09:45:54.693+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1269091054 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:45:54.694+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:45:54.695+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: testcompany2(String), testcompany2(String), testcompany2(String), testcompany2(String), testcompany2(String)
2026-01-05T09:45:54.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 0
2026-01-05T09:45:54.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6285349b]
2026-01-05T09:45:54.697+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:45:54.698+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[])]
2026-01-05T09:45:54.699+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:04.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:46:04.503+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:46:04.561+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/logout
2026-01-05T09:46:04.571+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:46:04.575+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:46:04.576+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:46:04.577+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMCIsInVzZXJuYW1lIjo (truncated)...]
2026-01-05T09:46:04.578+09:00  INFO 8676 --- [http-nio-8080-exec-7] SECURITY                                 : LOGOUT userId=10
2026-01-05T09:46:04.578+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:04.579+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:46:04.580+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:14.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:46:14.764+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:46:14.773+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:46:14.843+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:46:14.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:46:14.846+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:46:14.847+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountant, password=1234)]
2026-01-05T09:46:14.847+09:00  INFO 8676 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountant
2026-01-05T09:46:14.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:14.848+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c3592e] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:14.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@857139107 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:46:14.858+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:46:14.858+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-01-05T09:46:14.860+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:46:14.860+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70c3592e]
2026-01-05T09:46:14.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:14.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d95e91] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:14.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1364880188 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:46:14.948+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:46:14.951+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:46:14.953+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:46:14.955+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47d95e91]
2026-01-05T09:46:14.956+09:00  INFO 8676 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 성공 - userId: 10, role: USER, companyId: 1
2026-01-05T09:46:14.957+09:00  INFO 8676 --- [http-nio-8080-exec-4] SECURITY                                 : LOGIN_SUCCESS userId=10 username=test_accountant role=USER
2026-01-05T09:46:14.958+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:14.958+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=10, username=test_accountant, pa (truncated)...]
2026-01-05T09:46:14.959+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:15.156+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:46:15.169+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:46:15.180+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/companies
2026-01-05T09:46:15.224+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:46:15.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.228+09:00 DEBUG 8676 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:46:15.229+09:00 DEBUG 8676 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.246+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:46:15.378+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:46:15.348+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.379+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:46:15.385+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:46:15.392+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:46:15.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.424+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:46:15.415+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.429+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dd119d] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.421+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.424+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:46:15.427+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:46:15.428+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:46:15.430+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:46:15.439+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:46:15.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:46:15.442+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.443+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:46:15.443+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:46:15.445+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:46:15.447+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:46:15.448+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1219549145 wrapping com.mysql.cj.jdbc.ConnectionImpl@5625eb07] will not be managed by Spring
2026-01-05T09:46:15.454+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:46:15.451+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:46:15.453+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:46:15.453+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.454+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:46:15.454+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.458+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T09:46:15.463+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:46:15.465+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c092342] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.473+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336ba7a4] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.473+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:46:15.474+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451429e4] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.475+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.477+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1269f1f6] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.477+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:46:15.479+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.495+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d070efc] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@731899185 wrapping com.mysql.cj.jdbc.ConnectionImpl@ba10335] will not be managed by Spring
2026-01-05T09:46:15.516+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:46:15.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1498179864 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:46:15.510+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1011533280 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@353052236 wrapping com.mysql.cj.jdbc.ConnectionImpl@61653f22] will not be managed by Spring
2026-01-05T09:46:15.511+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-05T09:46:15.526+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:46:15.526+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:46:15.527+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:46:15.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:46:15.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@350467478 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:46:15.528+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48dd119d]
2026-01-05T09:46:15.530+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:46:15.530+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:46:15.531+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:46:15.531+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:46:15.534+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:15.541+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:46:15.542+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:46:15.544+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:46:15.544+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:46:15.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:46:15.545+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:46:15.546+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451429e4]
2026-01-05T09:46:15.547+09:00 DEBUG 8676 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:15.548+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c092342]
2026-01-05T09:46:15.596+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:15.604+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:46:15.548+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1269f1f6]
2026-01-05T09:46:15.548+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@336ba7a4]
2026-01-05T09:46:15.562+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:15.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:15.607+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:15.608+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:46:15.627+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d070efc]
2026-01-05T09:46:15.611+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.614+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:46:15.625+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:46:15.639+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.676+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5becb365] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.640+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a55a961] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.645+09:00 DEBUG 8676 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:15.656+09:00 DEBUG 8676 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:15.679+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1239855802 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:46:15.728+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:46:15.729+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:46:15.690+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1320065423 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.695+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.744+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:46:15.744+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:46:15.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:46:15.745+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:46:15.761+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:46:15.766+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:46:15.775+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:46:15.776+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:46:15.776+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5becb365]
2026-01-05T09:46:15.779+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2a55a961]
2026-01-05T09:46:15.782+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.792+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.793+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.796+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b65d72c] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.794+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2252591d] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.795+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276bad43] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.797+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217872768 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.806+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:46:15.807+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:46:15.802+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1799543812 wrapping com.mysql.cj.jdbc.ConnectionImpl@1c9eeb27] will not be managed by Spring
2026-01-05T09:46:15.805+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421680464 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:46:15.810+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:46:15.815+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:46:15.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:46:15.824+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:46:15.826+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:46:15.830+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b65d72c]
2026-01-05T09:46:15.831+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:46:15.831+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.832+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2252591d]
2026-01-05T09:46:15.842+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2b9712] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.843+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:15.844+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1045626860 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:46:15.845+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:46:15.847+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:46:15.857+09:00 DEBUG 8676 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:15.858+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:46:15.858+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@276bad43]
2026-01-05T09:46:15.861+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.864+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c23a45] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.884+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:46:15.894+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480166123 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:46:15.894+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b2b9712]
2026-01-05T09:46:15.895+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:46:15.896+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.896+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:46:15.897+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e327ec] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.897+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@121088997 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.905+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:46:15.906+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:46:15.908+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:46:15.909+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c23a45]
2026-01-05T09:46:15.913+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.914+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c25e195] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.924+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:46:15.926+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862723654 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:46:15.926+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40e327ec]
2026-01-05T09:46:15.927+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:46:15.928+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.928+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:46:15.929+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@120c4620] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1258934218 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.931+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:46:15.933+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:46:15.942+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:46:15.942+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c25e195]
2026-01-05T09:46:15.943+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.944+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea08b1d] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.946+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@234550293 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:46:15.947+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:46:15.956+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:46:15.957+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:46:15.959+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@120c4620]
2026-01-05T09:46:15.961+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.962+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:46:15.963+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4391d29f] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.964+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ea08b1d]
2026-01-05T09:46:15.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@861708683 wrapping com.mysql.cj.jdbc.ConnectionImpl@21369c20] will not be managed by Spring
2026-01-05T09:46:15.978+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:46:15.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:46:15.979+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ccf72b6] was not registered for synchronization because synchronization is not active
2026-01-05T09:46:15.980+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:46:15.982+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@919461969 wrapping com.mysql.cj.jdbc.ConnectionImpl@254489b2] will not be managed by Spring
2026-01-05T09:46:15.985+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:46:15.986+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:46:15.993+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:46:15.996+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4391d29f]
2026-01-05T09:46:15.997+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:15.998+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:46:15.999+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:46:16.006+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ccf72b6]
2026-01-05T09:46:16.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:16.008+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:46:16.025+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:46:16.028+09:00 DEBUG 8676 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:46:57.143+09:00  INFO 15320 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 15320 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-05T09:46:57.146+09:00 DEBUG 15320 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-05T09:46:57.149+09:00  INFO 15320 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-05T09:46:59.147+09:00 DEBUG 15320 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-05T09:46:59.148+09:00 DEBUG 15320 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-05T09:46:59.487+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-05T09:46:59.488+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-05T09:46:59.489+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-05T09:46:59.490+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-05T09:46:59.492+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-05T09:46:59.494+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-05T09:46:59.500+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-05T09:46:59.502+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-05T09:46:59.502+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-05T09:46:59.504+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-05T09:46:59.506+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-05T09:46:59.508+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-05T09:46:59.509+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-05T09:46:59.511+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-05T09:46:59.516+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-05T09:46:59.519+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-05T09:46:59.522+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-05T09:46:59.523+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-05T09:46:59.524+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-05T09:46:59.525+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-05T09:46:59.527+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-05T09:46:59.528+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-05T09:46:59.529+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-05T09:46:59.530+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-05T09:46:59.533+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-05T09:46:59.535+09:00 DEBUG 15320 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-05T09:47:01.135+09:00  INFO 15320 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-05T09:47:01.165+09:00  INFO 15320 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-05T09:47:01.166+09:00  INFO 15320 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-05T09:47:01.286+09:00  INFO 15320 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-05T09:47:01.290+09:00  INFO 15320 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4071 ms
2026-01-05T09:47:01.455+09:00 DEBUG 15320 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-05T09:47:01.456+09:00 DEBUG 15320 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-05T09:47:02.178+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-05T09:47:02.201+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-05T09:47:02.228+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-05T09:47:02.253+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-05T09:47:02.277+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-05T09:47:02.313+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-05T09:47:02.410+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-05T09:47:02.442+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-05T09:47:02.491+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-05T09:47:02.515+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-05T09:47:02.536+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-05T09:47:02.557+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-05T09:47:02.585+09:00 DEBUG 15320 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-05T09:47:03.594+09:00 DEBUG 15320 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 118 mappings in 'requestMappingHandlerMapping'
2026-01-05T09:47:03.771+09:00 DEBUG 15320 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-05T09:47:03.806+09:00  WARN 15320 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c2b2b120-fea6-4253-9542-875e234669d7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-05T09:47:03.836+09:00  INFO 15320 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-05T09:47:04.065+09:00 DEBUG 15320 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-05T09:47:04.214+09:00 DEBUG 15320 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-05T09:47:04.307+09:00 DEBUG 15320 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-05T09:47:04.317+09:00 DEBUG 15320 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-05T09:47:04.891+09:00  INFO 15320 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-05T09:47:04.956+09:00  INFO 15320 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 8.81 seconds (process running for 9.351)
2026-01-05T09:47:36.458+09:00  INFO 15320 --- [http-nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-05T09:47:36.459+09:00  INFO 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-05T09:47:36.521+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-05T09:47:36.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-05T09:47:36.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-05T09:47:36.540+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@9f1ca74
2026-01-05T09:47:36.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@ff4b223
2026-01-05T09:47:36.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-05T09:47:36.544+09:00  INFO 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 23 ms
2026-01-05T09:47:36.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:47:36.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:47:36.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:47:36.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:47:36.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:47:36.869+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:47:36.877+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:47:36.885+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:47:36.886+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:47:36.908+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:47:37.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies
2026-01-05T09:47:37.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/me
2026-01-05T09:47:37.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:47:37.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:47:37.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/me
2026-01-05T09:47:37.195+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:47:37.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:47:37.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:47:37.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:47:37.241+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:47:37.229+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:47:37.238+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:47:37.238+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:47:37.239+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:47:37.244+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:47:37.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:47:37.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:47:37.258+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:47:37.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:47:37.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:47:37.300+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 1
2026-01-05T09:47:37.300+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 1
2026-01-05T09:47:37.310+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:37.310+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:37.310+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:37.316+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:37.316+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:37.337+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c12d56b] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:37.337+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4338a68c] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:37.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238ca2b1] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:37.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee85b40] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:37.340+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367288c8] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:37.362+09:00  INFO 15320 --- [http-nio-8080-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-05T09:47:37.732+09:00  INFO 15320 --- [http-nio-8080-exec-7] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@639ca381
2026-01-05T09:47:37.734+09:00  INFO 15320 --- [http-nio-8080-exec-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-05T09:47:37.742+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2006816327 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:47:37.757+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:47:37.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:47:37.887+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:47:37.911+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4338a68c]
2026-01-05T09:47:37.918+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588944196 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:47:37.924+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:47:37.925+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1677967771 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:47:37.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:47:38.004+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:47:38.007+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T09:47:38.034+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:47:38.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5ee85b40]
2026-01-05T09:47:38.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:38.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2117384356 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:47:38.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:47:38.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@254c0add] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:38.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:47:38.063+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:47:38.077+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:47:38.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=19, userId=10, companyId (truncated)...]
2026-01-05T09:47:38.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c12d56b]
2026-01-05T09:47:38.112+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:47:38.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2026701714 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:47:38.146+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:47:38.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@238ca2b1]
2026-01-05T09:47:38.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:47:38.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:47:38.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:47:38.161+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@294983968 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:47:38.162+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:47:38.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:47:38.239+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:47:38.245+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:47:38.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:47:38.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:47:38.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:47:38.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:47:38.306+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@367288c8]
2026-01-05T09:47:38.308+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:47:38.311+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:47:38.312+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@254c0add]
2026-01-05T09:47:38.325+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aedcc] was not registered for synchronization because synchronization is not active
2026-01-05T09:47:38.326+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 1, role: USER
2026-01-05T09:47:38.327+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991580232 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:47:38.328+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:47:38.328+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:47:38.345+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T09:47:38.347+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:47:38.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:47:38.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:47:38.423+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@aedcc]
2026-01-05T09:47:38.424+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 1, role: USER
2026-01-05T09:47:38.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:47:38.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T09:47:38.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:09.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/search?name=company
2026-01-05T09:48:09.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=company
2026-01-05T09:48:09.840+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/companies/search
2026-01-05T09:48:09.849+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=company
2026-01-05T09:48:09.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=company", parameters={masked}
2026-01-05T09:48:09.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:48:09.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:09.860+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a8dd765] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:09.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@487263531 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:09.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:48:09.869+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: company(String), company(String), company(String), company(String), company(String)
2026-01-05T09:48:09.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 7
2026-01-05T09:48:09.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a8dd765]
2026-01-05T09:48:09.878+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:09.882+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=1, companyName=test_ (truncated)...]
2026-01-05T09:48:09.884+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:23.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/apply
2026-01-05T09:48:23.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/users/companies/apply
2026-01-05T09:48:23.557+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies/apply
2026-01-05T09:48:23.566+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/users/companies/apply
2026-01-05T09:48:23.621+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/users/companies/apply", parameters={}
2026-01-05T09:48:23.623+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#applyToCompany(CompanyApplyRequest)
2026-01-05T09:48:23.655+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanyApplyRequest(companyId=2, role=USER, position=경리)]
2026-01-05T09:48:23.743+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사 지원 요청 - userId: 10, companyId: 2, role: USER
2026-01-05T09:48:23.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:23.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071555212 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will be managed by Spring
2026-01-05T09:48:23.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:23.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:48:23.773+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:23.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0] from current transaction
2026-01-05T09:48:23.776+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:23.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long)
2026-01-05T09:48:23.786+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:48:23.787+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.788+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0] from current transaction
2026-01-05T09:48:23.789+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.applyToCompany   : ==>  Preparing: INSERT INTO user_company_tb (user_id, company_id, role, position, is_active, is_primary, is_approver, approval_status, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 0), COALESCE(?, 0), 'PENDING', NOW(), NOW())
2026-01-05T09:48:23.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.applyToCompany   : ==> Parameters: 10(Long), 2(Long), USER(String), 경리(String), true(Boolean), false(Boolean), false(Boolean)
2026-01-05T09:48:23.805+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.applyToCompany   : <==    Updates: 1
2026-01-05T09:48:23.806+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.809+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@312d70b0]
2026-01-05T09:48:23.833+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사 지원 요청 완료 - userId: 10, companyId: 2
2026-01-05T09:48:23.837+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:23.841+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 지원 요청이 완료되었습니다. 관리자 승인을 기다려주세요., data=null)]
2026-01-05T09:48:23.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:25.010+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:48:25.010+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:48:25.027+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:48:25.031+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:48:25.073+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:48:25.075+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/companies
2026-01-05T09:48:25.087+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:48:25.090+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:48:25.097+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:48:25.098+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:48:25.099+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:48:25.100+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:48:25.101+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:25.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:25.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5c83bc] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:25.103+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241f7ea5] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:25.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1403605440 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:25.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@468887851 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:25.119+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:25.120+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:25.121+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T09:48:25.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:48:25.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:25.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:48:25.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@241f7ea5]
2026-01-05T09:48:25.148+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e5c83bc]
2026-01-05T09:48:25.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:25.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:25.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=19, userId=10, companyId (truncated)...]
2026-01-05T09:48:25.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=22, userId=10, companyId (truncated)...]
2026-01-05T09:48:25.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:25.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:26.551+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:48:26.577+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:48:26.599+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/logout
2026-01-05T09:48:26.610+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:48:26.614+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:48:26.616+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:48:26.622+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMCIsInVzZXJuYW1lIjo (truncated)...]
2026-01-05T09:48:26.627+09:00  INFO 15320 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=10
2026-01-05T09:48:26.628+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:26.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:48:26.633+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:31.704+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:48:31.748+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:48:31.749+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:48:31.752+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:48:31.753+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:48:31.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:48:31.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_exec, password=1234)]
2026-01-05T09:48:31.792+09:00  INFO 15320 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 시도 - username: test_exec
2026-01-05T09:48:31.793+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:31.805+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16285e5f] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:31.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1054510374 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:31.822+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:48:31.825+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_exec(String)
2026-01-05T09:48:31.831+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:48:31.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16285e5f]
2026-01-05T09:48:31.947+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:31.948+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747716a7] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:31.948+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@267901048 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:31.949+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:31.950+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 11(Long)
2026-01-05T09:48:31.953+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:31.955+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@747716a7]
2026-01-05T09:48:31.978+09:00  INFO 15320 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 로그인 성공 - userId: 11, role: USER, companyId: 1
2026-01-05T09:48:31.979+09:00  INFO 15320 --- [http-nio-8080-exec-5] SECURITY                                 : LOGIN_SUCCESS userId=11 username=test_exec role=USER
2026-01-05T09:48:31.979+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:31.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=11, username=test_exec, password (truncated)...]
2026-01-05T09:48:31.982+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.104+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:48:32.113+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:48:32.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:48:32.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:48:32.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/companies
2026-01-05T09:48:32.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:48:32.237+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:48:32.240+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:48:32.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:48:32.244+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:48:32.250+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.247+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:48:32.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a48301e] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:48:32.264+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:48:32.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:48:32.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1146442894 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:32.261+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:32.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.266+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:48:32.266+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:48:32.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:32.272+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:48:32.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:48:32.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:48:32.294+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.301+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 11(Long)
2026-01-05T09:48:32.301+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:32.306+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=11", parameters={masked}
2026-01-05T09:48:32.309+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.311+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.313+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=11", parameters={masked}
2026-01-05T09:48:32.319+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-05T09:48:32.317+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:32.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@301d4f24] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.319+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267bc7ca] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.319+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:32.320+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a48301e]
2026-01-05T09:48:32.321+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=11", parameters={masked}
2026-01-05T09:48:32.322+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.325+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.332+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2928aef4] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.326+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:32.326+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:32.329+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1905575454 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:32.331+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180d3432] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.335+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7025969a] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.336+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:32.341+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:48:32.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:32.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@395468163 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:32.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2146625477 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.386+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:32.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@762218995 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:32.439+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:32.386+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:32.387+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:32.389+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1449592559 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:32.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:32.419+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@267bc7ca]
2026-01-05T09:48:32.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 11(Long), 1(Long)
2026-01-05T09:48:32.454+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 11(Long), 1(Long)
2026-01-05T09:48:32.455+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:32.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.468+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.471+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 11(Long), 1(Long)
2026-01-05T09:48:32.479+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:32.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@535249fc] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@301d4f24]
2026-01-05T09:48:32.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755306384 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:32.487+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:32.487+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.505+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311b5707] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.490+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:32.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@180d3432]
2026-01-05T09:48:32.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:32.510+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2928aef4]
2026-01-05T09:48:32.504+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:32.504+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:32.506+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@623479550 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.521+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:32.509+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:32.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:32.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:32.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=11", parameters={masked}
2026-01-05T09:48:32.524+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:32.524+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:32.525+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:32.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:32.537+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:32.539+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7025969a]
2026-01-05T09:48:32.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.544+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:32.553+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.556+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.557+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:32.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@535249fc]
2026-01-05T09:48:32.569+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376d924] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.570+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:32.573+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d265a77] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.576+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1083650587 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:32.577+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@903244478 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:32.587+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:48:32.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:32.589+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:48:32.589+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:32.607+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@311b5707]
2026-01-05T09:48:32.605+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 11(Long), 1(Long)
2026-01-05T09:48:32.608+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.622+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f564bf0] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.623+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1419673714 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:48:32.627+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:48:32.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:32.640+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:48:32.641+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@376d924]
2026-01-05T09:48:32.641+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d265a77]
2026-01-05T09:48:32.643+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:48:32.645+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:32.654+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.655+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f564bf0]
2026-01-05T09:48:32.655+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:32.656+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5144f1bf] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.657+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.659+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.659+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1540536152 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:32.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31763569] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:32.677+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090387844 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:32.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:32.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:32.691+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:32.692+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5144f1bf]
2026-01-05T09:48:32.694+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.702+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4df877] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.703+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:32.704+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1330427580 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:32.704+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31763569]
2026-01-05T09:48:32.704+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:32.705+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.705+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:32.705+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b5f2b09] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.706+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1803720310 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.707+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:32.710+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:32.711+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:32.717+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d4df877]
2026-01-05T09:48:32.719+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d38b843] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.724+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:32.725+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@521429459 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:32.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6b5f2b09]
2026-01-05T09:48:32.728+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:48:32.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.735+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:48:32.736+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b312027] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.738+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@958681387 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.741+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:48:32.745+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:48:32.751+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:48:32.752+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d38b843]
2026-01-05T09:48:32.753+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.756+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdca078] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.767+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@662575405 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:32.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:32.830+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:32.772+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:48:32.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2b312027]
2026-01-05T09:48:32.837+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:32.855+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604a6262] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:32.878+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:32.888+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cdca078]
2026-01-05T09:48:32.886+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1113081428 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:32.890+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:32.893+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:32.899+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:32.914+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:48:32.932+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:32.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:33.018+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@604a6262]
2026-01-05T09:48:33.019+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:33.026+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:48:33.048+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:34.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:34.815+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:48:34.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:48:34.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:48:34.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:48:34.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:34.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:48:34.837+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:48:34.839+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:48:34.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:48:34.858+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:34.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/companies
2026-01-05T09:48:34.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:48:34.882+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/me
2026-01-05T09:48:34.885+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=11
2026-01-05T09:48:34.886+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:48:34.887+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/me
2026-01-05T09:48:34.890+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:48:34.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:48:34.899+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=11", parameters={masked}
2026-01-05T09:48:34.899+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:48:34.900+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:48:34.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:48:34.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:48:34.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:34.903+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:48:34.903+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:48:34.904+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:48:34.905+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:34.907+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:34.908+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:48:34.910+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:34.911+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:48:34.916+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3007800f] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:34.919+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671f7cd] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:34.920+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 11, companyId: 1
2026-01-05T09:48:34.924+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35572ae9] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:34.926+09:00  INFO 15320 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 11, companyId: 1
2026-01-05T09:48:34.927+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:34.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:34.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1516759142 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:34.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287156859 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:34.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8edf5] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:34.940+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3ec280] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:34.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1824423496 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:34.942+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:34.943+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:34.949+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:34.952+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 11(Long), 1(Long)
2026-01-05T09:48:34.953+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long), PENDING(String)
2026-01-05T09:48:34.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 11(Long)
2026-01-05T09:48:34.963+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@985547285 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:34.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1487493724 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:34.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:34.973+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:34.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:34.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:35.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:48:35.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:35.004+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:35.023+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:35.023+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fa8edf5]
2026-01-05T09:48:35.024+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:35.024+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7ac69d] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:35.010+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3007800f]
2026-01-05T09:48:35.011+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@671f7cd]
2026-01-05T09:48:35.023+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35572ae9]
2026-01-05T09:48:35.023+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:35.025+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1971335193 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:35.026+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:35.026+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:35.029+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:35.033+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f3ec280]
2026-01-05T09:48:35.038+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:35.034+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:35.035+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:48:35.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 11(Long)
2026-01-05T09:48:35.037+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:35.037+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=20, userId=11, companyId (truncated)...]
2026-01-05T09:48:35.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e22c95] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:35.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:35.043+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:35.044+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:35.049+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461148236 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:35.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:35.061+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 11(Long)
2026-01-05T09:48:35.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:35.069+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c7ac69d]
2026-01-05T09:48:35.074+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 11, companyId: 1, role: USER
2026-01-05T09:48:35.076+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:35.082+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=11, username=test_exec, passw (truncated)...]
2026-01-05T09:48:35.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:35.104+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:35.106+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20e22c95]
2026-01-05T09:48:35.162+09:00  INFO 15320 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 11, companyId: 1, role: USER
2026-01-05T09:48:35.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:35.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=11, username=test_exec, passw (truncated)...]
2026-01-05T09:48:35.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:40.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/search?name=tset
2026-01-05T09:48:40.733+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=tset
2026-01-05T09:48:40.750+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/companies/search
2026-01-05T09:48:40.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=tset
2026-01-05T09:48:40.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=tset", parameters={masked}
2026-01-05T09:48:40.773+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:48:40.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:40.776+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7338feff] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:40.783+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480605723 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:40.784+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:48:40.787+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: tset(String), tset(String), tset(String), tset(String), tset(String)
2026-01-05T09:48:40.790+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 1
2026-01-05T09:48:40.790+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7338feff]
2026-01-05T09:48:40.791+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:40.791+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=2, companyName=tset_ (truncated)...]
2026-01-05T09:48:40.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:49.321+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/apply
2026-01-05T09:48:49.330+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/users/companies/apply
2026-01-05T09:48:49.333+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/companies/apply
2026-01-05T09:48:49.334+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/users/companies/apply
2026-01-05T09:48:49.348+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/users/companies/apply", parameters={}
2026-01-05T09:48:49.348+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#applyToCompany(CompanyApplyRequest)
2026-01-05T09:48:49.350+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanyApplyRequest(companyId=2, role=USER, position=이사)]
2026-01-05T09:48:49.355+09:00  INFO 15320 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회사 지원 요청 - userId: 11, companyId: 2, role: USER
2026-01-05T09:48:49.373+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:49.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60476885 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will be managed by Spring
2026-01-05T09:48:49.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:49.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:48:49.379+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:49.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d] from current transaction
2026-01-05T09:48:49.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:49.411+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long)
2026-01-05T09:48:49.420+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:48:49.421+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.422+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d] from current transaction
2026-01-05T09:48:49.422+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.applyToCompany   : ==>  Preparing: INSERT INTO user_company_tb (user_id, company_id, role, position, is_active, is_primary, is_approver, approval_status, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 0), COALESCE(?, 0), 'PENDING', NOW(), NOW())
2026-01-05T09:48:49.423+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.applyToCompany   : ==> Parameters: 11(Long), 2(Long), USER(String), 이사(String), true(Boolean), false(Boolean), false(Boolean)
2026-01-05T09:48:49.426+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.applyToCompany   : <==    Updates: 1
2026-01-05T09:48:49.427+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.427+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.428+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.428+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c34069d]
2026-01-05T09:48:49.434+09:00  INFO 15320 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 회사 지원 요청 완료 - userId: 11, companyId: 2
2026-01-05T09:48:49.435+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:49.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 지원 요청이 완료되었습니다. 관리자 승인을 기다려주세요., data=null)]
2026-01-05T09:48:49.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:50.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:48:50.355+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:48:50.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:48:50.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:48:50.438+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/companies
2026-01-05T09:48:50.438+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:48:50.442+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:48:50.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:48:50.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:48:50.446+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:48:50.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:48:50.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:48:50.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:50.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571cd20a] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:50.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:50.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1009120d] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:50.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1244949083 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:50.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:50.477+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@851511334 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:50.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 11(Long)
2026-01-05T09:48:50.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:50.489+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long), PENDING(String)
2026-01-05T09:48:50.489+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:50.490+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571cd20a]
2026-01-05T09:48:50.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:50.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=20, userId=11, companyId (truncated)...]
2026-01-05T09:48:50.493+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:48:50.493+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1009120d]
2026-01-05T09:48:50.494+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:50.495+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:50.499+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=23, userId=11, companyId (truncated)...]
2026-01-05T09:48:50.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:53.148+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:48:53.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:48:53.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 11, role: USER, companyId: 1, uri: /api/logout
2026-01-05T09:48:53.240+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:48:53.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:48:53.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:48:53.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMSIsInVzZXJuYW1lIjo (truncated)...]
2026-01-05T09:48:53.274+09:00  INFO 15320 --- [http-nio-8080-exec-6] SECURITY                                 : LOGOUT userId=11
2026-01-05T09:48:53.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:53.279+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:48:53.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:56.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:48:56.798+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:48:56.806+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:48:56.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:48:56.814+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:48:56.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:48:56.820+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_tax, password=1234)]
2026-01-05T09:48:56.836+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_tax
2026-01-05T09:48:56.838+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:56.838+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78762536] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:56.841+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@186826424 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:56.842+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:48:56.844+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_tax(String)
2026-01-05T09:48:56.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:48:56.853+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78762536]
2026-01-05T09:48:56.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:56.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a36bd8] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:56.967+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947985508 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:56.967+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:48:56.968+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-05T09:48:56.971+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:48:56.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a36bd8]
2026-01-05T09:48:56.974+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1
2026-01-05T09:48:56.974+09:00  INFO 15320 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=12 username=test_tax role=TAX_ACCOUNTANT
2026-01-05T09:48:56.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:56.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=12, username=test_tax, password= (truncated)...]
2026-01-05T09:48:56.976+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.088+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:48:57.110+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:48:57.148+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:48:57.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:48:57.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/companies
2026-01-05T09:48:57.167+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.332+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.168+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:48:57.310+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.337+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-05T09:48:57.331+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:48:57.334+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:57.335+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:57.352+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=12", parameters={masked}
2026-01-05T09:48:57.338+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:57.357+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.365+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=12", parameters={masked}
2026-01-05T09:48:57.366+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:57.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4106ca] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.371+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365321553 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:57.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:48:57.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:48:57.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:48:57.340+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.354+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:57.373+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:57.379+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-05T09:48:57.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:48:57.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:48:57.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=12", parameters={masked}
2026-01-05T09:48:57.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.381+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.382+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.383+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:57.390+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3584f246] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.391+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:48:57.392+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2888e2f9] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.392+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:57.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses
2026-01-05T09:48:57.392+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c13699] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.393+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6f4106ca]
2026-01-05T09:48:57.400+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:48:57.402+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39c71109] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.402+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:48:57.405+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@53700226 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:57.406+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:57.406+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1947666872 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:57.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:57.406+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:48:57.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:57.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@397505632 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:48:57.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435226678 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:48:57.408+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:57.418+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.420+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:57.428+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-05T09:48:57.420+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-05T09:48:57.420+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:48:57.425+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e66051] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:57.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 12(Long)
2026-01-05T09:48:57.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:57.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:57.442+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2888e2f9]
2026-01-05T09:48:57.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3584f246]
2026-01-05T09:48:57.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39c71109]
2026-01-05T09:48:57.453+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca3e14e] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.453+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2145854561 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:57.454+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-05T09:48:57.455+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.455+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.456+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1784012062 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:57.456+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:57.456+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c13699]
2026-01-05T09:48:57.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:57.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:57.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:57.458+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:57.458+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=1, companyCode=2C4PSB, companyNa (truncated)...]
2026-01-05T09:48:57.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:48:57.468+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.474+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:57.485+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22e66051]
2026-01-05T09:48:57.485+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:57.488+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca3e14e]
2026-01-05T09:48:57.487+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.489+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1db43571] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.489+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1152505590 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:57.494+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2e237a] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.502+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:57.503+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1276383296 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:57.504+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:48:57.504+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:57.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:57.516+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.528+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:57.539+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1db43571]
2026-01-05T09:48:57.539+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.540+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cad6ae4] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.538+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:57.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1458263882 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:57.551+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:48:57.551+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f2e237a]
2026-01-05T09:48:57.552+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:48:57.554+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:48:57.555+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.558+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:48:57.558+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=12", parameters={masked}
2026-01-05T09:48:57.559+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340b29b2] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.562+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437320122 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:57.567+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:57.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:48:57.570+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:48:57.570+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.571+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c885ca] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.573+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:48:57.575+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1518471886 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:48:57.575+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cad6ae4]
2026-01-05T09:48:57.575+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:48:57.576+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.576+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:57.576+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-05T09:48:57.577+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab273f8] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.577+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340b29b2]
2026-01-05T09:48:57.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@776699128 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:57.587+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.587+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:57.588+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122cc195] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.589+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:48:57.590+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2139565275 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:48:57.591+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:57.592+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:48:57.594+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:57.594+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:48:57.601+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ab273f8]
2026-01-05T09:48:57.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19c885ca]
2026-01-05T09:48:57.604+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:48:57.605+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:57.607+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.607+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4825b4a4] was not registered for synchronization because synchronization is not active
2026-01-05T09:48:57.608+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122cc195]
2026-01-05T09:48:57.608+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:48:57.609+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@209278627 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:48:57.609+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.610+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:48:57.610+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.611+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:48:57.615+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:48:57.618+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:48:57.623+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:48:57.626+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4825b4a4]
2026-01-05T09:48:57.628+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:48:57.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:48:57.649+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:49:00.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=12
2026-01-05T09:49:00.068+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:49:00.069+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:49:00.070+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:49:00.070+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:49:00.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:49:00.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:49:00.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:49:00.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:49:00.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-05T09:49:00.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:49:00.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:49:00.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies
2026-01-05T09:49:00.243+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:49:00.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=12
2026-01-05T09:49:00.243+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:49:00.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:49:00.254+09:00  INFO 15320 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 12, companyId: 1
2026-01-05T09:49:00.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=12", parameters={masked}
2026-01-05T09:49:00.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:49:00.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5864a58e] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:49:00.258+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:49:00.263+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:49:00.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@370eba34] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.271+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:49:00.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/me
2026-01-05T09:49:00.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@335906739 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:49:00.282+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4053824a] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:49:00.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:49:00.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:49:00.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548088872 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:49:00.286+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:49:00.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:49:00.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:49:00.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1313401026 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:49:00.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:49:00.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:49:00.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:49:00.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:49:00.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-05T09:49:00.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.292+09:00  INFO 15320 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 12, companyId: 1
2026-01-05T09:49:00.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 12(Long), 1(Long)
2026-01-05T09:49:00.300+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:49:00.301+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476d7874] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.302+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.305+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5864a58e]
2026-01-05T09:49:00.306+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:49:00.306+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4156d239] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.307+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.310+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2965d3fe] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.307+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:49:00.308+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@370eba34]
2026-01-05T09:49:00.310+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1964915261 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:49:00.311+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164594402 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:49:00.314+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4053824a]
2026-01-05T09:49:00.315+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:49:00.317+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1647921240 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:49:00.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:49:00.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:49:00.319+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:49:00.320+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=21, userId=12, companyId (truncated)...]
2026-01-05T09:49:00.382+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:49:00.320+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:49:00.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long), PENDING(String)
2026-01-05T09:49:00.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-05T09:49:00.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:49:00.386+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:49:00.470+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:49:00.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@476d7874]
2026-01-05T09:49:00.472+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:49:00.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:49:00.543+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:49:00.552+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:49:00.543+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2965d3fe]
2026-01-05T09:49:00.555+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:49:00.557+09:00  INFO 15320 --- [http-nio-8080-exec-5] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 12, companyId: 1, role: TAX_ACCOUNTANT
2026-01-05T09:49:00.560+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:49:00.597+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:49:00.622+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4156d239]
2026-01-05T09:49:00.607+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=12, username=test_tax, passwo (truncated)...]
2026-01-05T09:49:00.624+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:00.627+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bdbeedd] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:00.643+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1906533187 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:49:00.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:49:00.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:49:00.812+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-05T09:49:00.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:49:00.978+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bdbeedd]
2026-01-05T09:49:00.979+09:00  INFO 15320 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 12, companyId: 1, role: TAX_ACCOUNTANT
2026-01-05T09:49:01.008+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:49:01.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=12, username=test_tax, passwo (truncated)...]
2026-01-05T09:49:01.012+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:49:03.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/search?name=tset
2026-01-05T09:49:03.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/search?name=tset
2026-01-05T09:49:03.454+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/companies/search
2026-01-05T09:49:03.455+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/search?name=tset
2026-01-05T09:49:03.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/search?name=tset", parameters={masked}
2026-01-05T09:49:03.483+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#searchCompanies(String)
2026-01-05T09:49:03.501+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:49:03.503+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a75232] was not registered for synchronization because synchronization is not active
2026-01-05T09:49:03.508+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1665019262 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:49:03.509+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : ==>  Preparing: SELECT c.company_id AS companyId, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, MAX(u.korean_name) AS adminName, CASE WHEN c.company_name = ? THEN 1 WHEN c.company_name LIKE CONCAT(?, '%') THEN 2 WHEN c.company_name LIKE CONCAT('%', ?, '%') THEN 3 ELSE 4 END AS matchPriority FROM company_tb c LEFT JOIN user_tb u ON c.created_by = u.user_id AND u.role = 'ADMIN' WHERE ( c.company_name LIKE CONCAT('%', ?, '%') OR REPLACE(c.business_reg_no, '-', '') LIKE CONCAT('%', REPLACE(?, '-', ''), '%') ) AND c.is_active = 1 GROUP BY c.company_id, c.company_name, c.business_reg_no, c.representative_name ORDER BY matchPriority ASC, c.company_name ASC LIMIT 20
2026-01-05T09:49:03.510+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : ==> Parameters: tset(String), tset(String), tset(String), tset(String), tset(String)
2026-01-05T09:49:03.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.CompanyMapper.searchByName  : <==      Total: 1
2026-01-05T09:49:03.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9a75232]
2026-01-05T09:49:03.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:49:03.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=검색 완료, data=[CompanySearchResultDto(companyId=2, companyName=tset_ (truncated)...]
2026-01-05T09:49:03.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:09.907+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/apply
2026-01-05T09:53:09.911+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/users/companies/apply
2026-01-05T09:53:09.913+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies/apply
2026-01-05T09:53:09.914+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/users/companies/apply
2026-01-05T09:53:09.914+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/users/companies/apply", parameters={}
2026-01-05T09:53:09.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#applyToCompany(CompanyApplyRequest)
2026-01-05T09:53:09.984+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanyApplyRequest(companyId=2, role=TAX_ACCOUNTANT, position=세무사)]
2026-01-05T09:53:10.002+09:00  INFO 15320 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 회사 지원 요청 - userId: 12, companyId: 2, role: TAX_ACCOUNTANT
2026-01-05T09:53:10.008+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:10.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@527380853 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will be managed by Spring
2026-01-05T09:53:10.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:10.010+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:53:10.013+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:10.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16] from current transaction
2026-01-05T09:53:10.016+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:10.016+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long)
2026-01-05T09:53:10.018+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:53:10.019+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.019+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16] from current transaction
2026-01-05T09:53:10.019+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.applyToCompany   : ==>  Preparing: INSERT INTO user_company_tb (user_id, company_id, role, position, is_active, is_primary, is_approver, approval_status, created_at, updated_at) VALUES (?, ?, ?, ?, COALESCE(?, 1), COALESCE(?, 0), COALESCE(?, 0), 'PENDING', NOW(), NOW())
2026-01-05T09:53:10.020+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.applyToCompany   : ==> Parameters: 12(Long), 2(Long), TAX_ACCOUNTANT(String), 세무사(String), true(Boolean), false(Boolean), false(Boolean)
2026-01-05T09:53:10.026+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.applyToCompany   : <==    Updates: 1
2026-01-05T09:53:10.026+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.027+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.031+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.033+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28645d16]
2026-01-05T09:53:10.050+09:00  INFO 15320 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 회사 지원 요청 완료 - userId: 12, companyId: 2
2026-01-05T09:53:10.051+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:10.051+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 지원 요청이 완료되었습니다. 관리자 승인을 기다려주세요., data=null)]
2026-01-05T09:53:10.053+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:10.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:10.919+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:53:10.928+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:10.930+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:53:10.963+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies
2026-01-05T09:53:10.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/users/companies/pending
2026-01-05T09:53:10.976+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:53:10.977+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:53:10.976+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:10.978+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:10.977+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:53:10.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:10.981+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:10.983+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7c0425] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:10.983+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:10.985+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4666b4eb] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:10.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1177383864 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:10.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:10.995+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@108879889 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:10.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:10.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long), PENDING(String)
2026-01-05T09:53:10.997+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 12(Long)
2026-01-05T09:53:11.000+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T09:53:11.001+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4666b4eb]
2026-01-05T09:53:11.001+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 1
2026-01-05T09:53:11.001+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f7c0425]
2026-01-05T09:53:11.001+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:11.002+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:11.002+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=21, userId=12, companyId (truncated)...]
2026-01-05T09:53:11.002+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=24, userId=12, companyId (truncated)...]
2026-01-05T09:53:11.004+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:11.006+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:12.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:53:12.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:53:12.528+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 12, role: TAX_ACCOUNTANT, companyId: 1, uri: /api/logout
2026-01-05T09:53:12.532+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:53:12.533+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:53:12.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:53:12.537+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMiIsInVzZXJuYW1lIjo (truncated)...]
2026-01-05T09:53:12.547+09:00  INFO 15320 --- [http-nio-8080-exec-3] SECURITY                                 : LOGOUT userId=12
2026-01-05T09:53:12.551+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:12.563+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:53:12.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:16.896+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:53:16.899+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:53:16.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:53:16.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:53:16.903+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:53:16.906+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:53:16.925+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-05T09:53:16.930+09:00  INFO 15320 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-05T09:53:16.982+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:16.998+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baaaaa] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:17.001+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2079939424 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:17.001+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:53:17.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-05T09:53:17.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:53:17.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5baaaaa]
2026-01-05T09:53:17.126+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:17.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d873a3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:17.130+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@701236160 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:17.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:17.133+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:17.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:17.144+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44d873a3]
2026-01-05T09:53:17.145+09:00  INFO 15320 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 2
2026-01-05T09:53:17.147+09:00  INFO 15320 --- [http-nio-8080-exec-4] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-05T09:53:17.148+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:17.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-05T09:53:17.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:17.856+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:53:17.935+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:17.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:17.940+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:53:17.940+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:53:17.944+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:17.955+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:17.960+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:17.970+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:53:17.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies
2026-01-05T09:53:17.984+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:53:17.984+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:53:17.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.007+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:18.008+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.030+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:53:18.033+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.036+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:18.052+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.052+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:18.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.056+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:18.061+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@661379df] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.063+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:18.068+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:18.069+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.069+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:53:18.072+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:18.082+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:18.094+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:18.083+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:18.083+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:18.091+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:53:18.095+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:18.096+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:18.097+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.210+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e7752ee] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:18.159+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@504209513 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:18.202+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:53:18.209+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:18.209+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.212+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.233+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:53:18.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:53:18.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:53:18.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:18.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2e7443] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9aed580] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-05T09:53:18.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:18.263+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728794091 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:18.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:18.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32330a7d] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.279+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:18.282+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4db9a3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@385432439 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:18.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-05T09:53:18.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1192706783 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:18.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:18.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@661379df]
2026-01-05T09:53:18.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:18.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:18.292+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.294+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:18.297+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@7541555 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:18.297+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1369356259 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:18.298+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:18.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:53:18.301+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:18.303+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:18.303+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e7752ee]
2026-01-05T09:53:18.309+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.311+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:18.312+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:18.314+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:18.317+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:18.328+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:18.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@9aed580]
2026-01-05T09:53:18.370+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:18.372+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2e7443]
2026-01-05T09:53:18.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:18.396+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:18.396+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.397+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.398+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f4db9a3]
2026-01-05T09:53:18.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@32330a7d]
2026-01-05T09:53:18.400+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:18.401+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:18.402+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:53:18.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ea7597] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d552868] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:18.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@529978031 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:18.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:53:18.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488a9133] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.416+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@485266497 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:18.431+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:18.469+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:18.435+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:18.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:53:18.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@371084138 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:18.482+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:18.466+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:18.468+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:18.471+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:18.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:53:18.495+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:53:18.484+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:18.490+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:18.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:18.498+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ea7a6e] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315990a3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:18.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1845841229 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:18.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:53:18.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:53:18.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:18.524+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@488a9133]
2026-01-05T09:53:18.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@561893850 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:18.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@790b3ec3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:18.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62ea7597]
2026-01-05T09:53:18.525+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d552868]
2026-01-05T09:53:18.526+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:18.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@582693438 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:18.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:18.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.530+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:53:18.531+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:18.531+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:18.532+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:53:18.536+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:53:18.538+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:18.545+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.570+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:18.584+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:18.593+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:18.548+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.554+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:18.574+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.594+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:18.612+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:18.599+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:18.604+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ea7a6e]
2026-01-05T09:53:18.615+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.613+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.619+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65674975] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.633+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:18.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1191016125 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:18.641+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.644+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:18.650+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:18.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ca1ea3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@315990a3]
2026-01-05T09:53:18.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:18.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:18.668+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:18.669+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@790b3ec3]
2026-01-05T09:53:18.669+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2122996632 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:18.670+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:18.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:18.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:18.677+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:18.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:18.679+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:18.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:18.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:18.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:18.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:18.686+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.687+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:18.687+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:18.688+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.690+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65674975]
2026-01-05T09:53:18.710+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.713+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.717+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:53:18.715+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b4a43a] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.716+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ae56] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.718+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@813079556 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:18.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:18.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1684594734 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:18.750+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:18.751+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:18.758+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:18.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:18.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71ca1ea3]
2026-01-05T09:53:18.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:18.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:18.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.802+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b4a43a]
2026-01-05T09:53:18.802+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49ae56]
2026-01-05T09:53:18.802+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@837271] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.804+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.834+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:18.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@555572164 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:18.836+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:18.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a68153] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:18.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:18.844+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.845+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1699787023 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:18.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:18.849+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:18.864+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:18.876+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:53:18.880+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@837271]
2026-01-05T09:53:18.882+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 3
2026-01-05T09:53:18.882+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28a68153]
2026-01-05T09:53:18.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:53:18.900+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:18.907+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:18.918+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=12, username=test_tax, password=null,  (truncated)...]
2026-01-05T09:53:18.920+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:21.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/12/approval
2026-01-05T09:53:21.048+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/users/12/approval
2026-01-05T09:53:21.051+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/12/approval
2026-01-05T09:53:21.053+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/users/12/approval
2026-01-05T09:53:21.074+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/users/12/approval", parameters={}
2026-01-05T09:53:21.076+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#approveUser(Long, ApprovalRequest)
2026-01-05T09:53:21.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.ApprovalRequest(action=APPROVE)]
2026-01-05T09:53:21.146+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:21.162+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:21.165+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 사용자 승인/거부 시도 - userId: 12, action: APPROVE, operatorId: 1
2026-01-05T09:53:21.169+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:21.170+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.170+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1814460289 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will be managed by Spring
2026-01-05T09:53:21.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:21.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 12(Long)
2026-01-05T09:53:21.184+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:21.184+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.185+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:21.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:21.191+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:21.194+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.194+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.195+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:21.196+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:21.201+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:21.201+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.203+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.204+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:21.205+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 12(Long)
2026-01-05T09:53:21.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 2
2026-01-05T09:53:21.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.235+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.countUsersByCompanyId          : ==>  Preparing: SELECT COUNT(DISTINCT uc.user_id) FROM user_company_tb uc WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND (uc.is_active IS NULL OR uc.is_active = 1)
2026-01-05T09:53:21.236+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.countUsersByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:21.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.countUsersByCompanyId          : <==      Total: 1
2026-01-05T09:53:21.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.265+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:53:21.265+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:21.272+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:53:21.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.updateUser       : ==>  Preparing: UPDATE user_tb SET korean_name = ?, email = ?, position = ?, role = ?, is_active = ?, company_id = ?, approval_status = ? WHERE user_id = ?
2026-01-05T09:53:21.280+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.updateUser       : ==> Parameters: test_tax(String), null, 세무사(String), TAX_ACCOUNTANT(String), true(Boolean), 1(Long), APPROVED(String), 12(Long)
2026-01-05T09:53:21.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.updateUser       : <==    Updates: 1
2026-01-05T09:53:21.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8] from current transaction
2026-01-05T09:53:21.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.approveUserCompany    : ==>  Preparing: UPDATE user_company_tb SET approval_status = 'APPROVED', is_active = 1, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:53:21.287+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.approveUserCompany    : ==> Parameters: 12(Long), 2(Long)
2026-01-05T09:53:21.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.approveUserCompany    : <==    Updates: 1
2026-01-05T09:53:21.292+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.294+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.294+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@48930ed8]
2026-01-05T09:53:21.302+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 사용자 승인 완료 - userId: 12
2026-01-05T09:53:21.303+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:21.304+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자가 승인되었습니다., data=null)]
2026-01-05T09:53:21.305+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:21.315+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:21.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:21.370+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:21.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:21.379+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:21.386+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:21.387+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:21.389+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122be0d7] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:21.398+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@715753911 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:21.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:21.400+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:21.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:21.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@122be0d7]
2026-01-05T09:53:21.406+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:21.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@680f68d2] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:21.413+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2017067702 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:21.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:21.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:21.417+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 2
2026-01-05T09:53:21.417+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@680f68d2]
2026-01-05T09:53:21.420+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:21.421+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=11, username=test_exec, password=null, (truncated)...]
2026-01-05T09:53:21.424+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:22.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/11/approval
2026-01-05T09:53:22.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/users/11/approval
2026-01-05T09:53:22.964+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/11/approval
2026-01-05T09:53:22.964+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/users/11/approval
2026-01-05T09:53:22.969+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : POST "/api/users/11/approval", parameters={}
2026-01-05T09:53:23.029+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#approveUser(Long, ApprovalRequest)
2026-01-05T09:53:23.030+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.ApprovalRequest(action=APPROVE)]
2026-01-05T09:53:23.031+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:23.032+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:23.033+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 사용자 승인/거부 시도 - userId: 11, action: APPROVE, operatorId: 1
2026-01-05T09:53:23.041+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:23.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584709068 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will be managed by Spring
2026-01-05T09:53:23.043+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:23.043+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:53:23.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:23.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.047+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.048+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:23.048+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:23.052+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:23.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.059+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.059+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:23.060+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:23.064+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:23.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:23.068+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long)
2026-01-05T09:53:23.076+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 2
2026-01-05T09:53:23.080+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.082+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.082+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.countUsersByCompanyId          : ==>  Preparing: SELECT COUNT(DISTINCT uc.user_id) FROM user_company_tb uc WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND (uc.is_active IS NULL OR uc.is_active = 1)
2026-01-05T09:53:23.083+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.countUsersByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:23.085+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.countUsersByCompanyId          : <==      Total: 1
2026-01-05T09:53:23.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.091+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.092+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:53:23.096+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:23.099+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:53:23.100+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.100+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.updateUser       : ==>  Preparing: UPDATE user_tb SET korean_name = ?, email = ?, position = ?, role = ?, is_active = ?, company_id = ?, approval_status = ? WHERE user_id = ?
2026-01-05T09:53:23.105+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.updateUser       : ==> Parameters: test_exec(String), null, 이사(String), USER(String), true(Boolean), 1(Long), APPROVED(String), 11(Long)
2026-01-05T09:53:23.116+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.updateUser       : <==    Updates: 1
2026-01-05T09:53:23.116+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.118+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8] from current transaction
2026-01-05T09:53:23.119+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.approveUserCompany    : ==>  Preparing: UPDATE user_company_tb SET approval_status = 'APPROVED', is_active = 1, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:53:23.119+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.approveUserCompany    : ==> Parameters: 11(Long), 2(Long)
2026-01-05T09:53:23.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.approveUserCompany    : <==    Updates: 1
2026-01-05T09:53:23.130+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c96cfa8]
2026-01-05T09:53:23.151+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 사용자 승인 완료 - userId: 11
2026-01-05T09:53:23.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:23.153+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자가 승인되었습니다., data=null)]
2026-01-05T09:53:23.154+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:23.167+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:23.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:23.211+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:23.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:23.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:23.240+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:23.241+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:23.246+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aaf8a59] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:23.247+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@136869954 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:23.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:23.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:23.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:23.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1aaf8a59]
2026-01-05T09:53:23.296+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:23.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f9a72b2] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:23.300+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2038554202 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:23.301+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:23.302+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:23.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 1
2026-01-05T09:53:23.319+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f9a72b2]
2026-01-05T09:53:23.320+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:23.329+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserDto(userId=10, username=test_accountant, password (truncated)...]
2026-01-05T09:53:23.337+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:25.091+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/10/approval
2026-01-05T09:53:25.094+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/users/10/approval
2026-01-05T09:53:25.097+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/10/approval
2026-01-05T09:53:25.098+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/users/10/approval
2026-01-05T09:53:25.121+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/users/10/approval", parameters={}
2026-01-05T09:53:25.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#approveUser(Long, ApprovalRequest)
2026-01-05T09:53:25.133+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.ApprovalRequest(action=APPROVE)]
2026-01-05T09:53:25.136+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:25.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.approveUser(java.lang.Long,com.innersignature.backend.controller.UserController$ApprovalRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:25.142+09:00  INFO 15320 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 사용자 승인/거부 시도 - userId: 10, action: APPROVE, operatorId: 1
2026-01-05T09:53:25.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:25.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@403987907 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will be managed by Spring
2026-01-05T09:53:25.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:25.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:53:25.154+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:25.156+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.157+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.161+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:25.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:25.164+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:25.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.168+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.169+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:25.175+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:25.181+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:25.184+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.185+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:25.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long)
2026-01-05T09:53:25.203+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 2
2026-01-05T09:53:25.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.countUsersByCompanyId          : ==>  Preparing: SELECT COUNT(DISTINCT uc.user_id) FROM user_company_tb uc WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND (uc.is_active IS NULL OR uc.is_active = 1)
2026-01-05T09:53:25.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.countUsersByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:25.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.countUsersByCompanyId          : <==      Total: 1
2026-01-05T09:53:25.331+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.334+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:53:25.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:25.458+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:53:25.473+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.updateUser       : ==>  Preparing: UPDATE user_tb SET korean_name = ?, email = ?, position = ?, role = ?, is_active = ?, company_id = ?, approval_status = ? WHERE user_id = ?
2026-01-05T09:53:25.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.updateUser       : ==> Parameters: test_accountant(String), null, 경리(String), USER(String), true(Boolean), 1(Long), APPROVED(String), 10(Long)
2026-01-05T09:53:25.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.updateUser       : <==    Updates: 1
2026-01-05T09:53:25.521+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.536+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685] from current transaction
2026-01-05T09:53:25.551+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.approveUserCompany    : ==>  Preparing: UPDATE user_company_tb SET approval_status = 'APPROVED', is_active = 1, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:53:25.553+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.approveUserCompany    : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:53:25.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.approveUserCompany    : <==    Updates: 1
2026-01-05T09:53:25.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c827685]
2026-01-05T09:53:25.674+09:00  INFO 15320 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 사용자 승인 완료 - userId: 10
2026-01-05T09:53:25.679+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:25.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=사용자가 승인되었습니다., data=null)]
2026-01-05T09:53:25.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:25.762+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:25.783+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:25.793+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:25.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:25.814+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:25.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:25.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:25.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5120a566] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:25.879+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@563204095 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:25.891+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:25.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:25.979+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:25.986+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5120a566]
2026-01-05T09:53:25.991+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:25.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@483463e5] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:25.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1450367322 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:25.995+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:25.998+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:26.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:26.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@483463e5]
2026-01-05T09:53:26.020+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:26.027+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:26.034+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:28.421+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:28.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:28.439+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:53:28.440+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:28.441+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:53:28.442+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:53:28.477+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:28.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:28.517+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:28.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:28.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:28.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:53:28.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:28.580+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:53:28.580+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:28.581+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:53:28.583+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:28.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies/pending
2026-01-05T09:53:28.592+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/me
2026-01-05T09:53:28.599+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:53:28.595+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.596+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/me
2026-01-05T09:53:28.596+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:28.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:28.603+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:28.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:28.609+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:28.609+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:28.599+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:53:28.600+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:53:28.611+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:53:28.612+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 2
2026-01-05T09:53:28.601+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ce6250] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:53:28.609+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:28.610+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.611+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:53:28.614+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.616+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:53:28.617+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.618+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bb6181] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.619+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:53:28.620+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@107de8ce] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:53:28.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1585cf86] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.630+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 2
2026-01-05T09:53:28.628+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.630+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.633+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1782128739 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:28.635+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:28.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43456219] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1962296813 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:28.633+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d7e042] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.634+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@144759983 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:28.634+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@696492606 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:28.637+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:28.641+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:28.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:28.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:28.646+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:28.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:28.648+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:28.649+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@415297963 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:28.649+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2014858332 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:28.649+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:28.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:28.653+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:28.658+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:28.659+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1585cf86]
2026-01-05T09:53:28.659+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@59ce6250]
2026-01-05T09:53:28.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:28.661+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-05T09:53:28.661+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:28.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:28.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:28.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:28.665+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:28.697+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:28.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:28.718+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74bb6181]
2026-01-05T09:53:28.718+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.719+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bdd599d] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@404783237 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:28.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:28.723+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:28.702+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:28.713+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@107de8ce]
2026-01-05T09:53:28.715+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:53:28.726+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@43456219]
2026-01-05T09:53:28.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae938b8] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.728+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:28.729+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023589591 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:28.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:28.729+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:28.735+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:28.735+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:28.745+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:28.747+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11d7e042]
2026-01-05T09:53:28.747+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:28.749+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d69c101] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:28.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@570213881 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:28.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:28.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:28.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:28.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:28.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7d69c101]
2026-01-05T09:53:28.773+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ae938b8]
2026-01-05T09:53:28.773+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 2, role: CEO
2026-01-05T09:53:28.773+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 2, role: CEO
2026-01-05T09:53:28.774+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:28.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:28.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-05T09:53:28.780+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-05T09:53:28.786+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:28.787+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:28.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:28.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2bdd599d]
2026-01-05T09:53:28.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:28.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:28.819+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:33.473+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:33.473+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:33.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:33.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:33.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:33.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:33.521+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:33.532+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:33.566+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:33.580+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:33.575+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:33.577+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:33.616+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:33.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:33.608+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:33.620+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:33.613+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:33.617+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:33.618+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:33.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:33.624+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:33.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87e652a] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:33.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:33.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:33.630+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:33.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:33.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:33.635+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:33.636+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:33.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4804a1bc] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:33.646+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@760a8159] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:33.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5645fecf] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:33.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530891398 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:33.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1546593481 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:33.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:33.715+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:33.716+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:33.717+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:33.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510514759 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:33.746+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:33.747+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:33.748+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:33.748+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@570662537 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:33.749+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:33.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@87e652a]
2026-01-05T09:53:33.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:33.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4804a1bc]
2026-01-05T09:53:33.762+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:33.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:33.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:33.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ecdc5] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:33.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:33.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:33.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@80623746 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:33.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@760a8159]
2026-01-05T09:53:33.769+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:33.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:33.776+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:33.776+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:33.781+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/2/applications
2026-01-05T09:53:33.781+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:53:33.781+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:33.783+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:33.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/2/applications
2026-01-05T09:53:33.931+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:33.947+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:33.950+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5645fecf]
2026-01-05T09:53:34.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:33.953+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies/2/applications
2026-01-05T09:53:34.010+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41ecdc5]
2026-01-05T09:53:34.029+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:34.030+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:53:34.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/2/applications
2026-01-05T09:53:34.044+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/2/applications", parameters={}
2026-01-05T09:53:34.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:53:34.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:53:34.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:53:34.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:53:34.047+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:53:34.049+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:34.052+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:34.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:34.061+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:34.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:53:34.100+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:34.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.114+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:34.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-01-05T09:53:34.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:53:34.162+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:53:34.135+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:53:34.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:34.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d21863f] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.146+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/plans
2026-01-05T09:53:34.157+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d39ba07] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1375117232 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:34.195+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:34.166+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/2/applications
2026-01-05T09:53:34.175+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:53:34.217+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:34.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920568040 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:34.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:34.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:34.273+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:53:34.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-01-05T09:53:34.427+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:34.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:34.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:34.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:34.444+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/subscriptions/current
2026-01-05T09:53:34.445+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/subscriptions/plans
2026-01-05T09:53:34.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:34.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:34.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:34.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:53:34.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-01-05T09:53:34.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d39ba07]
2026-01-05T09:53:34.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:34.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:34.499+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:53:34.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:34.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-01-05T09:53:34.502+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b24204] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:34.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:34.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.508+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:53:34.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d21863f]
2026-01-05T09:53:34.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-01-05T09:53:34.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1390170205 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:34.528+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:53:34.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b4882e6] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.516+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fc8bc13] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.516+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:53:34.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.540+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fa64be] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 2(Long)
2026-01-05T09:53:34.532+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@740779434 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:34.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eccbbfc] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.536+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:53:34.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:34.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1734714057 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:34.552+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.559+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:53:34.559+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1579674632 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:34.560+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:34.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:34.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2018257034 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:34.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5bdb50] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37b24204]
2026-01-05T09:53:34.562+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-01-05T09:53:34.563+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:34.563+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:53:34.564+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:34.566+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.567+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-01-05T09:53:34.568+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:53:34.568+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fc8bc13]
2026-01-05T09:53:34.569+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:34.570+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.575+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcde21b] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:53:34.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473245589 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:34.584+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/credits/total
2026-01-05T09:53:34.585+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:34.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461469916 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:34.594+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:53:34.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:53:34.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:34.587+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:53:34.587+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.S.findAllActive                  : <==      Total: 3
2026-01-05T09:53:34.594+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:34.595+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:34.600+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eccbbfc]
2026-01-05T09:53:34.606+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:53:34.601+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b4882e6]
2026-01-05T09:53:34.601+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:53:34.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35fa64be]
2026-01-05T09:53:34.610+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.612+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.613+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:53:34.614+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.616+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:53:34.617+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:34.617+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:34.618+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:53:34.618+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:53:34.620+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.626+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-01-05T09:53:34.628+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7dcde21b]
2026-01-05T09:53:34.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c5bdb50]
2026-01-05T09:53:34.633+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:53:34.635+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:53:34.643+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.650+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/plans
2026-01-05T09:53:34.652+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.653+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454537f] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1157952473 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:34.658+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/subscriptions/current
2026-01-05T09:53:34.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:34.665+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:53:34.711+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.666+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/subscriptions/plans
2026-01-05T09:53:34.695+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=2, companyId=2, planId= (truncated)...]
2026-01-05T09:53:34.718+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.703+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:53:34.711+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:53:34.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/plans
2026-01-05T09:53:34.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/credits/total
2026-01-05T09:53:34.720+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 2(Long), 2026-01-05(LocalDate)
2026-01-05T09:53:34.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:53:34.723+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/plans", parameters={}
2026-01-05T09:53:34.723+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:53:34.752+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:53:34.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:53:34.729+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/2/applications
2026-01-05T09:53:34.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:53:34.746+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getPlans()
2026-01-05T09:53:34.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:53:34.760+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:53:34.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:53:34.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies/2/applications
2026-01-05T09:53:34.776+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.779+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:53:34.782+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:53:34.783+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:53:34.784+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/2/applications
2026-01-05T09:53:34.784+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140637e8] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.785+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:53:34.787+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:53:34.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.793+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:53:34.793+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/2/applications", parameters={}
2026-01-05T09:53:34.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260941443 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:34.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:53:34.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571e8ebb] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@454537f]
2026-01-05T09:53:34.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@622592376 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:34.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:53:34.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==>  Preparing: SELECT * FROM subscription_plan_tb WHERE is_active = 1 ORDER BY price ASC
2026-01-05T09:53:34.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:34.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c26527] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==>  Preparing: SELECT s.*, p.plan_code, p.plan_name, p.price, p.max_users, p.features, p.is_active AS plan_is_active FROM subscription_tb s INNER JOIN subscription_plan_tb p ON s.plan_id = p.plan_id WHERE s.company_id = ? AND s.status = 'ACTIVE' ORDER BY s.created_at DESC LIMIT 1
2026-01-05T09:53:34.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-05T09:53:34.802+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:53:34.802+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:34.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : ==> Parameters: 
2026-01-05T09:53:34.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:34.813+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1991355787 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:34.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:34.815+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee4e2ce] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.815+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==>  Preparing: SELECT COALESCE(SUM(amount - used_amount), 0) FROM credit_tb WHERE company_id = ? AND (expires_at IS NULL OR expires_at >= ?)
2026-01-05T09:53:34.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : ==> Parameters: 2(Long), 2026-01-05(LocalDate)
2026-01-05T09:53:34.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@133534176 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:34.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c49a347] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.819+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:34.826+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.S.findAllActive                  : <==      Total: 3
2026-01-05T09:53:34.826+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.S.findActiveByCompanyId          : <==      Total: 1
2026-01-05T09:53:34.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@571e8ebb]
2026-01-05T09:53:34.828+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766746792 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:34.863+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:34.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:34.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:34.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@140637e8]
2026-01-05T09:53:34.853+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.881+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=SubscriptionDto(subscriptionId=2, companyId=2, planId= (truncated)...]
2026-01-05T09:53:34.880+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.884+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[SubscriptionPlanDto(planId=1, planCode=FREE, planName (truncated)...]
2026-01-05T09:53:34.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.885+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.895+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.C.getTotalAvailableAmount        : <==      Total: 1
2026-01-05T09:53:34.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29c26527]
2026-01-05T09:53:34.908+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.910+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data={totalAmount=0})]
2026-01-05T09:53:34.912+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:34.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:34.929+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1ee4e2ce]
2026-01-05T09:53:34.929+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c49a347]
2026-01-05T09:53:34.931+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.931+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507aa128] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.930+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:34.931+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef56a76] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:34.931+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1361601531 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:34.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000552948 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:34.948+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:53:34.954+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 2(Long)
2026-01-05T09:53:34.949+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:53:34.961+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:53:34.968+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:53:34.970+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@507aa128]
2026-01-05T09:53:34.971+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.971+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:53:34.973+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:34.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef56a76]
2026-01-05T09:53:34.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:34.976+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:53:34.979+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:34.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:53:34.981+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:40.785+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:53:40.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:53:40.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/logout
2026-01-05T09:53:40.805+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:53:40.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:53:40.849+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:53:40.857+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-05T09:53:40.917+09:00  INFO 15320 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=1
2026-01-05T09:53:40.923+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:40.923+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:53:40.924+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:47.571+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:53:47.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:53:47.581+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:53:47.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:53:47.583+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:53:47.605+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:53:47.608+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_ceo, password=1234)]
2026-01-05T09:53:47.621+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_ceo
2026-01-05T09:53:47.623+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:47.638+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9bb7e3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:47.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@88037447 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:47.676+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:53:47.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_ceo(String)
2026-01-05T09:53:47.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:53:47.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f9bb7e3]
2026-01-05T09:53:47.769+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:47.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da7070] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:47.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1052296357 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:47.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:47.772+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:47.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:47.777+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31da7070]
2026-01-05T09:53:47.778+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 1, role: CEO, companyId: 2
2026-01-05T09:53:47.779+09:00  INFO 15320 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=1 username=test_ceo role=CEO
2026-01-05T09:53:47.780+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:47.781+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=1, username=test_ceo, password=n (truncated)...]
2026-01-05T09:53:47.782+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:47.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:53:48.011+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:53:48.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.059+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:48.060+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:53:48.062+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.064+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:48.072+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies
2026-01-05T09:53:48.076+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:48.080+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.080+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:53:48.083+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:48.090+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.091+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:53:48.095+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:53:48.096+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:48.188+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:53:48.189+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:53:48.194+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:53:48.097+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.100+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:48.100+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:48.214+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.169+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:53:48.189+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:48.197+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:53:48.200+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:48.215+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:48.216+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:48.217+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:53:48.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:48.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:48.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:48.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:48.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6811fc7a] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.228+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:48.235+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:48.230+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:48.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.231+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23fc8ad1] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:48.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:48.243+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16dfdbfc] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.244+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75287e56] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.247+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@702965028 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:48.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.249+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1830613141 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:48.249+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:48.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283f33fc] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:53:48.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ed0094] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1517204782 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:48.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@17618379 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:48.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:48.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612622761 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:48.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 1(Long)
2026-01-05T09:53:48.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:48.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:48.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:48.263+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:48.265+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1997071047 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:48.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:48.269+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:48.272+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 7
2026-01-05T09:53:48.273+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:48.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:48.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6811fc7a]
2026-01-05T09:53:48.277+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23fc8ad1]
2026-01-05T09:53:48.279+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:48.280+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:48.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75287e56]
2026-01-05T09:53:48.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:48.282+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36745e99] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:53:48.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:48.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:48.292+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@16dfdbfc]
2026-01-05T09:53:48.296+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1725753090 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:48.298+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283f33fc]
2026-01-05T09:53:48.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15ed0094]
2026-01-05T09:53:48.346+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.347+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e39508] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.348+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@708480231 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:48.348+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:48.315+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:48.317+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:48.354+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:48.326+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.350+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:48.361+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:48.362+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.352+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:48.352+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ceacfa] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.383+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992280876 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:48.383+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:48.362+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:48.364+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.380+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:53:48.384+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:48.384+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:48.397+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.398+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f13b10] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975061539 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:48.400+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:48.391+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:48.394+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses
2026-01-05T09:53:48.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:53:48.408+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:53:48.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:53:48.401+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:48.406+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:48.413+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:48.413+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:48.411+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d4233f] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:48.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@606722107 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:48.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.433+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:48.433+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d8add2] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:48.435+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1573157974 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:48.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:48.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:48.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:48.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:48.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:48.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@27ceacfa]
2026-01-05T09:53:48.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29e39508]
2026-01-05T09:53:48.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f13b10]
2026-01-05T09:53:48.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36745e99]
2026-01-05T09:53:48.462+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:48.463+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.463+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:48.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:48.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.466+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:48.466+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d4233f]
2026-01-05T09:53:48.472+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:48.474+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:48.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:53:48.479+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.480+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.485+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78d8add2]
2026-01-05T09:53:48.485+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3420c6a0] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2abb0d80] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.493+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:48.494+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.494+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:48.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@30983872 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:48.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@389059384 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:48.517+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:48.576+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:53:48.577+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:48.588+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:48.580+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:48.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:53:48.592+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:48.593+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:48.610+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.617+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:48.618+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:53:48.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3420c6a0]
2026-01-05T09:53:48.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.643+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75984924] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2abb0d80]
2026-01-05T09:53:48.649+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.650+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:48.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388234775 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:48.655+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.657+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:53:48.658+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:48.659+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:48.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:48.661+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:48.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:48.665+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:48.666+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:48.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.797+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:48.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:48.806+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:48.813+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:48.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@688e2dd5] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.865+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:48.872+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@824306945 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:48.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fab5fe] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75984924]
2026-01-05T09:53:48.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:48.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@638335082 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:48.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.876+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:48.877+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:48.878+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:48.879+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:48.881+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.885+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:48.894+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@688e2dd5]
2026-01-05T09:53:48.895+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.897+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:48.906+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79fab5fe]
2026-01-05T09:53:48.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:48.909+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:48.910+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:48.910+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754d1560] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:48.912+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1496587122 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:48.912+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:48.913+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:48.947+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:48.953+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@754d1560]
2026-01-05T09:53:48.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:48.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:48.960+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:49.505+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:49.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:49.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:53:49.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T09:53:49.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:49.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T09:53:49.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:49.580+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:49.581+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:53:49.583+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T09:53:49.583+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:49.586+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:49.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:49.591+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:49.593+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/me
2026-01-05T09:53:49.597+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies/pending
2026-01-05T09:53:49.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:49.599+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:49.600+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:49.601+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:53:49.601+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T09:53:49.604+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T09:53:49.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:49.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:49.603+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:49.603+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:53:49.608+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T09:53:49.612+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T09:53:49.612+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:49.615+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.612+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:49.613+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:49.613+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:53:49.619+09:00  INFO 15320 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 2
2026-01-05T09:53:49.620+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.614+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/me
2026-01-05T09:53:49.615+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.615+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e68cd2e] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.616+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.616+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1d2ef1] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.628+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66826ec7] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T09:53:49.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39c095f7] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.631+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ed9dec] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@892911420 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:49.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T09:53:49.652+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:49.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091351644 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:49.658+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T09:53:49.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126171921 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:49.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 1(Long), PENDING(String)
2026-01-05T09:53:49.661+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:49.662+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 1, companyId: 2
2026-01-05T09:53:49.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:49.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720904098 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:49.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1491057477 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:49.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:49.663+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.665+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:49.665+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:49.669+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:49.666+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:49.666+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T09:53:49.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703c5a1b] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.669+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:49.669+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:49.670+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66826ec7]
2026-01-05T09:53:49.670+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:49.677+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e68cd2e]
2026-01-05T09:53:49.679+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c1d2ef1]
2026-01-05T09:53:49.679+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.680+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:49.680+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.680+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443a8374] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:49.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dafa4df] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@996227882 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:49.684+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:49.684+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1675388299 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:49.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@436889124 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:49.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:49.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:53:49.691+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70ed9dec]
2026-01-05T09:53:49.692+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:49.692+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:49.693+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:49.695+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:53:49.696+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:49.696+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39c095f7]
2026-01-05T09:53:49.697+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:49.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:49.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:49.699+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:49.699+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:53:49.701+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:49.703+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:49.703+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703c5a1b]
2026-01-05T09:53:49.713+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:49.704+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:49.717+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dafa4df]
2026-01-05T09:53:49.705+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:49.713+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:49.732+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:49.733+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443a8374]
2026-01-05T09:53:49.734+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11de9eb3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:49.740+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:49.759+09:00  INFO 15320 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 2, role: CEO
2026-01-05T09:53:49.762+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1117375115 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:53:49.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:49.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:49.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:49.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-05T09:53:49.769+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:49.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:49.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:49.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11de9eb3]
2026-01-05T09:53:49.851+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 1, companyId: 2, role: CEO
2026-01-05T09:53:49.852+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:49.856+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=1, username=test_ceo, passwor (truncated)...]
2026-01-05T09:53:49.858+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/pending
2026-01-05T09:53:51.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:51.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:51.090+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T09:53:51.111+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/pending
2026-01-05T09:53:51.114+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:51.114+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:51.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/pending
2026-01-05T09:53:51.123+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:53:51.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:51.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/pending
2026-01-05T09:53:51.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T09:53:51.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=1
2026-01-05T09:53:51.146+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=1", parameters={masked}
2026-01-05T09:53:51.147+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/companies
2026-01-05T09:53:51.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:51.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/pending", parameters={}
2026-01-05T09:53:51.147+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:53:51.148+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T09:53:51.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:51.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingUsers()
2026-01-05T09:53:51.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce1c432] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T09:53:51.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:51.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.155+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T09:53:51.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.159+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f94933c] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1455134464 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:51.161+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:53:51.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1595c3] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1887601488 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:51.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 1(Long), 2(Long)
2026-01-05T09:53:51.166+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d68ca8] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.167+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.175+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2069703254 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:51.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@200503335 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:53:51.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:53:51.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.181+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ce1c432]
2026-01-05T09:53:51.182+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.181+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f94933c]
2026-01-05T09:53:51.182+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.184+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.185+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.185+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:53:51.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d68ca8]
2026-01-05T09:53:51.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2903bf64] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.190+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2114332598 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:51.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f1595c3]
2026-01-05T09:53:51.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:51.193+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY u.user_id DESC
2026-01-05T09:53:51.196+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.200+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=9, userId=1, companyId=2 (truncated)...]
2026-01-05T09:53:51.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.199+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : ==> Parameters: 2(Long)
2026-01-05T09:53:51.202+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.269+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/2/applications
2026-01-05T09:53:51.272+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:53:51.278+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies/2/applications
2026-01-05T09:53:51.279+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:53:51.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findPendingUsers      : <==      Total: 0
2026-01-05T09:53:51.296+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2903bf64]
2026-01-05T09:53:51.296+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.298+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:51.312+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.351+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/2/applications
2026-01-05T09:53:51.358+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:53:51.388+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/companies/2/applications
2026-01-05T09:53:51.390+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:53:51.406+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies/2/applications
2026-01-05T09:53:51.408+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/2/applications
2026-01-05T09:53:51.392+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/companies/2/applications
2026-01-05T09:53:51.431+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/companies/2/applications
2026-01-05T09:53:51.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/2/applications", parameters={}
2026-01-05T09:53:51.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:53:51.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:53:51.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/companies/2/applications", parameters={}
2026-01-05T09:53:51.433+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:53:51.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:53:51.435+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:53:51.446+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getCompanyApplications(Long)
2026-01-05T09:53:51.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:51.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:53:51.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:53:51.455+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:53:51.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:51.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:51.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CompanyController.getCompanyApplications(java.lang.Long); target is of class [com.innersignature.backend.controller.CompanyController]
2026-01-05T09:53:51.463+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:53:51.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:51.462+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ad5619] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:51.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:51.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d86d1bc] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.466+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473267749 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:51.467+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:53:51.467+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.468+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@630976905 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:51.471+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.473+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e02a22] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.474+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b08a121] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333764584 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:51.480+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022281494 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:51.480+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.482+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:53:51.482+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.483+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.483+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:53:51.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21ad5619]
2026-01-05T09:53:51.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d86d1bc]
2026-01-05T09:53:51.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ac48f] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.495+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fac79f] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.495+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.496+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1280067579 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:53:51.496+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:53:51.496+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@435875661 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:53:51.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b08a121]
2026-01-05T09:53:51.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:53:51.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@49e02a22]
2026-01-05T09:53:51.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.company_id = ? AND uc.approval_status = 'PENDING' ORDER BY uc.created_at DESC
2026-01-05T09:53:51.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.498+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 2(Long)
2026-01-05T09:53:51.498+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:53:51.499+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : ==> Parameters: 2(Long)
2026-01-05T09:53:51.499+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a8e930] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.499+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e81d9a2] was not registered for synchronization because synchronization is not active
2026-01-05T09:53:51.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1555515885 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:53:51.508+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@176239674 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:53:51.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:53:51.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:53:51.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:53:51.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:53:51.517+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:53:51.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@79ac48f]
2026-01-05T09:53:51.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.530+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.U.findPendingCompanyApplications : <==      Total: 0
2026-01-05T09:53:51.536+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:51.537+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fac79f]
2026-01-05T09:53:51.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.544+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.545+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:53:51.546+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:53:51.551+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e81d9a2]
2026-01-05T09:53:51.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:53:51.555+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42a8e930]
2026-01-05T09:53:51.553+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:53:51.560+09:00  INFO 15320 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:53:51.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.561+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:53:51.563+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:53:51.563+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:53:51.566+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:53:51.571+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:01.134+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/10/company/2/approver?isApprover=true
2026-01-05T09:54:01.311+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/10/company/2/approver?isApprover=true
2026-01-05T09:54:01.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/10/company/2/approver
2026-01-05T09:54:01.391+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/10/company/2/approver?isApprover=true
2026-01-05T09:54:01.397+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/10/company/2/approver?isApprover=true", parameters={masked}
2026-01-05T09:54:01.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateApproverStatus(Long, Long, Boolean)
2026-01-05T09:54:01.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:01.427+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:01.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:01.449+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1862553140 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will be managed by Spring
2026-01-05T09:54:01.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:01.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:54:01.462+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:01.463+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8] from current transaction
2026-01-05T09:54:01.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:01.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:01.467+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:01.468+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.468+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8] from current transaction
2026-01-05T09:54:01.469+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:01.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long)
2026-01-05T09:54:01.483+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 2
2026-01-05T09:54:01.483+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.484+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8] from current transaction
2026-01-05T09:54:01.485+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.updateApproverStatus  : ==>  Preparing: UPDATE user_company_tb SET is_approver = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:54:01.496+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.updateApproverStatus  : ==> Parameters: true(Boolean), 10(Long), 2(Long)
2026-01-05T09:54:01.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.updateApproverStatus  : <==    Updates: 1
2026-01-05T09:54:01.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ea4c2a8]
2026-01-05T09:54:01.541+09:00  INFO 15320 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 결재자 지정 변경 - operatorId: 1, userId: 10, companyId: 2, isApprover: true
2026-01-05T09:54:01.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:01.543+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자로 지정되었습니다., data=null)]
2026-01-05T09:54:01.544+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:01.571+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:54:01.585+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:54:01.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:54:01.635+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:54:01.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:54:01.644+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:54:01.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:01.647+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:01.648+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:01.648+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a77dc0a] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:01.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@963567918 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:01.651+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:01.658+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:54:01.666+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:54:01.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a77dc0a]
2026-01-05T09:54:01.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:01.668+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fac22b2] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:01.668+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1317234843 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:01.669+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:54:01.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:54:01.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:54:01.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6fac22b2]
2026-01-05T09:54:01.684+09:00  INFO 15320 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:54:01.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:01.686+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:54:01.693+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:03.900+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/11/company/2/approver?isApprover=true
2026-01-05T09:54:03.914+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/11/company/2/approver?isApprover=true
2026-01-05T09:54:03.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/11/company/2/approver
2026-01-05T09:54:03.963+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/11/company/2/approver?isApprover=true
2026-01-05T09:54:03.967+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/11/company/2/approver?isApprover=true", parameters={masked}
2026-01-05T09:54:03.969+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateApproverStatus(Long, Long, Boolean)
2026-01-05T09:54:03.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:03.977+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateApproverStatus(java.lang.Long,java.lang.Long,java.lang.Boolean); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:03.982+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:03.983+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:03.983+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@60845739 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will be managed by Spring
2026-01-05T09:54:03.983+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:03.984+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 1(Long)
2026-01-05T09:54:03.987+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:03.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:03.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b] from current transaction
2026-01-05T09:54:03.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:03.991+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:54:04.041+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:04.056+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:04.075+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b] from current transaction
2026-01-05T09:54:04.076+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:04.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 11(Long)
2026-01-05T09:54:04.097+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 2
2026-01-05T09:54:04.099+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:04.101+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b] from current transaction
2026-01-05T09:54:04.101+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.updateApproverStatus  : ==>  Preparing: UPDATE user_company_tb SET is_approver = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:54:04.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.updateApproverStatus  : ==> Parameters: true(Boolean), 11(Long), 2(Long)
2026-01-05T09:54:04.110+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.updateApproverStatus  : <==    Updates: 1
2026-01-05T09:54:04.111+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:04.112+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:04.113+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:04.130+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3576c86b]
2026-01-05T09:54:04.141+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 결재자 지정 변경 - operatorId: 1, userId: 11, companyId: 2, isApprover: true
2026-01-05T09:54:04.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:04.144+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자로 지정되었습니다., data=null)]
2026-01-05T09:54:04.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:04.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company/2
2026-01-05T09:54:04.215+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company/2
2026-01-05T09:54:04.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company/2
2026-01-05T09:54:04.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company/2
2026-01-05T09:54:04.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company/2", parameters={}
2026-01-05T09:54:04.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsersById(Long)
2026-01-05T09:54:04.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:04.231+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsersById(java.lang.Long); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:04.233+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:04.233+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5132ce03] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:04.257+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@780155513 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:54:04.257+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:04.258+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:54:04.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:54:04.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5132ce03]
2026-01-05T09:54:04.263+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:04.264+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35a85309] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:04.264+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1537990348 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:54:04.265+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:54:04.265+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:54:04.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:54:04.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35a85309]
2026-01-05T09:54:04.271+09:00  INFO 15320 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:54:04.273+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:04.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:54:04.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:09.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/11/role
2026-01-05T09:54:09.174+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/11/role
2026-01-05T09:54:09.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/11/role
2026-01-05T09:54:09.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/11/role
2026-01-05T09:54:09.184+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/11/role", parameters={}
2026-01-05T09:54:09.188+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateUserRole(Long, UpdateRoleRequest)
2026-01-05T09:54:09.199+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.UpdateRoleRequest(role=ADMIN)]
2026-01-05T09:54:09.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateUserRole(java.lang.Long,com.innersignature.backend.controller.UserController$UpdateRoleRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:09.222+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateUserRole(java.lang.Long,com.innersignature.backend.controller.UserController$UpdateRoleRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:09.227+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 사용자 role 변경 시도 - userId: 11, newRole: ADMIN, operatorId: 1
2026-01-05T09:54:09.228+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:09.229+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443e987a] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:09.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1795992839 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:09.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:09.233+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 11(Long)
2026-01-05T09:54:09.236+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:09.236+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@443e987a]
2026-01-05T09:54:09.240+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:09.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f8bf11e] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:09.243+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1654265984 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:09.247+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:09.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:54:09.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:54:09.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f8bf11e]
2026-01-05T09:54:09.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:09.257+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31b69ddb] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:09.258+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@56282485 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:09.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:09.264+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 11(Long)
2026-01-05T09:54:09.266+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:54:09.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31b69ddb]
2026-01-05T09:54:09.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:09.268+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c1d9d] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:09.270+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@59179450 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:09.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.updateUserCompanyRole          : ==>  Preparing: UPDATE user_company_tb SET role = ?, position = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:54:09.278+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.updateUserCompanyRole          : ==> Parameters: ADMIN(String), 이사(String), 11(Long), 2(Long)
2026-01-05T09:54:09.284+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.U.updateUserCompanyRole          : <==    Updates: 1
2026-01-05T09:54:09.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22c1d9d]
2026-01-05T09:54:09.290+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 사용자 role 변경 완료 - userId: 11, newRole: ADMIN
2026-01-05T09:54:09.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:09.295+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=role이 변경되었습니다., data=null)]
2026-01-05T09:54:09.295+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:10.134+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company
2026-01-05T09:54:10.140+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company
2026-01-05T09:54:10.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company
2026-01-05T09:54:10.152+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company
2026-01-05T09:54:10.162+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company", parameters={}
2026-01-05T09:54:10.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsers()
2026-01-05T09:54:10.166+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsers(); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:10.168+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsers(); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:10.173+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:10.174+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ea13e1] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:10.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@99864225 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:10.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:54:10.183+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:54:10.189+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:54:10.194+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@24ea13e1]
2026-01-05T09:54:10.196+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:54:10.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:10.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:54:10.201+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:14.729+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/10/role
2026-01-05T09:54:14.738+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing PUT /api/users/10/role
2026-01-05T09:54:14.740+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/10/role
2026-01-05T09:54:14.742+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured PUT /api/users/10/role
2026-01-05T09:54:14.742+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/api/users/10/role", parameters={}
2026-01-05T09:54:14.743+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#updateUserRole(Long, UpdateRoleRequest)
2026-01-05T09:54:14.744+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.UpdateRoleRequest(role=ACCOUNTANT)]
2026-01-05T09:54:14.745+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateUserRole(java.lang.Long,com.innersignature.backend.controller.UserController$UpdateRoleRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:14.750+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.updateUserRole(java.lang.Long,com.innersignature.backend.controller.UserController$UpdateRoleRequest); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:14.752+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 사용자 role 변경 시도 - userId: 10, newRole: ACCOUNTANT, operatorId: 1
2026-01-05T09:54:14.754+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:14.812+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7435add5] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:14.815+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490390464 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:14.827+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:14.828+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:14.830+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:14.831+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7435add5]
2026-01-05T09:54:14.831+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:14.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ccf464e] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:14.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1628336527 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:14.833+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:14.834+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 1(Long)
2026-01-05T09:54:14.839+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 7
2026-01-05T09:54:14.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2ccf464e]
2026-01-05T09:54:14.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:14.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37805d68] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:14.848+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1630240992 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:14.848+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:14.850+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:54:14.863+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:54:14.864+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37805d68]
2026-01-05T09:54:14.865+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:14.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55294f6b] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:14.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1626809275 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:14.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.updateUserCompanyRole          : ==>  Preparing: UPDATE user_company_tb SET role = ?, position = ?, updated_at = NOW() WHERE user_id = ? AND company_id = ?
2026-01-05T09:54:14.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.updateUserCompanyRole          : ==> Parameters: ACCOUNTANT(String), 경리(String), 10(Long), 2(Long)
2026-01-05T09:54:14.897+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.U.updateUserCompanyRole          : <==    Updates: 1
2026-01-05T09:54:14.897+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55294f6b]
2026-01-05T09:54:14.897+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 사용자 role 변경 완료 - userId: 10, newRole: ACCOUNTANT
2026-01-05T09:54:14.898+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:14.898+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=role이 변경되었습니다., data=null)]
2026-01-05T09:54:14.899+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:15.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/company
2026-01-05T09:54:15.813+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/company
2026-01-05T09:54:15.829+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/users/company
2026-01-05T09:54:15.836+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/company
2026-01-05T09:54:15.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/company", parameters={}
2026-01-05T09:54:15.849+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCompanyUsers()
2026-01-05T09:54:15.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsers(); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:15.852+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.UserController.getCompanyUsers(); target is of class [com.innersignature.backend.controller.UserController]
2026-01-05T09:54:15.856+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:15.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ee080f] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:15.863+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600144043 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:15.863+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' ORDER BY u.user_id
2026-01-05T09:54:15.864+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : ==> Parameters: 2(Long)
2026-01-05T09:54:15.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.selectUsersByCompanyId         : <==      Total: 7
2026-01-05T09:54:15.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38ee080f]
2026-01-05T09:54:15.874+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 회사별 사용자 목록 조회 완료 - companyId: 2, count: 7
2026-01-05T09:54:15.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:15.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사별 사용자 목록 조회 성공, data=[UserDto(userId=1, username=test_ceo, passw (truncated)...]
2026-01-05T09:54:15.877+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:21.906+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:54:21.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:54:21.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 1, role: CEO, companyId: 2, uri: /api/logout
2026-01-05T09:54:21.950+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:54:21.954+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:54:21.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:54:21.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJ (truncated)...]
2026-01-05T09:54:21.962+09:00  INFO 15320 --- [http-nio-8080-exec-9] SECURITY                                 : LOGOUT userId=1
2026-01-05T09:54:21.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:21.967+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:54:21.971+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:26.456+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T09:54:26.460+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T09:54:26.461+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T09:54:26.484+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T09:54:26.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T09:54:26.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T09:54:26.487+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountant, password=1234)]
2026-01-05T09:54:26.510+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountant
2026-01-05T09:54:26.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:26.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74d4b038] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:26.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@768066175 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:26.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T09:54:26.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-01-05T09:54:26.531+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T09:54:26.532+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74d4b038]
2026-01-05T09:54:26.621+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:26.621+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a172d51] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:26.622+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@412965122 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:26.622+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:26.623+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:54:26.625+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:54:26.626+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a172d51]
2026-01-05T09:54:26.627+09:00  INFO 15320 --- [http-nio-8080-exec-8] c.i.backend.controller.UserController    : 로그인 성공 - userId: 10, role: USER, companyId: 1
2026-01-05T09:54:26.628+09:00  INFO 15320 --- [http-nio-8080-exec-8] SECURITY                                 : LOGIN_SUCCESS userId=10 username=test_accountant role=USER
2026-01-05T09:54:26.628+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:26.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=10, username=test_accountant, pa (truncated)...]
2026-01-05T09:54:26.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.032+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:54:27.078+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:54:27.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:54:27.080+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:54:27.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/companies
2026-01-05T09:54:27.282+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:54:27.283+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:54:27.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:54:27.295+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.297+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:54:27.330+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:54:27.298+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.300+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:54:27.305+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:54:27.313+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses
2026-01-05T09:54:27.324+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:54:27.333+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:54:27.340+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:54:27.341+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.343+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.344+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:54:27.355+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:54:27.346+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.346+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:54:27.346+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.346+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756606a4] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.351+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:27.356+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:54:27.357+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:27.359+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:54:27.361+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:27.363+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:27.365+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:27.365+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.366+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.367+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:27.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@249482215 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:54:27.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.371+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb44884] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.373+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@411329ce] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.380+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.389+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc4b7a3] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.381+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68aa0ab0] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.381+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:54:27.383+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7811c019] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.393+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T09:54:27.397+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@223892578 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.397+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1442365054 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.397+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@503708671 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:27.398+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@439733304 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:27.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:27.400+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:27.401+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:27.402+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:27.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:27.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:27.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:54:27.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@155718873 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:27.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-05T09:54:27.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:54:27.416+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:27.419+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:54:27.419+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:54:27.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@756606a4]
2026-01-05T09:54:27.430+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:54:27.431+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5fb44884]
2026-01-05T09:54:27.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@411329ce]
2026-01-05T09:54:27.433+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.441+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:27.445+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.445+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:54:27.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dc4b7a3]
2026-01-05T09:54:27.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71296ab9] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbf1fe6] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.450+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1600597620 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.562+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:27.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@9418513 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:27.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:27.571+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68aa0ab0]
2026-01-05T09:54:27.459+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:27.502+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.562+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:27.564+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:27.565+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.574+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:27.575+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7811c019]
2026-01-05T09:54:27.591+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.592+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:27.595+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.578+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:27.585+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.622+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:27.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:27.670+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/expenses/pending-approvals
2026-01-05T09:54:27.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1dbf1fe6]
2026-01-05T09:54:27.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71296ab9]
2026-01-05T09:54:27.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:27.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.676+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:27.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0a1634] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646d386d] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.679+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:27.680+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1068458684 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1588325115 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:54:27.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:54:27.684+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f5fcde] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:54:27.687+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:54:27.690+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1287847808 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:27.692+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:27.693+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 1(Long)
2026-01-05T09:54:27.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:27.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:54:27.698+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:54:27.700+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42f5fcde]
2026-01-05T09:54:27.701+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@646d386d]
2026-01-05T09:54:27.706+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a0a1634]
2026-01-05T09:54:27.707+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.708+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.709+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.710+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:27.710+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@148ca547] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.711+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55882725] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.715+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@422533611 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.716+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:27.715+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1605967894 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.718+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:27.718+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:27.735+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 1(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:27.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:54:27.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 16
2026-01-05T09:54:27.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@148ca547]
2026-01-05T09:54:27.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55882725]
2026-01-05T09:54:27.772+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.774+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.777+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba64b12] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a04b85] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.791+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@443645372 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1711668219 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:27.793+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:27.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:27.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:27.797+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:27.797+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:27.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72a04b85]
2026-01-05T09:54:27.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ba64b12]
2026-01-05T09:54:27.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5350728c] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@750cce8d] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.809+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@601683712 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@749463013 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:54:27.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? , ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:54:27.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:54:27.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 1(Long), 20(Long), 19(Long), 18(Long), 17(Long), 16(Long), 14(Long), 13(Long), 12(Long), 8(Long), 7(Long), 6(Long), 5(Long), 4(Long), 3(Long), 2(Long), 1(Long)
2026-01-05T09:54:27.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:54:27.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 22
2026-01-05T09:54:27.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5350728c]
2026-01-05T09:54:27.823+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@750cce8d]
2026-01-05T09:54:27.824+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.824+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5041a3a2] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.825+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1126856577 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:27.823+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:27.826+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:27.827+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c366e61] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:27.828+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:27.830+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@480420217 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:27.830+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:27.831+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:27.864+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:27.864+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:27.865+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5041a3a2]
2026-01-05T09:54:27.865+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4c366e61]
2026-01-05T09:54:27.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:27.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:54:27.868+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:54:27.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:27.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:29.988+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/switch-company
2026-01-05T09:54:29.991+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-01-05T09:54:29.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: USER, companyId: 1, uri: /api/users/switch-company
2026-01-05T09:54:29.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-01-05T09:54:29.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-01-05T09:54:29.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-01-05T09:54:29.995+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=2, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMCIsI (truncated)...]
2026-01-05T09:54:29.995+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 10, companyId: 2
2026-01-05T09:54:29.997+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:29.999+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@607e07b3] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:30.002+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@140647562 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:30.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:30.093+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:54:30.113+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:54:30.113+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@607e07b3]
2026-01-05T09:54:30.115+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:30.116+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@421331620 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will be managed by Spring
2026-01-05T09:54:30.118+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:54:30.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:54:30.130+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:54:30.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.144+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2] from current transaction
2026-01-05T09:54:30.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.setPrimaryCompany     : ==>  Preparing: UPDATE user_company_tb SET is_primary = CASE WHEN user_id = ? AND company_id = ? THEN 1 ELSE 0 END, updated_at = NOW() WHERE user_id = ?
2026-01-05T09:54:30.146+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.setPrimaryCompany     : ==> Parameters: 10(Long), 2(Long), 10(Long)
2026-01-05T09:54:30.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.setPrimaryCompany     : <==    Updates: 2
2026-01-05T09:54:30.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2] from current transaction
2026-01-05T09:54:30.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.updateUserCompanyId   : ==>  Preparing: UPDATE user_tb SET company_id = ? WHERE user_id = ?
2026-01-05T09:54:30.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.updateUserCompanyId   : ==> Parameters: 2(Long), 10(Long)
2026-01-05T09:54:30.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.updateUserCompanyId   : <==    Updates: 1
2026-01-05T09:54:30.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.159+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.159+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d184aa2]
2026-01-05T09:54:30.167+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:30.168+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b52a4f1] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:30.169+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1790349325 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:30.171+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:54:30.173+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:54:30.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:54:30.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b52a4f1]
2026-01-05T09:54:30.178+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 회사 전환 완료 - userId: 10, companyId: 2
2026-01-05T09:54:30.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:30.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사 전환이 완료되었습니다., data={user=UserDto(userId=10, username=test_accou (truncated)...]
2026-01-05T09:54:30.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:32.417+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.418+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:54:32.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:54:32.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:54:32.546+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.604+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:54:32.645+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.650+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.656+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:32.659+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:32.656+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:54:32.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afbf5ef] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.661+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:32.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:32.662+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.680+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:54:32.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:54:32.683+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.708+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8aa2ab] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.712+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:54:32.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2004678816 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:54:32.715+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T09:54:32.716+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/companies
2026-01-05T09:54:32.719+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:54:32.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:32.723+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T09:54:32.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:54:32.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:54:32.732+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.734+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:54:32.735+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:54:32.749+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:54:32.740+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:54:32.760+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:54:32.740+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:54:32.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:54:32.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.742+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:32.767+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:32.744+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1016090203 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:54:32.759+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:54:32.762+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.767+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4119ef7d] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:32.773+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.791+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:32.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764c9625] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516e2873] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:54:32.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41625302] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afbf5ef]
2026-01-05T09:54:32.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@817025504 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:32.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1484544511 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:32.812+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:32.813+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1372217730 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:54:32.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:32.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:32.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:32.819+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:54:32.829+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@423251364 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:32.829+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:32.831+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:32.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:54:32.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:32.846+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T09:54:32.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:32.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a8aa2ab]
2026-01-05T09:54:32.850+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:32.856+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:32.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:54:32.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:32.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:32.897+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:32.898+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:32.899+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:32.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-05T09:54:32.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:54:32.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:32.943+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:54:32.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41625302]
2026-01-05T09:54:32.943+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.946+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4119ef7d]
2026-01-05T09:54:32.958+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764c9625]
2026-01-05T09:54:32.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@516e2873]
2026-01-05T09:54:32.961+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2189fa4c] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.963+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:32.963+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:32.967+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4c5c27] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.965+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:32.965+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f24f003] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:32.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@576373245 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:32.977+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:32.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:54:32.970+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@751232403 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:32.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:32.982+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:32.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:32.977+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@727428004 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:32.985+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:32.978+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:54:32.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:32.985+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:54:32.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:54:33.012+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:54:33.012+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:33.012+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 0
2026-01-05T09:54:33.013+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b4c5c27]
2026-01-05T09:54:33.014+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:33.014+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:54:33.013+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f24f003]
2026-01-05T09:54:33.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:33.013+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2189fa4c]
2026-01-05T09:54:33.015+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:33.016+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:33.016+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[], page=1, size=10, totalEle (truncated)...]
2026-01-05T09:54:33.017+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:33.018+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:33.022+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:33.204+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:33.209+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:33.210+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:54:33.210+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:33.211+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:33.215+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:33.217+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:33.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d11a0da] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:33.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@552576682 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:54:33.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:33.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:54:33.229+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:33.229+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d11a0da]
2026-01-05T09:54:33.231+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:33.231+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:33.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:35.051+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:35.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-05T09:54:35.056+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/approvers
2026-01-05T09:54:35.072+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:35.074+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-05T09:54:35.098+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/approvers
2026-01-05T09:54:35.107+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-05T09:54:35.090+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:54:35.112+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:54:35.112+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:54:35.113+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:54:35.111+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-05T09:54:35.114+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:35.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@219a65dc] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:35.116+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/approvers
2026-01-05T09:54:35.116+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-05T09:54:35.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/approvers
2026-01-05T09:54:35.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:35.128+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/approvers
2026-01-05T09:54:35.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/approvers", parameters={}
2026-01-05T09:54:35.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29955357] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:35.130+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getApprovers()
2026-01-05T09:54:35.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:54:35.132+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b1b5e2d] was not registered for synchronization because synchronization is not active
2026-01-05T09:54:35.162+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@823986136 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:54:35.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501306405 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:54:35.174+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-05T09:54:35.174+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:54:35.175+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 2(Long)
2026-01-05T09:54:35.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2037257632 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:54:35.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:54:35.180+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==>  Preparing: SELECT u.user_id, u.username, u.korean_name, u.email, uc.position, uc.role, uc.is_active, u.company_id, uc.approval_status, uc.is_approver AS isApprover FROM user_tb u INNER JOIN user_company_tb uc ON u.user_id = uc.user_id WHERE uc.company_id = ? AND uc.approval_status = 'APPROVED' AND uc.is_approver = 1 AND (uc.is_active IS NULL OR uc.is_active = 1) ORDER BY CASE uc.role WHEN 'USER' THEN 1 WHEN 'ACCOUNTANT' THEN 1 WHEN 'ADMIN' THEN 2 WHEN 'CEO' THEN 3 ELSE 99 END, u.korean_name
2026-01-05T09:54:35.193+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : ==> Parameters: 2(Long)
2026-01-05T09:54:35.194+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-05T09:54:35.215+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@29955357]
2026-01-05T09:54:35.215+09:00  INFO 15320 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 2, count: 3
2026-01-05T09:54:35.216+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:35.216+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=10, username=test_accountant, p (truncated)...]
2026-01-05T09:54:35.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:54:35.230+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:35.230+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@219a65dc]
2026-01-05T09:54:35.240+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:35.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:54:35.243+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:54:35.266+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.findApprovers    : <==      Total: 3
2026-01-05T09:54:35.269+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b1b5e2d]
2026-01-05T09:54:35.271+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 결재자 목록 조회 완료 - companyId: 2, count: 3
2026-01-05T09:54:35.272+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:54:35.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재자 목록 조회 성공, data=[UserDto(userId=10, username=test_accountant, p (truncated)...]
2026-01-05T09:54:35.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:00.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/create
2026-01-05T09:55:01.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/create
2026-01-05T09:55:01.287+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/create
2026-01-05T09:55:01.327+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/create
2026-01-05T09:55:01.340+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/create", parameters={}
2026-01-05T09:55:01.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#createExpense(ExpenseReportDto)
2026-01-05T09:55:01.395+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseReportDto(expenseReportId=null, drafterId=10, reportDate=2026-01-05, title=대시보드테스트, totalAmou (truncated)...]
2026-01-05T09:55:01.428+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 생성 요청 - drafterId: 10, currentUserId: 10, title: 대시보드테스트, totalAmount: 20000
2026-01-05T09:55:01.462+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:01.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.466+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@620498660 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will be managed by Spring
2026-01-05T09:55:01.466+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:55:01.467+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:55:01.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:55:01.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.478+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(ed.amount) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(ed.amount) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-05T09:55:01.480+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 2(Long), 2026(Integer), 1(Integer), 1(Integer), 식대(String)
2026-01-05T09:55:01.489+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-05T09:55:01.490+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.490+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==>  Preparing: SELECT b.*, COALESCE(( SELECT SUM(ed.amount) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) AS used_amount, CASE WHEN b.budget_amount > 0 THEN ROUND((COALESCE(( SELECT SUM(ed.amount) FROM expense_detail_tb ed INNER JOIN expense_report_tb er ON ed.expense_report_id = er.expense_report_id WHERE er.company_id = b.company_id AND YEAR(er.report_date) = b.budget_year AND (b.budget_month IS NULL OR MONTH(er.report_date) = b.budget_month) AND ed.category = b.category AND er.status IN ('APPROVED', 'PAID') ), 0) * 100.0 / b.budget_amount), 2) ELSE 0 END AS usage_rate FROM budget_tb b WHERE b.company_id = ? AND b.budget_year = ? AND (b.budget_month = ? OR (b.budget_month IS NULL AND ? IS NULL)) AND b.category = ?
2026-01-05T09:55:01.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : ==> Parameters: 2(Long), 2026(Integer), null, null, 식대(String)
2026-01-05T09:55:01.496+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.B.findByCompanyAndCategory       : <==      Total: 0
2026-01-05T09:55:01.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.498+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseReport            : ==>  Preparing: INSERT INTO expense_report_tb ( drafter_id, report_date, title, total_amount, status, payment_req_date, is_secret, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-05T09:55:01.498+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseReport            : ==> Parameters: 10(Long), 2026-01-05(LocalDate), 대시보드테스트(String), 20000(Long), WAIT(String), 2026-01-05(LocalDate), false(Boolean), 2(Long)
2026-01-05T09:55:01.505+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseReport            : <==    Updates: 1
2026-01-05T09:55:01.508+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.509+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 상세 항목 저장 시작 - 항목 수: 1
2026-01-05T09:55:01.509+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.509+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseDetail            : ==>  Preparing: INSERT INTO expense_detail_tb ( expense_report_id, category, description, amount, actual_paid_amount, payment_method, note, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-05T09:55:01.510+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseDetail            : ==> Parameters: 21(Long), 식대(String), test(String), 20000(Long), null, null, (String), 2(Long)
2026-01-05T09:55:01.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.insertExpenseDetail            : <==    Updates: 1
2026-01-05T09:55:01.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 상세 항목 저장 완료
2026-01-05T09:55:01.516+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 결재 라인은 setApprovalLines API를 통해 별도로 설정됩니다.
2026-01-05T09:55:01.517+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.518+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:55:01.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:01.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:55:01.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.530+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:01.531+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:01.533+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:55:01.534+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.537+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555] from current transaction
2026-01-05T09:55:01.538+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.A.findActiveByCompanyId          : ==>  Preparing: SELECT * FROM audit_rule_tb WHERE company_id = ? AND is_active = 1 ORDER BY rule_type, rule_name
2026-01-05T09:55:01.539+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.A.findActiveByCompanyId          : ==> Parameters: 2(Long)
2026-01-05T09:55:01.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.A.findActiveByCompanyId          : <==      Total: 0
2026-01-05T09:55:01.545+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.546+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.backend.service.ExpenseService       : 지출결의서 생성 완료 - expenseReportId: 21
2026-01-05T09:55:01.546+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1cf12555]
2026-01-05T09:55:01.563+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 지출결의서 생성 완료 - expenseId: 21
2026-01-05T09:55:01.564+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:01.564+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=기안서 저장 성공, data=21)]
2026-01-05T09:55:01.565+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:01.572+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21/approval-lines
2026-01-05T09:55:01.579+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/21/approval-lines
2026-01-05T09:55:01.580+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21/approval-lines
2026-01-05T09:55:01.581+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/21/approval-lines
2026-01-05T09:55:01.581+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/21/approval-lines", parameters={}
2026-01-05T09:55:01.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#setApprovalLines(Long, ApprovalLineRequest)
2026-01-05T09:55:01.584+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.ApprovalLineRequest(approvalLines=[ApprovalLineDto(approvalLineId=null, expenseRep (truncated)...]
2026-01-05T09:55:01.602+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:01.626+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd568fb]
2026-01-05T09:55:01.629+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@753758909 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will be managed by Spring
2026-01-05T09:55:01.632+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.insertApprovalLine             : ==>  Preparing: INSERT INTO approval_line_tb ( expense_report_id, approver_id, step_order, status, approval_date, signature_data, rejection_reason, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ?, ? )
2026-01-05T09:55:01.634+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.insertApprovalLine             : ==> Parameters: 21(Long), 10(Long), 1(Integer), WAIT(String), null, null, null, 2(Long)
2026-01-05T09:55:01.670+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.insertApprovalLine             : <==    Updates: 1
2026-01-05T09:55:01.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd568fb]
2026-01-05T09:55:01.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.backend.service.ExpenseService       : 결재 라인 저장 완료 - expenseReportId: 21, 라인 수: 1
2026-01-05T09:55:01.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd568fb]
2026-01-05T09:55:01.673+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd568fb]
2026-01-05T09:55:01.673+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2fd568fb]
2026-01-05T09:55:01.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:01.678+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결재 라인 설정 성공, data=null)]
2026-01-05T09:55:01.680+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:03.012+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:03.013+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:55:03.014+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:55:03.045+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:03.047+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:55:03.054+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:55:03.065+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:03.074+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:55:03.063+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:55:03.092+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:55:03.094+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.093+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:55:03.094+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:55:03.094+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5349c9] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.097+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:55:03.095+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:55:03.098+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:55:03.098+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:55:03.098+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:55:03.099+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.107+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:55:03.113+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c90b354] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.114+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.115+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d2fe1c] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1707719857 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:55:03.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:55:03.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1733820757 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:55:03.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071958895 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:03.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:55:03.126+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:55:03.126+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:55:03.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.133+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 1
2026-01-05T09:55:03.134+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:55:03.136+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a5349c9]
2026-01-05T09:55:03.137+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15d2fe1c]
2026-01-05T09:55:03.139+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.139+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@790a4dec] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.139+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.140+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:55:03.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@217251056 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:55:03.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2430d7b2] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c90b354]
2026-01-05T09:55:03.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:03.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@527125206 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:55:03.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:03.144+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.144+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:03.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6d638f] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@373864743 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:03.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:03.153+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@790a4dec]
2026-01-05T09:55:03.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:03.155+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:55:03.159+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.161+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2430d7b2]
2026-01-05T09:55:03.161+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172206ed] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1022119112 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:55:03.164+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d4a1c9] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1006331910 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f6d638f]
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:03.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.166+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.166+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2400a45a] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.168+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1350949454 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:03.168+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T09:55:03.172+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:03.172+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:03.173+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@172206ed]
2026-01-05T09:55:03.173+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.175+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19d4a1c9]
2026-01-05T09:55:03.175+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a85263] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f201080] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.177+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867839861 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:55:03.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1878778426 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:55:03.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:03.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:03.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:55:03.178+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2400a45a]
2026-01-05T09:55:03.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:03.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.182+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e123a1c] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.182+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1871799792 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:03.184+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:55:03.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:03.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:55:03.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:03.193+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f201080]
2026-01-05T09:55:03.194+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34a85263]
2026-01-05T09:55:03.196+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:55:03.197+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.197+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:03.197+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e123a1c]
2026-01-05T09:55:03.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3332a6] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[ExpenseReportDto(expenseReportId=21, drafterId= (truncated)...]
2026-01-05T09:55:03.198+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:03.199+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@18388976 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:55:03.210+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:03.211+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:03.200+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:03.206+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd55739] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:03.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1942506085 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:03.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:03.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:03.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e3332a6]
2026-01-05T09:55:03.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:03.263+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:03.266+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:55:03.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:03.313+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:03.337+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cd55739]
2026-01-05T09:55:03.344+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:03.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:55:03.379+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:08.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21/approve
2026-01-05T09:55:08.170+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/21/approve
2026-01-05T09:55:08.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21/approve
2026-01-05T09:55:08.179+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/21/approve
2026-01-05T09:55:08.183+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/21/approve", parameters={}
2026-01-05T09:55:08.183+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#approveExpense(Long, ApprovalLineDto)
2026-01-05T09:55:08.188+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ApprovalLineDto(approvalLineId=null, expenseReportId=null, approverId=10, stepOrder=null, status=nul (truncated)...]
2026-01-05T09:55:08.223+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 결재 승인 요청 - expenseId: 21, approverId: 10
2026-01-05T09:55:08.240+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:08.241+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.243+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1046581118 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will be managed by Spring
2026-01-05T09:55:08.244+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:08.245+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:08.249+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:08.250+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.250+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7] from current transaction
2026-01-05T09:55:08.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.updateApprovalLine             : ==>  Preparing: UPDATE approval_line_tb SET status = 'APPROVED', signature_data = ?, approval_date = NOW() WHERE expense_report_id = ? AND approver_id = ? AND company_id = ?
2026-01-05T09:55:08.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.updateApprovalLine             : ==> Parameters: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWgAAADICAYAAADFjnuPAAAQAElEQVR4AezdT8hcV/3H8cuPWCotWGyxhaCmoFTcdCWBSmqF6kJEUHRnFEEXLnRhCi5sV6YoiBu7KroyUoItLmoJWCvVhCpZuHApUhMRa10oKkVLNr9fXvfXb3ozeebJPM/cmbl/PiHf5/y5557zPZ9zz/ueOXNn5n+uXLnyv7FokGsg10CugeFdA//T5F8UiAJRIAoMUoEAepDDEqeiQBS4qQIzKBBAz2CQ08UoEAXGqUAAPc5xi9dRIArMQIEAegaDnC7OUYH0eQoKBNBTGMX0IQpEgUkqEEBPcljTqSgQBaagQAA9hVFMHw6qQMpHgVEoEECPYpjiZBSIAnNUIICe46inz1EgCoxCgQB6FMO0XSfTWhSIAsNQIIAexjjEiygQBaLADQoE0DdIkowoEAWiwDAUCKAPOg4pHwWiQBTYkgIB9JaEnlMzf/rTn9ru/upXv2rKfvjDHzbf/OY3WxNnjlXZ9oT8iQJR4DoFAujr5EhiLwVAlIEqA9ovfvGLzUc+8pHW3vve9zbslltuacOK13Gh8s5j4ky+skxc3drZy4fkRYE5KtAzoOco4bT6DJAgykCzC11QZUBq9Vs9/9CHPtR87nOfax577LHWfvCDHzQ///nPmz/84Q+NuHDRHHfMeceOHWtX2uouWGu/20a1lTAKzEmBAHpOo73QVzBmYNiFsTQIv/vd726BC7yAeuXKlYYVbOUxoFWGAS4DbeeLCxfNccecqw51issH5u9///vt6pxf0guuJxkFZqFAAD2LYX6zk8ALwLVatWKVB6AAC5IFYXF5DDjfrKX/mPYBu2D9pS99qZEHziDNTz5L9996aowCTTNEDQLoIY5KDz5ZGTPwLcAV5M6fP9+2AMAFRHEgBsn24A7/ADNfXnjhhXaLxM1hsS8B9Q4HKE1vTYEAemtSb64h8GKLK+OHH364OXfuXNswAAOe1TEoS4Mx+LUFBvgHqPnIX1sgoC1PX+umIz5A1+NSFOhFgQC6Fxm3VwkgWT2CMUh138SzWnasC7WzZ8+2b9gBMbhtz9N+W+I7QLvJCNVOCzchWkjHNqhAqt6JAgH0TmRfrVEAAlwA6sJYXN7ly5fbpyeshmuVWStNQF6tlXGVKlBXP2lEC/vT4+pJvI0CN1cggL65RlsrATZWwYADwvaMhdJAXXACZFsVICVuxTxVIC8Tv7So1XTptqx88qPAGBUIoHc4aoDMABiMmZWgtNUx6AKQ1XEBWRqQd+j2oJqmB304RTc3NPHtWlqLAptRIIDejK5LawVkqz0gBmQGLE7oAtnqGHgASL7jsb0VoA+9rKq90qAtnfcundwoMB4FAugtjBVYdKEMINKAAsBADDBCacDZgluTaoKW3kAU0vbUqVMN3SfVyXRmdgoE0BsccqDwktsqGZSt7gAEhAGZiU8cyBtU+PqqaQvS99xzT/Pss8+2X8wUSF+vUVLjUiCA7nG8wMB2BSB7/K2gbM/Ym3mAzEAZTHpsOlW9oQBdL1y40H4K0Q3SeLxxKEEUGJ0CAfSaQwbKQPDhD3+4/Sa3AoJVMSh7c08I0ms2ldNXVACkraSFxsarmBVPTbEoMCgFAuhDDAcoA7GVMrNSfumll9pnku0jWyULV4HyIZrPKSsoAM5ujIraWjJG4rEoMCYFAugVR6ugbOsClAFa3uJKWXrFKlNswwoYCzdLzVhJGzPxWBQYiwIB9D4jBcAmNSAzccWtzuwj277ISpkiwzVjVStpkLaaHq638SwKXK/AsAF9va9bS3XBDMrSGgdlQLYqE5cXG74CtpqYccxWx/DHKx6+qUAA/aYW7XOzJvCy1TIoe9ncOSXRkShg7KymQdpKeiRux82ZKxBAX70ATFrv9ANzTV6T2UvjrJavCjSB/8YTpHXFqyJhLApsUIFeqp41oLtgrr1JK2RQZl4W96JyKhmEAsaWI8a9xls6FgWGqsAsAW2C1lZGTVST1/4ys9oa6oDFr8MrYFzrpnv69OnDV5Qzo8CWFJgVoLtg7m5lWC0DM0hvSfc0syMFapvDjZntyI3ZNxsBVlNgFoAGZvuOi3vMoAzOVlaryZVSY1fAWNeNuH6bcex9iv/TVWDSgO6CGaANowlab/7VRJUfm48CJ0+ebDt78eLFNsyfKDBUBSYJ6ALziRMn2m80I34XzLUPKT82PwXqxvz888+3j1YOToE4FAXeUGBSgAbmelzOivnVV19tjh492tSKOWB+Y9RnHrhZMzLUexHisSgwNAUmAWgwtr/Mum/8eEPo0qVL7ZcYDU34+LNbBepmDdBu7Lv1Jq1Hgb0VGDWgTS5QBujuJANm35Mh3LvbyR2vAv147tqwinbdXL58uZ9KU0sU6FmBUQLapAJmzzKLlyYmnacyhJWXMAosU+DYsWPtoTNnzrRh/kSBoSkwOkBbLYNzF8xWQh6ZA2bxoYkcf4apQD3N4ZVY93oaprfxao4KjAbQJhAwA3QNFBgDs1VzvTNfx2YaptsHUMA+tGvoAKekaBTYqgKjALQ3/sAZpEsdkytgLjUSrquAVfS6deT8KNC3AoMHtH1mj851O27V7NG5bl7iUeAwCtQrr+7N/zD15JwosAkFBg1oYO6ubLwc9XRGTaqDCpLyUWBRgQcffLDNCqBbGfJnYAoMEtC1pSEsvWpLo9IJo0CfCuRRuz7VTF19KTA4QFvJfPKTn7zuI7i2M1hfnU49USAKRIExKPAmoAfgLTg//PDDzWuvvdZ6c9dddzXeCLR6bjPyJwpEgSgwIwUGBWj7zSBN/+PHjzevvPJKY99ZOhYFokAUmJsCgwE0MNczzqB84cKFuY1F+rsDBVx3mq1PFYrHRqfAZB0eDKCtnktlnwiseMIosEkFCtAWBZtsJ3VHgcMoMBhAd53PY3RdNRLfpAIvv/xyW/3dd9/dhvkTBYakwOAAbSXDhiRSfJmuAkeOHGk7d99997XhFP+kT+NVYHCA/te//jVeNeP56BTI88+jG7JZOTwYQNeq+bbbbpvVAKSzu1PA/jPjQbbVqBAbmgKDAXRNkHrJOTSh4s9EFUi3osCAFRgMoK2gQdqKpvsR7wFrF9dGrkBtb7j22Mi7E/cnqMBgAE3bRx99VND4Brs2kj9RYIMKWAxssPpUHQXWVmBQgLaC9gy0ieOb7IRr9zAVrKHAtE89f/78tDuY3o1egUEBmpoAzWxzPPTQQ41QfiwKbEqBfNfLppRNvesqMDhA6xBA+/Y6X5Zku6P7KUPHY1GgDwXyCq0PFVPHJhUYJKB12KrmmWeeaXxHgu/oYPIHZHHlgAoAYplXRszNlxlfIRNn4kw55twKD9j0DcWrLgfqS/vFY1FgSAoMFtBE8s66lTRYm7BW0yaWY7HtK0B7BpplxmXRjBPzO5LeS/j0pz/diHdNPlOOqUPIxJk4U445v8Jbbrnlhjod75pz+Xkzpbz3cbMyOR4FdqHAoAFNEJCuLQ+TzfdFW0U5FutfAQCmbwFyLyACX5lyi+Z8Vt75GDUIutEy48ncfP2+ZFk3LV6mrPPY0aNHG6Y+9fN3mble+AnmQj4p6zzHhK4vYSwKDFGBjQG6786anL6835aHyQYKfbcxx/qAipZADGRWoOLyHAM1ugCiMWCAyQAUXI3LMnP88ccfb5Qtcy5Tl3rLumnxMmXr3EuXLjVMvdq8cuVK0zV5zHHnqZv/+qJfbvDi8lgdF49FgaEpMBpAE85qx0Q1cQEETLqTTZnYcgWsHun1yCOPNGAFyHWz86EN+tIW2ACOgV8Bj/bMcaYswDmva8s92PyR8oNffNQH/n/0ox9tG6dB9VmG8sJYFBiiAqMCNAFNKBPPpAMIkw2oa6WnTKxpf9MRjNzISiM6iT/11FMNIC9CjKYFYMfYFLR0zTz33HMNWC/2yTU0hT6mD30qMJy6Rgfoks6kK1CbdFaEbM6gLiDTAYwZQFs1041eAPyb3/ym/a1HwJJHP8enbvqpz8LqqxtWxRNGgaEpMFpAl5BADTpWfx6XKjgVlKrcVMOCsu2KArKbFF3Alza1TSFtxejYVPVYpV/0qXLiNKx0wigwJAVGD+gSE3QACKhByMoRrIVTm4D6o19dKNNBv2mwCGTHYv+vAN3E7rzzTkFrIN1G8mcVBVJmiwpMBtClWYH6hRdeaHz5EphZWZ46dardl61yYwz1BWD0R6gPXq7XKlkI0PJjeytQr6zoViVOnz5d0YRRYFAKTA7QpS5Qm4SgZUV5xx13NB6xsqquSVplhx4CMygzYNY3INYve6pWzkPvwxD8oyPjy8c+9jFBa29729vaMH+iwNAUmCygF4UGNKvqkydPNmfOnGk/heYNopqwi+WHkHYjAWXGzwKzbRz9GYKPY/KBnvylHT3F2f333y/oxVJJFOhTgdkAmmgAZ7VpVc1MUvCzqrYyVWYIZk+UT3UDqVcCAfN6o1NjDNDr1ZSzo8B2FJgVoEtSoAY92wO2CayqfTdwwbpWWlV+WyGA3Hvvve2HSEAaSPjHTzeWbfkxxXa8B6FfNBW6OQuZ60EYiwJDU2CWgF4cBPADQatqk9XKFayFm4Y1UACzJzKE73nPexoQmeRqeVH4LaafeOKJ5p577mmMtWbdAIWxKDBkBQLozuhYVYM0OAo3CWtgdgNwIwBmbQGzG4VQuuNaomsoQF+n+7g3XWnP5LGCtngsCgxJgQB6j9EwicEaKMFaqFgB1f6wlXV3kju+ijkPlJm4ttTfbWeVelJmdQXorDSdhZUWpz8TH6O5Bt2AmPgY+xCflysQQC/Xpj1i8lphWVGDqCdBfGKxngQBWpPjZi+ZQUFZkDeR1AsY6hQ2Tdtc/vSsAN3pbQxpLm68qhn5Fd9lyK+uuZ4Y/1kdE2f64Hpi4kzcsV32I233q0AAfQA9TXAGqLYiCq7eYAReE8REMZmqWnH5jovX+XVulUu4GQXormY3WGEXYDUW8g9rxrTM2Jdp1ystY+/9hW5cetGU65ryTD3MMc/xi587d65xzfnqXf1yLfl5OH3QPn/EY+NXIIBeYwxNcCswsLayBm6Tw2TyNIaQyVPWcZNJuEazOXVFBQrGxsgpxgHAxNkq4+CcMucykDSui+aYNplztKFtZvyF2mTAWub6WWaul655qufs2bPtN/M5R53q/vKXv6y59tOy2m8T+TN6BcYC6MELbZKYLCbdj370o+Yvf/lLO1k47lOMJqXj0rHtKACkWqK9sNLi3mMwHkBqK4EBW61awdcqV+gnu5zruPK2uJyrXuNdAAXPioMnqzLKiZc5v4wvy8x1VcbvZaZe5Rx3o+CneGzcCgTQPY+fifzZz362rdWE+eUvf9k8/fTT7acXvUQ1eUz0tkD+bEwBOqscBIXf+MY3GhAWv/3229vvwy4AgzIzdr4nWxnngR6wPvPMM+2KFXyl65iQGWfmvF0a36r96mulE45TgQC6p3GzYjHJC74mtwn9wAMPNFZHVlO2QUxk+4dWZso6rycXUs1VX/Gk/QAAEABJREFUBegJTp57vppsfvazn7Uf6//Od74j2dptt93WhuBqnIDNWNUKWFo+U8aYtScM/I/rrHz1JvbA3Z2Pe2v0NIBeQ7w6FRAAV2iCmOwmdx2v0DETHgDAGkys2pxrxSddZROupgDNaefm2F0R//Of/2wruPXWWxsfUGkTV/98/etfb/785z+3P1hgHIyTMTE2Vw+P/j9I6wRdhLFxKxBArzl+VsHgoBoTHZxXmezKgANIsFpVAzbgBNYUvd5oQm/60ByQhdKARNPjx49fO8lY0PjVV19t8xxXtk1M9I/98eoavSqecJwKBNBrjBs4AKoqgABoxQ9ioGHVYwsEUKRBqPargecg9U2prL7TgsZeZTBxkHWMVnRntT1x69UVMw3kOa68NPOqRTgXq/30Yfc33u2nQAC9nzpLjlmZfOADH2jfdAIBcAWEJcVXzlaXeoAE7LXjJgBMoLRyRSMsqK+gq5+gqs/6Lg7SjnuFQh96F5ClmS47n4nLc644oyd9xWNRYCwKBNAHHCmgsLp9+eWXm6NHj7Z7mVbAB6xm3+JAok5QsaoWBy7QAp2C0L6VDPggDRnw6g8Q01Son9U/kC0NAFlcHj326p7z5QO4upm08uAuPnWzVTb1Ps6pfwH0AUbbhAdJcPGbdpcuXTrA2YcrCtbABNQgwwcgYuKHq3V7Z9GKn8DLZ/qVgbNjr7/+evstc+ALrvrKpPWZBjfzWN3KgDHTnjSjn3CEdmCX6V0n+aRhxROOU4EAesVxAxOmOHAAiPi2DKS0WytJ+4v8AbsujLblz17tgAPg8gcwvYnHP37KszJWpvqiP3S8cOFC+xWr0uC6V9375VXd6gV4ae04Z1XAKzsF++1vf9t2w148PdpE/oxWgQB6haEDG+BR1IQHEvFdGR/sU4ORVRIgAaGwwLQN37RFF+1qn3VhXD6ALs2sZN1gQFmarQuRal896ncT4I+2K098Lvbaa6+1Xb377rvbMH/GrUAAvc/4ARDomPSKAQAT37WBD/CBNOAVqO3lgmT53LefNAFAujBtScvXFr8Y+PINkIXSbizK9GX6qH31GRd6uJlKM3nCuZibVfXV9VDxhONVIIBeMnaAA3ZCRUz2vgGj3j4MEEEQqEHKRAUqAAXPddtQn3pqy0K8dFG3NgG4fOCHtHzHN2Ha10d1a1dblZZnrOSJz8VoUn11TVQ84XgVCKCXjJ2VWV3wAGDCLyk6mGyT0o2kAMkxMC1QW3HKu5npN3MuKNNCvM7TDgDTpbtC3hYQ9UOf+MMH7YKzfHnSdBCfqxmjufZ9Sv0OoPcYze5kByITfo9ig80yOR977LHGPjVQ8R9g9QvYxBedB+Rf//rXjWPKMPEqV3UCct0A1FvHtxWCsH5or+DsBiJfHj/li8/NvNKpPtOh4gnHq0AAvTB23ckOzmyhyGiSJqmVP0gXVDkPvAB84sSJxldpAp70xz/+8RbQyjDnO7cLZfm7MhDmK79A2A3CeBWY5Lsp7cq/XbbrBsvKB+Ne8YTjVSCA7owdcHUn+5jh3OlWGwUv/Xn88cfbZ45N5osXLzbPPvts+4lIhTwB4LssulAeykTvwpl/y+Csn/oyN7t8+fK1Ls9Vg2sCTCgyU0DfOIKABdB1ZEorseqb/WTfVV03oeqr70euuC8W8lWVtHBe5e8ytEq2cr7vvvsacPaEghV/9QOsvUKYM5i6nyAcyk11l9fMVNoOoN8YSRB4I9p+OfsUJjvAAi2YCat/Feoj4P3jH/9oP7IOcmBnNaa88xht1FXnbTPUNhDz67nnnmve8pa3tN/vXP7w33bHNn26WVu04/PNyvV5XJtVXwBdSow/DKCvjqHJ5CX01Wj78h8MxMdsJiy4Crv9AGVbHWDMajLLZ4AnnylHC9qoi9m3VmcBslt33/EunEHYOD300ENtM/ziY/nfZu74T+lEH75Lb8Ml7VU7xpBVOuG4FdgL0OPu0SG8N5nqNICq+BhDELOV0Z20+mHSAi6oCaXlLzPHlaOHc4Rg+P73v799IxGstSOkn3b7grZ6bGmoE4i1LV19+tSnPjWoVznlLx/Fl2m6qXw6Vd3GqOIJx6/A7AFtUtUwWqVVfGwhMOgLWHZ9L9CCLOB2jx0kbuI7/8knn2w81SEOntoFCO2CdZm0fKtItmpb6nOuc7T56KOPtlsa0vpijM6ePbtqdRstx1c3DX3mXzVGF3oLK29TIY35oX76GBfx2DQUmDWgXdw1scBgGxNqE5eNPixCQjv6BBSbmLTqBEv1C6XpBxaMtkDrpsGsthk/y+SXKesxP8f05zOf+UzjK10d15d6ukQb0tu2bp/e8Y53NNUXgC5fANJqnx7ilb/JsNu+MdhkW6Ooe2JOzhrQ3YvbxBrb2IJGPcfc9R0cQGIbfdIWaIKDNgvY2naDcEyZ8o/PZUBcBujPP/98FWuefvrp5qWXXrqW9kggiAM4aOu3NDOOQibO1MeqfuFiWl75Iqy0UB1Mndpk4uqo3zu85tzViH7quz5fTW7lP//4rTEab7NtbcY2r8BsAW21Vhc3sGxe6n5bABHA8Bxzt2agBArA6OZvKw4U2gYLkKYtf7omv2v3339/695b3/rW5u1vf3tT/44cOdJ0v5XNeDF912+wZEAlZOKMNgzMyxbT8oG3rNJCdTB1arN8Wgz1V1/0c/HYptN8qzb4UPGE01FgloB2Yddq7ROf+EQDKGMaUv6DCFCV33fddVf7xhlAV96QQiArA29Gd89c/+53v2vuuOOO5r///W/jkT9+68d//vOf9he47XkX4IEQjL797W9fe+JGvc7Zpvm+ZT7yS1+22ba2XAN14+AHLeXvbzk6NgVmB2gXtZWUgTKxv/vd74qOwvgOzOV/OW2CvvLKK6O60fz4xz++9uafftS2gb4AslB+mbFiQASIX/va19oPrQA2SJaBN1NG2a45v2uLdVd6Wehcfqn/3//+d/sjA8vKbjr/W9/6VttE+dQm8mdyCswO0F24mcQu8LGMKt+7q2a+AxNojKEPbjCPPPJI8653vavxicbyWT/0YZ2+qIMZUwai4N019XfNjYBVXjfePU+8jvFT/eX7LkJbL95A1fZXvvIVQWyiCswK0C7sApzJbLKNYVyBzT5p+c5nvgOLfkgP2bwcd3PRh+9973uNj5Pz14/uVj+EO+4Llxo+sO7KW7w9OJA/rmOu8POrX/2qaGyiCswG0CBXF7axtMISDt343f3hAP6CGRMfovHZzQSUPY4mBOny1QrUivTSpUs73SYof8YUjvEaHpO+Q/N1NoBeBMTQVkV7XRhA14WzFZOX20OEM19pbI/cStlzzNLeTKu+8RuYx3JzLL+HEtK4AO1aGMM1PBTtxurHbABdF7aBAgrh0M3K06TkpwnpG/Z2NSn50DV+MboCMuOvlbNvnavH5V5//fX2aQvbMWPRvdvPIcXd8Mof10LFE05XgVkAGjRqCIGOVXqoYcGu/LPq3JXfQExDgADkWiWDsjQf3Tg8sui55d///vfNH//4x3b7Aph36TvfdmmlHZ26utFOWv4q/qmnytoi2tW1sIqvKdOfArMA9Ni+K9dkBMMaZtsaAFjpPkNtsS6A3RzAg9lDLpjIBwllAQIorIqFvqLUh0fe9773tY+/2cpwTLk+/R1yXXSkD1vUTh7dlCmT7o7zfn3rlqPrfmVzbDoKzA7QDz74YP+j13ONQFhVmozrwBkMgICZ5EChfga8ZYAiz3HllGcAy0CYL1bDVsWMj8o6h49uJExZx+Zg9NV/+tFSnNFur/7TklZ1rBuvvMWw2pBvDNQhHpu+ArMAtNVdDeWxY8cqOsjQxGblnBuKCc8AFAh8TF0cELpmtcvkCZm4c5hz1AOq9RwtQACqic8AlgGwVbCQAbPj4PCTn/yk/bIg9ThXecfVVX5PPSxo0pem3TGrvtPGc8p0o2HpSS9xId2q/LLQuDlGe3WJx+ahwCwAbTIZThc4Ex+qPfXUU9e5BqwAwAARCHxMXVy/uqZvTJ6QgYRJzcAAFMDixRdfbH9FRVq+4wxkmXO7jmgPKE6fPt2cO3fuum0M5btlpxyngxtkgbnb19IafBldfVKVrot6Om8V3Yy7MVde/cLYfBTYAqB3L+Zek2P3Xu3twec///nrDvDdxDTZTXQhwJYBQVk3r+LKO4+pBxTUeV0jSxJAD0hW4uCsmO9nBnV1Sc/BaKD/pYMbZPWblrQ1BqV1HVs3pD9Aq6faEY/NR4FZANqjXobUBS8csj3wwAPXVrYmPdCa+IAIBEKTtWwTfaETIFklCrXJF34A/CbaHFqdVq36XlAG6a6P9asuxse4dI/1Fdd+1UX7iiecjwKzALSvsTSkd955p2DwBr7bBiEoW62BMgMo4CkwD160nhykg20ltghlTbhZgbJfddnkGIGzMdAmOG+yLW3E9lZg17mzALQ32gh9++23C2IdBUCZgbLQm6jADELCTtHJRwHRJzeF3c6Csm2dulm5gXaP9x3Xft0cgFn7fbeR+sahwCwAffLkyXY0rI5c/G1ixn9oAMZevgvBAIxBGYjE5yYPTayaXSPVdzoUlIGy8jcZGgt+aEObxkM8Nk8FZgFoq8Ja9XgKYW5DDTpAbOKDshAIAMjLZ2AWL43mpk/BufpdYKRJ5W0jNE62NrRVPogP1uLYxhWYBaCBB4ioaTKClfgUzSRn+miy27pg0p4HBx2rsoLy3F8+++EAN6y6FuhBH4CsvG2Exsw4acv1ygfx2LwVmAWgDbEJV5AGK5PBKtKxsZpJzfSHAY1+MWk3I8ABZS/VC8q0GGuf+/SbPt0fDjh+/Hj7fHefbaxSlzE0ZsqCc74IiRIxCswG0DoLVlYmJoFJYYV57733NmMANX8ZX/nNTGomj+kXGOtjF8jy9D/2pgK0dEOrHE/4XLhwoZI9hKtXYQyPHDnS/liAm6hxXP3slJyyArMCtIG0ejQJClp///vfm4Kd0KpKuV0bgICulTCQeLqASTvGP68IwFh/mLR+6aPjseUK0LJ79K9//Ws3uZW4cfSegMb8uowxFI9FgVJgdoCujgOZCfHTn/60/b5ikwUQwdCKRshAe9HkA2Xli5epo2uAz9TPtC8sc6zOVZ+2TVoAOXPmTKOcp1C87GV8BmUw9oogMKbowYzedK2zaFnxbYXaN9bas2I2ruKxKNBVYLaAJoKJAXAmqAkiBD3HgJMtwlZavkku/MUvftGIl4Fs18CcmYwMfIVljqmT8Uf7/ADjLogdY3ybgO20C7QuB2hK80pvIwyct6HyNNqYNaC7Q1gTFRzB2h7uoi3mS/tdPeXEmTiwLpp6WeUry5QXMqt6Bhj86fqXeD8KgCOr2uhd8W2EbupuztoyxsZdPBYF9lIggN5LlUPkmWzMqVbliwa6rPKVZcrHtqcAQHZbMybd9CbjXmV5xaQN10HgTInYfgoE0Pups6NjaXZzCnRXz9u8Qdr2Amg9A2evpMRjUai4TVoAAASBSURBVGA/BQLo/dTJsckp0AX0NjpnxW5Lo/a9rdgD520oP402AuhpjGN6saICXUD7CoAVTztwMe1YMdvSELdaB2bvQxy4spwwWwXGB+jZDlU63ocC9c2G6qrvCRfv04DZqlmoXlsa9puF0rEosKoCAfSqSqXcJBQ4f/78tX7ceuut1+J9RGxjdMFcq2Yr5z7qTx3zUyCAnt+Yz7rHPvRTAnRX05V3mNAWhq0MbwSKA7PH97JqPoyakz7nwJ0LoA8sWU4YswLg2af/tjGsmr0ZqN4Cs1A6FgXWUSCAXke9nDs6BewDF6S72x0H6YhVsu2Md77zne2nSNUHyD50JDxIXSkbBfZTIIDeT50cm6QC6zy9Acy+J8V2xt/+9rfmC1/4QuNj+QHz+pdKarhRgQD6Rk2SM3EFau/ZtgRbpbtWzYv7zFbMTz75ZPs1oavUkTJR4KAKBNAHVSzlR6+A1a5tCR2xEgZf8b3MMWVqn9l5nmX2BuBe5ZMXBfpUIIDuU83UNRoFCtIADL4nTpxoTp061f54g20Mb/5ZMTsmrWPOAWafBpTeqqWxWSoQQM9y2NNpkAVcK2JqXLx4sXniiSfaH2+wYgbo2v5Q1naG8srGosC2FAigt6V02hmcAsBrReyDJB/84Acbv0kI2GWADMy2NAbnfByahQIB9CyGeeqdXK9/Hr178cUXmwsXLjSAXQbQ69Wcs6PAegoE0Ovpl7OjQBSIAhtTIIDemLSpOApEgSiwngIB9Hr6jeHs+BgFosBIFQigRzpwcTsKRIHpKxBAT3+M08MoEAVGqsDsAT3ScYvbUSAKzECBAHoGg5wuRoEoME4FAuhxjlu8jgJRYAYK7A/oGQiQLkaBKBAFhqpAAD3UkYlfUSAKzF6BAHr2l0AEiAKTVGASnQqgJzGM6UQUiAJTVCCAnuKopk9RIApMQoEAehLDmE5EgYMpkNLjUCCAHsc4xcsoEAVmqEAAPcNBT5ejQBQYhwIB9DjGKV5uU4G0FQUGokAAPZCBiBtRIApEgUUFAuhFRZKOAlEgCgxEgQB6IAMxHjfiaRSIAttSIIDeltJpJwpEgShwQAUC6AMKluJRIApEgW0pEED3q3RqiwJRIAr0pkAA3ZuUqSgKRIEo0K8CAXS/eqa2KBAFokBvCmwV0L15nYqiQBSIAjNQIICewSCni1EgCoxTgQB6nOMWr6NAFNiqArtpLIDeje5pNQpEgShwUwUC6JtKlAJRIApEgd0oEEDvRve0GgWmpED6siEFAugNCZtqo0AUiALrKhBAr6tgzo8CUSAKbEiBAHpDwqbaKFAKJIwCh1UggD6scjkvCkSBKLBhBQLoDQuc6qNAFIgCh1UggD6scjmvHwVSSxSIAksVCKCXSpMDUSAKRIHdKhBA71b/tB4FokAUWKpAAL1UmiEciA9RIArMWYEAes6jn75HgSgwaAUC6EEPT5yLAlFgzgqMGdBzHrf0PQpEgRkoEEDPYJDTxSgQBcapQAA9znGL11EgCoxZgRV9D6BXFCrFokAUiALbVuD/AAAA//+A/RdfAAAABklEQVQDAFhYuVCEGHcuAAAAAElFTkSuQmCC(String), 21(Long), 10(Long), 2(Long)
2026-01-05T09:55:08.287+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.updateApprovalLine             : <==    Updates: 1
2026-01-05T09:55:08.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7] from current transaction
2026-01-05T09:55:08.289+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:08.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:08.294+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:08.296+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.297+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7] from current transaction
2026-01-05T09:55:08.298+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.updateExpenseReportStatus      : ==>  Preparing: UPDATE expense_report_tb SET status = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:08.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.updateExpenseReportStatus      : ==> Parameters: APPROVED(String), 21(Long), 2(Long)
2026-01-05T09:55:08.308+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.updateExpenseReportStatus      : <==    Updates: 1
2026-01-05T09:55:08.312+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.314+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.314+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.315+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@52842ed7]
2026-01-05T09:55:08.328+09:00  INFO 15320 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 결재 승인 완료 - expenseId: 21
2026-01-05T09:55:08.328+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:08.329+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=결제 승인 완료, data=null)]
2026-01-05T09:55:08.330+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:11.231+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:55:11.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:55:11.233+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.235+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:55:11.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:55:11.393+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.395+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:55:11.396+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:55:11.398+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.399+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2c3c58] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:55:11.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/companies
2026-01-05T09:55:11.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:55:11.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329726794 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:55:11.488+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:55:11.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:55:11.484+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:55:11.500+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:55:11.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:55:11.486+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:55:11.488+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:55:11.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:55:11.523+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:55:11.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:55:11.528+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:55:11.528+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:55:11.517+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:55:11.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:55:11.530+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:55:11.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6637b] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:55:11.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:55:11.531+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.544+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@acb3506] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.533+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d03fb8] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.543+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.550+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b8e7fd] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.692+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1746163025 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:55:11.692+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:55:11.693+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1963992516 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:11.693+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@493910406 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:55:11.693+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@530359731 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:55:11.697+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:55:11.699+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b2c3c58]
2026-01-05T09:55:11.700+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:55:11.703+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:55:11.703+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:55:11.705+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.705+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:11.706+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:55:11.708+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.709+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T09:55:11.716+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:55:11.750+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:11.755+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:55:11.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57b8e7fd]
2026-01-05T09:55:11.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4822bf03] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@339179340 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:55:11.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-05T09:55:11.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:55:11.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:55:11.787+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:11.789+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5e6637b]
2026-01-05T09:55:11.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@acb3506]
2026-01-05T09:55:11.793+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@42d03fb8]
2026-01-05T09:55:11.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:11.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:11.806+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:55:11.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523fdd43] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@329878973 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:11.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:55:11.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:11.809+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:11.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:11.832+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:55:11.866+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4822bf03]
2026-01-05T09:55:11.888+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.891+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f605bfd] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.892+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1919366069 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:55:11.892+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:11.882+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:55:11.893+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:55:11.893+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.898+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@523fdd43]
2026-01-05T09:55:11.912+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:55:11.912+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.914+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.916+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:55:11.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:55:11.930+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71238cf4] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.934+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:55:11.940+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:55:11.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1566216790 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:11.943+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:55:11.944+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:55:11.945+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:11.947+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:55:11.955+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:55:11.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.961+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:11.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6195e7] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.970+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4cd65] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2f605bfd]
2026-01-05T09:55:11.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:11.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@71238cf4]
2026-01-05T09:55:11.981+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.981+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cc2138] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:11.982+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@971330425 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:11.982+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:55:11.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@510602558 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:55:11.988+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:55:11.979+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@386105289 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:55:11.979+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:11.988+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.991+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:11.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:55:11.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bf2eb6a] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.026+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@920708186 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:55:12.027+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:55:12.000+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:55:12.028+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:12.033+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:55:12.034+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:55:12.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1a6195e7]
2026-01-05T09:55:12.043+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54cc2138]
2026-01-05T09:55:12.044+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:12.044+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:12.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:55:12.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:55:12.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a272728] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2fb810] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c4cd65]
2026-01-05T09:55:12.046+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bf2eb6a]
2026-01-05T09:55:12.048+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1828670246 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:55:12.048+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@241142700 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:55:12.049+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:12.050+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:12.052+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:55:12.053+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:12.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:55:12.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd9c317] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.056+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:12.057+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:12.057+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:12.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@33341565 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:55:12.065+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:12.065+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:12.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:12.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:12.117+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:55:12.120+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b2fb810]
2026-01-05T09:55:12.121+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@dd9c317]
2026-01-05T09:55:12.121+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a272728]
2026-01-05T09:55:12.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:12.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:12.126+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:12.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:55:12.127+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:55:12.128+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5477c691] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.132+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:12.137+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:55:12.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@388670800 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:55:12.181+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:55:12.197+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:12.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:55:12.317+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5477c691]
2026-01-05T09:55:12.321+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:12.322+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9153dc] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.322+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@347619793 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:55:12.328+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:55:12.329+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:55:12.358+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:55:12.359+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e9153dc]
2026-01-05T09:55:12.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:55:12.361+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e51b3e] was not registered for synchronization because synchronization is not active
2026-01-05T09:55:12.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1889449933 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:55:12.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:55:12.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:55:12.381+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:55:12.382+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e51b3e]
2026-01-05T09:55:12.383+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:55:12.384+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:55:12.386+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:03.350+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21/status
2026-01-05T09:57:03.361+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing PUT /api/expenses/21/status
2026-01-05T09:57:03.364+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21/status
2026-01-05T09:57:03.372+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured PUT /api/expenses/21/status
2026-01-05T09:57:03.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : PUT "/api/expenses/21/status", parameters={}
2026-01-05T09:57:03.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#updateExpenseStatus(Long, StatusUpdateRequest)
2026-01-05T09:57:03.388+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [ExpenseController.StatusUpdateRequest(status=PAID, actualPaidAmount=10000, amountDifferenceReason=현장 (truncated)...]
2026-01-05T09:57:03.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.updateExpenseStatus(java.lang.Long,com.innersignature.backend.controller.ExpenseController$StatusUpdateRequest); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:03.405+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.updateExpenseStatus(java.lang.Long,com.innersignature.backend.controller.ExpenseController$StatusUpdateRequest); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:03.408+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 상태 변경 요청 - expenseId: 21, userId: 10, status: PAID, actualPaidAmount: 10000
2026-01-05T09:57:03.428+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:03.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720930207 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will be managed by Spring
2026-01-05T09:57:03.430+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:57:03.430+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:03.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:57:03.435+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e] from current transaction
2026-01-05T09:57:03.437+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T09:57:03.439+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T09:57:03.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T09:57:03.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.445+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e] from current transaction
2026-01-05T09:57:03.448+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:57:03.451+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:03.456+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:57:03.456+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e] from current transaction
2026-01-05T09:57:03.457+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .m.E.updateExpenseDetailActualPaidAmount : ==>  Preparing: UPDATE expense_detail_tb SET actual_paid_amount = ? WHERE expense_detail_id = ? AND company_id = ?
2026-01-05T09:57:03.458+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .m.E.updateExpenseDetailActualPaidAmount : ==> Parameters: 10000(Long), 29(Long), 2(Long)
2026-01-05T09:57:03.462+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .m.E.updateExpenseDetailActualPaidAmount : <==    Updates: 1
2026-01-05T09:57:03.465+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.472+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e] from current transaction
2026-01-05T09:57:03.475+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] i.b.m.E.updateExpenseDetailPaymentMethod : ==>  Preparing: UPDATE expense_detail_tb SET payment_method = ? WHERE expense_detail_id = ? AND company_id = ?
2026-01-05T09:57:03.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] i.b.m.E.updateExpenseDetailPaymentMethod : ==> Parameters: CARD(String), 29(Long), 2(Long)
2026-01-05T09:57:03.488+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] i.b.m.E.updateExpenseDetailPaymentMethod : <==    Updates: 1
2026-01-05T09:57:03.491+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.494+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e] from current transaction
2026-01-05T09:57:03.505+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.E.updateExpenseReportStatusWithPayment : ==>  Preparing: UPDATE expense_report_tb SET status = ?, actual_paid_amount = ?, amount_difference_reason = ? WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:57:03.506+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.E.updateExpenseReportStatusWithPayment : ==> Parameters: PAID(String), 10000(Long), 현장할인(String), 21(Long), 2(Long)
2026-01-05T09:57:03.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.E.updateExpenseReportStatusWithPayment : <==    Updates: 1
2026-01-05T09:57:03.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3cab298e]
2026-01-05T09:57:03.531+09:00  INFO 15320 --- [http-nio-8080-exec-1] c.i.b.controller.ExpenseController       : 지출결의서 상태 변경 완료 - expenseId: 21, status: PAID
2026-01-05T09:57:03.536+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:03.537+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태 변경 완료, data=null)]
2026-01-05T09:57:03.538+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:06.634+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:57:06.642+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T09:57:06.643+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.644+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:57:06.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:57:06.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T09:57:06.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.689+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:57:06.713+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:57:06.720+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:57:06.721+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/companies
2026-01-05T09:57:06.722+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:57:06.723+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:57:06.724+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.724+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:57:06.726+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T09:57:06.726+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.726+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:57:06.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:57:06.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:57:06.727+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T09:57:06.728+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:57:06.728+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:57:06.728+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:57:06.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:57:06.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T09:57:06.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:57:06.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:57:06.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.738+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4525ec89] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.733+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.740+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ceac93] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.736+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.745+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57539f10] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.738+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.757+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afa9fe7] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.738+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.758+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc9033f] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.760+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2065624943 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:06.760+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1501425796 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:57:06.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@352787432 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:57:06.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1650990798 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:57:06.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143391517 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:06.762+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:57:06.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:57:06.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:57:06.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T09:57:06.767+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:57:06.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:06.774+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:57:06.776+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:57:06.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T09:57:06.778+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:06.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:57:06.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:57:06.794+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:57:06.795+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4525ec89]
2026-01-05T09:57:06.796+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3afa9fe7]
2026-01-05T09:57:06.797+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@66ceac93]
2026-01-05T09:57:06.797+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:57:06.798+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-05T09:57:06.804+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:06.806+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:06.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fc9033f]
2026-01-05T09:57:06.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57539f10]
2026-01-05T09:57:06.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:57:06.809+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:57:06.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409b5334] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:06.814+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:06.821+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:06.824+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@685095440 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:06.825+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d78cb0f] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.825+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T09:57:06.842+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:57:06.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042504201 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:06.844+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:06.845+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:06.845+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:57:06.853+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:06.897+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:57:06.918+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:57:06.918+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:57:06.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d78cb0f]
2026-01-05T09:57:06.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409b5334]
2026-01-05T09:57:06.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487f46c3] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.940+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61642b7d] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@866442352 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:06.942+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2071774870 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:06.942+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:57:06.943+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:57:06.944+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:06.944+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:06.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:57:06.986+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:57:06.988+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:06.987+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:57:06.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:57:06.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:57:06.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:57:06.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:06.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:57:06.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbe2bb6] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:06.993+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:57:06.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:57:06.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:57:07.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1254658547 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:57:07.054+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.057+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@487f46c3]
2026-01-05T09:57:07.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61642b7d]
2026-01-05T09:57:07.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:57:07.059+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf6d266] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.060+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.060+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.060+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:57:07.062+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@884915294 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:07.062+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1686f67d] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.063+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38696723] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.064+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:57:07.077+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@612234032 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:57:07.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2023132304 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:07.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:57:07.080+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:07.085+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:57:07.086+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:07.089+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:07.090+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:57:07.104+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6dbe2bb6]
2026-01-05T09:57:07.105+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:07.105+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:57:07.106+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:07.107+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:57:07.110+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cf6d266]
2026-01-05T09:57:07.137+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.138+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f397a8] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.140+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:57:07.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:57:07.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1565266130 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:07.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38696723]
2026-01-05T09:57:07.144+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1686f67d]
2026-01-05T09:57:07.151+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.157+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8a026a] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@505298680 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:57:07.147+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:57:07.150+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.160+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:57:07.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:07.164+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c908577] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.173+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:57:07.174+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@255043001 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:07.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:57:07.196+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:57:07.205+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:57:07.206+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:57:07.208+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f8a026a]
2026-01-05T09:57:07.209+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f397a8]
2026-01-05T09:57:07.210+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:07.211+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.212+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:57:07.213+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539916aa] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.215+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:07.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1212978598 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:07.227+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:57:07.228+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:07.233+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:57:07.262+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c908577]
2026-01-05T09:57:07.372+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:07.380+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:57:07.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:57:07.423+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@539916aa]
2026-01-05T09:57:07.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:07.430+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a59160] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.447+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2056452024 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:07.482+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:57:07.497+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:57:07.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:57:07.513+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@61a59160]
2026-01-05T09:57:07.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:07.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7df804e1] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:07.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@815510703 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:07.521+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:57:07.521+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:57:07.526+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:57:07.526+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7df804e1]
2026-01-05T09:57:07.527+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:07.528+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:57:07.529+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.031+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:12.035+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:57:12.044+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.049+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.057+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.108+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:57:12.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:57:12.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:57:12.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.257+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:57:12.271+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:57:12.324+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:12.327+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:57:12.328+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.333+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.336+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.344+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:57:12.374+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:57:12.344+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T09:57:12.345+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.347+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:57:12.370+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.372+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:57:12.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:57:12.380+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:57:12.381+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:57:12.389+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:57:12.378+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T09:57:12.379+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.379+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.396+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:57:12.380+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:57:12.392+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.407+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41323f46] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.393+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:57:12.394+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:57:12.395+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:57:12.411+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:57:12.398+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:57:12.403+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.421+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b340f39] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:57:12.412+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.421+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.425+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.425+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:57:12.426+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.435+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.441+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.458+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457494249 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:57:12.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:57:12.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1705531919 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:12.464+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5dc76d] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.473+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.490+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.474+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2330e7d4] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.476+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfe2005] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.481+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:57:12.489+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:57:12.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47fa9b9d] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.498+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T09:57:12.512+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360145915 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:57:12.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:57:12.530+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T09:57:12.538+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:57:12.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:57:12.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@176544385 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:57:12.603+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:57:12.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@14332197 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:12.605+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:57:12.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1374326977 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:57:12.739+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:57:12.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@41323f46]
2026-01-05T09:57:12.547+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b340f39]
2026-01-05T09:57:12.605+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T09:57:12.744+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:12.607+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:57:12.731+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T09:57:12.743+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T09:57:12.744+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:12.745+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:57:12.745+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b5dc76d]
2026-01-05T09:57:12.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:12.751+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T09:57:12.763+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.777+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T09:57:12.797+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.834+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:57:12.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T09:57:12.835+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T09:57:12.836+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.869+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47fa9b9d]
2026-01-05T09:57:12.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bfe2005]
2026-01-05T09:57:12.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2330e7d4]
2026-01-05T09:57:12.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:12.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:12.877+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T09:57:12.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:12.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:12.877+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:57:12.879+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.880+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:57:12.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T09:57:12.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.884+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T09:57:12.885+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:57:12.934+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.923+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:57:12.925+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:57:12.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:57:12.944+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.926+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:12.929+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:57:12.934+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:57:12.956+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:57:12.947+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.958+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc7ec02] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.955+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T09:57:12.956+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2056869483 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:57:12.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:57:12.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:57:12.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:57:12.963+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.976+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78884702] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.964+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:12.978+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:12.978+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764afd85] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:12.979+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260920993 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:12.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:57:12.964+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:57:12.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T09:57:12.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:57:12.978+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@437509771 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:57:12.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:57:12.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T09:57:12.981+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T09:57:12.992+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:57:13.006+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:57:13.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:57:13.010+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:57:13.077+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:57:13.077+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T09:57:13.112+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7cc7ec02]
2026-01-05T09:57:13.079+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T09:57:13.090+09:00  WARN 15320 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:57:13.102+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T09:57:13.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:57:13.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:57:13.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:57:13.109+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T09:57:13.110+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78884702]
2026-01-05T09:57:13.128+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.122+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T09:57:13.122+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@764afd85]
2026-01-05T09:57:13.123+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.126+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:57:13.128+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:57:13.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:57:13.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T09:57:13.131+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:13.154+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:57:13.139+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.140+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:57:13.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:57:13.191+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:57:13.145+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:57:13.154+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:13.163+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T09:57:13.176+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T09:57:13.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:57:13.278+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:57:13.192+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:57:13.293+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:57:13.296+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:57:13.303+09:00  WARN 15320 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:57:13.258+09:00  WARN 15320 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:57:13.274+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:57:13.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:57:13.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:13.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:13.304+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.425+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.442+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:57:13.443+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:57:13.445+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:57:13.446+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:57:13.452+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:57:13.453+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:57:13.453+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:57:13.454+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:57:13.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:57:13.535+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:57:13.536+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:57:13.538+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:57:13.541+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:57:13.545+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:57:13.576+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:57:13.579+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:13.642+09:00  WARN 15320 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:57:13.752+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:57:13.752+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:57:13.799+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:57:13.752+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:57:13.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T09:57:13.779+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:13.803+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:57:13.804+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:57:13.805+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:57:13.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.811+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.784+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:57:13.785+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:57:13.801+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:57:13.803+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T09:57:13.819+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:57:13.820+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:57:13.803+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:57:13.816+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:13.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:57:13.864+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:57:13.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:57:13.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:57:13.872+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:57:13.822+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:57:13.856+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:57:13.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:57:13.863+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dd3e886] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:13.872+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:57:13.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:57:13.910+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:57:13.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.905+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:57:13.910+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.913+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:13.911+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:57:13.920+09:00  WARN 15320 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:57:13.912+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.921+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:13.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47dfd90a] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:13.913+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.919+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad7ea20] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:13.921+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1559456961 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:57:13.924+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:57:13.925+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:57:13.926+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:57:13.927+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:57:13.929+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e3f579] was not registered for synchronization because synchronization is not active
2026-01-05T09:57:13.928+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:57:13.929+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T09:57:13.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:57:13.952+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@499353488 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:57:13.952+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1544104246 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:57:13.953+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@63765868 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:57:13.955+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:57:13.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:57:13.958+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:57:13.959+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T09:57:13.960+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T09:57:13.968+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T09:57:13.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:57:13.980+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2dd3e886]
2026-01-05T09:57:13.981+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.985+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T09:57:13.986+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:13.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:57:13.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T09:57:13.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T09:57:13.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@47dfd90a]
2026-01-05T09:57:13.994+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36e3f579]
2026-01-05T09:57:13.995+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ad7ea20]
2026-01-05T09:57:13.995+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.996+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:57:13.997+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T09:57:13.997+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T09:57:13.998+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T09:57:14.002+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:14.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:57:14.004+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:22.105+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:22.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/missing-receipts/list?days=3
2026-01-05T09:59:22.148+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/missing-receipts/list?days=3
2026-01-05T09:59:22.714+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:22.865+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/missing-receipts/list?days=3
2026-01-05T09:59:22.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:22.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/missing-receipts/list?days=3
2026-01-05T09:59:22.940+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/missing-receipts/list
2026-01-05T09:59:23.006+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:23.059+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:23.053+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/missing-receipts/list
2026-01-05T09:59:23.058+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/missing-receipts/list?days=3
2026-01-05T09:59:23.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:23.066+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/missing-receipts/list?days=3
2026-01-05T09:59:23.067+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/missing-receipts/list?days=3", parameters={masked}
2026-01-05T09:59:23.067+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:23.073+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/missing-receipts/list?days=3", parameters={masked}
2026-01-05T09:59:23.075+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.MissingReceiptController#getMissingReceipts(int)
2026-01-05T09:59:23.076+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f971f47] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:23.077+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.MissingReceiptController#getMissingReceipts(int)
2026-01-05T09:59:23.080+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.MissingReceiptController.getMissingReceipts(int); target is of class [com.innersignature.backend.controller.MissingReceiptController]
2026-01-05T09:59:23.181+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.MissingReceiptController.getMissingReceipts(int); target is of class [com.innersignature.backend.controller.MissingReceiptController]
2026-01-05T09:59:23.183+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.MissingReceiptController.getMissingReceipts(int); target is of class [com.innersignature.backend.controller.MissingReceiptController]
2026-01-05T09:59:23.185+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.MissingReceiptController.getMissingReceipts(int); target is of class [com.innersignature.backend.controller.MissingReceiptController]
2026-01-05T09:59:23.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:23.188+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12ada92a] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:23.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:23.189+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fa638b] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:23.191+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@449957340 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:23.193+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:23.202+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@10194034 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:23.205+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:23.206+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMissingReceipts          : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN receipt_tb rec ON r.expense_report_id = rec.expense_report_id WHERE r.company_id = ? AND r.report_date <= ? AND r.status IN ('WAIT', 'APPROVED') AND rec.receipt_id IS NULL ORDER BY r.report_date ASC, r.expense_report_id ASC
2026-01-05T09:59:23.208+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMissingReceipts          : ==> Parameters: 2(Long), 2026-01-02(LocalDate)
2026-01-05T09:59:23.212+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@747893394 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:59:23.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMissingReceipts          : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id LEFT JOIN receipt_tb rec ON r.expense_report_id = rec.expense_report_id WHERE r.company_id = ? AND r.report_date <= ? AND r.status IN ('WAIT', 'APPROVED') AND rec.receipt_id IS NULL ORDER BY r.report_date ASC, r.expense_report_id ASC
2026-01-05T09:59:23.228+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMissingReceipts          : ==> Parameters: 2(Long), 2026-01-02(LocalDate)
2026-01-05T09:59:23.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectMissingReceipts          : <==      Total: 0
2026-01-05T09:59:23.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:23.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12ada92a]
2026-01-05T09:59:23.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4f971f47]
2026-01-05T09:59:23.252+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:23.257+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:23.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:59:23.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:23.261+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:23.269+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:23.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMissingReceipts          : <==      Total: 0
2026-01-05T09:59:23.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@12fa638b]
2026-01-05T09:59:23.381+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:23.400+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T09:59:23.405+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:27.427+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.432+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:59:27.433+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T09:59:27.436+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.567+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.592+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:27.620+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.640+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.644+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:59:27.644+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.650+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:27.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:27.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.655+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:27.657+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T09:59:27.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:27.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:27.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:27.676+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:27.665+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:27.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:27.668+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:59:27.681+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cfcb88b] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:27.686+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T09:59:27.792+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:27.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T09:59:27.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T09:59:27.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:59:27.868+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:59:27.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:27.860+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T09:59:27.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T09:59:27.867+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:27.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7410baaa] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:27.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:27.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73db28e3] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:27.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:27.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a0364e] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@354854536 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:59:28.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1329334325 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:28.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2127695275 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:59:28.125+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17bac31e] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1048353852 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:28.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:28.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:28.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:28.299+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:59:28.305+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1406054267 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.301+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:28.302+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:28.303+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:28.305+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:59:28.305+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:59:28.314+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:59:28.356+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T09:59:28.358+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:28.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7410baaa]
2026-01-05T09:59:28.359+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:28.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T09:59:28.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:28.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73db28e3]
2026-01-05T09:59:28.409+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@21a0364e]
2026-01-05T09:59:28.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:28.410+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:28.413+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cfcb88b]
2026-01-05T09:59:28.414+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17bac31e]
2026-01-05T09:59:28.415+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.416+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:28.416+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:28.417+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:28.424+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:28.418+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.419+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4129ec31] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.421+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:28.424+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:28.424+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7474165f] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.431+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@697614131 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.433+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:28.434+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:28.425+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199770033 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:28.429+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:28.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:28.511+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:28.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:28.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7474165f]
2026-01-05T09:59:28.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697e1ac] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1376111055 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.739+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:28.755+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4129ec31]
2026-01-05T09:59:28.746+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:59:28.757+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.757+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T09:59:28.758+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d289ac7] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.764+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1676589879 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:28.774+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:59:28.775+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T09:59:28.790+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T09:59:28.804+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697e1ac]
2026-01-05T09:59:28.804+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.805+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T09:59:28.806+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a97455a] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d289ac7]
2026-01-05T09:59:28.807+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1404326693 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.809+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:59:28.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d7c49] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.810+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:59:28.814+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798634213 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:28.815+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T09:59:28.821+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T09:59:28.834+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T09:59:28.837+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a97455a]
2026-01-05T09:59:28.838+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.838+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d1df17] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.839+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@96267618 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.840+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:28.840+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:28.841+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T09:59:28.844+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64d7c49]
2026-01-05T09:59:28.845+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:28.872+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@55d1df17]
2026-01-05T09:59:28.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464874e1] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@490349144 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.877+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:59:28.883+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1881e82c] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.884+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T09:59:28.884+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1975742529 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:28.887+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:28.887+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:28.891+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T09:59:28.903+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@464874e1]
2026-01-05T09:59:28.903+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.905+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e42cbe9] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.911+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@187193788 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:28.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:28.942+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1881e82c]
2026-01-05T09:59:28.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:28.949+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:28.950+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:28.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af3c953] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:28.984+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099547305 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:28.990+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T09:59:28.991+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T09:59:29.003+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:29.005+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e42cbe9]
2026-01-05T09:59:29.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:29.016+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:59:29.025+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T09:59:29.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:29.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6af3c953]
2026-01-05T09:59:29.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:29.057+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bfb1b0a] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:29.057+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1874260087 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:29.186+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:29.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:29.320+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:29.350+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1bfb1b0a]
2026-01-05T09:59:29.351+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:29.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T09:59:29.355+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:30.789+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:30.790+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:59:30.790+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T09:59:30.800+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:30.803+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:59:30.805+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:30.818+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:30.808+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T09:59:30.817+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:59:30.820+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:59:30.821+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:59:30.819+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:30.824+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:30.820+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T09:59:30.823+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:59:30.825+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.826+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T09:59:30.827+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.836+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb7b721] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.840+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T09:59:30.840+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17bdd084] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.843+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T09:59:30.852+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.852+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1422863048 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:30.854+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a538a7d] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.855+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@997232467 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:30.856+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:59:30.855+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:30.857+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.858+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@578580480 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:30.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T09:59:30.858+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:30.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.861+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:59:30.868+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17bdd084]
2026-01-05T09:59:30.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:30.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T09:59:30.870+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7eb7b721]
2026-01-05T09:59:30.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6a538a7d]
2026-01-05T09:59:30.871+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23124ab9] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.872+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:30.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1288963656 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:30.873+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:30.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72796dae] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.874+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:59:30.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:30.886+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@172884221 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:30.892+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T09:59:30.888+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.907+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:59:30.908+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T09:59:30.919+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23124ab9]
2026-01-05T09:59:30.919+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72796dae]
2026-01-05T09:59:30.921+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37796d15] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.921+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@248803913 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:30.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db92a5d] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.923+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:59:30.923+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@206563537 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:30.924+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.925+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T09:59:30.927+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:59:30.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T09:59:30.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37796d15]
2026-01-05T09:59:30.938+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3db92a5d]
2026-01-05T09:59:30.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.939+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:30.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ad6c73] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.941+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b4b826a] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:30.942+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1606466774 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:30.960+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1867819164 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:30.960+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:59:30.967+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T09:59:30.977+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:30.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T09:59:31.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:59:31.009+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T09:59:31.019+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23ad6c73]
2026-01-05T09:59:31.020+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1b4b826a]
2026-01-05T09:59:31.022+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:31.025+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:31.027+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3812447c] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:31.032+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566bb9ed] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:31.033+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1888774649 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:31.033+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@292829592 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:31.034+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:31.034+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T09:59:31.035+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:31.035+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T09:59:31.038+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:31.038+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3812447c]
2026-01-05T09:59:31.038+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T09:59:31.039+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:31.040+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@566bb9ed]
2026-01-05T09:59:31.041+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:59:31.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:31.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T09:59:31.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:31.045+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.042+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:36.047+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:59:36.054+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:59:36.105+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:59:36.122+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.122+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.124+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.120+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:59:36.126+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:59:36.129+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T09:59:36.157+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:36.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.158+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:59:36.165+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.171+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.172+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:59:36.204+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.206+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:36.206+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T09:59:36.214+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.214+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.217+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T09:59:36.217+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:36.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:59:36.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.218+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:59:36.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:59:36.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:36.220+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:36.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:59:36.221+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:59:36.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:59:36.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:59:36.221+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:59:36.220+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:59:36.221+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:59:36.221+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783a3e17] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.221+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:59:36.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.221+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:59:36.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:59:36.223+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.224+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e58b35a] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.232+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:59:36.225+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.226+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.236+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.236+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5e73fe] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.234+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.235+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.237+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310cc424] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.235+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:59:36.238+09:00  WARN 15320 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:59:36.237+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6351a12] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.238+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.239+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:59:36.241+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:59:36.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:59:36.245+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@720196215 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:36.248+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:59:36.245+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@179040524 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:36.249+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T09:59:36.251+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:59:36.253+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T09:59:36.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@193347113 wrapping com.mysql.cj.jdbc.ConnectionImpl@61d73eaf] will not be managed by Spring
2026-01-05T09:59:36.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:59:36.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1672950549 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:36.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T09:59:36.254+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2141647057 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:59:36.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:59:36.255+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:36.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T09:59:36.256+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:36.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T09:59:36.259+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T09:59:36.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:59:36.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:59:36.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5c5e73fe]
2026-01-05T09:59:36.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:59:36.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6351a12]
2026-01-05T09:59:36.260+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@310cc424]
2026-01-05T09:59:36.261+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:36.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.267+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T09:59:36.269+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4e58b35a]
2026-01-05T09:59:36.269+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.271+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T09:59:36.273+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.270+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.275+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T09:59:36.270+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@783a3e17]
2026-01-05T09:59:36.276+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.270+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T09:59:36.279+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.270+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:59:36.271+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T09:59:36.277+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.286+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:36.285+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:59:36.286+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.286+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.287+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:59:36.287+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:59:36.288+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:59:36.290+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:59:36.291+09:00  WARN 15320 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:59:36.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.291+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:59:36.292+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:59:36.292+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:59:36.306+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:59:36.309+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T09:59:36.318+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:59:36.321+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:59:36.322+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:59:36.323+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.335+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.337+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.338+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58fb5557] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@22348711 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:59:36.339+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:59:36.341+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T09:59:36.346+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.352+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.352+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.352+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:36.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:59:36.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:59:36.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.354+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.354+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.356+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:59:36.355+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:59:36.357+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T09:59:36.355+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.356+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.357+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:59:36.358+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:59:36.357+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:59:36.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:59:36.357+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:59:36.364+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:59:36.358+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:59:36.359+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.360+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44504a85] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.367+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:59:36.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:59:36.368+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1796745013 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:36.370+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:59:36.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:59:36.371+09:00  WARN 15320 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:59:36.372+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.375+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:59:36.369+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:59:36.376+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:59:36.383+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:59:36.370+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.371+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T09:59:36.372+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T09:59:36.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.395+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:59:36.402+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409f55f1] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T09:59:36.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:36.404+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58fb5557]
2026-01-05T09:59:36.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1486541704 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:36.624+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:59:36.666+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@44504a85]
2026-01-05T09:59:36.667+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.668+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T09:59:36.649+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T09:59:36.672+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T09:59:36.657+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:36.674+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2205c26a] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:36.658+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.676+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T09:59:36.660+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:59:36.671+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.673+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T09:59:36.675+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@128321505 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:36.677+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.682+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T09:59:36.684+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T09:59:36.685+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:59:36.688+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:59:36.689+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T09:59:36.690+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:59:36.720+09:00  WARN 15320 --- [http-nio-8080-exec-4] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:59:36.721+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.730+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:59:36.732+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:59:36.736+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T09:59:36.740+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:59:36.743+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@409f55f1]
2026-01-05T09:59:36.754+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.761+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T09:59:36.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T09:59:36.772+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2205c26a]
2026-01-05T09:59:36.773+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:36.774+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:36.784+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T09:59:36.785+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:37.377+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T09:59:37.389+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:37.391+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T09:59:37.391+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T09:59:37.392+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T09:59:37.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T09:59:37.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T09:59:37.822+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T09:59:37.846+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:37.852+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T09:59:37.852+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T09:59:37.853+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T09:59:37.875+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T09:59:37.888+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:37.888+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T09:59:37.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T09:59:37.889+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T09:59:37.909+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T09:59:37.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T09:59:37.901+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T09:59:37.902+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T09:59:37.903+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T09:59:37.916+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T09:59:37.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T09:59:37.917+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.918+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T09:59:37.921+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T09:59:37.930+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T09:59:37.922+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T09:59:37.923+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.926+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T09:59:37.934+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.934+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.935+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T09:59:37.935+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:37.950+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334f0b47] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:37.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:37.954+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cc7bde] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:37.936+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:37.957+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324a5351] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:37.947+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T09:59:37.953+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T09:59:37.958+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@25fab517 and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T09:59:37.962+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:37.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c890f8d] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:37.966+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T09:59:37.970+09:00  WARN 15320 --- [http-nio-8080-exec-9] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T09:59:37.970+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:37.972+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T09:59:37.973+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T09:59:37.973+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@117942498 wrapping com.mysql.cj.jdbc.ConnectionImpl@6d6f0c60] will not be managed by Spring
2026-01-05T09:59:37.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@398180577 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:59:37.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@105393191 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:37.974+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1594284994 wrapping com.mysql.cj.jdbc.ConnectionImpl@50bc9a3e] will not be managed by Spring
2026-01-05T09:59:37.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T09:59:37.975+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T09:59:37.976+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T09:59:37.976+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T09:59:37.989+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T09:59:38.021+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T09:59:38.021+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T09:59:38.022+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T09:59:38.023+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T09:59:38.055+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T09:59:38.107+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T09:59:38.108+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T09:59:38.108+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T09:59:38.111+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3c890f8d]
2026-01-05T09:59:38.108+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@75cc7bde]
2026-01-05T09:59:38.109+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@334f0b47]
2026-01-05T09:59:38.110+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@324a5351]
2026-01-05T09:59:38.123+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:38.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:38.141+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:38.142+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:38.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T09:59:38.143+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T09:59:38.156+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T09:59:38.156+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T09:59:38.157+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:38.309+09:00 DEBUG 15320 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:38.356+09:00 DEBUG 15320 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:38.367+09:00 DEBUG 15320 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:43.277+09:00 DEBUG 15320 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:43.280+09:00 DEBUG 15320 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/audit-logs/list?page=1&size=10
2026-01-05T09:59:43.281+09:00 DEBUG 15320 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/audit-logs/list?page=1&size=10
2026-01-05T09:59:43.836+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:44.004+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/audit-logs/list?page=1&size=10
2026-01-05T09:59:44.006+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T09:59:44.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/audit-logs/list?page=1&size=10
2026-01-05T09:59:44.149+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/audit-logs/list
2026-01-05T09:59:44.162+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T09:59:44.169+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/audit-logs/list
2026-01-05T09:59:44.170+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/audit-logs/list?page=1&size=10
2026-01-05T09:59:44.170+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T09:59:44.171+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/audit-logs/list?page=1&size=10
2026-01-05T09:59:44.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/audit-logs/list?page=1&size=10", parameters={masked}
2026-01-05T09:59:44.187+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T09:59:44.188+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/audit-logs/list?page=1&size=10", parameters={masked}
2026-01-05T09:59:44.206+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AuditLogController#getAuditLogs(String, Boolean, LocalDateTime, LocalDateTime, int, int)
2026-01-05T09:59:44.189+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.AuditLogController#getAuditLogs(String, Boolean, LocalDateTime, LocalDateTime, int, int)
2026-01-05T09:59:44.219+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AuditLogController.getAuditLogs(java.lang.String,java.lang.Boolean,java.time.LocalDateTime,java.time.LocalDateTime,int,int); target is of class [com.innersignature.backend.controller.AuditLogController]
2026-01-05T09:59:44.231+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AuditLogController.getAuditLogs(java.lang.String,java.lang.Boolean,java.time.LocalDateTime,java.time.LocalDateTime,int,int); target is of class [com.innersignature.backend.controller.AuditLogController]
2026-01-05T09:59:44.190+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:44.239+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83a9f53] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:44.207+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AuditLogController.getAuditLogs(java.lang.String,java.lang.Boolean,java.time.LocalDateTime,java.time.LocalDateTime,int,int); target is of class [com.innersignature.backend.controller.AuditLogController]
2026-01-05T09:59:44.237+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:44.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.AuditLogController.getAuditLogs(java.lang.String,java.lang.Boolean,java.time.LocalDateTime,java.time.LocalDateTime,int,int); target is of class [com.innersignature.backend.controller.AuditLogController]
2026-01-05T09:59:44.242+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390456b0] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:44.353+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2068117668 wrapping com.mysql.cj.jdbc.ConnectionImpl@339dea87] will not be managed by Spring
2026-01-05T09:59:44.363+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:44.506+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@694336763 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:59:44.516+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.AuditLogMapper.findByCompanyId   : ==>  Preparing: SELECT al.*, ar.rule_name, er.title AS expense_title, u.korean_name AS resolved_by_name FROM audit_log_tb al INNER JOIN expense_report_tb er ON al.expense_report_id = er.expense_report_id LEFT JOIN audit_rule_tb ar ON al.rule_id = ar.rule_id LEFT JOIN user_tb u ON al.resolved_by = u.user_id WHERE er.company_id = ? AND (? IS NULL OR al.severity = ?) AND (? IS NULL OR al.is_resolved = ?) AND (? IS NULL OR al.detected_at >= ?) AND (? IS NULL OR al.detected_at <= ?) ORDER BY al.detected_at DESC LIMIT ? OFFSET ?
2026-01-05T09:59:44.514+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T09:59:44.515+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@806d02f] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:44.519+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.AuditLogMapper.findByCompanyId   : ==> Parameters: 2(Long), null, null, null, null, null, null, null, null, 10(Integer), 0(Integer)
2026-01-05T09:59:44.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T09:59:44.542+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@867357610 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:44.566+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.AuditLogMapper.findByCompanyId   : ==>  Preparing: SELECT al.*, ar.rule_name, er.title AS expense_title, u.korean_name AS resolved_by_name FROM audit_log_tb al INNER JOIN expense_report_tb er ON al.expense_report_id = er.expense_report_id LEFT JOIN audit_rule_tb ar ON al.rule_id = ar.rule_id LEFT JOIN user_tb u ON al.resolved_by = u.user_id WHERE er.company_id = ? AND (? IS NULL OR al.severity = ?) AND (? IS NULL OR al.is_resolved = ?) AND (? IS NULL OR al.detected_at >= ?) AND (? IS NULL OR al.detected_at <= ?) ORDER BY al.detected_at DESC LIMIT ? OFFSET ?
2026-01-05T09:59:44.572+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T09:59:44.572+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.AuditLogMapper.findByCompanyId   : <==      Total: 0
2026-01-05T09:59:44.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.AuditLogMapper.findByCompanyId   : ==> Parameters: 2(Long), null, null, null, null, null, null, null, null, 10(Integer), 0(Integer)
2026-01-05T09:59:44.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@83a9f53]
2026-01-05T09:59:44.582+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390456b0]
2026-01-05T09:59:44.598+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:44.599+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:44.603+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T09:59:44.604+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f12af3] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:44.604+09:00 DEBUG 15320 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:44.605+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2099173179 wrapping com.mysql.cj.jdbc.ConnectionImpl@26822c56] will not be managed by Spring
2026-01-05T09:59:44.606+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.AuditLogMapper.countByCompanyId  : ==>  Preparing: SELECT COUNT(*) FROM audit_log_tb al INNER JOIN expense_report_tb er ON al.expense_report_id = er.expense_report_id WHERE er.company_id = ? AND (? IS NULL OR al.severity = ?) AND (? IS NULL OR al.is_resolved = ?) AND (? IS NULL OR al.detected_at >= ?) AND (? IS NULL OR al.detected_at <= ?)
2026-01-05T09:59:44.607+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.AuditLogMapper.countByCompanyId  : ==> Parameters: 2(Long), null, null, null, null, null, null, null, null
2026-01-05T09:59:44.765+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.AuditLogMapper.findByCompanyId   : <==      Total: 0
2026-01-05T09:59:44.766+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] c.i.b.m.AuditLogMapper.countByCompanyId  : <==      Total: 1
2026-01-05T09:59:44.767+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@806d02f]
2026-01-05T09:59:44.767+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@56f12af3]
2026-01-05T09:59:44.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T09:59:44.768+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:44.769+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30819067] was not registered for synchronization because synchronization is not active
2026-01-05T09:59:44.769+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=PagedResponse(content=[], page=1, size=10, totalElemen (truncated)...]
2026-01-05T09:59:44.770+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1456855389 wrapping com.mysql.cj.jdbc.ConnectionImpl@639ca381] will not be managed by Spring
2026-01-05T09:59:44.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:44.771+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.AuditLogMapper.countByCompanyId  : ==>  Preparing: SELECT COUNT(*) FROM audit_log_tb al INNER JOIN expense_report_tb er ON al.expense_report_id = er.expense_report_id WHERE er.company_id = ? AND (? IS NULL OR al.severity = ?) AND (? IS NULL OR al.is_resolved = ?) AND (? IS NULL OR al.detected_at >= ?) AND (? IS NULL OR al.detected_at <= ?)
2026-01-05T09:59:44.812+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.AuditLogMapper.countByCompanyId  : ==> Parameters: 2(Long), null, null, null, null, null, null, null, null
2026-01-05T09:59:44.847+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] c.i.b.m.AuditLogMapper.countByCompanyId  : <==      Total: 1
2026-01-05T09:59:44.851+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@30819067]
2026-01-05T09:59:44.858+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:44.859+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=PagedResponse(content=[], page=1, size=10, totalElemen (truncated)...]
2026-01-05T09:59:44.863+09:00 DEBUG 15320 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T09:59:46.402+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/logout
2026-01-05T09:59:46.469+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/logout
2026-01-05T09:59:46.492+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/logout
2026-01-05T09:59:46.504+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/logout
2026-01-05T09:59:46.505+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : POST "/api/logout", parameters={}
2026-01-05T09:59:46.506+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#logout(String, RefreshTokenRequest)
2026-01-05T09:59:46.507+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.RefreshTokenRequest(refreshToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMCIsInVzZXJuYW1lIjo (truncated)...]
2026-01-05T09:59:46.508+09:00  INFO 15320 --- [http-nio-8080-exec-8] SECURITY                                 : LOGOUT userId=10
2026-01-05T09:59:46.509+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T09:59:46.510+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그아웃되었습니다., data=null)]
2026-01-05T09:59:46.520+09:00 DEBUG 15320 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:00:38.087+09:00  INFO 13104 --- [main] c.i.backend.BackendApplication           : Starting BackendApplication using Java 17.0.17 with PID 13104 (C:\InnerSignature\backend\target\classes started by owner in C:\InnerSignature\backend)
2026-01-05T10:00:38.173+09:00 DEBUG 13104 --- [main] c.i.backend.BackendApplication           : Running with Spring Boot v3.5.8, Spring v6.2.14
2026-01-05T10:00:38.182+09:00  INFO 13104 --- [main] c.i.backend.BackendApplication           : The following 1 profile is active: "dev"
2026-01-05T10:00:41.196+09:00 DEBUG 13104 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Searching for mappers annotated with @Mapper
2026-01-05T10:00:41.202+09:00 DEBUG 13104 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Using auto-configuration base package 'com.innersignature.backend'
2026-01-05T10:00:41.710+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AccountCodeMappingMapper.class]
2026-01-05T10:00:41.712+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditLogMapper.class]
2026-01-05T10:00:41.719+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\AuditRuleMapper.class]
2026-01-05T10:00:41.730+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\BudgetMapper.class]
2026-01-05T10:00:41.732+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CompanyMapper.class]
2026-01-05T10:00:41.734+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\CreditMapper.class]
2026-01-05T10:00:41.738+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\ExpenseMapper.class]
2026-01-05T10:00:41.749+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\MonthlyClosingMapper.class]
2026-01-05T10:00:41.758+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PasswordResetTokenMapper.class]
2026-01-05T10:00:41.762+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\PaymentMapper.class]
2026-01-05T10:00:41.768+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionMapper.class]
2026-01-05T10:00:41.780+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\SubscriptionPlanMapper.class]
2026-01-05T10:00:41.785+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Identified candidate component class: file [C:\InnerSignature\backend\target\classes\com\innersignature\backend\mapper\UserMapper.class]
2026-01-05T10:00:41.789+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'accountCodeMappingMapper' and 'com.innersignature.backend.mapper.AccountCodeMappingMapper' mapperInterface
2026-01-05T10:00:41.802+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditLogMapper' and 'com.innersignature.backend.mapper.AuditLogMapper' mapperInterface
2026-01-05T10:00:41.818+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'auditRuleMapper' and 'com.innersignature.backend.mapper.AuditRuleMapper' mapperInterface
2026-01-05T10:00:41.820+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'budgetMapper' and 'com.innersignature.backend.mapper.BudgetMapper' mapperInterface
2026-01-05T10:00:41.821+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'companyMapper' and 'com.innersignature.backend.mapper.CompanyMapper' mapperInterface
2026-01-05T10:00:41.822+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'creditMapper' and 'com.innersignature.backend.mapper.CreditMapper' mapperInterface
2026-01-05T10:00:41.825+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'expenseMapper' and 'com.innersignature.backend.mapper.ExpenseMapper' mapperInterface
2026-01-05T10:00:41.922+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'monthlyClosingMapper' and 'com.innersignature.backend.mapper.MonthlyClosingMapper' mapperInterface
2026-01-05T10:00:41.962+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'passwordResetTokenMapper' and 'com.innersignature.backend.mapper.PasswordResetTokenMapper' mapperInterface
2026-01-05T10:00:41.996+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'paymentMapper' and 'com.innersignature.backend.mapper.PaymentMapper' mapperInterface
2026-01-05T10:00:41.998+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionMapper' and 'com.innersignature.backend.mapper.SubscriptionMapper' mapperInterface
2026-01-05T10:00:42.002+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'subscriptionPlanMapper' and 'com.innersignature.backend.mapper.SubscriptionPlanMapper' mapperInterface
2026-01-05T10:00:42.004+09:00 DEBUG 13104 --- [main] o.m.s.mapper.ClassPathMapperScanner      : Creating MapperFactoryBean with name 'userMapper' and 'com.innersignature.backend.mapper.UserMapper' mapperInterface
2026-01-05T10:00:43.399+09:00  INFO 13104 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-05T10:00:43.461+09:00  INFO 13104 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-05T10:00:43.483+09:00  INFO 13104 --- [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.49]
2026-01-05T10:00:43.665+09:00  INFO 13104 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-05T10:00:43.835+09:00  INFO 13104 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5414 ms
2026-01-05T10:00:44.108+09:00 DEBUG 13104 --- [main] c.i.b.security.JwtAuthenticationFilter   : Filter 'jwtAuthenticationFilter' configured for use
2026-01-05T10:00:44.175+09:00 DEBUG 13104 --- [main] c.i.backend.security.RateLimitFilter     : Filter 'rateLimitFilter' configured for use
2026-01-05T10:00:45.184+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AccountCodeMappingMapper.xml]'
2026-01-05T10:00:45.202+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditLogMapper.xml]'
2026-01-05T10:00:45.220+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\AuditRuleMapper.xml]'
2026-01-05T10:00:45.245+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\BudgetMapper.xml]'
2026-01-05T10:00:45.274+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CompanyMapper.xml]'
2026-01-05T10:00:45.289+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\CreditMapper.xml]'
2026-01-05T10:00:45.352+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\ExpenseMapper.xml]'
2026-01-05T10:00:45.366+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\MonthlyClosingMapper.xml]'
2026-01-05T10:00:45.380+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PasswordResetTokenMapper.xml]'
2026-01-05T10:00:45.406+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\PaymentMapper.xml]'
2026-01-05T10:00:45.439+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionMapper.xml]'
2026-01-05T10:00:45.461+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\SubscriptionPlanMapper.xml]'
2026-01-05T10:00:45.498+09:00 DEBUG 13104 --- [main] o.mybatis.spring.SqlSessionFactoryBean   : Parsed mapper file: 'file [C:\InnerSignature\backend\target\classes\mapper\UserMappeer.xml]'
2026-01-05T10:00:46.571+09:00 DEBUG 13104 --- [main] s.w.s.m.m.a.RequestMappingHandlerMapping : 118 mappings in 'requestMappingHandlerMapping'
2026-01-05T10:00:46.846+09:00 DEBUG 13104 --- [main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**, /api/uploads/**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-01-05T10:00:46.919+09:00  WARN 13104 --- [main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d2945740-a238-4db7-afeb-22b5377ab561

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-05T10:00:46.935+09:00  INFO 13104 --- [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-05T10:00:47.164+09:00 DEBUG 13104 --- [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, RateLimitFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2026-01-05T10:00:47.361+09:00 DEBUG 13104 --- [main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-01-05T10:00:47.521+09:00 DEBUG 13104 --- [main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-01-05T10:00:47.529+09:00 DEBUG 13104 --- [main] o.m.s.b.a.MybatisAutoConfiguration       : Not found configuration for registering mapper bean using @MapperScan, MapperFactoryBean and MapperScannerConfigurer.
2026-01-05T10:00:48.102+09:00  INFO 13104 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-05T10:00:48.132+09:00  INFO 13104 --- [main] c.i.backend.BackendApplication           : Started BackendApplication in 11.174 seconds (process running for 11.737)
2026-01-05T10:01:13.696+09:00  INFO 13104 --- [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-05T10:01:13.697+09:00  INFO 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-05T10:01:13.698+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2026-01-05T10:01:13.699+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2026-01-05T10:01:13.700+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2026-01-05T10:01:13.704+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@9f1ca74
2026-01-05T10:01:13.731+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@ff4b223
2026-01-05T10:01:13.745+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-01-05T10:01:13.746+09:00  INFO 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 49 ms
2026-01-05T10:01:13.787+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/login
2026-01-05T10:01:13.838+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/login
2026-01-05T10:01:13.863+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext
2026-01-05T10:01:13.886+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/login
2026-01-05T10:01:13.914+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/login", parameters={}
2026-01-05T10:01:13.931+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#login(LoginRequest)
2026-01-05T10:01:14.082+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.LoginRequest(username=test_accountant, password=1234)]
2026-01-05T10:01:14.092+09:00  INFO 13104 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 시도 - username: test_accountant
2026-01-05T10:01:14.111+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:14.127+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401ee650] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:14.148+09:00  INFO 13104 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-05T10:01:14.504+09:00  INFO 13104 --- [http-nio-8080-exec-2] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3bb3e867
2026-01-05T10:01:14.510+09:00  INFO 13104 --- [http-nio-8080-exec-2] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-05T10:01:14.519+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2060999465 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:14.550+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==>  Preparing: SELECT * FROM user_tb WHERE username = ?
2026-01-05T10:01:14.620+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : ==> Parameters: test_accountant(String)
2026-01-05T10:01:14.804+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.findByUsername   : <==      Total: 1
2026-01-05T10:01:14.828+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401ee650]
2026-01-05T10:01:14.966+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:14.966+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57dec926] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:14.967+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2041808700 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:14.967+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:14.970+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:14.981+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T10:01:14.982+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@57dec926]
2026-01-05T10:01:15.177+09:00  INFO 13104 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 로그인 성공 - userId: 10, role: ACCOUNTANT, companyId: 2
2026-01-05T10:01:15.180+09:00  INFO 13104 --- [http-nio-8080-exec-2] SECURITY                                 : LOGIN_SUCCESS userId=10 username=test_accountant role=ACCOUNTANT
2026-01-05T10:01:15.211+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:15.224+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=로그인 성공, data={user=UserDto(userId=10, username=test_accountant, pa (truncated)...]
2026-01-05T10:01:15.252+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:16.329+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T10:01:16.339+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T10:01:16.407+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:16.407+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.414+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:16.476+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.601+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/companies
2026-01-05T10:01:16.606+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.606+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:16.615+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T10:01:16.629+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:16.630+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T10:01:16.632+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.633+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T10:01:16.635+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:16.639+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:16.639+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469593a8] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:16.637+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:16.639+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:16.644+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:16.646+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.656+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:16.666+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@323240959 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:16.670+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:16.711+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9850f2] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:16.671+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.696+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:16.706+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:16.725+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:16.729+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:16.730+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:16.710+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T10:01:16.712+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:16.718+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:16.725+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:16.737+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:16.746+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T10:01:16.747+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.749+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.761+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:16.753+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:16.755+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f82cc4a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:16.756+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:16.763+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:16.763+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340400ad] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:16.764+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953278605 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:16.786+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 2
2026-01-05T10:01:16.787+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:16.793+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:16.788+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:16.797+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f14cbd] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:16.790+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:16.791+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@469593a8]
2026-01-05T10:01:16.796+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7204652f] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:16.800+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2093188383 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:16.799+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:16.801+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:16.802+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:16.806+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:16.824+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T10:01:16.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:16.840+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:16.841+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@755737768 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:16.842+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@365446256 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:16.845+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1841909768 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:16.937+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:16.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6c9850f2]
2026-01-05T10:01:16.940+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:16.941+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:16.942+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:16.944+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:16.987+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:17.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:16.996+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:16.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:17.000+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7204652f]
2026-01-05T10:01:17.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:17.003+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:17.019+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:17.040+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:17.039+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:17.048+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:17.050+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:17.052+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:17.083+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:17.083+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:17.087+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:17.102+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:17.104+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1f82cc4a]
2026-01-05T10:01:17.108+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@340400ad]
2026-01-05T10:01:17.116+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.116+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64faa47f] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.111+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@62f14cbd]
2026-01-05T10:01:17.113+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:17.116+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.119+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1473546110 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:17.122+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:17.134+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:17.123+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.124+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620bbd4f] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.124+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:17.136+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:17.137+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cb7c4ac] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.139+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1623517909 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:17.140+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:17.146+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@577777482 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:17.146+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:17.148+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:17.149+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:17.150+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:17.176+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:17.177+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:17.180+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:17.193+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2cb7c4ac]
2026-01-05T10:01:17.194+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@64faa47f]
2026-01-05T10:01:17.194+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@620bbd4f]
2026-01-05T10:01:17.195+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:17.196+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.197+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.198+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:17.200+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afab861] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.214+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569165d8] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.216+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:17.222+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@781882942 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:17.320+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:17.222+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1698602647 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:17.323+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:17.323+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:17.327+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:17.403+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:17.403+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:17.416+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@569165d8]
2026-01-05T10:01:17.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5afab861]
2026-01-05T10:01:17.420+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.439+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.440+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776ea4ee] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.440+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b6377a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.444+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1438647383 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:17.446+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:17.444+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@164769935 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:17.449+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:17.452+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:17.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:17.477+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:17.478+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:17.479+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@73b6377a]
2026-01-05T10:01:17.484+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@776ea4ee]
2026-01-05T10:01:17.485+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.487+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.487+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb37a64] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.488+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@99ba550] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.488+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@511478639 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:17.489+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1259998994 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:17.490+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:17.490+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:17.496+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:17.499+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:17.511+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:17.518+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:17.518+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cb37a64]
2026-01-05T10:01:17.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@99ba550]
2026-01-05T10:01:17.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.527+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.529+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10656971] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.529+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1575f555] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.530+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2422926 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:17.531+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1091597198 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:17.532+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:17.532+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:17.533+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:17.534+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:17.538+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:17.538+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:17.540+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@10656971]
2026-01-05T10:01:17.542+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1575f555]
2026-01-05T10:01:17.543+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.550+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:17.550+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be4e94e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.551+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5025ce] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:17.551+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@544290210 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:17.551+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1085646988 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:17.552+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:17.552+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:17.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:17.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:17.558+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:17.558+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:17.562+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1be4e94e]
2026-01-05T10:01:17.563+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7a5025ce]
2026-01-05T10:01:17.565+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:17.565+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:17.581+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:17.581+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:17.604+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:17.606+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:19.731+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:19.733+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T10:01:19.735+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:01:19.736+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T10:01:19.737+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:01:19.767+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:19.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T10:01:19.777+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:01:19.784+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:01:19.784+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T10:01:19.796+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:19.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:19.804+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies
2026-01-05T10:01:19.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:01:19.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:01:19.833+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies/pending
2026-01-05T10:01:19.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:19.839+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:19.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T10:01:19.836+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:01:19.836+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:01:19.837+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T10:01:19.841+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:19.860+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfe8f24] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:19.856+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T10:01:19.856+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:01:19.856+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:01:19.857+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T10:01:19.864+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T10:01:19.865+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:01:19.865+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:01:19.868+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T10:01:19.869+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:19.871+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@210318155 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:19.872+09:00  INFO 13104 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:01:19.873+09:00  INFO 13104 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:01:19.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6ced0b] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:19.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:19.882+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72346ac2] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:19.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:19.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:19.881+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:19.886+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:19.888+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362da3e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:19.889+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c585f51] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:19.892+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1331534696 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:19.896+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@438726848 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:19.898+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:19.899+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:19.908+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:19.910+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:19.931+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T10:01:19.931+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3dfe8f24]
2026-01-05T10:01:19.932+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:19.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:19.939+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1027500634 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:19.940+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1811657484 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:19.940+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:19.948+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:19.951+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:19.953+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:19.954+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:19.954+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T10:01:19.956+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T10:01:19.983+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72346ac2]
2026-01-05T10:01:19.985+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1c6ced0b]
2026-01-05T10:01:19.985+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:20.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T10:01:19.991+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:20.003+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:20.048+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=22, userId=10, companyId (truncated)...]
2026-01-05T10:01:20.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:20.070+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:20.089+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c585f51]
2026-01-05T10:01:20.086+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:20.088+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@362da3e]
2026-01-05T10:01:20.090+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:20.097+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:20.098+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e01e116] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:20.098+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72c25fd] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:20.100+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1992403450 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:20.100+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1854793037 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:20.101+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:20.107+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:20.113+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:20.114+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:20.121+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T10:01:20.122+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 2
2026-01-05T10:01:20.123+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@72c25fd]
2026-01-05T10:01:20.123+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3e01e116]
2026-01-05T10:01:20.124+09:00  INFO 13104 --- [http-nio-8080-exec-7] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:01:20.125+09:00  INFO 13104 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:01:20.127+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:20.128+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:20.129+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:01:20.130+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:01:20.132+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:20.137+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:24.631+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/1
2026-01-05T10:01:24.765+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing DELETE /api/users/companies/1
2026-01-05T10:01:24.776+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies/1
2026-01-05T10:01:24.839+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured DELETE /api/users/companies/1
2026-01-05T10:01:24.864+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : DELETE "/api/users/companies/1", parameters={}
2026-01-05T10:01:24.901+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#removeUserFromCompany(Long)
2026-01-05T10:01:24.924+09:00  INFO 13104 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사 탈퇴 - userId: 10, companyId: 1
2026-01-05T10:01:24.947+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:24.948+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab4a3c6]
2026-01-05T10:01:24.951+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1218428890 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will be managed by Spring
2026-01-05T10:01:24.956+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.removeUserFromCompany          : ==>  Preparing: DELETE FROM user_company_tb WHERE user_id = ? AND company_id = ?
2026-01-05T10:01:24.966+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.removeUserFromCompany          : ==> Parameters: 10(Long), 1(Long)
2026-01-05T10:01:24.983+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.removeUserFromCompany          : <==    Updates: 1
2026-01-05T10:01:24.986+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab4a3c6]
2026-01-05T10:01:24.987+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab4a3c6]
2026-01-05T10:01:24.989+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab4a3c6]
2026-01-05T10:01:24.993+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ab4a3c6]
2026-01-05T10:01:25.017+09:00  INFO 13104 --- [http-nio-8080-exec-4] c.i.backend.controller.UserController    : 회사 탈퇴 완료 - userId: 10, companyId: 1
2026-01-05T10:01:25.019+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:25.021+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=회사에서 탈퇴했습니다., data=null)]
2026-01-05T10:01:25.023+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:25.948+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T10:01:25.949+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T10:01:25.956+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T10:01:25.960+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T10:01:25.978+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies
2026-01-05T10:01:25.989+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies/pending
2026-01-05T10:01:25.995+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T10:01:25.996+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T10:01:25.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T10:01:25.997+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T10:01:25.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T10:01:25.999+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T10:01:26.000+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:26.002+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd1706b] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:26.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:26.003+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753242d4] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:26.023+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2143955364 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:26.026+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631133749 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:26.030+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:26.031+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:26.034+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:26.041+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T10:01:26.052+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T10:01:26.052+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:01:26.054+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dd1706b]
2026-01-05T10:01:26.054+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@753242d4]
2026-01-05T10:01:26.055+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:26.055+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:26.056+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T10:01:26.056+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=22, userId=10, companyId (truncated)...]
2026-01-05T10:01:26.058+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:26.071+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:28.764+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:28.764+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.765+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.767+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:28.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.808+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:28.808+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.813+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:28.854+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:28.856+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:28.861+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:28.815+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.833+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:28.846+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:28.863+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:28.867+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:28.867+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:28.873+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.884+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:28.869+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.871+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:28.871+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:28.887+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:28.916+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.933+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:28.934+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599fc913] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:28.921+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:28.931+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b3b5d68] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:28.931+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:28.936+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:28.937+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:28.944+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:28.944+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:28.954+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:28.957+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@802842096 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:28.957+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@228671363 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:28.959+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b2426d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:28.968+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:28.981+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:28.968+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218f416d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:28.969+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:28.986+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:28.969+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:28.982+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:28.990+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f21b24] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:28.990+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:28.994+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1042513149 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:28.996+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:29.000+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:29.018+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:29.019+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@729229853 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:29.035+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@599fc913]
2026-01-05T10:01:29.036+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:29.039+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:29.038+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:29.040+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:29.045+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:29.055+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:29.156+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1148667172 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:29.157+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:29.171+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4b3b5d68]
2026-01-05T10:01:29.169+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68b2426d]
2026-01-05T10:01:29.170+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:29.172+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.198+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d558b09] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.200+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2008386240 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:29.172+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.178+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:29.203+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:29.206+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:29.204+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fe4] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.216+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1410574410 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:29.338+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:29.399+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:29.400+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:29.401+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:29.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@218f416d]
2026-01-05T10:01:29.427+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:29.428+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2d558b09]
2026-01-05T10:01:29.448+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.448+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d694a20] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.450+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1826986311 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:29.434+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f21b24]
2026-01-05T10:01:29.435+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:29.454+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:29.451+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:29.452+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:29.456+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:29.471+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:29.479+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:29.479+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:29.517+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@36a09fe4]
2026-01-05T10:01:29.527+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.535+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f413ce] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.537+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1469706027 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:29.554+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:29.555+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:29.522+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:29.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:29.618+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:29.629+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65f413ce]
2026-01-05T10:01:29.631+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6d694a20]
2026-01-05T10:01:29.633+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.686+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7880c2f1] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.687+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1034933324 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:29.634+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.688+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:29.702+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23519d96] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.702+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:29.705+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@80669590 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:29.717+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:29.719+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:29.760+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:29.768+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7880c2f1]
2026-01-05T10:01:29.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a16ea9] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338549542 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:29.771+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:29.772+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:29.773+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@23519d96]
2026-01-05T10:01:29.782+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:29.782+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.783+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40bbe50d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.784+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259710670 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:29.785+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:29.786+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:29.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:29.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:29.830+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@40bbe50d]
2026-01-05T10:01:29.831+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@31a16ea9]
2026-01-05T10:01:29.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:29.887+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34cadd54] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.887+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15eb4c7e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:29.895+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@734451021 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:29.896+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@797289548 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:29.896+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:29.952+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:29.957+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:29.959+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:30.020+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:30.050+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34cadd54]
2026-01-05T10:01:30.053+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:30.057+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:30.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@15eb4c7e]
2026-01-05T10:01:30.069+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0def2c] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:30.100+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:30.104+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2144313764 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:30.106+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197d5ba8] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:30.107+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:30.118+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1446673477 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:30.131+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:30.120+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:30.134+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:30.147+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:30.148+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:30.152+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@197d5ba8]
2026-01-05T10:01:30.153+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d0def2c]
2026-01-05T10:01:30.154+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:30.164+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:30.164+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:30.165+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:30.186+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:30.187+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:32.853+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/switch-company
2026-01-05T10:01:32.871+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/users/switch-company
2026-01-05T10:01:32.965+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/switch-company
2026-01-05T10:01:32.983+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/users/switch-company
2026-01-05T10:01:32.996+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : POST "/api/users/switch-company", parameters={}
2026-01-05T10:01:32.996+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#switchCompany(CompanySwitchRequest)
2026-01-05T10:01:33.000+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [UserController.CompanySwitchRequest(companyId=1, currentToken=eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxMCIsI (truncated)...]
2026-01-05T10:01:33.056+09:00  INFO 13104 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 회사 전환 시도 - userId: 10, companyId: 1
2026-01-05T10:01:33.079+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:33.118+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fc3361] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:33.163+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1143001372 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:33.165+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:33.168+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:33.173+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:01:33.180+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@77fc3361]
2026-01-05T10:01:33.185+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:33.189+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=false, message=해당 회사에 소속되어 있지 않습니다., data=null)]
2026-01-05T10:01:33.193+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:36.279+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.280+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/companies
2026-01-05T10:01:36.283+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:36.283+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:36.285+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.285+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.334+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.354+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.382+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/companies
2026-01-05T10:01:36.383+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:36.396+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:36.421+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:36.422+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.424+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.435+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/companies
2026-01-05T10:01:36.438+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:36.442+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:36.445+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.464+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:36.471+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:36.517+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.472+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/companies
2026-01-05T10:01:36.472+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:36.519+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:36.506+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:36.515+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:36.516+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.518+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:36.533+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:36.518+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/companies", parameters={}
2026-01-05T10:01:36.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:36.522+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:36.529+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:36.533+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:36.578+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:36.534+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.534+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CompanyController#getMyCompanies()
2026-01-05T10:01:36.536+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:36.577+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.580+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.589+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54966db8] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.590+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.597+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a7433] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.590+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd2a8f5] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.593+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.594+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efbea32] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.596+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfec773] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.598+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb08d03] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.606+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1534824818 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:36.612+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:36.607+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1904496107 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:36.615+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==>  Preparing: SELECT c.company_id AS companyId, c.company_code AS companyCode, c.company_name AS companyName, c.business_reg_no AS businessRegNo, c.representative_name AS representativeName, c.created_by AS createdBy, c.is_active AS isActive, c.created_at AS createdAt, c.updated_at AS updatedAt FROM company_tb c INNER JOIN user_company_tb uc ON c.company_id = uc.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' AND c.is_active = 1 ORDER BY uc.is_primary DESC, c.created_at DESC
2026-01-05T10:01:36.607+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2140409379 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:36.607+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1584269000 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:36.615+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:36.616+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1074709407 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:36.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : ==> Parameters: 10(Long)
2026-01-05T10:01:36.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:36.618+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:36.619+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:36.632+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:36.641+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:36.645+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:36.650+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:36.650+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.U.findCompaniesByUserId          : <==      Total: 1
2026-01-05T10:01:36.662+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1efbea32]
2026-01-05T10:01:36.665+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@70a7433]
2026-01-05T10:01:36.666+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@548297016 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:36.667+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:36.668+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:36.670+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=true, message=조회 성공, data=[CompanyDto(companyId=2, companyCode=YM3Y62, companyNa (truncated)...]
2026-01-05T10:01:36.668+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:36.669+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:36.672+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:36.672+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:36.673+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:36.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:36.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:36.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:36.693+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.743+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.747+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:36.748+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@54966db8]
2026-01-05T10:01:36.750+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5bfec773]
2026-01-05T10:01:36.751+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@fd2a8f5]
2026-01-05T10:01:36.762+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:36.767+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1fb08d03]
2026-01-05T10:01:36.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:36.771+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:36.771+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.777+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c9dd56] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.773+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.773+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.775+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:36.777+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:36.778+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@677161205 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:36.796+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:36.780+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:36.799+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:36.780+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451db7e7] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.781+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:36.785+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.792+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:36.799+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:36.800+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1728711687 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:36.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:36.854+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:36.899+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:36.905+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:36.906+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:36.951+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@74c9dd56]
2026-01-05T10:01:36.985+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a765de0] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:36.997+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:37.016+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:37.017+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.029+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188761199 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:37.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:37.034+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1034cf5e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.034+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:37.034+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.063+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35aa019d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.056+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2013110822 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:37.063+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:37.064+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1607556575 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:37.064+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:37.066+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:37.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:37.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:37.075+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:37.079+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@451db7e7]
2026-01-05T10:01:37.083+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:37.085+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a765de0]
2026-01-05T10:01:37.085+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.087+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11889790] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.086+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:37.088+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@964868297 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:37.088+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:37.099+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:37.100+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:37.100+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:37.102+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:37.102+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:37.119+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@35aa019d]
2026-01-05T10:01:37.132+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:37.123+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1034cf5e]
2026-01-05T10:01:37.133+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.134+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d477a5d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.135+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@188681364 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:37.129+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:37.133+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:37.137+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:37.138+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11889790]
2026-01-05T10:01:37.170+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:37.163+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:37.171+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.173+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b390275] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.180+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1582837909 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:37.183+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:37.184+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:37.190+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:37.193+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3d477a5d]
2026-01-05T10:01:37.195+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.198+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728fc152] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.198+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1948047564 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:37.216+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:37.217+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:37.223+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:37.226+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b390275]
2026-01-05T10:01:37.230+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:37.231+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.232+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@728fc152]
2026-01-05T10:01:37.234+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390e15a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.250+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.252+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbda98d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.250+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1090089463 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:37.253+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1370777145 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:37.254+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:37.273+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:37.273+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:37.274+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:37.299+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:37.299+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:37.302+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5dbda98d]
2026-01-05T10:01:37.302+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@390e15a]
2026-01-05T10:01:37.303+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.304+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.305+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2987dac2] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.305+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e5b0ea] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.307+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@756642969 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:37.316+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1428462618 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:37.320+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:37.322+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:37.322+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:37.323+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:37.335+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:37.335+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:37.336+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@65e5b0ea]
2026-01-05T10:01:37.338+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2987dac2]
2026-01-05T10:01:37.338+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:37.339+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:37.352+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:37.352+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283f9a28] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:37.353+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:37.355+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1064895527 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:37.388+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:37.404+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:37.450+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:37.467+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@283f9a28]
2026-01-05T10:01:37.469+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:37.474+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:37.480+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:41.714+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:41.714+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:01:41.718+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T10:01:41.719+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T10:01:41.721+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:01:41.807+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:41.810+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:01:41.810+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T10:01:41.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:41.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:01:41.821+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:41.822+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies
2026-01-05T10:01:41.824+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:01:41.826+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:01:41.827+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:01:41.826+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:41.826+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T10:01:41.846+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T10:01:41.828+09:00  INFO 13104 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:01:41.831+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:41.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:01:41.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T10:01:41.847+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T10:01:41.848+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:41.871+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca4b92d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:41.852+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:41.856+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:01:41.861+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies/pending
2026-01-05T10:01:41.871+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:41.873+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28824405] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:41.887+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:01:41.903+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:01:41.888+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T10:01:41.902+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5a4e58] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:41.903+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:01:41.903+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T10:01:41.905+09:00  INFO 13104 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:01:41.906+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T10:01:41.906+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:41.909+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1572814797 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:41.914+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:41.916+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff706e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:41.917+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:41.918+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5936e323] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:41.921+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:41.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1056147454 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:41.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@631278253 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:41.984+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:41.985+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:41.988+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:41.987+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:42.003+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2057546061 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:42.004+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1029727015 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:42.004+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:42.021+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:42.021+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:42.022+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ca4b92d]
2026-01-05T10:01:42.023+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T10:01:42.023+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:42.024+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:42.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:42.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:01:42.035+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7997b04d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:42.038+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@28824405]
2026-01-05T10:01:42.040+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@e5a4e58]
2026-01-05T10:01:42.043+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@116252705 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:42.048+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T10:01:42.048+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:42.049+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:42.049+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:42.049+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:42.050+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5936e323]
2026-01-05T10:01:42.050+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ff706e]
2026-01-05T10:01:42.053+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:42.054+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=22, userId=10, companyId (truncated)...]
2026-01-05T10:01:42.055+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:42.062+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:42.064+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:42.085+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e3d7d5] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:42.065+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:42.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:42.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T10:01:42.085+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@457351176 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:42.105+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:42.107+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:01:42.107+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:01:42.116+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7997b04d]
2026-01-05T10:01:42.119+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:01:42.119+09:00  INFO 13104 --- [http-nio-8080-exec-3] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:01:42.120+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:42.133+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:01:42.140+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:42.170+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:01:42.180+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78e3d7d5]
2026-01-05T10:01:42.181+09:00  INFO 13104 --- [http-nio-8080-exec-1] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:01:42.182+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:42.188+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:01:42.191+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:47.145+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.146+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:47.146+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.147+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses?page=1&size=10
2026-01-05T10:01:47.150+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.171+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.173+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:47.176+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.179+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses?page=1&size=10
2026-01-05T10:01:47.244+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:47.248+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.253+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:47.234+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:47.258+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.241+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:47.247+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses
2026-01-05T10:01:47.262+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:47.256+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:47.259+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:47.264+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:47.261+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses?page=1&size=10
2026-01-05T10:01:47.262+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:47.263+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.266+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.267+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses?page=1&size=10", parameters={masked}
2026-01-05T10:01:47.268+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:47.269+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1e3b2d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.301+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.313+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b18595f] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.329+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseList(int, int, String, String, Long, Long, String[], String, Boolean, Boolean, String)
2026-01-05T10:01:47.331+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.355+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:47.361+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.364+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a167cf2] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.365+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:47.391+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:47.396+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:47.367+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b47ad82] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.400+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.444+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273dbc78] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.400+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1360003394 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:47.400+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@670640043 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:47.434+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2000858420 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:47.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:47.445+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:47.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:47.448+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:47.452+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:47.464+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:47.483+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1338650877 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:01:47.483+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1923796794 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:47.489+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:47.489+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:47.490+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:47.494+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:47.496+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:47.496+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:47.500+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:47.503+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5b18595f]
2026-01-05T10:01:47.505+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5a167cf2]
2026-01-05T10:01:47.511+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5d1e3b2d]
2026-01-05T10:01:47.514+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:47.515+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.516+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:47.519+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:47.521+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b044121] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.539+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:47.541+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:47.545+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:47.547+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1488046838 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:47.547+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@273dbc78]
2026-01-05T10:01:47.548+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:47.554+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:47.555+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:47.562+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:47.563+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:47.568+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:47.635+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:47.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@b47ad82]
2026-01-05T10:01:47.686+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.687+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25660662] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.688+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:47.692+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2051091212 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:47.693+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7b044121]
2026-01-05T10:01:47.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:47.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.695+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a673144] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.695+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:47.697+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@322141280 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:47.868+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:47.870+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:47.905+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:47.905+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:47.912+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4a673144]
2026-01-05T10:01:47.912+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@25660662]
2026-01-05T10:01:47.913+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.913+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.914+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38b813dc] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.914+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11939b97] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.918+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1260845214 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:47.922+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72604369 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:47.934+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:47.934+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:47.934+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:47.934+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:47.950+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:47.950+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:47.955+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@38b813dc]
2026-01-05T10:01:47.955+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@11939b97]
2026-01-05T10:01:47.956+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.956+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.957+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b360b1] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.958+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e25937a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.959+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1642968744 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:47.965+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@333970442 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:47.965+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:47.969+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.company_id = ? ORDER BY r.expense_report_id DESC LIMIT ? OFFSET ?
2026-01-05T10:01:47.970+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:47.970+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : ==> Parameters: 2(Long), 2147483647(Integer), 0(Integer)
2026-01-05T10:01:47.979+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:47.983+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseListWithFilters   : <==      Total: 1
2026-01-05T10:01:47.984+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19b360b1]
2026-01-05T10:01:47.985+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1e25937a]
2026-01-05T10:01:47.986+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.987+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:47.987+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c532f26] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.989+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf70b3e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:47.989+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@778532085 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:47.990+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@967271275 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:47.990+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:47.999+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:48.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:48.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:48.005+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:48.005+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:48.006+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5cf70b3e]
2026-01-05T10:01:48.009+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c532f26]
2026-01-05T10:01:48.010+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:48.010+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:48.011+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7f5ee8] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:48.011+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2547e06a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:48.012+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1597316162 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:48.013+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@282640891 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:48.013+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE company_id = ? AND expense_report_id IN ( ? ) ORDER BY expense_report_id, expense_detail_id
2026-01-05T10:01:48.013+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:48.013+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : ==> Parameters: 2(Long), 21(Long)
2026-01-05T10:01:48.014+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:48.031+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:48.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectExpenseDetailsBatch      : <==      Total: 1
2026-01-05T10:01:48.038+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2547e06a]
2026-01-05T10:01:48.048+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b7f5ee8]
2026-01-05T10:01:48.049+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:48.051+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:48.051+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:48.052+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4602b70a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:48.053+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:48.054+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2089817806 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:01:48.088+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:48.096+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:48.123+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:48.140+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4602b70a]
2026-01-05T10:01:48.169+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:48.178+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=목록 조회 성공, data=PagedResponse(content=[ExpenseReportDto(expenseRepo (truncated)...]
2026-01-05T10:01:48.180+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:52.980+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:52.980+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T10:01:52.983+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T10:01:53.073+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T10:01:53.072+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:53.122+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T10:01:53.136+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T10:01:53.228+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:01:53.234+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T10:01:53.235+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T10:01:53.235+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:01:53.236+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T10:01:53.236+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T10:01:53.237+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:01:53.251+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:01:53.237+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T10:01:53.238+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T10:01:53.253+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.254+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T10:01:53.266+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.266+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bd1e84] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.276+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.278+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c70d619] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.280+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@266c980e] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.282+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1461128443 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:53.282+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@68758856 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:01:53.283+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@72028253 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:53.285+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T10:01:53.286+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:01:53.299+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T10:01:53.304+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:01:53.301+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.305+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.316+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:01:53.316+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T10:01:53.316+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T10:01:53.319+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@45bd1e84]
2026-01-05T10:01:53.325+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c70d619]
2026-01-05T10:01:53.329+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@266c980e]
2026-01-05T10:01:53.332+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:53.335+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.335+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.336+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:01:53.350+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@179bd41] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.350+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153e434d] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.352+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:53.352+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1129998273 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:53.353+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1096256514 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:53.353+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T10:01:53.354+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T10:01:53.354+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.370+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T10:01:53.457+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@179bd41]
2026-01-05T10:01:53.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T10:01:53.461+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.503+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@153e434d]
2026-01-05T10:01:53.505+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0d73d4] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.506+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.513+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@869419713 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:53.514+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632ca28a] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.515+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T10:01:53.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@202112736 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:53.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.521+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T10:01:53.522+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.537+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T10:01:53.537+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T10:01:53.550+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@632ca28a]
2026-01-05T10:01:53.551+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f0d73d4]
2026-01-05T10:01:53.552+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.552+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508b8ca6] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527b9290] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.554+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@951454822 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:53.556+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1943952988 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:53.561+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T10:01:53.563+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T10:01:53.569+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.579+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:01:53.601+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T10:01:53.602+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 0
2026-01-05T10:01:53.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@508b8ca6]
2026-01-05T10:01:53.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@527b9290]
2026-01-05T10:01:53.619+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.620+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:01:53.630+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f127364] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.631+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@425f19d5] was not registered for synchronization because synchronization is not active
2026-01-05T10:01:53.631+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1945124508 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:01:53.632+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1279192092 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:01:53.634+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:53.635+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:01:53.666+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:53.636+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:01:53.724+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:53.768+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@425f19d5]
2026-01-05T10:01:53.725+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:01:53.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7f127364]
2026-01-05T10:01:53.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:53.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:01:53.778+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T10:01:53.778+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T10:01:53.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:01:53.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:01.276+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21/receipt
2026-01-05T10:02:01.557+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/expenses/21/receipt
2026-01-05T10:02:01.730+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21/receipt
2026-01-05T10:02:01.757+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/expenses/21/receipt
2026-01-05T10:02:01.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/expenses/21/receipt", parameters={multipart}
2026-01-05T10:02:02.073+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#uploadReceipt(Long, MultipartFile)
2026-01-05T10:02:02.075+09:00  INFO 13104 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 영수증 업로드 요청 - expenseId: 21, userId: 10, filename: 영수증이미지.jpg
2026-01-05T10:02:02.092+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:02.093+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Registering transaction synchronization for SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.093+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1529023828 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will be managed by Spring
2026-01-05T10:02:02.094+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T10:02:02.095+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:02.098+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T10:02:02.099+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.100+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d] from current transaction
2026-01-05T10:02:02.102+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:02.103+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:02.106+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:02.106+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.287+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Fetched SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d] from current transaction
2026-01-05T10:02:02.289+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.insertReceipt      : ==>  Preparing: INSERT INTO receipt_tb ( expense_report_id, file_path, original_filename, file_size, uploaded_by, uploaded_at, company_id ) VALUES ( ?, ?, ?, ?, ?, ?, ? )
2026-01-05T10:02:02.294+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.insertReceipt      : ==> Parameters: 21(Long), uploads/receipts/21/a13d2dfb-4a88-44a2-b41c-55171c0367ab/receipt_20260105100202_영수증이미지.jpg(String), 영수증이미지.jpg(String), 3585027(Long), 10(Long), 2026-01-05T10:02:02.287850500(LocalDateTime), 2(Long)
2026-01-05T10:02:02.312+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.insertReceipt      : <==    Updates: 1
2026-01-05T10:02:02.318+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Releasing transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.318+09:00  INFO 13104 --- [http-nio-8080-exec-6] SECURITY                                 : FILE_UPLOAD userId=10 expenseId=21 detail=영수증이미지.jpg
2026-01-05T10:02:02.320+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization committing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.321+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization deregistering SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.322+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Transaction synchronization closing SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@558ee19d]
2026-01-05T10:02:02.339+09:00  INFO 13104 --- [http-nio-8080-exec-6] c.i.b.controller.ExpenseController       : 영수증 업로드 완료 - expenseId: 21
2026-01-05T10:02:02.340+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:02.343+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=영수증 업로드 완료, data=null)]
2026-01-05T10:02:02.345+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:04.297+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T10:02:04.349+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T10:02:04.370+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T10:02:04.371+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T10:02:04.372+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T10:02:04.372+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T10:02:04.374+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:04.381+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f970e8] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:04.388+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1965447563 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:04.396+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T10:02:04.398+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:04.414+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T10:02:04.414+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@39f970e8]
2026-01-05T10:02:04.415+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:04.415+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cb2ee7e] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:04.416+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1930602270 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:04.418+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T10:02:04.419+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:04.425+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T10:02:04.433+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6cb2ee7e]
2026-01-05T10:02:04.434+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:04.435+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f71da2b] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:04.435+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@608898725 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:04.436+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T10:02:04.437+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:04.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T10:02:04.449+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5f71da2b]
2026-01-05T10:02:04.449+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:04.450+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce1b531] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:04.450+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1569756676 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:04.450+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T10:02:04.452+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:04.456+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-05T10:02:04.460+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ce1b531]
2026-01-05T10:02:04.462+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:04.462+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58976235] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:04.463+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1507728427 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:04.471+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:04.472+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:04.493+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:04.512+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@58976235]
2026-01-05T10:02:04.512+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:04.518+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T10:02:04.522+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:46.468+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:46.477+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:02:46.478+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T10:02:46.478+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T10:02:46.478+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:02:46.502+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:46.543+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:02:46.561+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:46.505+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:02:46.508+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T10:02:46.510+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T10:02:46.515+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:02:46.571+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:02:46.578+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:02:46.578+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies
2026-01-05T10:02:46.584+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies/pending
2026-01-05T10:02:46.585+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:02:46.586+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:02:46.588+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:02:46.595+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T10:02:46.598+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T10:02:46.596+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T10:02:46.596+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:02:46.600+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:02:46.597+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.597+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:02:46.599+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T10:02:46.599+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T10:02:46.605+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T10:02:46.600+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:02:46.601+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657a527c] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.602+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:02:46.605+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.611+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.611+09:00  INFO 13104 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:02:46.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab98225] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.613+09:00  INFO 13104 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:02:46.616+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdaefb4] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.616+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba37446] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.617+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1609700493 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:02:46.620+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.628+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:02:46.634+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ccebdcd] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.635+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:02:46.635+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1978863381 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:46.636+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1739297058 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:46.636+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1158317325 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:46.643+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:46.644+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:46.637+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:46.641+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:46.651+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T10:02:46.652+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:46.664+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@259032478 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:02:46.665+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:02:46.666+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:46.672+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@cdaefb4]
2026-01-05T10:02:46.667+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:46.697+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6ab98225]
2026-01-05T10:02:46.698+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.699+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e581729] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.667+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T10:02:46.668+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:46.671+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@657a527c]
2026-01-05T10:02:46.696+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:46.703+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@287566919 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:46.713+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:46.704+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7ba37446]
2026-01-05T10:02:46.705+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:46.709+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:46.712+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=22, userId=10, companyId (truncated)...]
2026-01-05T10:02:46.714+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:46.715+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:46.731+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T10:02:46.719+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:02:46.722+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:46.732+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:46.737+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:46.765+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:46.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:46.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2e581729]
2026-01-05T10:02:46.770+09:00  INFO 13104 --- [http-nio-8080-exec-9] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:02:46.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ccebdcd]
2026-01-05T10:02:46.771+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:46.771+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e3236e] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:46.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:46.778+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@550098799 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:02:46.779+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:02:46.779+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:46.780+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:46.782+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:46.786+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:46.790+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8e3236e]
2026-01-05T10:02:46.795+09:00  INFO 13104 --- [http-nio-8080-exec-6] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:02:46.796+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:46.797+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:02:46.800+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:49.412+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:49.414+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T10:02:49.415+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/21
2026-01-05T10:02:49.448+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:49.457+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T10:02:49.483+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/21
2026-01-05T10:02:49.503+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:02:49.511+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T10:02:49.514+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/21
2026-01-05T10:02:49.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:49.521+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T10:02:49.524+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T10:02:49.523+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/21
2026-01-05T10:02:49.524+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:02:49.527+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T10:02:49.527+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/21", parameters={}
2026-01-05T10:02:49.529+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:02:49.530+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.532+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63acaa0d] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.530+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getExpenseDetail(Long)
2026-01-05T10:02:49.531+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.536+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbf2d2d] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.536+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.537+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8061737] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.552+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1842198188 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:49.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@168282564 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:49.552+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@868237175 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:02:49.553+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T10:02:49.554+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==>  Preparing: SELECT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ?
2026-01-05T10:02:49.556+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.554+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:02:49.555+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.561+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:02:49.568+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:02:49.568+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T10:02:49.568+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseReportById        : <==      Total: 1
2026-01-05T10:02:49.570+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4cbf2d2d]
2026-01-05T10:02:49.571+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@63acaa0d]
2026-01-05T10:02:49.571+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@8061737]
2026-01-05T10:02:49.573+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:49.578+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.593+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2637d173] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.594+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1550039650 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:49.595+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T10:02:49.587+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.587+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:02:49.595+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.596+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3653f398] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.611+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:49.619+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1953355210 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:49.650+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==>  Preparing: SELECT * FROM expense_detail_tb WHERE expense_report_id = ? AND company_id = ?
2026-01-05T10:02:49.651+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.664+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T10:02:49.667+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2637d173]
2026-01-05T10:02:49.670+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.671+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134447e1] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.678+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@199270579 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:49.678+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectExpenseDetails           : <==      Total: 1
2026-01-05T10:02:49.680+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T10:02:49.682+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3653f398]
2026-01-05T10:02:49.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.687+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697b9300] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.688+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1084056196 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:49.689+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T10:02:49.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==>  Preparing: SELECT al.*, u.korean_name AS approverName, uc.position AS approverPosition FROM approval_line_tb al JOIN user_tb u ON al.approver_id = u.user_id JOIN user_company_tb uc ON al.approver_id = uc.user_id AND al.company_id = uc.company_id WHERE al.expense_report_id = ? AND al.company_id = ? ORDER BY al.step_order ASC
2026-01-05T10:02:49.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@134447e1]
2026-01-05T10:02:49.696+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.696+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.699+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef26a6e] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.703+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134398750 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:49.705+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T10:02:49.707+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectApprovalLines            : <==      Total: 1
2026-01-05T10:02:49.708+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@697b9300]
2026-01-05T10:02:49.710+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.708+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.711+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194c47d1] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.714+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@739914859 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:49.716+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==>  Preparing: SELECT r.*, u.korean_name AS uploadedByName FROM receipt_tb r JOIN user_tb u ON r.uploaded_by = u.user_id WHERE r.expense_report_id = ? AND r.company_id = ? ORDER BY r.uploaded_at DESC
2026-01-05T10:02:49.718+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : ==> Parameters: 21(Long), 2(Long)
2026-01-05T10:02:49.719+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-05T10:02:49.721+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4ef26a6e]
2026-01-05T10:02:49.735+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.783+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@365dc1cc] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.784+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1797352563 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:49.785+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] .i.b.m.E.selectReceiptsByExpenseReportId : <==      Total: 1
2026-01-05T10:02:49.803+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:49.805+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@194c47d1]
2026-01-05T10:02:49.809+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:49.814+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c6124fd] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:49.814+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@124294767 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:49.815+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:49.809+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:49.815+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:49.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:49.830+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@365dc1cc]
2026-01-05T10:02:49.831+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:49.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:49.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T10:02:49.833+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7c6124fd]
2026-01-05T10:02:49.840+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:49.847+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:49.854+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상세 조회 성공, data=ExpenseReportDto(expenseReportId=21, drafterId=10,  (truncated)...]
2026-01-05T10:02:49.861+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:52.228+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:52.235+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T10:02:52.238+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:52.243+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T10:02:52.246+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T10:02:52.249+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T10:02:52.283+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T10:02:52.360+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T10:02:52.361+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:52.362+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T10:02:52.362+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T10:02:52.363+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T10:02:52.363+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T10:02:52.368+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:52.371+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T10:02:52.383+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:02:52.385+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:52.386+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T10:02:52.387+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:02:52.388+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T10:02:52.392+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:02:52.395+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T10:02:52.416+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:52.429+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:52.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:52.419+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:52.419+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:52.419+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T10:02:52.490+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T10:02:52.491+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:52.492+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.420+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T10:02:52.432+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:52.472+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a33a32] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:52.490+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T10:02:52.521+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:52.492+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T10:02:52.498+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T10:02:52.500+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T10:02:52.521+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.545+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T10:02:52.545+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T10:02:52.546+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T10:02:52.657+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2076881373 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:52.672+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T10:02:52.677+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:52.680+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703ff2b7] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:52.678+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T10:02:52.678+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.679+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T10:02:52.679+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:02:52.679+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.681+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.682+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.683+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T10:02:52.686+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:02:52.688+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.690+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.693+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:52.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T10:02:52.730+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@798322965 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:52.746+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T10:02:52.749+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T10:02:52.737+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:52.738+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:02:52.755+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@78a33a32]
2026-01-05T10:02:52.742+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:52.744+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f835489] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:52.746+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:52.754+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401bbf41] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:52.763+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:52.769+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:02:52.770+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:52.764+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edc2a15] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:52.768+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@629471689 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:52.776+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:02:52.792+09:00  WARN 13104 --- [http-nio-8080-exec-5] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:02:52.794+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:52.795+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:02:52.783+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T10:02:52.788+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T10:02:52.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T10:02:52.801+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:02:52.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:02:52.808+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T10:02:52.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T10:02:52.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T10:02:52.836+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T10:02:52.841+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T10:02:52.827+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T10:02:52.844+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:52.869+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:02:52.871+09:00  WARN 13104 --- [http-nio-8080-exec-8] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:02:52.850+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T10:02:52.873+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:52.874+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T10:02:52.876+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T10:02:52.876+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T10:02:52.875+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:02:52.877+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.883+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:52.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:02:52.884+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:52.886+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297f8c02] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:52.886+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:02:52.892+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:52.899+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T10:02:52.977+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2055338621 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:02:53.076+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T10:02:52.977+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1667739961 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:02:53.095+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T10:02:53.096+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T10:02:52.977+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@519945712 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:52.978+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T10:02:53.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:53.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@703ff2b7]
2026-01-05T10:02:53.080+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T10:02:53.099+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T10:02:53.112+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@401bbf41]
2026-01-05T10:02:53.115+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:53.117+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.118+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T10:02:53.119+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T10:02:53.130+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.170+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T10:02:53.186+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T10:02:53.255+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T10:02:53.267+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4edc2a15]
2026-01-05T10:02:53.270+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T10:02:53.270+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@297f8c02]
2026-01-05T10:02:53.270+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T10:02:53.273+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.282+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.295+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.312+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T10:02:53.304+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.305+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.331+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.311+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.321+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.325+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T10:02:53.328+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.337+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.342+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T10:02:53.349+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.385+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.397+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.398+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a05bf64] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.399+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@f835489]
2026-01-05T10:02:53.399+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.414+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T10:02:53.415+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T10:02:53.400+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.410+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T10:02:53.413+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1328947733 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:53.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T10:02:53.421+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T10:02:53.429+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T10:02:53.430+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T10:02:53.451+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T10:02:53.446+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T10:02:53.447+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T10:02:53.448+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T10:02:53.451+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T10:02:53.451+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T10:02:53.452+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.469+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5169a66a] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.462+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.470+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1631962338 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:53.465+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.466+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T10:02:53.468+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T10:02:53.471+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T10:02:53.495+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.495+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T10:02:53.495+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T10:02:53.496+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T10:02:53.497+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.499+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1dde95] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.498+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T10:02:53.498+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T10:02:53.500+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@585207680 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:53.501+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:53.501+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:53.532+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:02:53.532+09:00  WARN 13104 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:02:53.534+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.536+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:02:53.502+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T10:02:53.558+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T10:02:53.503+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:02:53.515+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T10:02:53.547+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:02:53.567+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:02:53.562+09:00  WARN 13104 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:02:53.574+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.580+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:02:53.568+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:53.573+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.582+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:02:53.718+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:02:53.585+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T10:02:53.585+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T10:02:53.639+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T10:02:53.708+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.721+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T10:02:53.726+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T10:02:53.727+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@5169a66a]
2026-01-05T10:02:53.727+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3a05bf64]
2026-01-05T10:02:53.728+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3f1dde95]
2026-01-05T10:02:53.735+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T10:02:53.736+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.737+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.739+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:53.739+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T10:02:53.742+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T10:02:53.746+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.743+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T10:02:53.743+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T10:02:53.744+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T10:02:53.757+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.779+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:53.870+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:53.780+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.783+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.811+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:53.850+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T10:02:53.867+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T10:02:53.872+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:53.902+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T10:02:53.882+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.908+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:53.899+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.900+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.903+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T10:02:53.904+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T10:02:53.909+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T10:02:53.910+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:53.912+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.916+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.913+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T10:02:53.914+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.919+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.915+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T10:02:53.916+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T10:02:53.917+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb23b35] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.918+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T10:02:53.921+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.936+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.937+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T10:02:53.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1643944454 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:53.950+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T10:02:53.953+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b89b10a] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.954+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.962+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.964+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf397bd] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.957+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.958+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T10:02:53.958+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T10:02:53.959+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1669485590 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:53.967+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@852525857 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:53.969+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:53.973+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T10:02:53.974+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:53.974+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T10:02:53.975+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T10:02:53.993+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:53.995+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:02:53.997+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T10:02:53.997+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T10:02:53.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203f470b] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:53.999+09:00  WARN 13104 --- [http-nio-8080-exec-6] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:02:54.004+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:54.017+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:02:54.018+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T10:02:54.019+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@399920932 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:02:54.025+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T10:02:54.020+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:02:54.021+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6eb23b35]
2026-01-05T10:02:54.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T10:02:54.034+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:02:54.034+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T10:02:54.035+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T10:02:54.036+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:54.042+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4bf397bd]
2026-01-05T10:02:54.043+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3b89b10a]
2026-01-05T10:02:54.051+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T10:02:54.053+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T10:02:54.055+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:54.060+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:54.061+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@203f470b]
2026-01-05T10:02:54.062+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:54.064+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T10:02:54.066+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T10:02:54.067+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:54.087+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:54.087+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:54.088+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T10:02:54.092+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:56.503+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:56.507+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:02:56.510+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies
2026-01-05T10:02:56.512+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/companies/pending
2026-01-05T10:02:56.513+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/users/me
2026-01-05T10:02:56.538+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:56.541+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:02:56.546+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies
2026-01-05T10:02:56.638+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:02:56.546+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/users/companies/pending
2026-01-05T10:02:56.548+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/users/me
2026-01-05T10:02:56.648+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies/pending
2026-01-05T10:02:56.643+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/companies
2026-01-05T10:02:56.646+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:02:56.649+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/users/me
2026-01-05T10:02:56.649+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies/pending
2026-01-05T10:02:56.650+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/users/companies
2026-01-05T10:02:56.651+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:02:56.652+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:02:56.680+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/users/me
2026-01-05T10:02:56.681+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies/pending", parameters={}
2026-01-05T10:02:56.685+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getPendingCompanies()
2026-01-05T10:02:56.682+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/users/companies", parameters={}
2026-01-05T10:02:56.692+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getUserCompanies()
2026-01-05T10:02:56.683+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:02:56.684+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:56.698+09:00  INFO 13104 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:02:56.684+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/users/me", parameters={}
2026-01-05T10:02:56.699+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.UserController#getCurrentUser()
2026-01-05T10:02:56.691+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.697+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.698+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:02:56.698+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.700+09:00  INFO 13104 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 요청 - userId: 10, companyId: 2
2026-01-05T10:02:56.701+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bd710d] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.702+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34213a83] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.702+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:02:56.702+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@228af4d5] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.714+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1430733576 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:56.704+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.713+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.714+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:56.715+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d838ed1] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.715+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@815352266 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:56.719+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = ? ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:56.716+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c41577f] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.718+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:56.724+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : ==> Parameters: 10(Long), PENDING(String)
2026-01-05T10:02:56.738+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:56.744+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1480037677 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:56.749+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:56.744+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2134579705 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:02:56.752+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==>  Preparing: SELECT * FROM user_tb WHERE user_id = ?
2026-01-05T10:02:56.753+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:56.746+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.U.findUserCompaniesByStatus      : <==      Total: 0
2026-01-05T10:02:56.746+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1941185471 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:02:56.754+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:02:56.747+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@34213a83]
2026-01-05T10:02:56.759+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:02:56.752+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : ==> Parameters: 10(Long)
2026-01-05T10:02:56.754+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@37bd710d]
2026-01-05T10:02:56.760+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:56.762+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:56.762+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[UserCompanyDto(userCompanyId=22, userId=10, companyId (truncated)...]
2026-01-05T10:02:56.763+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=조회 성공, data=[])]
2026-01-05T10:02:56.765+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:56.772+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:56.777+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:56.782+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@4d838ed1]
2026-01-05T10:02:56.783+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.786+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca86068] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.787+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1842458727 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:02:56.788+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:56.793+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.mapper.UserMapper.selectUserById   : <==      Total: 1
2026-01-05T10:02:56.793+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:02:56.796+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:56.799+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@228af4d5]
2026-01-05T10:02:56.801+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@c41577f]
2026-01-05T10:02:56.806+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:56.810+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:56.814+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@142e1089] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:56.815+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:02:56.817+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1176622043 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:56.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:56.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==>  Preparing: SELECT uc.user_company_id AS userCompanyId, uc.user_id AS userId, uc.company_id AS companyId, uc.role, uc.position, uc.is_active AS isActive, uc.is_primary AS isPrimary, uc.is_approver AS isApprover, uc.approval_status AS approvalStatus, uc.created_at AS createdAt, uc.updated_at AS updatedAt, u.korean_name AS koreanName, u.username, u.email, c.company_name AS companyName, c.company_code AS companyCode FROM user_company_tb uc INNER JOIN user_tb u ON uc.user_id = u.user_id INNER JOIN company_tb c ON uc.company_id = c.company_id WHERE uc.user_id = ? AND uc.approval_status = 'APPROVED' ORDER BY uc.is_primary DESC, uc.created_at DESC
2026-01-05T10:02:56.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : ==> Parameters: 10(Long)
2026-01-05T10:02:56.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:56.838+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@ca86068]
2026-01-05T10:02:56.842+09:00  INFO 13104 --- [http-nio-8080-exec-10] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:02:56.843+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:56.844+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:02:56.845+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:56.865+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.m.UserMapper.findUserCompanies     : <==      Total: 1
2026-01-05T10:02:56.907+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@142e1089]
2026-01-05T10:02:56.909+09:00  INFO 13104 --- [http-nio-8080-exec-2] c.i.backend.controller.UserController    : 현재 사용자 정보 조회 완료 - userId: 10, companyId: 2, role: ACCOUNTANT
2026-01-05T10:02:56.910+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:56.911+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=현재 사용자 정보 조회 성공, data=UserDto(userId=10, username=test_accountant, (truncated)...]
2026-01-05T10:02:56.913+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:59.614+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:59.615+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T10:02:59.618+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:59.619+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T10:02:59.633+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T10:02:59.641+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T10:02:59.671+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T10:02:59.678+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T10:02:59.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:59.694+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T10:02:59.695+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T10:02:59.700+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T10:02:59.704+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/subscriptions/current
2026-01-05T10:02:59.723+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:59.727+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T10:02:59.729+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T10:02:59.732+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:59.733+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:59.735+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:59.768+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/pending-approvals
2026-01-05T10:02:59.771+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T10:02:59.802+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T10:02:59.778+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T10:02:59.784+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:59.793+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T10:02:59.801+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/pending-approvals?userId=10
2026-01-05T10:02:59.802+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T10:02:59.802+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T10:02:59.809+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T10:02:59.816+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T10:02:59.809+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:59.813+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:59.813+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/pending-approvals?userId=10", parameters={masked}
2026-01-05T10:02:59.815+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T10:02:59.816+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T10:02:59.816+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.817+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T10:02:59.817+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T10:02:59.817+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getPendingApprovals()
2026-01-05T10:02:59.825+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:59.829+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6076210b] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:59.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T10:02:59.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T10:02:59.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T10:02:59.821+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T10:02:59.836+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T10:02:59.850+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@857548857 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:59.851+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==>  Preparing: SELECT DISTINCT r.*, u.korean_name AS drafterName FROM expense_report_tb r JOIN user_tb u ON r.drafter_id = u.user_id JOIN approval_line_tb al ON r.expense_report_id = al.expense_report_id WHERE al.approver_id = ? AND al.status = 'WAIT' AND r.status != 'REJECTED' AND r.company_id = ? ORDER BY r.expense_report_id DESC
2026-01-05T10:02:59.838+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.843+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:59.844+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.850+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.851+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.852+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : ==> Parameters: 10(Long), 2(Long)
2026-01-05T10:02:59.852+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.860+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:59.863+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ba9020] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:59.852+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d39461] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:59.855+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.876+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:59.857+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.859+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:02:59.874+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1820273573 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:02:59.882+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T10:02:59.875+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectPendingApprovalsByUserId : <==      Total: 0
2026-01-05T10:02:59.888+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@6076210b]
2026-01-05T10:02:59.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed4d3b2] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:59.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:59.895+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295e3572] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:59.882+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:02:59.884+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T10:02:59.887+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1414197642 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:02:59.890+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:59.896+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1933728558 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:02:59.896+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1b91f3] was not registered for synchronization because synchronization is not active
2026-01-05T10:02:59.899+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T10:02:59.901+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=미서명 건 조회 성공, data=[])]
2026-01-05T10:02:59.902+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T10:02:59.904+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T10:02:59.906+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:59.908+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T10:02:59.914+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@667820561 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:02:59.926+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T10:02:59.915+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T10:02:59.928+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T10:02:59.918+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T10:02:59.928+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@20ba9020]
2026-01-05T10:02:59.932+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:59.934+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T10:02:59.931+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T10:02:59.936+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:59.936+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T10:02:59.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T10:02:59.938+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@26215992 wrapping com.mysql.cj.jdbc.ConnectionImpl@20ffef9b] will not be managed by Spring
2026-01-05T10:02:59.940+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T10:02:59.951+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@14d39461]
2026-01-05T10:02:59.947+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T10:02:59.949+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T10:02:59.950+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@295e3572]
2026-01-05T10:02:59.950+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T10:02:59.952+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:59.959+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T10:02:59.953+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T10:02:59.954+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T10:02:59.955+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:59.958+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T10:02:59.959+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:59.960+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T10:02:59.961+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T10:02:59.962+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T10:02:59.963+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T10:02:59.966+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T10:02:59.964+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:59.965+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:02:59.968+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:02:59.968+09:00  WARN 13104 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:02:59.967+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T10:02:59.974+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:02:59.976+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T10:02:59.978+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:02:59.979+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T10:02:59.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T10:03:00.001+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7e1b91f3]
2026-01-05T10:02:59.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:02:59.998+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:02:59.999+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@3ed4d3b2]
2026-01-05T10:03:00.000+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T10:03:00.013+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.014+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T10:03:00.003+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T10:03:00.003+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.005+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:03:00.011+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:03:00.013+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:03:00.015+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:00.015+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T10:03:00.053+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T10:03:00.016+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T10:03:00.021+09:00  WARN 13104 --- [http-nio-8080-exec-2] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:03:00.065+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.066+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:03:00.031+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:03:00.033+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T10:03:00.036+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.055+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T10:03:00.080+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.063+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:00.068+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:03:00.075+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T10:03:00.075+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T10:03:00.080+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.085+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.087+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Securing GET /api/subscriptions/current
2026-01-05T10:03:00.103+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:03:00.111+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T10:03:00.161+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.183+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.263+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.264+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1406c409] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.185+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T10:03:00.248+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/subscriptions/current
2026-01-05T10:03:00.270+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.security.web.FilterChainProxy        : Secured GET /api/subscriptions/current
2026-01-05T10:03:00.253+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/stats
2026-01-05T10:03:00.254+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T10:03:00.290+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T10:03:00.295+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T10:03:00.297+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T10:03:00.260+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.429+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.430+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a3d453] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.438+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@2110010441 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:03:00.445+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T10:03:00.448+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T10:03:00.267+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@57653106 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:03:00.268+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T10:03:00.270+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : GET "/api/subscriptions/current", parameters={}
2026-01-05T10:03:00.280+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/monthly-trend
2026-01-05T10:03:00.417+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:03:00.452+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T10:03:00.453+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.453+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.SubscriptionController#getCurrentSubscription()
2026-01-05T10:03:00.455+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:03:00.458+09:00  WARN 13104 --- [http-nio-8080-exec-7] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:03:00.456+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T10:03:00.457+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.460+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.462+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@710488d9] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.458+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController]
2026-01-05T10:03:00.459+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.466+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.SubscriptionController.getCurrentSubscription(); target is of class [com.innersignature.backend.controller.SubscriptionController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:03:00.469+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:03:00.471+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:03:00.477+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:03:00.477+09:00  WARN 13104 --- [http-nio-8080-exec-3] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:03:00.478+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:03:00.479+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.481+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:03:00.519+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/status-stats
2026-01-05T10:03:00.520+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.538+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1405505240 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:03:00.539+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T10:03:00.542+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T10:03:00.583+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1406c409]
2026-01-05T10:03:00.564+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:03:00.574+09:00 DEBUG 13104 --- [http-nio-8080-exec-2] o.s.security.web.FilterChainProxy        : Securing OPTIONS /api/credits/total
2026-01-05T10:03:00.580+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/stats
2026-01-05T10:03:00.582+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T10:03:00.583+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@68a3d453]
2026-01-05T10:03:00.585+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.593+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T10:03:00.585+09:00 DEBUG 13104 --- [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:03:00.589+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/stats
2026-01-05T10:03:00.591+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T10:03:00.592+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.594+09:00 DEBUG 13104 --- [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:00.599+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/stats
2026-01-05T10:03:00.600+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T10:03:00.651+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:03:00.658+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T10:03:00.803+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@710488d9]
2026-01-05T10:03:00.807+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:00.713+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/stats", parameters={}
2026-01-05T10:03:00.736+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/status-stats
2026-01-05T10:03:00.737+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Securing GET /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.812+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/status-stats
2026-01-05T10:03:00.785+09:00 DEBUG 13104 --- [http-nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:00.802+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/monthly-trend
2026-01-05T10:03:00.809+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T10:03:00.809+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getDashboardStats(String, String)
2026-01-05T10:03:00.812+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/category-ratio
2026-01-05T10:03:00.814+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/status-stats
2026-01-05T10:03:00.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/status-stats", parameters={}
2026-01-05T10:03:00.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getStatusStats(String, String)
2026-01-05T10:03:00.815+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.security.web.FilterChainProxy        : Secured GET /api/expenses/dashboard/monthly-trend
2026-01-05T10:03:00.822+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.817+09:00 DEBUG 13104 --- [http-nio-8080-exec-9] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:00.818+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/category-ratio", parameters={}
2026-01-05T10:03:00.842+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getDashboardStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.822+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : GET "/api/expenses/dashboard/monthly-trend", parameters={}
2026-01-05T10:03:00.823+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getStatusStats(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.839+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Securing GET /api/credits/total
2026-01-05T10:03:00.842+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getCategoryRatio(String, String)
2026-01-05T10:03:00.843+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.850+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7453a67e] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.843+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.ExpenseController#getMonthlyTrend(String, String)
2026-01-05T10:03:00.844+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.846+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] c.i.b.security.JwtAuthenticationFilter   : JWT 인증 성공 - userId: 10, role: ACCOUNTANT, companyId: 2, uri: /api/credits/total
2026-01-05T10:03:00.846+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.851+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1035193959 wrapping com.mysql.cj.jdbc.ConnectionImpl@3bb3e867] will not be managed by Spring
2026-01-05T10:03:00.853+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==>  Preparing: SELECT COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS totalCount, COALESCE(AVG(COALESCE(actual_paid_amount, total_amount)), 0) AS averageAmount, COALESCE(MAX(COALESCE(actual_paid_amount, total_amount)), 0) AS maxAmount, COALESCE(MIN(COALESCE(actual_paid_amount, total_amount)), 0) AS minAmount, SUM(CASE WHEN status = 'PENDING' THEN 1 ELSE 0 END) AS pendingCount FROM expense_report_tb WHERE company_id = ?
2026-01-05T10:03:00.851+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.852+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ec7e6d] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.852+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.security.web.FilterChainProxy        : Secured GET /api/credits/total
2026-01-05T10:03:00.879+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : GET "/api/credits/total", parameters={}
2026-01-05T10:03:00.853+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getCategoryRatio(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.854+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : ==> Parameters: 2(Long)
2026-01-05T10:03:00.860+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public com.innersignature.backend.dto.ApiResponse com.innersignature.backend.controller.ExpenseController.getMonthlyTrend(java.lang.String,java.lang.String); target is of class [com.innersignature.backend.controller.ExpenseController]
2026-01-05T10:03:00.881+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.869+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1868943896 wrapping com.mysql.cj.jdbc.ConnectionImpl@680927cd] will not be managed by Spring
2026-01-05T10:03:00.879+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.innersignature.backend.controller.CreditController#getTotalAvailableAmount()
2026-01-05T10:03:00.880+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Creating a new SqlSession
2026-01-05T10:03:00.881+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d8d7e06] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.882+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==>  Preparing: SELECT status, COUNT(*) AS count, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount FROM expense_report_tb WHERE company_id = ? GROUP BY status ORDER BY count DESC
2026-01-05T10:03:00.894+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController]
2026-01-05T10:03:00.895+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26f2eaa7] was not registered for synchronization because synchronization is not active
2026-01-05T10:03:00.896+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1159736672 wrapping com.mysql.cj.jdbc.ConnectionImpl@7d555624] will not be managed by Spring
2026-01-05T10:03:00.902+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==>  Preparing: SELECT DATE_FORMAT(report_date, '%Y-%m') AS yearMonth, COALESCE(SUM(COALESCE(actual_paid_amount, total_amount)), 0) AS totalAmount, COUNT(*) AS count FROM expense_report_tb WHERE company_id = ? GROUP BY DATE_FORMAT(report_date, '%Y-%m') ORDER BY yearMonth ASC
2026-01-05T10:03:00.897+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : ==> Parameters: 2(Long)
2026-01-05T10:03:00.898+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] horizationManagerBeforeMethodInterceptor : Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.innersignature.backend.controller.CreditController.getTotalAvailableAmount(); target is of class [com.innersignature.backend.controller.CreditController] with authorization manager org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager@3273289a and result ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasAnyRole('CEO', 'ADMIN')]
2026-01-05T10:03:01.075+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] c.i.b.m.E.selectDashboardStats           : <==      Total: 1
2026-01-05T10:03:01.207+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : ==> Parameters: 2(Long)
2026-01-05T10:03:01.210+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.m.s.t.SpringManagedTransaction         : JDBC Connection [HikariProxyConnection@1766573545 wrapping com.mysql.cj.jdbc.ConnectionImpl@786a6db1] will not be managed by Spring
2026-01-05T10:03:01.235+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.innersignature.backend.exception.GlobalExceptionHandler#handleAccessDeniedException(AccessDeniedException)
2026-01-05T10:03:01.236+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@7453a67e]
2026-01-05T10:03:01.236+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==>  Preparing: SELECT d.category AS category, COALESCE(SUM(COALESCE(d.actual_paid_amount, d.amount)), 0) AS amount, 0.0 AS ratio FROM expense_detail_tb d JOIN expense_report_tb r ON d.expense_report_id = r.expense_report_id WHERE r.company_id = ? GROUP BY d.category ORDER BY amount DESC
2026-01-05T10:03:01.252+09:00  WARN 13104 --- [http-nio-8080-exec-10] c.i.b.exception.GlobalExceptionHandler   : 권한 부족: Access Denied
2026-01-05T10:03:01.253+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:01.254+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : ==> Parameters: 2(Long)
2026-01-05T10:03:01.254+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:01.280+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [ApiResponse(success=false, message=접근 권한이 없습니다., data=null)]
2026-01-05T10:03:01.254+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=대시보드 통계 조회 성공, data=DashboardStatsDto(totalAmount=10000, totalCoun (truncated)...]
2026-01-05T10:03:01.281+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authorization.AuthorizationDeniedException: Access Denied]
2026-01-05T10:03:01.282+09:00 DEBUG 13104 --- [http-nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:01.284+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] c.i.b.m.ExpenseMapper.selectStatusStats  : <==      Total: 1
2026-01-05T10:03:01.284+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] c.i.b.m.E.selectMonthlyTrend             : <==      Total: 1
2026-01-05T10:03:01.351+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] c.i.b.m.E.selectCategoryRatio            : <==      Total: 1
2026-01-05T10:03:01.686+09:00 DEBUG 13104 --- [http-nio-8080-exec-10] o.s.web.servlet.DispatcherServlet        : Completed 403 FORBIDDEN
2026-01-05T10:03:01.816+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@17ec7e6d]
2026-01-05T10:03:01.819+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:01.820+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=상태별 통계 조회 성공, data=[StatusStatsDto(status=PAID, count=1, totalAmou (truncated)...]
2026-01-05T10:03:01.816+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@1d8d7e06]
2026-01-05T10:03:01.816+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] org.mybatis.spring.SqlSessionUtils       : Closing non transactional SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@26f2eaa7]
2026-01-05T10:03:01.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:01.832+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:01.833+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Using 'application/json', given [application/json, text/plain, */*] and supported [application/json, application/*+json, application/yaml]
2026-01-05T10:03:01.834+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=월별 추이 조회 성공, data=[MonthlyTrendDto(yearMonth=2026-01, totalAmount= (truncated)...]
2026-01-05T10:03:01.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] m.m.a.RequestResponseBodyMethodProcessor : Writing [ApiResponse(success=true, message=카테고리별 비율 조회 성공, data=[CategoryRatioDto(category=식대, amount=10000,  (truncated)...]
2026-01-05T10:03:01.835+09:00 DEBUG 13104 --- [http-nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2026-01-05T10:03:01.836+09:00 DEBUG 13104 --- [http-nio-8080-exec-5] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
